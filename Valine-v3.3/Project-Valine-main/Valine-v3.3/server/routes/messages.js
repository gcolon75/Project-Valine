import { Router } from 'express';import { store,nextId } from '../db/store.js';const r=Router();r.get('/',(req,res)=>{const { room }=req.query;const list=room?store.messages.filter(m=>m.room===room):store.messages;res.json(list);});r.post('/',(req,res)=>{const { room, senderId, content }=req.body||{};const m={ id: nextId('m'), room, senderId, content, createdAt: new Date().toISOString() };store.messages.push(m);res.json(m);});export default r;
