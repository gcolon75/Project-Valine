import { useState,useEffect } from 'react';import * as api from '../services/api';import { useAuth } from '../context/AuthContext';export default function Messages(){const {user}=useAuth();const room=user.id==='u1'?'u1-u2':'u2-u1';const [msgs,setMsgs]=useState([]);const [text,setText]=useState('');useEffect(()=>{api.listMessages(room).then(setMsgs).catch(()=>setMsgs([]));},[room]);const send=async()=>{if(!text) return;const msg={room,senderId:user.id,content:text};const m=await api.postMessage(msg);setMsgs(prev=>[...prev,m]);setText('');};return(<div><h2>Messages</h2><div className='card' style={{maxWidth:600}}>{msgs.map((m,i)=>(<div key={i} style={{textAlign:m.senderId===user.id?'right':'left',margin:'4px 0'}}><span className='badge'>{m.senderId}</span> {m.content}</div>))}<div className='grid2'><input value={text} onChange={e=>setText(e.target.value)} placeholder='Type a message'/><button className='btn primary' onClick={send}>Send</button></div></div></div>);}
