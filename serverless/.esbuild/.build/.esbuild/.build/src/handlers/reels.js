var Py=Object.create;var Ei=Object.defineProperty;var Ny=Object.getOwnPropertyDescriptor;var Dy=Object.getOwnPropertyNames;var Uy=Object.getPrototypeOf,Ly=Object.prototype.hasOwnProperty;var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fy=(e,t)=>{for(var r in t)Ei(e,r,{get:t[r],enumerable:!0})},du=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Dy(t))!Ly.call(e,n)&&n!==r&&Ei(e,n,{get:()=>t[n],enumerable:!(i=Ny(t,n))||i.enumerable});return e};var ki=(e,t,r)=>(r=e!=null?Py(Uy(e)):{},du(t||!e||!e.__esModule?Ei(r,"default",{value:e,enumerable:!0}):r,e)),My=e=>du(Ei({},"__esModule",{value:!0}),e);var Ca=h((v4,pf)=>{"use strict";var jy=Object.create,Ki=Object.defineProperty,$y=Object.getOwnPropertyDescriptor,Vy=Object.getOwnPropertyNames,By=Object.getPrototypeOf,Gy=Object.prototype.hasOwnProperty,ic=(e,t)=>()=>(e&&(t=e(e=0)),t),Pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Kt=(e,t)=>{for(var r in t)Ki(e,r,{get:t[r],enumerable:!0})},nc=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Vy(t))!Gy.call(e,n)&&n!==r&&Ki(e,n,{get:()=>t[n],enumerable:!(i=$y(t,n))||i.enumerable});return e},H=(e,t,r)=>(r=e!=null?jy(By(e)):{},nc(t||!e||!e.__esModule?Ki(r,"default",{value:e,enumerable:!0}):r,e)),Hy=e=>nc(Ki({},"__esModule",{value:!0}),e),sc=Pe((e,t)=>{"use strict";t.exports=(r,i=process.argv)=>{let n=r.startsWith("-")?"":r.length===1?"-":"--",s=i.indexOf(n+r),a=i.indexOf("--");return s!==-1&&(a===-1||s<a)}}),Qy=Pe((e,t)=>{"use strict";var r=require("node:os"),i=require("node:tty"),n=sc(),{env:s}=process,a;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in s&&(s.FORCE_COLOR==="true"?a=1:s.FORCE_COLOR==="false"?a=0:a=s.FORCE_COLOR.length===0?1:Math.min(parseInt(s.FORCE_COLOR,10),3));function o(c){return c===0?!1:{level:c,hasBasic:!0,has256:c>=2,has16m:c>=3}}function l(c,d){if(a===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(c&&!d&&a===void 0)return 0;let f=a||0;if(s.TERM==="dumb")return f;if(process.platform==="win32"){let p=r.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in s)||s.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){let p=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:f}function u(c){let d=l(c,c&&c.isTTY);return o(d)}t.exports={supportsColor:u,stdout:o(l(!0,i.isatty(1))),stderr:o(l(!0,i.isatty(2)))}}),Ky=Pe((e,t)=>{"use strict";var r=Qy(),i=sc();function n(a){if(/^\d{3,4}$/.test(a)){let l=/(\d{1,2})(\d{2})/.exec(a)||[];return{major:0,minor:parseInt(l[1],10),patch:parseInt(l[2],10)}}let o=(a||"").split(".").map(l=>parseInt(l,10));return{major:o[0],minor:o[1],patch:o[2]}}function s(a){let{CI:o,FORCE_HYPERLINK:l,NETLIFY:u,TEAMCITY_VERSION:c,TERM_PROGRAM:d,TERM_PROGRAM_VERSION:f,VTE_VERSION:p,TERM:m}=process.env;if(l)return!(l.length>0&&parseInt(l,10)===0);if(i("no-hyperlink")||i("no-hyperlinks")||i("hyperlink=false")||i("hyperlink=never"))return!1;if(i("hyperlink=true")||i("hyperlink=always")||u)return!0;if(!r.supportsColor(a)||a&&!a.isTTY)return!1;if("WT_SESSION"in process.env)return!0;if(process.platform==="win32"||o||c)return!1;if(d){let g=n(f||"");switch(d){case"iTerm.app":return g.major===3?g.minor>=1:g.major>3;case"WezTerm":return g.major>=20200620;case"vscode":return g.major>1||g.major===1&&g.minor>=72;case"ghostty":return!0}}if(p){if(p==="0.50.0")return!1;let g=n(p);return g.major>0||g.minor>=50}switch(m){case"alacritty":return!0}return!1}t.exports={supportsHyperlink:s,stdout:s(process.stdout),stderr:s(process.stderr)}}),zy=Pe((e,t)=>{t.exports={name:"@prisma/internals",version:"6.19.0",description:"This package is intended for Prisma's internal use",main:"dist/index.js",types:"dist/index.d.ts",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/internals"},homepage:"https://www.prisma.io",author:"Tim Suchanek <suchanek@prisma.io>",bugs:"https://github.com/prisma/prisma/issues",license:"Apache-2.0",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",test:"dotenv -e ../../.db.env -- jest --silent",prepublishOnly:"pnpm run build"},files:["README.md","dist","!**/libquery_engine*","!dist/get-generators/engines/*","scripts"],devDependencies:{"@babel/helper-validator-identifier":"7.25.9","@opentelemetry/api":"1.9.0","@swc/core":"1.11.5","@swc/jest":"0.2.37","@types/babel__helper-validator-identifier":"7.15.2","@types/jest":"29.5.14","@types/node":"18.19.76","@types/resolve":"1.20.6",archiver:"6.0.2","checkpoint-client":"1.1.33","cli-truncate":"4.0.0",dotenv:"16.5.0",empathic:"2.0.0","escape-string-regexp":"5.0.0",execa:"8.0.1","fast-glob":"3.3.3","find-up":"7.0.0","fp-ts":"2.16.9","fs-extra":"11.3.0","global-directory":"4.0.0",globby:"11.1.0","identifier-regex":"1.0.0","indent-string":"4.0.0","is-windows":"1.0.2","is-wsl":"3.1.0",jest:"29.7.0","jest-junit":"16.0.0",kleur:"4.1.5","mock-stdin":"1.0.0","new-github-issue-url":"0.2.1","node-fetch":"3.3.2","npm-packlist":"5.1.3",open:"7.4.2","p-map":"4.0.0",resolve:"1.22.10","string-width":"7.2.0","strip-indent":"4.0.0","temp-dir":"2.0.0",tempy:"1.0.1","terminal-link":"4.0.0",tmp:"0.2.3","ts-pattern":"5.6.2","ts-toolbelt":"9.6.0",typescript:"5.4.5",yarn:"1.22.22"},dependencies:{"@prisma/config":"workspace:*","@prisma/debug":"workspace:*","@prisma/dmmf":"workspace:*","@prisma/driver-adapter-utils":"workspace:*","@prisma/engines":"workspace:*","@prisma/fetch-engine":"workspace:*","@prisma/generator":"workspace:*","@prisma/generator-helper":"workspace:*","@prisma/get-platform":"workspace:*","@prisma/prisma-schema-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-engine-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-files-loader":"workspace:*",arg:"5.0.2",prompts:"2.4.2"},peerDependencies:{typescript:">=5.1.0"},peerDependenciesMeta:{typescript:{optional:!0}},sideEffects:!1}}),ac=Pe((e,t)=>{t.exports={name:"@prisma/engines-version",version:"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"2ba551f319ab1df4bc874a89965d8b3641056773"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),aa=Pe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enginesVersion=void 0,e.enginesVersion=ac().prisma.enginesVersion}),Jy=Pe((e,t)=>{"use strict";t.exports=r=>{let i=r.match(/^[ \t]*(?=\S)/gm);return i?i.reduce((n,s)=>Math.min(n,s.length),1/0):0}}),oc=Pe((e,t)=>{"use strict";t.exports=(r,i=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof i!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof i}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(i===0)return r;let s=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(s,n.indent.repeat(i))}}),Wy=Pe((e,t)=>{t.exports={name:"dotenv",version:"16.5.0",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),Yy=Pe((e,t)=>{"use strict";var r=require("node:fs"),i=require("node:path"),n=require("node:os"),s=require("node:crypto"),a=Wy(),o=a.version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function u(b){let k={},I=b.toString();I=I.replace(/\r\n?/mg,`
`);let V;for(;(V=l.exec(I))!=null;){let F=V[1],N=V[2]||"";N=N.trim();let M=N[0];N=N.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),M==='"'&&(N=N.replace(/\\n/g,`
`),N=N.replace(/\\r/g,"\r")),k[F]=N}return k}function c(b){let k=g(b),I=R.configDotenv({path:k});if(!I.parsed){let M=new Error(`MISSING_DATA: Cannot parse ${k} for an unknown reason`);throw M.code="MISSING_DATA",M}let V=p(b).split(","),F=V.length,N;for(let M=0;M<F;M++)try{let ee=V[M].trim(),G=m(I,ee);N=R.decrypt(G.ciphertext,G.key);break}catch(ee){if(M+1>=F)throw ee}return R.parse(N)}function d(b){console.log(`[dotenv@${o}][WARN] ${b}`)}function f(b){console.log(`[dotenv@${o}][DEBUG] ${b}`)}function p(b){return b&&b.DOTENV_KEY&&b.DOTENV_KEY.length>0?b.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function m(b,k){let I;try{I=new URL(k)}catch(ee){if(ee.code==="ERR_INVALID_URL"){let G=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw G.code="INVALID_DOTENV_KEY",G}throw ee}let V=I.password;if(!V){let ee=new Error("INVALID_DOTENV_KEY: Missing key part");throw ee.code="INVALID_DOTENV_KEY",ee}let F=I.searchParams.get("environment");if(!F){let ee=new Error("INVALID_DOTENV_KEY: Missing environment part");throw ee.code="INVALID_DOTENV_KEY",ee}let N=`DOTENV_VAULT_${F.toUpperCase()}`,M=b.parsed[N];if(!M){let ee=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${N} in your .env.vault file.`);throw ee.code="NOT_FOUND_DOTENV_ENVIRONMENT",ee}return{ciphertext:M,key:V}}function g(b){let k=null;if(b&&b.path&&b.path.length>0)if(Array.isArray(b.path))for(let I of b.path)r.existsSync(I)&&(k=I.endsWith(".vault")?I:`${I}.vault`);else k=b.path.endsWith(".vault")?b.path:`${b.path}.vault`;else k=i.resolve(process.cwd(),".env.vault");return r.existsSync(k)?k:null}function E(b){return b[0]==="~"?i.join(n.homedir(),b.slice(1)):b}function O(b){b&&b.debug&&f("Loading env from encrypted .env.vault");let k=R._parseVault(b),I=process.env;return b&&b.processEnv!=null&&(I=b.processEnv),R.populate(I,k,b),{parsed:k}}function q(b){let k=i.resolve(process.cwd(),".env"),I="utf8",V=!!(b&&b.debug);b&&b.encoding?I=b.encoding:V&&f("No encoding is specified. UTF-8 is used by default");let F=[k];if(b&&b.path)if(!Array.isArray(b.path))F=[E(b.path)];else{F=[];for(let G of b.path)F.push(E(G))}let N,M={};for(let G of F)try{let L=R.parse(r.readFileSync(G,{encoding:I}));R.populate(M,L,b)}catch(L){V&&f(`Failed to load ${G} ${L.message}`),N=L}let ee=process.env;return b&&b.processEnv!=null&&(ee=b.processEnv),R.populate(ee,M,b),N?{parsed:M,error:N}:{parsed:M}}function P(b){if(p(b).length===0)return R.configDotenv(b);let k=g(b);return k?R._configVault(b):(d(`You set DOTENV_KEY but you are missing a .env.vault file at ${k}. Did you forget to build it?`),R.configDotenv(b))}function B(b,k){let I=Buffer.from(k.slice(-64),"hex"),V=Buffer.from(b,"base64"),F=V.subarray(0,12),N=V.subarray(-16);V=V.subarray(12,-16);try{let M=s.createDecipheriv("aes-256-gcm",I,F);return M.setAuthTag(N),`${M.update(V)}${M.final()}`}catch(M){let ee=M instanceof RangeError,G=M.message==="Invalid key length",L=M.message==="Unsupported state or unable to authenticate data";if(ee||G){let Ir=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Ir.code="INVALID_DOTENV_KEY",Ir}else if(L){let Ir=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Ir.code="DECRYPTION_FAILED",Ir}else throw M}}function ke(b,k,I={}){let V=!!(I&&I.debug),F=!!(I&&I.override);if(typeof k!="object"){let N=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw N.code="OBJECT_REQUIRED",N}for(let N of Object.keys(k))Object.prototype.hasOwnProperty.call(b,N)?(F===!0&&(b[N]=k[N]),V&&f(F===!0?`"${N}" is already defined and WAS overwritten`:`"${N}" is already defined and was NOT overwritten`)):b[N]=k[N]}var R={configDotenv:q,_configVault:O,_parseVault:c,config:P,decrypt:B,parse:u,populate:ke};t.exports.configDotenv=R.configDotenv,t.exports._configVault=R._configVault,t.exports._parseVault=R._parseVault,t.exports.config=R.config,t.exports.decrypt=R.decrypt,t.exports.parse=R.parse,t.exports.populate=R.populate,t.exports=R}),Xy=Pe((e,t)=>{"use strict";t.exports=(r={})=>{let i;if(r.repoUrl)i=r.repoUrl;else if(r.user&&r.repo)i=`https://github.com/${r.user}/${r.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let n=new URL(`${i}/issues/new`),s=["body","title","labels","template","milestone","assignee","projects"];for(let a of s){let o=r[a];if(o!==void 0){if(a==="labels"||a==="projects"){if(!Array.isArray(o))throw new TypeError(`The \`${a}\` option should be an array`);o=o.join(",")}n.searchParams.set(a,o)}}return n.toString()},t.exports.default=t.exports}),lc=Pe((e,t)=>{"use strict";t.exports=(function(){function r(i,n,s,a,o){return i<n||s<n?i>s?s+1:i+1:a===o?n:n+1}return function(i,n){if(i===n)return 0;if(i.length>n.length){var s=i;i=n,n=s}for(var a=i.length,o=n.length;a>0&&i.charCodeAt(a-1)===n.charCodeAt(o-1);)a--,o--;for(var l=0;l<a&&i.charCodeAt(l)===n.charCodeAt(l);)l++;if(a-=l,o-=l,a===0||o<3)return o;var u=0,c,d,f,p,m,g,E,O,q,P,B,ke,R=[];for(c=0;c<a;c++)R.push(c+1),R.push(i.charCodeAt(l+c));for(var b=R.length-1;u<o-3;)for(q=n.charCodeAt(l+(d=u)),P=n.charCodeAt(l+(f=u+1)),B=n.charCodeAt(l+(p=u+2)),ke=n.charCodeAt(l+(m=u+3)),g=u+=4,c=0;c<b;c+=2)E=R[c],O=R[c+1],d=r(E,d,f,q,O),f=r(d,f,p,P,O),p=r(f,p,m,B,O),g=r(p,m,g,ke,O),R[c]=g,m=p,p=f,f=d,d=E;for(;u<o;)for(q=n.charCodeAt(l+(d=u)),g=++u,c=0;c<b;c+=2)E=R[c],R[c]=g=r(E,d,g,q,R[c+1]),d=E;return g}})()}),Zy=ic(()=>{"use strict"}),eb=ic(()=>{"use strict"}),uc={};Kt(uc,{DMMF:()=>Wc,Debug:()=>ve,Decimal:()=>Zi,Extensions:()=>cc,MetricsClient:()=>Ad,PrismaClientInitializationError:()=>ae,PrismaClientKnownRequestError:()=>Et,PrismaClientRustPanicError:()=>wt,PrismaClientUnknownRequestError:()=>Oe,PrismaClientValidationError:()=>ot,Public:()=>dc,Sql:()=>Rt,createParam:()=>sw,defineDmmfProperty:()=>gw,deserializeJsonResponse:()=>Qi,deserializeRawResult:()=>cf,dmmfToRuntimeDataModel:()=>ux,empty:()=>kw,getPrismaClient:()=>pk,getRuntime:()=>$d,join:()=>Ew,makeStrictEnum:()=>gk,makeTypedQueryFactory:()=>bw,objectEnumValues:()=>dd,raw:()=>Id,serializeJsonQuery:()=>Sd,skip:()=>vd,sqltag:()=>Aw,warnEnvConflicts:()=>yk,warnOnce:()=>Uc});pf.exports=Hy(uc);var cc={};Kt(cc,{defineExtension:()=>tb,getExtensionContext:()=>rb});function tb(e){return typeof e=="function"?e:t=>t.$extends(e)}function rb(e){return e}var dc={};Kt(dc,{validator:()=>ib});function ib(...e){return t=>t}var Os={};Kt(Os,{$:()=>gc,bgBlack:()=>pb,bgBlue:()=>yb,bgCyan:()=>xb,bgGreen:()=>mb,bgMagenta:()=>bb,bgRed:()=>hb,bgWhite:()=>vb,bgYellow:()=>gb,black:()=>ub,blue:()=>Pr,bold:()=>$e,cyan:()=>Gt,dim:()=>Qr,gray:()=>oa,green:()=>Mr,grey:()=>fb,hidden:()=>ob,inverse:()=>ab,italic:()=>sb,magenta:()=>cb,red:()=>Ht,reset:()=>nb,strikethrough:()=>lb,underline:()=>Ce,white:()=>db,yellow:()=>Kr});var _s,fc,pc,hc,mc=!0;typeof process<"u"&&({FORCE_COLOR:_s,NODE_DISABLE_COLORS:fc,NO_COLOR:pc,TERM:hc}=process.env||{},mc=process.stdout&&process.stdout.isTTY);var gc={enabled:!fc&&pc==null&&hc!=="dumb"&&(_s!=null&&_s!=="0"||mc)};function K(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),i=`\x1B[${e}m`,n=`\x1B[${t}m`;return function(s){return!gc.enabled||s==null?s:i+(~(""+s).indexOf(n)?s.replace(r,n+i):s)+n}}var nb=K(0,0),$e=K(1,22),Qr=K(2,22),sb=K(3,23),Ce=K(4,24),ab=K(7,27),ob=K(8,28),lb=K(9,29),ub=K(30,39),Ht=K(31,39),Mr=K(32,39),Kr=K(33,39),Pr=K(34,39),cb=K(35,39),Gt=K(36,39),db=K(37,39),oa=K(90,39),fb=K(90,39),pb=K(40,49),hb=K(41,49),mb=K(42,49),gb=K(43,49),yb=K(44,49),bb=K(45,49),xb=K(46,49),vb=K(47,49),wb=100,fu=["green","yellow","blue","magenta","cyan","red"],Nr=[],pu=Date.now(),Sb=0,qs=typeof process<"u"?process.env:{};globalThis.DEBUG??=qs.DEBUG??"";globalThis.DEBUG_COLORS??=qs.DEBUG_COLORS?qs.DEBUG_COLORS==="true":!0;var Dr={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(n=>n.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(n=>n===""||n[0]==="-"?!1:e.match(RegExp(n.split("*").join(".*")+"$"))),i=t.some(n=>n===""||n[0]!=="-"?!1:e.match(RegExp(n.slice(1).split("*").join(".*")+"$")));return r&&!i},log:(...e)=>{let[t,r,...i]=e;(console.warn??console.log)(`${t} ${r}`,...i)},formatters:{}};function Eb(e){let t={color:fu[Sb++%fu.length],enabled:Dr.enabled(e),namespace:e,log:Dr.log,extend:()=>{}},r=(...i)=>{let{enabled:n,namespace:s,color:a,log:o}=t;if(i.length!==0&&Nr.push([s,...i]),Nr.length>wb&&Nr.shift(),Dr.enabled(s)||n){let l=i.map(c=>typeof c=="string"?c:kb(c)),u=`+${Date.now()-pu}ms`;pu=Date.now(),globalThis.DEBUG_COLORS?o(Os[a]($e(s)),...l,Os[a](u)):o(s,...l,u)}};return new Proxy(r,{get:(i,n)=>t[n],set:(i,n,s)=>t[n]=s})}var ve=new Proxy(Eb,{get:(e,t)=>Dr[t],set:(e,t,r)=>Dr[t]=r});function kb(e,t=2){let r=new Set;return JSON.stringify(e,(i,n)=>{if(typeof n=="object"&&n!==null){if(r.has(n))return"[Circular *]";r.add(n)}else if(typeof n=="bigint")return n.toString();return n},t)}function Ab(e=7500){let t=Nr.map(([r,...i])=>`${r} ${i.map(n=>typeof n=="string"?n:JSON.stringify(n)).join(" ")}`).join(`
`);return t.length<e?t:t.slice(-e)}function Rb(){Nr.length=0}var la=ve,Tb=H(require("node:fs"));function Ib(){let e=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(e&&Tb.default.existsSync(e))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var Ob=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],Ai="libquery_engine";function _b(e,t){let r=t==="url";return e.includes("windows")?r?"query_engine.dll.node":`query_engine-${e}.dll.node`:e.includes("darwin")?r?`${Ai}.dylib.node`:`${Ai}-${e}.dylib.node`:r?`${Ai}.so.node`:`${Ai}-${e}.so.node`}var qb=H(require("node:child_process")),yc=H(require("node:fs/promises")),Cs=H(require("node:os")),ut=Symbol.for("@ts-pattern/matcher"),Cb=Symbol.for("@ts-pattern/isVariadic"),Mi="@ts-pattern/anonymous-select-key",Ps=e=>!!(e&&typeof e=="object"),qi=e=>e&&!!e[ut],Je=(e,t,r)=>{if(qi(e)){let i=e[ut](),{matched:n,selections:s}=i.match(t);return n&&s&&Object.keys(s).forEach(a=>r(a,s[a])),n}if(Ps(e)){if(!Ps(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let i=[],n=[],s=[];for(let a of e.keys()){let o=e[a];qi(o)&&o[Cb]?s.push(o):s.length?n.push(o):i.push(o)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<i.length+n.length)return!1;let a=t.slice(0,i.length),o=n.length===0?[]:t.slice(-n.length),l=t.slice(i.length,n.length===0?1/0:-n.length);return i.every((u,c)=>Je(u,a[c],r))&&n.every((u,c)=>Je(u,o[c],r))&&(s.length===0||Je(s[0],l,r))}return e.length===t.length&&e.every((a,o)=>Je(a,t[o],r))}return Reflect.ownKeys(e).every(i=>{let n=e[i];return(i in t||qi(s=n)&&s[ut]().matcherType==="optional")&&Je(n,t[i],r);var s})}return Object.is(t,e)},St=e=>{var t,r,i;return Ps(e)?qi(e)?(t=(r=(i=e[ut]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(e)?jr(e,St):jr(Object.values(e),St):[]},jr=(e,t)=>e.reduce((r,i)=>r.concat(t(i)),[]);function Ne(e){return Object.assign(e,{optional:()=>Pb(e),and:t=>te(e,t),or:t=>Nb(e,t),select:t=>t===void 0?hu(e):hu(t,e)})}function Pb(e){return Ne({[ut]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return t===void 0?(St(e).forEach(n=>i(n,void 0)),{matched:!0,selections:r}):{matched:Je(e,t,i),selections:r}},getSelectionKeys:()=>St(e),matcherType:"optional"})})}function te(...e){return Ne({[ut]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return{matched:e.every(n=>Je(n,t,i)),selections:r}},getSelectionKeys:()=>jr(e,St),matcherType:"and"})})}function Nb(...e){return Ne({[ut]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return jr(e,St).forEach(n=>i(n,void 0)),{matched:e.some(n=>Je(n,t,i)),selections:r}},getSelectionKeys:()=>jr(e,St),matcherType:"or"})})}function j(e){return{[ut]:()=>({match:t=>({matched:!!e(t)})})}}function hu(...e){let t=typeof e[0]=="string"?e[0]:void 0,r=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return Ne({[ut]:()=>({match:i=>{let n={[t??Mi]:i};return{matched:r===void 0||Je(r,i,(s,a)=>{n[s]=a}),selections:n}},getSelectionKeys:()=>[t??Mi].concat(r===void 0?[]:St(r))})})}function Qe(e){return typeof e=="number"}function mt(e){return typeof e=="string"}function gt(e){return typeof e=="bigint"}var J3=Ne(j(function(e){return!0})),yt=e=>Object.assign(Ne(e),{startsWith:t=>{return yt(te(e,(r=t,j(i=>mt(i)&&i.startsWith(r)))));var r},endsWith:t=>{return yt(te(e,(r=t,j(i=>mt(i)&&i.endsWith(r)))));var r},minLength:t=>yt(te(e,(r=>j(i=>mt(i)&&i.length>=r))(t))),length:t=>yt(te(e,(r=>j(i=>mt(i)&&i.length===r))(t))),maxLength:t=>yt(te(e,(r=>j(i=>mt(i)&&i.length<=r))(t))),includes:t=>{return yt(te(e,(r=t,j(i=>mt(i)&&i.includes(r)))));var r},regex:t=>{return yt(te(e,(r=t,j(i=>mt(i)&&!!i.match(r)))));var r}}),W3=yt(j(mt)),Ke=e=>Object.assign(Ne(e),{between:(t,r)=>Ke(te(e,((i,n)=>j(s=>Qe(s)&&i<=s&&n>=s))(t,r))),lt:t=>Ke(te(e,(r=>j(i=>Qe(i)&&i<r))(t))),gt:t=>Ke(te(e,(r=>j(i=>Qe(i)&&i>r))(t))),lte:t=>Ke(te(e,(r=>j(i=>Qe(i)&&i<=r))(t))),gte:t=>Ke(te(e,(r=>j(i=>Qe(i)&&i>=r))(t))),int:()=>Ke(te(e,j(t=>Qe(t)&&Number.isInteger(t)))),finite:()=>Ke(te(e,j(t=>Qe(t)&&Number.isFinite(t)))),positive:()=>Ke(te(e,j(t=>Qe(t)&&t>0))),negative:()=>Ke(te(e,j(t=>Qe(t)&&t<0)))}),Y3=Ke(j(Qe)),bt=e=>Object.assign(Ne(e),{between:(t,r)=>bt(te(e,((i,n)=>j(s=>gt(s)&&i<=s&&n>=s))(t,r))),lt:t=>bt(te(e,(r=>j(i=>gt(i)&&i<r))(t))),gt:t=>bt(te(e,(r=>j(i=>gt(i)&&i>r))(t))),lte:t=>bt(te(e,(r=>j(i=>gt(i)&&i<=r))(t))),gte:t=>bt(te(e,(r=>j(i=>gt(i)&&i>=r))(t))),positive:()=>bt(te(e,j(t=>gt(t)&&t>0))),negative:()=>bt(te(e,j(t=>gt(t)&&t<0)))}),X3=bt(j(gt)),Z3=Ne(j(function(e){return typeof e=="boolean"})),e4=Ne(j(function(e){return typeof e=="symbol"})),t4=Ne(j(function(e){return e==null})),r4=Ne(j(function(e){return e!=null})),Db=class extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch{t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}},Ns={matched:!1,value:void 0};function zi(e){return new Ub(e,Ns)}var Ub=class Ds{constructor(t,r){this.input=void 0,this.state=void 0,this.input=t,this.state=r}with(...t){if(this.state.matched)return this;let r=t[t.length-1],i=[t[0]],n;t.length===3&&typeof t[1]=="function"?n=t[1]:t.length>2&&i.push(...t.slice(1,t.length-1));let s=!1,a={},o=(u,c)=>{s=!0,a[u]=c},l=!i.some(u=>Je(u,this.input,o))||n&&!n(this.input)?Ns:{matched:!0,value:r(s?Mi in a?a[Mi]:a:this.input,this.input)};return new Ds(this.input,l)}when(t,r){if(this.state.matched)return this;let i=!!t(this.input);return new Ds(this.input,i?{matched:!0,value:r(this.input,this.input)}:Ns)}otherwise(t){return this.state.matched?this.state.value:t(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new Db(this.input)}run(){return this.exhaustive()}returnType(){return this}},Lb=require("node:util"),Fb={warn:Kr("prisma:warn")},Mb={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function xs(e,...t){Mb.warn()&&console.warn(`${Fb.warn} ${e}`,...t)}var jb=(0,Lb.promisify)(qb.default.exec),xe=la("prisma:get-platform"),$b=["1.0.x","1.1.x","3.0.x"];async function Vb(){let e=Cs.default.platform(),t=process.arch;if(e==="freebsd"){let a=await ji("freebsd-version");if(a&&a.trim().length>0){let o=/^(\d+)\.?/.exec(a);if(o)return{platform:"freebsd",targetDistro:`freebsd${o[1]}`,arch:t}}}if(e!=="linux")return{platform:e,arch:t};let r=await Gb(),i=await Zb(),n=Qb({arch:t,archFromUname:i,familyDistro:r.familyDistro}),{libssl:s}=await Kb(n);return{platform:"linux",libssl:s,arch:t,archFromUname:i,...r}}function Bb(e){let t=/^ID="?([^"\n]*)"?$/im,r=/^ID_LIKE="?([^"\n]*)"?$/im,i=t.exec(e),n=i&&i[1]&&i[1].toLowerCase()||"",s=r.exec(e),a=s&&s[1]&&s[1].toLowerCase()||"",o=zi({id:n,idLike:a}).with({id:"alpine"},({id:l})=>({targetDistro:"musl",familyDistro:l,originalDistro:l})).with({id:"raspbian"},({id:l})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:l})).with({id:"nixos"},({id:l})=>({targetDistro:"nixos",originalDistro:l,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).when(({idLike:l})=>l.includes("debian")||l.includes("ubuntu"),({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).when(({idLike:l})=>n==="arch"||l.includes("arch"),({id:l})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:l})).when(({idLike:l})=>l.includes("centos")||l.includes("fedora")||l.includes("rhel")||l.includes("suse"),({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).otherwise(({id:l})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:l}));return xe(`Found distro info:
${JSON.stringify(o,null,2)}`),o}async function Gb(){let e="/etc/os-release";try{let t=await yc.default.readFile(e,{encoding:"utf-8"});return Bb(t)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function Hb(e){let t=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(e);if(t){let r=`${t[1]}.x`;return bc(r)}}function mu(e){let t=/libssl\.so\.(\d)(\.\d)?/.exec(e);if(t){let r=`${t[1]}${t[2]??".0"}.x`;return bc(r)}}function bc(e){let t=(()=>{if(vc(e))return e;let r=e.split(".");return r[1]="0",r.join(".")})();if($b.includes(t))return t}function Qb(e){return zi(e).with({familyDistro:"musl"},()=>(xe('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:t})=>(xe('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${t}-linux-gnu`,`/lib/${t}-linux-gnu`])).with({familyDistro:"rhel"},()=>(xe('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:t,arch:r,archFromUname:i})=>(xe(`Don't know any platform-specific paths for "${t}" on ${r} (${i})`),[]))}async function Kb(e){let t='grep -v "libssl.so.0"',r=await gu(e);if(r){xe(`Found libssl.so file using platform-specific paths: ${r}`);let s=mu(r);if(xe(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"libssl-specific-path"}}xe('Falling back to "ldconfig" and other generic paths');let i=await ji(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${t}`);if(i||(i=await gu(["/lib64","/usr/lib64","/lib","/usr/lib"])),i){xe(`Found libssl.so file using "ldconfig" or other generic paths: ${i}`);let s=mu(i);if(xe(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"ldconfig"}}let n=await ji("openssl version -v");if(n){xe(`Found openssl binary with version: ${n}`);let s=Hb(n);if(xe(`The parsed openssl version is: ${s}`),s)return{libssl:s,strategy:"openssl-binary"}}return xe("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function gu(e){for(let t of e){let r=await zb(t);if(r)return r}}async function zb(e){try{return(await yc.default.readdir(e)).find(t=>t.startsWith("libssl.so.")&&!t.startsWith("libssl.so.0"))}catch(t){if(t.code==="ENOENT")return;throw t}}async function ua(){let{binaryTarget:e}=await xc();return e}function Jb(e){return e.binaryTarget!==void 0}async function Wb(){let{memoized:e,...t}=await xc();return t}var Ri={};async function xc(){if(Jb(Ri))return Promise.resolve({...Ri,memoized:!0});let e=await Vb(),t=Yb(e);return Ri={...e,binaryTarget:t},{...Ri,memoized:!1}}function Yb(e){let{platform:t,arch:r,archFromUname:i,libssl:n,targetDistro:s,familyDistro:a,originalDistro:o}=e;t==="linux"&&!["x64","arm64"].includes(r)&&xs(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${r}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${i}".`);let l="1.1.x";if(t==="linux"&&n===void 0){let c=zi({familyDistro:a}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");xs(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${l}".
${c}`)}let u="debian";if(t==="linux"&&s===void 0&&xe(`Distro is "${o}". Falling back to Prisma engines built for "${u}".`),t==="darwin"&&r==="arm64")return"darwin-arm64";if(t==="darwin")return"darwin";if(t==="win32")return"windows";if(t==="freebsd")return s;if(t==="openbsd")return"openbsd";if(t==="netbsd")return"netbsd";if(t==="linux"&&s==="nixos")return"linux-nixos";if(t==="linux"&&r==="arm64")return`${s==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${n||l}`;if(t==="linux"&&r==="arm")return`linux-arm-openssl-${n||l}`;if(t==="linux"&&s==="musl"){let c="linux-musl";return!n||vc(n)?c:`${c}-openssl-${n}`}return t==="linux"&&s&&n?`${s}-openssl-${n}`:(t!=="linux"&&xs(`Prisma detected unknown OS "${t}" and may not work as expected. Defaulting to "linux".`),n?`${u}-openssl-${n}`:s?`${s}-openssl-${l}`:`${u}-openssl-${l}`)}async function Xb(e){try{return await e()}catch{return}}function ji(e){return Xb(async()=>{let t=await jb(e);return xe(`Command "${e}" successfully returned "${t.stdout}"`),t.stdout})}async function Zb(){return typeof Cs.default.machine=="function"?Cs.default.machine():(await ji("uname -m"))?.trim()}function vc(e){return e.startsWith("1.")}var wc={};Kt(wc,{beep:()=>A1,clearScreen:()=>w1,clearTerminal:()=>S1,cursorBackward:()=>a1,cursorDown:()=>n1,cursorForward:()=>s1,cursorGetPosition:()=>u1,cursorHide:()=>f1,cursorLeft:()=>kc,cursorMove:()=>i1,cursorNextLine:()=>c1,cursorPrevLine:()=>d1,cursorRestorePosition:()=>l1,cursorSavePosition:()=>o1,cursorShow:()=>p1,cursorTo:()=>r1,cursorUp:()=>Ec,enterAlternativeScreen:()=>E1,eraseDown:()=>y1,eraseEndLine:()=>m1,eraseLine:()=>Ac,eraseLines:()=>h1,eraseScreen:()=>Us,eraseStartLine:()=>g1,eraseUp:()=>b1,exitAlternativeScreen:()=>k1,iTerm:()=>I1,image:()=>T1,link:()=>R1,scrollDown:()=>v1,scrollUp:()=>x1});var ca=H(require("node:process"),1),da=globalThis.window?.document!==void 0,i4=globalThis.process?.versions?.node!==void 0,n4=globalThis.process?.versions?.bun!==void 0,s4=globalThis.Deno?.version?.deno!==void 0,a4=globalThis.process?.versions?.electron!==void 0,o4=globalThis.navigator?.userAgent?.includes("jsdom")===!0,l4=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,u4=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,c4=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,d4=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,zr=globalThis.navigator?.userAgentData?.platform,f4=zr==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",p4=zr==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",h4=zr==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",m4=zr==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),g4=zr==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android",$="\x1B[",$r="\x1B]",nr="\x07",qr=";",Sc=!da&&ca.default.env.TERM_PROGRAM==="Apple_Terminal",e1=!da&&ca.default.platform==="win32",t1=da?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:ca.default.cwd,r1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?$+(e+1)+"G":$+(t+1)+qr+(e+1)+"H"},i1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=$+-e+"D":e>0&&(r+=$+e+"C"),t<0?r+=$+-t+"A":t>0&&(r+=$+t+"B"),r},Ec=(e=1)=>$+e+"A",n1=(e=1)=>$+e+"B",s1=(e=1)=>$+e+"C",a1=(e=1)=>$+e+"D",kc=$+"G",o1=Sc?"\x1B7":$+"s",l1=Sc?"\x1B8":$+"u",u1=$+"6n",c1=$+"E",d1=$+"F",f1=$+"?25l",p1=$+"?25h",h1=e=>{let t="";for(let r=0;r<e;r++)t+=Ac+(r<e-1?Ec():"");return e&&(t+=kc),t},m1=$+"K",g1=$+"1K",Ac=$+"2K",y1=$+"J",b1=$+"1J",Us=$+"2J",x1=$+"S",v1=$+"T",w1="\x1Bc",S1=e1?`${Us}${$}0f`:`${Us}${$}3J${$}H`,E1=$+"?1049h",k1=$+"?1049l",A1=nr,R1=(e,t)=>[$r,"8",qr,qr,t,nr,e,$r,"8",qr,qr,nr].join(""),T1=(e,t={})=>{let r=`${$r}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+nr},I1={setCwd:(e=t1())=>`${$r}50;CurrentDir=${e}${nr}`,annotation(e,t={}){let r=`${$r}1337;`,i=t.x!==void 0,n=t.y!==void 0;if((i||n)&&!(i&&n&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(i?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+nr}},fa=H(Ky(),1);function Vr(e,t,{target:r="stdout",...i}={}){return fa.default[r]?wc.link(e,t):i.fallback===!1?e:typeof i.fallback=="function"?i.fallback(e,t):`${e} (\u200B${t}\u200B)`}Vr.isSupported=fa.default.stdout;Vr.stderr=(e,t,r={})=>Vr(e,t,{target:"stderr",...r});Vr.stderr.isSupported=fa.default.stderr;function O1(e){return Vr(e,e,{fallback:Ce})}var _1=zy(),q1=_1.version;function Ls(e){return C1()||(e?.config.engineType==="library"?"library":e?.config.engineType==="binary"?"binary":e?.config.engineType==="client"?"client":P1())}function C1(){let e=process.env.PRISMA_CLIENT_ENGINE_TYPE;return e==="library"?"library":e==="binary"?"binary":e==="client"?"client":void 0}function P1(){return"library"}function Rc(e){return e.name==="DriverAdapterError"&&typeof e.cause=="object"}function pa(e){return{ok:!0,value:e,map(t){return pa(t(e))},flatMap(t){return t(e)}}}function sr(e){return{ok:!1,error:e,map(){return sr(e)},flatMap(){return sr(e)}}}var Tc=ve("driver-adapter-utils"),N1=class{registeredErrors=[];consumeError(e){return this.registeredErrors[e]}registerNewError(e){let t=0;for(;this.registeredErrors[t]!==void 0;)t++;return this.registeredErrors[t]={error:e},t}},yu=(e,t=new N1)=>{let r={adapterName:e.adapterName,errorRegistry:t,queryRaw:at(t,e.queryRaw.bind(e)),executeRaw:at(t,e.executeRaw.bind(e)),executeScript:at(t,e.executeScript.bind(e)),dispose:at(t,e.dispose.bind(e)),provider:e.provider,startTransaction:async(...i)=>(await at(t,e.startTransaction.bind(e))(...i)).map(n=>D1(t,n))};return e.getConnectionInfo&&(r.getConnectionInfo=U1(t,e.getConnectionInfo.bind(e))),r},D1=(e,t)=>({adapterName:t.adapterName,provider:t.provider,options:t.options,queryRaw:at(e,t.queryRaw.bind(t)),executeRaw:at(e,t.executeRaw.bind(t)),commit:at(e,t.commit.bind(t)),rollback:at(e,t.rollback.bind(t))});function at(e,t){return async(...r)=>{try{return pa(await t(...r))}catch(i){if(Tc("[error@wrapAsync]",i),Rc(i))return sr(i.cause);let n=e.registerNewError(i);return sr({kind:"GenericJs",id:n})}}}function U1(e,t){return(...r)=>{try{return pa(t(...r))}catch(i){if(Tc("[error@wrapSync]",i),Rc(i))return sr(i.cause);let n=e.registerNewError(i);return sr({kind:"GenericJs",id:n})}}}var y4=H(aa()),X=H(require("node:path")),b4=H(aa()),x4=ve("prisma:engines");function L1(){return X.default.join(__dirname,"../")}X.default.join(__dirname,"../query-engine-darwin");X.default.join(__dirname,"../query-engine-darwin-arm64");X.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");X.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");X.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");X.default.join(__dirname,"../query-engine-linux-static-x64");X.default.join(__dirname,"../query-engine-linux-static-arm64");X.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");X.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");X.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");X.default.join(__dirname,"../libquery_engine-darwin.dylib.node");X.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");X.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");X.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");X.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-musl.so.node");X.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");X.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");X.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");X.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");X.default.join(__dirname,"../query_engine-windows.dll.node");var bu=H(require("node:fs")),xu=la("chmodPlusX");function F1(e){if(process.platform==="win32")return;let t=bu.default.statSync(e),r=t.mode|64|8|1;if(t.mode===r){xu(`Execution permissions of ${e} are fine`);return}let i=r.toString(8).slice(-3);xu(`Have to call chmodPlusX on ${e}`),bu.default.chmodSync(e,i)}function M1(e){let t=e.e,r=o=>`Prisma cannot find the required \`${o}\` system library in your system`,i=t.message.includes("cannot open shared object file"),n=`Please refer to the documentation about Prisma's system requirements: ${O1("https://pris.ly/d/system-requirements")}`,s=`Unable to require(\`${Qr(e.id)}\`).`,a=zi({message:t.message,code:t.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:o})=>i&&o.includes("libz"),()=>`${r("libz")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libgcc_s"),()=>`${r("libgcc_s")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libssl"),()=>{let o=e.platformInfo.libssl?`openssl-${e.platformInfo.libssl}`:"openssl";return`${r("libssl")}. Please install ${o} and try again.`}).when(({message:o})=>o.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${n}`).when(({message:o})=>e.platformInfo.platform==="linux"&&o.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${e.platformInfo.originalDistro} on (${e.platformInfo.archFromUname}) which uses the \`${e.platformInfo.binaryTarget}\` binaryTarget by default. ${n}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${n}`);return`${s}
${a}

Details: ${t.message}`}var j1=H(Jy(),1);function $1(e){let t=(0,j1.default)(e);if(t===0)return e;let r=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(r,"")}var V1="prisma+postgres",Ic=`${V1}:`;function Oc(e){return e?.toString().startsWith(`${Ic}//`)??!1}function B1(e){if(!Oc(e))return!1;let{host:t}=new URL(e);return t.includes("localhost")||t.includes("127.0.0.1")||t.includes("[::1]")}var G1=H(oc());function H1(e){return String(new Q1(e))}var Q1=class{constructor(e){this.config=e}toString(){let{config:e}=this,t=e.provider.fromEnvVar?`env("${e.provider.fromEnvVar}")`:e.provider.value,r=JSON.parse(JSON.stringify({provider:t,binaryTargets:K1(e.binaryTargets)}));return`generator ${e.name} {
${(0,G1.default)(z1(r),2)}
}`}};function K1(e){let t;if(e.length>0){let r=e.find(i=>i.fromEnvVar!==null);r?t=`env("${r.fromEnvVar}")`:t=e.map(i=>i.native?"native":i.value)}else t=void 0;return t}function z1(e){let t=Object.keys(e).reduce((r,i)=>Math.max(r,i.length),0);return Object.entries(e).map(([r,i])=>`${r.padEnd(t)} = ${J1(i)}`).join(`
`)}function J1(e){return JSON.parse(JSON.stringify(e,(t,r)=>Array.isArray(r)?`[${r.map(i=>JSON.stringify(i)).join(", ")}]`:JSON.stringify(r)))}var Fs={};Kt(Fs,{error:()=>X1,info:()=>Y1,log:()=>W1,query:()=>Z1,should:()=>_c,tags:()=>Jr,warn:()=>qc});var Jr={error:Ht("prisma:error"),warn:Kr("prisma:warn"),info:Gt("prisma:info"),query:Pr("prisma:query")},_c={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function W1(...e){console.log(...e)}function qc(e,...t){_c.warn()&&console.warn(`${Jr.warn} ${e}`,...t)}function Y1(e,...t){console.info(`${Jr.info} ${e}`,...t)}function X1(e,...t){console.error(`${Jr.error} ${e}`,...t)}function Z1(e,...t){console.log(`${Jr.query} ${e}`,...t)}function vu(e,t){if(!e)throw new Error(`${t}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function ha(e,t){throw new Error(t)}function ex({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var tx=ex();function Ms(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(tx,"")}var Ti=H(require("node:path"));function rx(e){return Ti.default.sep===Ti.default.posix.sep?e:e.split(Ti.default.sep).join(Ti.default.posix.sep)}var Cc=H(Yy()),js=H(require("node:fs")),Br=H(require("node:path"));function ix(e){let t=e.ignoreProcessEnv?{}:process.env,r=i=>i.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(n,s){let a=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(s);if(!a)return n;let o=a[1],l,u;if(o==="\\")u=a[0],l=u.replace("\\$","$");else{let c=a[2];u=a[0].substring(o.length),l=Object.hasOwnProperty.call(t,c)?t[c]:e.parsed[c]||"",l=r(l)}return n.replace(u,l)},i)??i;for(let i in e.parsed){let n=Object.hasOwnProperty.call(t,i)?t[i]:e.parsed[i];e.parsed[i]=r(n)}for(let i in e.parsed)t[i]=e.parsed[i];return e}var $s=la("prisma:tryLoadEnv");function Pc({rootEnvPath:e,schemaEnvPath:t},r={conflictCheck:"none"}){let i=wu(e);r.conflictCheck!=="none"&&nx(i,t,r.conflictCheck);let n=null;return Nc(i?.path,t)||(n=wu(t)),!i&&!n&&$s("No Environment variables loaded"),n?.dotenvResult.error?console.error(Ht($e("Schema Env Error: "))+n.dotenvResult.error):{message:[i?.message,n?.message].filter(Boolean).join(`
`),parsed:{...i?.dotenvResult?.parsed,...n?.dotenvResult?.parsed}}}function nx(e,t,r){let i=e?.dotenvResult.parsed,n=!Nc(e?.path,t);if(i&&t&&n&&js.default.existsSync(t)){let s=Cc.default.parse(js.default.readFileSync(t)),a=[];for(let o in s)i[o]===s[o]&&a.push(o);if(a.length>0){let o=Br.default.relative(process.cwd(),e.path),l=Br.default.relative(process.cwd(),t);if(r==="error"){let u=`There is a conflict between env var${a.length>1?"s":""} in ${Ce(o)} and ${Ce(l)}
Conflicting env vars:
${a.map(c=>`  ${$e(c)}`).join(`
`)}

We suggest to move the contents of ${Ce(l)} to ${Ce(o)} to consolidate your env vars.
`;throw new Error(u)}else if(r==="warn"){let u=`Conflict for env var${a.length>1?"s":""} ${a.map(c=>$e(c)).join(", ")} in ${Ce(o)} and ${Ce(l)}
Env vars from ${Ce(l)} overwrite the ones from ${Ce(o)}
      `;console.warn(`${Kr("warn(prisma)")} ${u}`)}}}}function wu(e){if(sx(e)){$s(`Environment variables loaded from ${e}`);let t=Cc.default.config({path:e,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:ix(t),message:Qr(`Environment variables loaded from ${Br.default.relative(process.cwd(),e)}`),path:e}}else $s(`Environment variables not found at ${e}`);return null}function Nc(e,t){return e&&t&&Br.default.resolve(e)===Br.default.resolve(t)}function sx(e){return!!(e&&js.default.existsSync(e))}function ax(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dc(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function ox(e,t){if(e.length===0)return;let r=e[0];for(let i=1;i<e.length;i++)t(r,e[i])<0&&(r=e[i]);return r}function ne(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Su=new Set,Uc=(e,t,...r)=>{Su.has(e)||(Su.add(e),qc(t,...r))},ae=class Lc extends Error{clientVersion;errorCode;retryable;constructor(t,r,i){super(t),this.name="PrismaClientInitializationError",this.clientVersion=r,this.errorCode=i,Error.captureStackTrace(Lc)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};ne(ae,"PrismaClientInitializationError");var Et=class extends Error{code;meta;clientVersion;batchRequestIdx;constructor(e,{code:t,clientVersion:r,meta:i,batchRequestIdx:n}){super(e),this.name="PrismaClientKnownRequestError",this.code=t,this.clientVersion=r,this.meta=i,Object.defineProperty(this,"batchRequestIdx",{value:n,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};ne(Et,"PrismaClientKnownRequestError");var wt=class extends Error{clientVersion;constructor(e,t){super(e),this.name="PrismaClientRustPanicError",this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};ne(wt,"PrismaClientRustPanicError");var Oe=class extends Error{clientVersion;batchRequestIdx;constructor(e,{clientVersion:t,batchRequestIdx:r}){super(e),this.name="PrismaClientUnknownRequestError",this.clientVersion=t,Object.defineProperty(this,"batchRequestIdx",{value:r,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};ne(Oe,"PrismaClientUnknownRequestError");var ot=class extends Error{name="PrismaClientValidationError";clientVersion;constructor(e,{clientVersion:t}){super(e),this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};ne(ot,"PrismaClientValidationError");var Ur=class{_map=new Map;get(e){return this._map.get(e)?.value}set(e,t){this._map.set(e,{value:t})}getOrCreate(e,t){let r=this._map.get(e);if(r)return r.value;let i=t();return this.set(e,i),i}};function Ji(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function lx(e,t){let r={};for(let i of e){let n=i[t];r[n]=i}return r}function Vs(e){let t;return{get(){return t||(t={value:e()}),t.value}}}function ux(e){return{models:vs(e.models),enums:vs(e.enums),types:vs(e.types)}}function vs(e){let t={};for(let{name:r,...i}of e)t[r]=i;return t}function ma(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Fc(e){return e.toString()!=="Invalid Date"}var ir=9e15,At=1e9,Bs="0123456789abcdef",$i="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Vi="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Gs={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ir,maxE:ir,crypto:!1},Mc,lt,T=!0,Wi="[DecimalError] ",kt=Wi+"Invalid argument: ",jc=Wi+"Precision limit exceeded",$c=Wi+"crypto unavailable",Vc="[object Decimal]",he=Math.floor,le=Math.pow,cx=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,dx=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,fx=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Bc=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ve=1e7,A=7,px=9007199254740991,hx=$i.length-1,Hs=Vi.length-1,y={toStringTag:Vc};y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),S(e)};y.ceil=function(){return S(new this.constructor(this),this.e+1,2)};y.clampedTo=y.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(kt+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};y.comparedTo=y.cmp=function(e){var t,r,i,n,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(i=a.length,n=o.length,t=0,r=i<n?i:n;t<r;++t)if(a[t]!==o[t])return a[t]>o[t]^l<0?1:-1;return i===n?0:i>n^l<0?1:-1};y.cosine=y.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+A,i.rounding=1,r=mx(i,zc(i,r)),i.precision=e,i.rounding=t,S(lt==2||lt==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};y.cubeRoot=y.cbrt=function(){var e,t,r,i,n,s,a,o,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(T=!1,s=c.s*le(c.s*c,1/3),!s||Math.abs(s)==1/0?(r=de(c.d),e=c.e,(s=(e-r.length+1)%3)&&(r+=s==1||s==-2?"0":"00"),s=le(r,1/3),e=he((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new d(r),i.s=c.s):i=new d(s.toString()),a=(e=d.precision)+3;;)if(o=i,l=o.times(o).times(o),u=l.plus(c),i=Q(u.plus(c).times(o),u.plus(l),a+2,1),de(o.d).slice(0,a)===(r=de(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!n&&r=="4999"){if(!n&&(S(o,e+1,0),o.times(o).times(o).eq(c))){i=o;break}a+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(S(i,e+1,1),t=!i.times(i).times(i).eq(c));break}return T=!0,S(i,e,d.rounding,t)};y.decimalPlaces=y.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-he(this.e/A))*A,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};y.dividedBy=y.div=function(e){return Q(this,new this.constructor(e))};y.dividedToIntegerBy=y.divToInt=function(e){var t=this,r=t.constructor;return S(Q(t,new r(e),0,1,1),r.precision,r.rounding)};y.equals=y.eq=function(e){return this.cmp(e)===0};y.floor=function(){return S(new this.constructor(this),this.e+1,3)};y.greaterThan=y.gt=function(e){return this.cmp(e)>0};y.greaterThanOrEqualTo=y.gte=function(e){var t=this.cmp(e);return t==1||t===0};y.hyperbolicCosine=y.cosh=function(){var e,t,r,i,n,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;r=a.precision,i=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,n=s.d.length,n<32?(e=Math.ceil(n/3),t=(1/Xi(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=ar(a,1,s.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return S(s,a.precision=r,a.rounding=i,!0)};y.hyperbolicSine=y.sinh=function(){var e,t,r,i,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,i=n.d.length,i<3)n=ar(s,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/Xi(5,e)),n=ar(s,2,n,n,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);e--;)a=n.times(n),n=n.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=t,s.rounding=r,S(n,t,r,!0)};y.hyperbolicTangent=y.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,Q(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};y.inverseCosine=y.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,n=t.rounding;return r!==-1?r===0?e.isNeg()?We(t,i,n):new t(0):new t(NaN):e.isZero()?We(t,i+4,n).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=n,e.times(2))};y.inverseHyperbolicCosine=y.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,T=!1,r=r.times(r).minus(1).sqrt().plus(r),T=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};y.inverseHyperbolicSine=y.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,T=!1,r=r.times(r).plus(1).sqrt().plus(r),T=!0,i.precision=e,i.rounding=t,r.ln())};y.inverseHyperbolicTangent=y.atanh=function(){var e,t,r,i,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=s.precision,t=s.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?S(new s(n),e,t,!0):(s.precision=r=i-n.e,n=Q(n.plus(1),new s(1).minus(n),r+e,1),s.precision=e+4,s.rounding=1,n=n.ln(),s.precision=e,s.rounding=t,n.times(.5))):new s(NaN)};y.inverseSine=y.asin=function(){var e,t,r,i,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),r=s.precision,i=s.rounding,t!==-1?t===0?(e=We(s,r+4,i).times(.5),e.s=n.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=i,n.times(2)))};y.inverseTangent=y.atan=function(){var e,t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=Hs)return a=We(c,d+4,f).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=Hs)return a=We(c,d+4,f).times(.5),a.s=u.s,a}for(c.precision=o=d+10,c.rounding=1,r=Math.min(28,o/A+2|0),e=r;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(T=!1,t=Math.ceil(o/A),i=1,l=u.times(u),a=new c(u),n=u;e!==-1;)if(n=n.times(l),s=a.minus(n.div(i+=2)),n=n.times(l),a=s.plus(n.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===s.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),T=!0,S(a,c.precision=d,c.rounding=f,!0)};y.isFinite=function(){return!!this.d};y.isInteger=y.isInt=function(){return!!this.d&&he(this.e/A)>this.d.length-2};y.isNaN=function(){return!this.s};y.isNegative=y.isNeg=function(){return this.s<0};y.isPositive=y.isPos=function(){return this.s>0};y.isZero=function(){return!!this.d&&this.d[0]===0};y.lessThan=y.lt=function(e){return this.cmp(e)<0};y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1};y.logarithm=y.log=function(e){var t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding,p=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(n=r[0];n%10===0;)n/=10;s=n!==1}if(T=!1,o=d+p,a=vt(u,o),i=t?Bi(c,o+10):vt(e,o),l=Q(a,i,o,1),Gr(l.d,n=d,f))do if(o+=10,a=vt(u,o),i=t?Bi(c,o+10):vt(e,o),l=Q(a,i,o,1),!s){+de(l.d).slice(n+1,n+15)+1==1e14&&(l=S(l,d+1,0));break}while(Gr(l.d,n+=10,f));return T=!0,S(l,d,f)};y.minus=y.sub=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,m=p.constructor;if(e=new m(e),!p.d||!e.d)return!p.s||!e.s?e=new m(NaN):p.d?e.s=-e.s:e=new m(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,f=e.d,o=m.precision,l=m.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else if(u[0])e=new m(p);else return new m(l===3?-0:0);return T?S(e,o,l):e}if(r=he(e.e/A),c=he(p.e/A),u=u.slice(),s=c-r,s){for(d=s<0,d?(t=u,s=-s,a=f.length):(t=f,r=c,a=u.length),i=Math.max(Math.ceil(o/A),a)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=u.length,a=f.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}s=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),a=u.length,i=f.length-a;i>0;--i)u[a++]=0;for(i=f.length;i>s;){if(u[--i]<f[i]){for(n=i;n&&u[--n]===0;)u[n]=Ve-1;--u[n],u[i]+=Ve}u[i]-=f[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=Yi(u,r),T?S(e,o,l):e):new m(l===3?-0:0)};y.modulo=y.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?S(new i(r),i.precision,i.rounding):(T=!1,i.modulo==9?(t=Q(r,e.abs(),0,3,1),t.s*=e.s):t=Q(r,e,0,i.modulo,1),t=t.times(e),T=!0,r.minus(t))};y.naturalExponential=y.exp=function(){return Qs(this)};y.naturalLogarithm=y.ln=function(){return vt(this)};y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,S(e)};y.plus=y.add=function(e){var t,r,i,n,s,a,o,l,u,c,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return!d.s||!e.s?e=new f(NaN):d.d||(e=new f(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,o=f.precision,l=f.rounding,!u[0]||!c[0])return c[0]||(e=new f(d)),T?S(e,o,l):e;if(s=he(d.e/A),i=he(e.e/A),u=u.slice(),n=s-i,n){for(n<0?(r=u,n=-n,a=c.length):(r=c,i=s,a=u.length),s=Math.ceil(o/A),a=s>a?s+1:a+1,n>a&&(n=a,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(a=u.length,n=c.length,a-n<0&&(n=a,r=c,c=u,u=r),t=0;n;)t=(u[--n]=u[n]+c[n]+t)/Ve|0,u[n]%=Ve;for(t&&(u.unshift(t),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=Yi(u,i),T?S(e,o,l):e};y.precision=y.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(kt+e);return r.d?(t=Gc(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};y.round=function(){var e=this,t=e.constructor;return S(new t(e),e.e+1,t.rounding)};y.sine=y.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+A,i.rounding=1,r=yx(i,zc(i,r)),i.precision=e,i.rounding=t,S(lt>2?r.neg():r,e,t,!0)):new i(NaN)};y.squareRoot=y.sqrt=function(){var e,t,r,i,n,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(T=!1,u=Math.sqrt(+a),u==0||u==1/0?(t=de(o),(t.length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=he((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),i=new c(t)):i=new c(u.toString()),r=(l=c.precision)+3;;)if(s=i,i=s.plus(Q(a,s,r+2,1)).times(.5),de(s.d).slice(0,r)===(t=de(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(S(s,l+1,0),s.times(s).eq(a))){i=s;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(S(i,l+1,1),e=!i.times(i).eq(a));break}return T=!0,S(i,l,c.rounding,e)};y.tangent=y.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=Q(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,S(lt==2||lt==4?r.neg():r,e,t,!0)):new i(NaN)};y.times=y.mul=function(e){var t,r,i,n,s,a,o,l,u,c=this,d=c.constructor,f=c.d,p=(e=new d(e)).d;if(e.s*=c.s,!f||!f[0]||!p||!p[0])return new d(!e.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?e.s/0:e.s*0);for(r=he(c.e/A)+he(e.e/A),l=f.length,u=p.length,l<u&&(s=f,f=p,p=s,a=l,l=u,u=a),s=[],a=l+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(t=0,n=l+i;n>i;)o=s[n]+p[i]*f[n-i-1]+t,s[n--]=o%Ve|0,t=o/Ve|0;s[n]=(s[n]+t)%Ve|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=Yi(s,r),T?S(e,d.precision,d.rounding):e};y.toBinary=function(e,t){return ga(this,2,e,t)};y.toDecimalPlaces=y.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(Re(e,0,At),t===void 0?t=i.rounding:Re(t,0,8),S(r,e+r.e+1,t))};y.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Xe(i,!0):(Re(e,0,At),t===void 0?t=n.rounding:Re(t,0,8),i=S(new n(i),e+1,t),r=Xe(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toFixed=function(e,t){var r,i,n=this,s=n.constructor;return e===void 0?r=Xe(n):(Re(e,0,At),t===void 0?t=s.rounding:Re(t,0,8),i=S(new s(n),e+n.e+1,t),r=Xe(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};y.toFraction=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,m=p.d,g=p.constructor;if(!m)return new g(p);if(u=r=new g(1),i=l=new g(0),t=new g(i),s=t.e=Gc(m)-p.e-1,a=s%A,t.d[0]=le(10,a<0?A+a:a),e==null)e=s>0?t:u;else{if(o=new g(e),!o.isInt()||o.lt(u))throw Error(kt+o);e=o.gt(t)?s>0?t:u:o}for(T=!1,o=new g(de(m)),c=g.precision,g.precision=s=m.length*A*2;d=Q(o,t,0,1,1),n=r.plus(d.times(i)),n.cmp(e)!=1;)r=i,i=n,n=u,u=l.plus(d.times(n)),l=n,n=t,t=o.minus(d.times(n)),o=n;return n=Q(e.minus(r),i,0,1,1),l=l.plus(n.times(u)),r=r.plus(n.times(i)),l.s=u.s=p.s,f=Q(u,i,s,1).minus(p).abs().cmp(Q(l,r,s,1).minus(p).abs())<1?[u,i]:[l,r],g.precision=c,T=!0,f};y.toHexadecimal=y.toHex=function(e,t){return ga(this,16,e,t)};y.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:Re(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(T=!1,r=Q(r,e,0,t,1).times(e),T=!0,S(r)):(e.s=r.s,r=e),r};y.toNumber=function(){return+this};y.toOctal=function(e,t){return ga(this,8,e,t)};y.toPower=y.pow=function(e){var t,r,i,n,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new l(le(+o,u));if(o=new l(o),o.eq(1))return o;if(i=l.precision,s=l.rounding,e.eq(1))return S(o,i,s);if(t=he(e.e/A),t>=e.d.length-1&&(r=u<0?-u:u)<=px)return n=Hc(l,o,r,i),e.s<0?new l(1).div(n):S(n,i,s);if(a=o.s,a<0){if(t<e.d.length-1)return new l(NaN);if((e.d[t]&1)==0&&(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return r=le(+o,u),t=r==0||!isFinite(r)?he(u*(Math.log("0."+de(o.d))/Math.LN10+o.e+1)):new l(r+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(T=!1,l.rounding=o.s=1,r=Math.min(12,(t+"").length),n=Qs(e.times(vt(o,i+r)),i),n.d&&(n=S(n,i+5,1),Gr(n.d,i,s)&&(t=i+10,n=S(Qs(e.times(vt(o,t+r)),t),t+5,1),+de(n.d).slice(i+1,i+15)+1==1e14&&(n=S(n,i+1,0)))),n.s=a,T=!0,l.rounding=s,S(n,i,s))};y.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Xe(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(Re(e,1,At),t===void 0?t=n.rounding:Re(t,0,8),i=S(new n(i),e,t),r=Xe(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toSignificantDigits=y.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(Re(e,1,At),t===void 0?t=i.rounding:Re(t,0,8)),S(new i(r),e,t)};y.toString=function(){var e=this,t=e.constructor,r=Xe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};y.truncated=y.trunc=function(){return S(new this.constructor(this),this.e+1,1)};y.valueOf=y.toJSON=function(){var e=this,t=e.constructor,r=Xe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function de(e){var t,r,i,n=e.length-1,s="",a=e[0];if(n>0){for(s+=a,t=1;t<n;t++)i=e[t]+"",r=A-i.length,r&&(s+=xt(r)),s+=i;a=e[t],i=a+"",r=A-i.length,r&&(s+=xt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function Re(e,t,r){if(e!==~~e||e<t||e>r)throw Error(kt+e)}function Gr(e,t,r,i){var n,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=A,n=0):(n=Math.ceil((t+1)/A),t%=A),s=le(10,A-t),o=e[n]%s|0,i==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),a=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):a=(r<4&&o+1==s||r>3&&o+1==s/2)&&(e[n+1]/s/100|0)==le(10,t-2)-1||(o==s/2||o==0)&&(e[n+1]/s/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),a=(i||r<4)&&o==9999||!i&&r>3&&o==4999):a=((i||r<4)&&o+1==s||!i&&r>3&&o+1==s/2)&&(e[n+1]/s/1e3|0)==le(10,t-3)-1,a}function Ci(e,t,r){for(var i,n=[0],s,a=0,o=e.length;a<o;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=Bs.indexOf(e.charAt(a++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function mx(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/Xi(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=ar(e,1,t.times(n),new e(1));for(var s=r;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var Q=(function(){function e(i,n,s){var a,o=0,l=i.length;for(i=i.slice();l--;)a=i[l]*n+o,i[l]=a%s|0,o=a/s|0;return o&&i.unshift(o),i}function t(i,n,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=n[o]){l=i[o]>n[o]?1:-1;break}return l}function r(i,n,s,a){for(var o=0;s--;)i[s]-=o,o=i[s]<n[s]?1:0,i[s]=o*a+i[s]-n[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,s,a,o,l){var u,c,d,f,p,m,g,E,O,q,P,B,ke,R,b,k,I,V,F,N,M=i.constructor,ee=i.s==n.s?1:-1,G=i.d,L=n.d;if(!G||!G[0]||!L||!L[0])return new M(!i.s||!n.s||(G?L&&G[0]==L[0]:!L)?NaN:G&&G[0]==0||!L?ee*0:ee/0);for(l?(p=1,c=i.e-n.e):(l=Ve,p=A,c=he(i.e/p)-he(n.e/p)),F=L.length,I=G.length,O=new M(ee),q=O.d=[],d=0;L[d]==(G[d]||0);d++);if(L[d]>(G[d]||0)&&c--,s==null?(R=s=M.precision,a=M.rounding):o?R=s+(i.e-n.e)+1:R=s,R<0)q.push(1),m=!0;else{if(R=R/p+2|0,d=0,F==1){for(f=0,L=L[0],R++;(d<I||f)&&R--;d++)b=f*l+(G[d]||0),q[d]=b/L|0,f=b%L|0;m=f||d<I}else{for(f=l/(L[0]+1)|0,f>1&&(L=e(L,f,l),G=e(G,f,l),F=L.length,I=G.length),k=F,P=G.slice(0,F),B=P.length;B<F;)P[B++]=0;N=L.slice(),N.unshift(0),V=L[0],L[1]>=l/2&&++V;do f=0,u=t(L,P,F,B),u<0?(ke=P[0],F!=B&&(ke=ke*l+(P[1]||0)),f=ke/V|0,f>1?(f>=l&&(f=l-1),g=e(L,f,l),E=g.length,B=P.length,u=t(g,P,E,B),u==1&&(f--,r(g,F<E?N:L,E,l))):(f==0&&(u=f=1),g=L.slice()),E=g.length,E<B&&g.unshift(0),r(P,g,B,l),u==-1&&(B=P.length,u=t(L,P,F,B),u<1&&(f++,r(P,F<B?N:L,B,l))),B=P.length):u===0&&(f++,P=[0]),q[d++]=f,u&&P[0]?P[B++]=G[k]||0:(P=[G[k]],B=1);while((k++<I||P[0]!==void 0)&&R--);m=P[0]!==void 0}q[0]||q.shift()}if(p==1)O.e=c,Mc=m;else{for(d=1,f=q[0];f>=10;f/=10)d++;O.e=d+c*p-1,S(O,o?s+O.e+1:s,a,m)}return O}})();function S(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(n=1,o=d[0];o>=10;o/=10)n++;if(s=t-n,s<0)s+=A,a=t,c=d[f=0],l=c/le(10,n-a-1)%10|0;else if(f=Math.ceil((s+1)/A),o=d.length,f>=o)if(i){for(;o++<=f;)d.push(0);c=l=0,n=1,s%=A,a=s-A+1}else break e;else{for(c=o=d[f],n=1;o>=10;o/=10)n++;s%=A,a=s-A+n,l=a<0?0:c/le(10,n-a-1)%10|0}if(i=i||t<0||d[f+1]!==void 0||(a<0?c:c%le(10,n-a-1)),u=r<4?(l||i)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||i||r==6&&(s>0?a>0?c/le(10,n-a):0:d[f-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=le(10,(A-t%A)%A),e.e=-t||0):d[0]=e.e=0,e;if(s==0?(d.length=f,o=1,f--):(d.length=f+1,o=le(10,A-s),d[f]=a>0?(c/le(10,n-a)%le(10,a)|0)*o:0),u)for(;;)if(f==0){for(s=1,a=d[0];a>=10;a/=10)s++;for(a=d[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,d[0]==Ve&&(d[0]=1));break}else{if(d[f]+=o,d[f]!=Ve)break;d[f--]=0,o=1}for(s=d.length;d[--s]===0;)d.pop()}return T&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Xe(e,t,r){if(!e.isFinite())return Kc(e);var i,n=e.e,s=de(e.d),a=s.length;return t?(r&&(i=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+xt(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):n<0?(s="0."+xt(-n-1)+s,r&&(i=r-a)>0&&(s+=xt(i))):n>=a?(s+=xt(n+1-a),r&&(i=r-n-1)>0&&(s=s+"."+xt(i))):((i=n+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-a)>0&&(n+1===a&&(s+="."),s+=xt(i))),s}function Yi(e,t){var r=e[0];for(t*=A;r>=10;r/=10)t++;return t}function Bi(e,t,r){if(t>hx)throw T=!0,r&&(e.precision=r),Error(jc);return S(new e($i),t,1,!0)}function We(e,t,r){if(t>Hs)throw Error(jc);return S(new e(Vi),t,r,!0)}function Gc(e){var t=e.length-1,r=t*A+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function xt(e){for(var t="";e--;)t+="0";return t}function Hc(e,t,r,i){var n,s=new e(1),a=Math.ceil(i/A+4);for(T=!1;;){if(r%2&&(s=s.times(t),ku(s.d,a)&&(n=!0)),r=he(r/2),r===0){r=s.d.length-1,n&&s.d[r]===0&&++s.d[r];break}t=t.times(t),ku(t.d,a)}return T=!0,s}function Eu(e){return e.d[e.d.length-1]&1}function Qc(e,t,r){for(var i,n,s=new e(t[0]),a=0;++a<t.length;){if(n=new e(t[a]),!n.s){s=n;break}i=s.cmp(n),(i===r||i===0&&s.s===r)&&(s=n)}return s}function Qs(e,t){var r,i,n,s,a,o,l,u=0,c=0,d=0,f=e.constructor,p=f.rounding,m=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(T=!1,l=m):l=t,o=new f(.03125);e.e>-2;)e=e.times(o),d+=5;for(i=Math.log(le(2,d))/Math.LN10*2+5|0,l+=i,r=s=a=new f(1),f.precision=l;;){if(s=S(s.times(e),l,1),r=r.times(++c),o=a.plus(Q(s,r,l,1)),de(o.d).slice(0,l)===de(a.d).slice(0,l)){for(n=d;n--;)a=S(a.times(a),l,1);if(t==null)if(u<3&&Gr(a.d,l-i,p,u))f.precision=l+=10,r=s=o=new f(1),c=0,u++;else return S(a,f.precision=m,p,T=!0);else return f.precision=m,a}a=o}}function vt(e,t){var r,i,n,s,a,o,l,u,c,d,f,p=1,m=10,g=e,E=g.d,O=g.constructor,q=O.rounding,P=O.precision;if(g.s<0||!E||!E[0]||!g.e&&E[0]==1&&E.length==1)return new O(E&&!E[0]?-1/0:g.s!=1?NaN:E?0:g);if(t==null?(T=!1,c=P):c=t,O.precision=c+=m,r=de(E),i=r.charAt(0),Math.abs(s=g.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)g=g.times(e),r=de(g.d),i=r.charAt(0),p++;s=g.e,i>1?(g=new O("0."+r),s++):g=new O(i+"."+r.slice(1))}else return u=Bi(O,c+2,P).times(s+""),g=vt(new O(i+"."+r.slice(1)),c-m).plus(u),O.precision=P,t==null?S(g,P,q,T=!0):g;for(d=g,l=a=g=Q(g.minus(1),g.plus(1),c,1),f=S(g.times(g),c,1),n=3;;){if(a=S(a.times(f),c,1),u=l.plus(Q(a,new O(n),c,1)),de(u.d).slice(0,c)===de(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(Bi(O,c+2,P).times(s+""))),l=Q(l,new O(p),c,1),t==null)if(Gr(l.d,c-m,q,o))O.precision=c+=m,u=a=g=Q(d.minus(1),d.plus(1),c,1),f=S(g.times(g),c,1),n=o=1;else return S(l,O.precision=P,q,T=!0);else return O.precision=P,l;l=u,n+=2}}function Kc(e){return String(e.s*e.s/0)}function Pi(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%A,r<0&&(i+=A),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=A;i<n;)e.d.push(+t.slice(i,i+=A));t=t.slice(i),i=A-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),T&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function gx(e,t){var r,i,n,s,a,o,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Bc.test(t))return Pi(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(dx.test(t))r=16,t=t.toLowerCase();else if(cx.test(t))r=2;else if(fx.test(t))r=8;else throw Error(kt+t);for(s=t.search(/p/i),s>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),a=s>=0,i=e.constructor,a&&(t=t.replace(".",""),o=t.length,s=o-s,n=Hc(i,new i(r),s,s*2)),u=Ci(t,r,Ve),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new i(e.s*0):(e.e=Yi(u,c),e.d=u,T=!1,a&&(e=Q(e,n,o*4)),l&&(e=e.times(Math.abs(l)<54?le(2,l):zt.pow(2,l))),T=!0,e)}function yx(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:ar(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Xi(5,r)),t=ar(e,2,t,t);for(var n,s=new e(5),a=new e(16),o=new e(20);r--;)n=t.times(t),t=t.times(s.plus(n.times(a.times(n).minus(o))));return t}function ar(e,t,r,i,n){var s,a,o,l,u=1,c=e.precision,d=Math.ceil(c/A);for(T=!1,l=r.times(r),o=new e(i);;){if(a=Q(o.times(l),new e(t++*t++),c,1),o=n?i.plus(a):i.minus(a),i=Q(a.times(l),new e(t++*t++),c,1),a=o.plus(i),a.d[d]!==void 0){for(s=d;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=i,i=a,a=s,u++}return T=!0,a.d.length=d+1,a}function Xi(e,t){for(var r=e;--t;)r*=e;return r}function zc(e,t){var r,i=t.s<0,n=We(e,e.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return lt=i?4:1,t;if(r=t.divToInt(n),r.isZero())lt=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(s))return lt=Eu(r)?i?2:3:i?4:1,t;lt=Eu(r)?i?1:4:i?3:2}return t.minus(n).abs()}function ga(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor,m=r!==void 0;if(m?(Re(r,1,At),i===void 0?i=p.rounding:Re(i,0,8)):(r=p.precision,i=p.rounding),!e.isFinite())c=Kc(e);else{for(c=Xe(e),a=c.indexOf("."),m?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,a>=0&&(c=c.replace(".",""),f=new p(1),f.e=c.length-a,f.d=Ci(Xe(f),10,n),f.e=f.d.length),d=Ci(c,10,n),s=l=d.length;d[--l]==0;)d.pop();if(!d[0])c=m?"0p+0":"0";else{if(a<0?s--:(e=new p(e),e.d=d,e.e=s,e=Q(e,f,r,i,0,n),d=e.d,s=e.e,u=Mc),a=d[r],o=n/2,u=u||d[r+1]!==void 0,u=i<4?(a!==void 0||u)&&(i===0||i===(e.s<0?3:2)):a>o||a===o&&(i===4||u||i===6&&d[r-1]&1||i===(e.s<0?8:7)),d.length=r,u)for(;++d[--r]>n-1;)d[r]=0,r||(++s,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,c="";a<l;a++)c+=Bs.charAt(d[a]);if(m){if(l>1)if(t==16||t==8){for(a=t==16?4:3,--l;l%a;l++)c+="0";for(d=Ci(c,n,t),l=d.length;!d[l-1];--l);for(a=1,c="1.";a<l;a++)c+=Bs.charAt(d[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function ku(e,t){if(e.length>t)return e.length=t,!0}function bx(e){return new this(e).abs()}function xx(e){return new this(e).acos()}function vx(e){return new this(e).acosh()}function wx(e,t){return new this(e).plus(t)}function Sx(e){return new this(e).asin()}function Ex(e){return new this(e).asinh()}function kx(e){return new this(e).atan()}function Ax(e){return new this(e).atanh()}function Rx(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,s=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=We(this,s,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?We(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=We(this,s,1).times(.5),r.s=e.s):t.s<0?(this.precision=s,this.rounding=1,r=this.atan(Q(e,t,s,1)),t=We(this,s,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Q(e,t,s,1)),r}function Tx(e){return new this(e).cbrt()}function Ix(e){return S(e=new this(e),e.e+1,2)}function Ox(e,t,r){return new this(e).clamp(t,r)}function _x(e){if(!e||typeof e!="object")throw Error(Wi+"Object expected");var t,r,i,n=e.defaults===!0,s=["precision",1,At,"rounding",0,8,"toExpNeg",-ir,0,"toExpPos",0,ir,"maxE",0,ir,"minE",-ir,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],n&&(this[r]=Gs[r]),(i=e[r])!==void 0)if(he(i)===i&&i>=s[t+1]&&i<=s[t+2])this[r]=i;else throw Error(kt+r+": "+i);if(r="crypto",n&&(this[r]=Gs[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error($c);else this[r]=!1;else throw Error(kt+r+": "+i);return this}function qx(e){return new this(e).cos()}function Cx(e){return new this(e).cosh()}function Jc(e){var t,r,i;function n(s){var a,o,l,u=this;if(!(u instanceof n))return new n(s);if(u.constructor=n,Au(s)){u.s=s.s,T?!s.d||s.e>n.maxE?(u.e=NaN,u.d=null):s.e<n.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;T?a>n.maxE?(u.e=NaN,u.d=null):a<n.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Pi(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),Bc.test(s)?Pi(u,s):gx(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,Pi(u,s.toString());throw Error(kt+s)}if(n.prototype=y,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=_x,n.clone=Jc,n.isDecimal=Au,n.abs=bx,n.acos=xx,n.acosh=vx,n.add=wx,n.asin=Sx,n.asinh=Ex,n.atan=kx,n.atanh=Ax,n.atan2=Rx,n.cbrt=Tx,n.ceil=Ix,n.clamp=Ox,n.cos=qx,n.cosh=Cx,n.div=Px,n.exp=Nx,n.floor=Dx,n.hypot=Ux,n.ln=Lx,n.log=Fx,n.log10=jx,n.log2=Mx,n.max=$x,n.min=Vx,n.mod=Bx,n.mul=Gx,n.pow=Hx,n.random=Qx,n.round=Kx,n.sign=zx,n.sin=Jx,n.sinh=Wx,n.sqrt=Yx,n.sub=Xx,n.sum=Zx,n.tan=ev,n.tanh=tv,n.trunc=rv,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function Px(e,t){return new this(e).div(t)}function Nx(e){return new this(e).exp()}function Dx(e){return S(e=new this(e),e.e+1,3)}function Ux(){var e,t,r=new this(0);for(T=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return T=!0,new this(1/0);r=t}return T=!0,r.sqrt()}function Au(e){return e instanceof zt||e&&e.toStringTag===Vc||!1}function Lx(e){return new this(e).ln()}function Fx(e,t){return new this(e).log(t)}function Mx(e){return new this(e).log(2)}function jx(e){return new this(e).log(10)}function $x(){return Qc(this,arguments,-1)}function Vx(){return Qc(this,arguments,1)}function Bx(e,t){return new this(e).mod(t)}function Gx(e,t){return new this(e).mul(t)}function Hx(e,t){return new this(e).pow(t)}function Qx(e){var t,r,i,n,s=0,a=new this(1),o=[];if(e===void 0?e=this.precision:Re(e,1,At),i=Math.ceil(e/A),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));s<i;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);s<i;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(n%1e7),s+=4);s=i/4}else throw Error($c);else for(;s<i;)o[s++]=Math.random()*1e7|0;for(i=o[--s],e%=A,i&&e&&(n=le(10,A-e),o[s]=(i/n|0)*n);o[s]===0;s--)o.pop();if(s<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=A)o.shift();for(i=1,n=o[0];n>=10;n/=10)i++;i<A&&(r-=A-i)}return a.e=r,a.d=o,a}function Kx(e){return S(e=new this(e),e.e+1,this.rounding)}function zx(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Jx(e){return new this(e).sin()}function Wx(e){return new this(e).sinh()}function Yx(e){return new this(e).sqrt()}function Xx(e,t){return new this(e).sub(t)}function Zx(){var e=0,t=arguments,r=new this(t[e]);for(T=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return T=!0,S(r,this.precision,this.rounding)}function ev(e){return new this(e).tan()}function tv(e){return new this(e).tanh()}function rv(e){return S(e=new this(e),e.e+1,1)}y[Symbol.for("nodejs.util.inspect.custom")]=y.toString;y[Symbol.toStringTag]="Decimal";var zt=y.constructor=Jc(Gs);$i=new zt($i);Vi=new zt(Vi);var Zi=zt;function ya(e){return zt.isDecimal(e)?!0:e!==null&&typeof e=="object"&&typeof e.s=="number"&&typeof e.e=="number"&&typeof e.toFixed=="function"&&Array.isArray(e.d)}var Wc={};Kt(Wc,{ModelAction:()=>en,datamodelEnumToSchemaEnum:()=>iv});function iv(e){return{name:e.name,values:e.values.map(t=>t.name)}}var en=(e=>(e.findUnique="findUnique",e.findUniqueOrThrow="findUniqueOrThrow",e.findFirst="findFirst",e.findFirstOrThrow="findFirstOrThrow",e.findMany="findMany",e.create="create",e.createMany="createMany",e.createManyAndReturn="createManyAndReturn",e.update="update",e.updateMany="updateMany",e.updateManyAndReturn="updateManyAndReturn",e.upsert="upsert",e.delete="delete",e.deleteMany="deleteMany",e.groupBy="groupBy",e.count="count",e.aggregate="aggregate",e.findRaw="findRaw",e.aggregateRaw="aggregateRaw",e))(en||{}),nv=H(oc()),sv=H(require("node:fs")),av={keyword:Gt,entity:Gt,value:e=>$e(Pr(e)),punctuation:Pr,directive:Gt,function:Gt,variable:e=>$e(Pr(e)),string:e=>$e(Mr(e)),boolean:Kr,number:Gt,comment:oa},ov=e=>e,Ii={},lv=0,C={manual:Ii.Prism&&Ii.Prism.manual,disableWorkerMessageHandler:Ii.Prism&&Ii.Prism.disableWorkerMessageHandler,util:{encode:function(e){if(e instanceof ze){let t=e;return new ze(t.type,C.util.encode(t.content),t.alias)}else return Array.isArray(e)?e.map(C.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++lv}),e.__id},clone:function e(t,r){let i,n,s=C.util.type(t);switch(r=r||{},s){case"Object":if(n=C.util.objId(t),r[n])return r[n];i={},r[n]=i;for(let a in t)t.hasOwnProperty(a)&&(i[a]=e(t[a],r));return i;case"Array":return n=C.util.objId(t),r[n]?r[n]:(i=[],r[n]=i,t.forEach(function(a,o){i[o]=e(a,r)}),i);default:return t}}},languages:{extend:function(e,t){let r=C.util.clone(C.languages[e]);for(let i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){i=i||C.languages;let n=i[e],s={};for(let o in n)if(n.hasOwnProperty(o)){if(o==t)for(let l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);r.hasOwnProperty(o)||(s[o]=n[o])}let a=i[e];return i[e]=s,C.languages.DFS(C.languages,function(o,l){l===a&&o!=e&&(this[o]=s)}),s},DFS:function e(t,r,i,n){n=n||{};let s=C.util.objId;for(let a in t)if(t.hasOwnProperty(a)){r.call(t,a,t[a],i||a);let o=t[a],l=C.util.type(o);l==="Object"&&!n[s(o)]?(n[s(o)]=!0,e(o,r,null,n)):l==="Array"&&!n[s(o)]&&(n[s(o)]=!0,e(o,r,a,n))}}},plugins:{},highlight:function(e,t,r){let i={code:e,grammar:t,language:r};return C.hooks.run("before-tokenize",i),i.tokens=C.tokenize(i.code,i.grammar),C.hooks.run("after-tokenize",i),ze.stringify(C.util.encode(i.tokens),i.language)},matchGrammar:function(e,t,r,i,n,s,a){for(let g in r){if(!r.hasOwnProperty(g)||!r[g])continue;if(g==a)return;let E=r[g];E=C.util.type(E)==="Array"?E:[E];for(let O=0;O<E.length;++O){let q=E[O],P=q.inside,B=!!q.lookbehind,ke=!!q.greedy,R=0,b=q.alias;if(ke&&!q.pattern.global){let k=q.pattern.toString().match(/[imuy]*$/)[0];q.pattern=RegExp(q.pattern.source,k+"g")}q=q.pattern||q;for(let k=i,I=n;k<t.length;I+=t[k].length,++k){let V=t[k];if(t.length>e.length)return;if(V instanceof ze)continue;if(ke&&k!=t.length-1){q.lastIndex=I;var d=q.exec(e);if(!d)break;var c=d.index+(B?d[1].length:0),f=d.index+d[0].length,o=k,l=I;for(let L=t.length;o<L&&(l<f||!t[o].type&&!t[o-1].greedy);++o)l+=t[o].length,c>=l&&(++k,I=l);if(t[k]instanceof ze)continue;u=o-k,V=e.slice(I,l),d.index-=I}else{q.lastIndex=0;var d=q.exec(V),u=1}if(!d){if(s)break;continue}B&&(R=d[1]?d[1].length:0);var c=d.index+R,d=d[0].slice(R),f=c+d.length,p=V.slice(0,c),m=V.slice(f);let F=[k,u];p&&(++k,I+=p.length,F.push(p));let N=new ze(g,P?C.tokenize(d,P):d,b,d,ke);if(F.push(N),m&&F.push(m),Array.prototype.splice.apply(t,F),u!=1&&C.matchGrammar(e,t,r,k,I,!0,g),s)break}}}},tokenize:function(e,t){let r=[e],i=t.rest;if(i){for(let n in i)t[n]=i[n];delete t.rest}return C.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){let r=C.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){let r=C.hooks.all[e];if(!(!r||!r.length))for(var i=0,n;n=r[i++];)n(t)}},Token:ze};C.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};C.languages.javascript=C.languages.extend("clike",{"class-name":[C.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});C.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;C.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:C.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:C.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:C.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:C.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});C.languages.markup&&C.languages.markup.tag.addInlined("script","javascript");C.languages.js=C.languages.javascript;C.languages.typescript=C.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});C.languages.ts=C.languages.typescript;function ze(e,t,r,i,n){this.type=e,this.content=t,this.alias=r,this.length=(i||"").length|0,this.greedy=!!n}ze.stringify=function(e,t){return typeof e=="string"?e:Array.isArray(e)?e.map(function(r){return ze.stringify(r,t)}).join(""):uv(e.type)(e.content)};function uv(e){return av[e]||ov}function cv(e){return dv(e,C.languages.javascript)}function dv(e,t){return C.tokenize(e,t).map(r=>ze.stringify(r)).join("")}function fv(e){return $1(e)}var pv=class Vt{firstLineNumber;lines;static read(t){let r;try{r=sv.default.readFileSync(t,"utf-8")}catch{return null}return Vt.fromContent(r)}static fromContent(t){let r=t.split(/\r?\n/);return new Vt(1,r)}constructor(t,r){this.firstLineNumber=t,this.lines=r}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(t,r){if(t<this.firstLineNumber||t>this.lines.length+this.firstLineNumber)return this;let i=t-this.firstLineNumber,n=[...this.lines];return n[i]=r(n[i]),new Vt(this.firstLineNumber,n)}mapLines(t){return new Vt(this.firstLineNumber,this.lines.map((r,i)=>t(r,this.firstLineNumber+i)))}lineAt(t){return this.lines[t-this.firstLineNumber]}prependSymbolAt(t,r){return this.mapLines((i,n)=>n===t?`${r} ${i}`:`  ${i}`)}slice(t,r){let i=this.lines.slice(t-1,r).join(`
`);return new Vt(t,fv(i).split(`
`))}highlight(){let t=cv(this.toString());return new Vt(this.firstLineNumber,t.split(`
`))}toString(){return this.lines.join(`
`)}},hv={red:Ht,gray:oa,dim:Qr,bold:$e,underline:Ce,highlightSource:e=>e.highlight()},mv={red:e=>e,gray:e=>e,dim:e=>e,bold:e=>e,underline:e=>e,highlightSource:e=>e};function gv({message:e,originalMethod:t,isPanic:r,callArguments:i}){return{functionName:`prisma.${t}()`,message:e,isPanic:r??!1,callArguments:i}}function yv({callsite:e,message:t,originalMethod:r,isPanic:i,callArguments:n},s){let a=gv({message:t,originalMethod:r,isPanic:i,callArguments:n});if(!e||typeof window<"u"||process.env.NODE_ENV==="production")return a;let o=e.getLocation();if(!o||!o.lineNumber||!o.columnNumber)return a;let l=Math.max(1,o.lineNumber-3),u=pv.read(o.fileName)?.slice(l,o.lineNumber),c=u?.lineAt(o.lineNumber);if(u&&c){let d=xv(c),f=bv(c);if(!f)return a;a.functionName=`${f.code})`,a.location=o,i||(u=u.mapLineAt(o.lineNumber,m=>m.slice(0,f.openingBraceIndex))),u=s.highlightSource(u);let p=String(u.lastLineNumber).length;if(a.contextLines=u.mapLines((m,g)=>s.gray(String(g).padStart(p))+" "+m).mapLines(m=>s.dim(m)).prependSymbolAt(o.lineNumber,s.bold(s.red("\u2192"))),n){let m=d+p+1;m+=2,a.callArguments=(0,nv.default)(n,m).slice(m)}}return a}function bv(e){let t=Object.keys(en).join("|"),r=new RegExp(String.raw`\.(${t})\(`).exec(e);if(r){let i=r.index+r[0].length,n=e.lastIndexOf(" ",r.index)+1;return{code:e.slice(n,i),openingBraceIndex:i}}return null}function xv(e){let t=0;for(let r=0;r<e.length;r++){if(e.charAt(r)!==" ")return t;t++}return t}function vv({functionName:e,location:t,message:r,isPanic:i,contextLines:n,callArguments:s},a){let o=[""],l=t?" in":":";if(i?(o.push(a.red(`Oops, an unknown error occurred! This is ${a.bold("on us")}, you did nothing wrong.`)),o.push(a.red(`It occurred in the ${a.bold(`\`${e}\``)} invocation${l}`))):o.push(a.red(`Invalid ${a.bold(`\`${e}\``)} invocation${l}`)),t&&o.push(a.underline(wv(t))),n){o.push("");let u=[n.toString()];s&&(u.push(s),u.push(a.dim(")"))),o.push(u.join("")),s&&o.push("")}else o.push(""),s&&o.push(s),o.push("");return o.push(r),o.join(`
`)}function wv(e){let t=[e.fileName];return e.lineNumber&&t.push(String(e.lineNumber)),e.columnNumber&&t.push(String(e.columnNumber)),t.join(":")}function Yc(e){let t=e.showColors?hv:mv,r;return r=yv(e,t),vv(r,t)}var Sv=H(lc());function Ev(e,t,r){let i=Xc(e),n=kv(i),s=Rv(n);s?nd(s,t,r):t.addErrorMessage(()=>"Unknown error")}function Xc(e){return e.errors.flatMap(t=>t.kind==="Union"?Xc(t):[t])}function kv(e){let t=new Map,r=[];for(let i of e){if(i.kind!=="InvalidArgumentType"){r.push(i);continue}let n=`${i.selectionPath.join(".")}:${i.argumentPath.join(".")}`,s=t.get(n);s?t.set(n,{...i,argument:{...i.argument,typeNames:Av(s.argument.typeNames,i.argument.typeNames)}}):t.set(n,i)}return r.push(...t.values()),r}function Av(e,t){return[...new Set(e.concat(t))]}function Rv(e){return ox(e,(t,r)=>{let i=Ru(t),n=Ru(r);return i!==n?i-n:Tu(t)-Tu(r)})}function Ru(e){let t=0;return Array.isArray(e.selectionPath)&&(t+=e.selectionPath.length),Array.isArray(e.argumentPath)&&(t+=e.argumentPath.length),t}function Tu(e){switch(e.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var Ze=class{constructor(e,t){this.name=e,this.value=t}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(e){let{colors:{green:t}}=e.context;e.addMarginSymbol(t(this.isRequired?"+":"?")),e.write(t(this.name)),this.isRequired||e.write(t("?")),e.write(t(": ")),typeof this.value=="string"?e.write(t(this.value)):e.write(this.value)}};eb();var Zc=class{constructor(e=0,t){this.context=t,this.currentIndent=e}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(e){return typeof e=="string"?this.currentLine+=e:e.write(this),this}writeJoined(e,t,r=(i,n)=>n.write(i)){let i=t.length-1;for(let n=0;n<t.length;n++)r(t[n],this),n!==i&&this.write(e);return this}writeLine(e){return this.write(e).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let e=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,e?.(),this}withIndent(e){return this.indent(),e(this),this.unindent(),this}afterNextNewline(e){return this.afterNextNewLineCallback=e,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(e){return this.marginSymbol=e,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let e=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+e.slice(1):e}};Zy();var Tv=class{constructor(e){this.value=e}write(e){e.write(this.value)}markAsError(){this.value.markAsError()}},Oi=e=>e,ed={bold:Oi,red:Oi,green:Oi,dim:Oi,enabled:!1},Iv={bold:$e,red:Ht,green:Mr,dim:Qr,enabled:!0},ba={write(e){e.writeLine(",")}},tn=class{constructor(e){this.contents=e}isUnderlined=!1;color=e=>e;underline(){return this.isUnderlined=!0,this}setColor(e){return this.color=e,this}write(e){let t=e.getCurrentLineLength();e.write(this.color(this.contents)),this.isUnderlined&&e.afterNextNewline(()=>{e.write(" ".repeat(t)).writeLine(this.color("~".repeat(this.contents.length)))})}},xa=class{hasError=!1;markAsError(){return this.hasError=!0,this}},td=class extends xa{items=[];addItem(e){return this.items.push(new Tv(e)),this}getField(e){return this.items[e]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(e=>e.value.getPrintWidth()))+2}write(e){if(this.items.length===0){this.writeEmpty(e);return}this.writeWithItems(e)}writeEmpty(e){let t=new tn("[]");this.hasError&&t.setColor(e.context.colors.red).underline(),e.write(t)}writeWithItems(e){let{colors:t}=e.context;e.writeLine("[").withIndent(()=>e.writeJoined(ba,this.items).newLine()).write("]"),this.hasError&&e.afterNextNewline(()=>{e.writeLine(t.red("~".repeat(this.getPrintWidth())))})}asObject(){}},rd=class Ni extends xa{fields={};suggestions=[];addField(t){this.fields[t.name]=t}addSuggestion(t){this.suggestions.push(t)}getField(t){return this.fields[t]}getDeepField(t){let[r,...i]=t,n=this.getField(r);if(!n)return;let s=n;for(let a of i){let o;if(s.value instanceof Ni?o=s.value.getField(a):s.value instanceof td&&(o=s.value.getField(Number(a))),!o)return;s=o}return s}getDeepFieldValue(t){return t.length===0?this:this.getDeepField(t)?.value}hasField(t){return!!this.getField(t)}removeAllFields(){this.fields={}}removeField(t){delete this.fields[t]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(t){return this.getField(t)?.value}getDeepSubSelectionValue(t){let r=this;for(let i of t){if(!(r instanceof Ni))return;let n=r.getSubSelectionValue(i);if(!n)return;r=n}return r}getDeepSelectionParent(t){let r=this.getSelectionParent();if(!r)return;let i=r;for(let n of t){let s=i.value.getFieldValue(n);if(!s||!(s instanceof Ni))return;let a=s.getSelectionParent();if(!a)return;i=a}return i}getSelectionParent(){let t=this.getField("select")?.value.asObject();if(t)return{kind:"select",value:t};let r=this.getField("include")?.value.asObject();if(r)return{kind:"include",value:r}}getSubSelectionValue(t){return this.getSelectionParent()?.value.fields[t].value}getPrintWidth(){let t=Object.values(this.fields);return t.length==0?2:Math.max(...t.map(r=>r.getPrintWidth()))+2}write(t){let r=Object.values(this.fields);if(r.length===0&&this.suggestions.length===0){this.writeEmpty(t);return}this.writeWithContents(t,r)}asObject(){return this}writeEmpty(t){let r=new tn("{}");this.hasError&&r.setColor(t.context.colors.red).underline(),t.write(r)}writeWithContents(t,r){t.writeLine("{").withIndent(()=>{t.writeJoined(ba,[...r,...this.suggestions]).newLine()}),t.write("}"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(t.context.colors.red("~".repeat(this.getPrintWidth())))})}},Ae=class extends xa{constructor(e){super(),this.text=e}getPrintWidth(){return this.text.length}write(e){let t=new tn(this.text);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t)}asObject(){}},id=class{fields=[];addField(e,t){return this.fields.push({write(r){let{green:i,dim:n}=r.context.colors;r.write(i(n(`${e}: ${t}`))).addMarginSymbol(i(n("+")))}}),this}write(e){let{colors:{green:t}}=e.context;e.writeLine(t("{")).withIndent(()=>{e.writeJoined(ba,this.fields).newLine()}).write(t("}")).addMarginSymbol(t("+"))}};function nd(e,t,r){switch(e.kind){case"MutuallyExclusiveFields":Ov(e,t);break;case"IncludeOnScalar":_v(e,t);break;case"EmptySelection":qv(e,t,r);break;case"UnknownSelectionField":Dv(e,t);break;case"InvalidSelectionValue":Uv(e,t);break;case"UnknownArgument":Lv(e,t);break;case"UnknownInputField":Fv(e,t);break;case"RequiredArgumentMissing":Mv(e,t);break;case"InvalidArgumentType":jv(e,t);break;case"InvalidArgumentValue":$v(e,t);break;case"ValueTooLarge":Vv(e,t);break;case"SomeFieldsMissing":Bv(e,t);break;case"TooManyFieldsGiven":Gv(e,t);break;case"Union":Ev(e,t,r);break;default:throw new Error("not implemented: "+e.kind)}}function Ov(e,t){let r=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();r&&(r.getField(e.firstField)?.markAsError(),r.getField(e.secondField)?.markAsError()),t.addErrorMessage(i=>`Please ${i.bold("either")} use ${i.green(`\`${e.firstField}\``)} or ${i.green(`\`${e.secondField}\``)}, but ${i.red("not both")} at the same time.`)}function _v(e,t){let[r,i]=or(e.selectionPath),n=e.outputType,s=t.arguments.getDeepSelectionParent(r)?.value;if(s&&(s.getField(i)?.markAsError(),n))for(let a of n.fields)a.isRelation&&s.addSuggestion(new Ze(a.name,"true"));t.addErrorMessage(a=>{let o=`Invalid scalar field ${a.red(`\`${i}\``)} for ${a.bold("include")} statement`;return n?o+=` on model ${a.bold(n.name)}. ${Wr(a)}`:o+=".",o+=`
Note that ${a.bold("include")} statements only accept relation fields.`,o})}function qv(e,t,r){let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getField("omit")?.value.asObject();if(n){Cv(e,t,n);return}if(i.hasField("select")){Pv(e,t);return}}if(r?.[Ji(e.outputType.name)]){Nv(e,t);return}t.addErrorMessage(()=>`Unknown field at "${e.selectionPath.join(".")} selection"`)}function Cv(e,t,r){r.removeAllFields();for(let i of e.outputType.fields)r.addSuggestion(new Ze(i.name,"false"));t.addErrorMessage(i=>`The ${i.red("omit")} statement includes every field of the model ${i.bold(e.outputType.name)}. At least one field must be included in the result`)}function Pv(e,t){let r=e.outputType,i=t.arguments.getDeepSelectionParent(e.selectionPath)?.value,n=i?.isEmpty()??!1;i&&(i.removeAllFields(),od(i,r)),t.addErrorMessage(s=>n?`The ${s.red("`select`")} statement for type ${s.bold(r.name)} must not be empty. ${Wr(s)}`:`The ${s.red("`select`")} statement for type ${s.bold(r.name)} needs ${s.bold("at least one truthy value")}.`)}function Nv(e,t){let r=new id;for(let n of e.outputType.fields)n.isRelation||r.addField(n.name,"false");let i=new Ze("omit",r).makeRequired();if(e.selectionPath.length===0)t.arguments.addSuggestion(i);else{let[n,s]=or(e.selectionPath),a=t.arguments.getDeepSelectionParent(n)?.value.asObject()?.getField(s);if(a){let o=a?.value.asObject()??new rd;o.addSuggestion(i),a.value=o}}t.addErrorMessage(n=>`The global ${n.red("omit")} configuration excludes every field of the model ${n.bold(e.outputType.name)}. At least one field must be included in the result`)}function Dv(e,t){let r=ld(e.selectionPath,t);if(r.parentKind!=="unknown"){r.field.markAsError();let i=r.parent;switch(r.parentKind){case"select":od(i,e.outputType);break;case"include":Hv(i,e.outputType);break;case"omit":Qv(i,e.outputType);break}}t.addErrorMessage(i=>{let n=[`Unknown field ${i.red(`\`${r.fieldName}\``)}`];return r.parentKind!=="unknown"&&n.push(`for ${i.bold(r.parentKind)} statement`),n.push(`on model ${i.bold(`\`${e.outputType.name}\``)}.`),n.push(Wr(i)),n.join(" ")})}function Uv(e,t){let r=ld(e.selectionPath,t);r.parentKind!=="unknown"&&r.field.value.markAsError(),t.addErrorMessage(i=>`Invalid value for selection field \`${i.red(r.fieldName)}\`: ${e.underlyingError}`)}function Lv(e,t){let r=e.argumentPath[0],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&(i.getField(r)?.markAsError(),Kv(i,e.arguments)),t.addErrorMessage(n=>sd(n,r,e.arguments.map(s=>s.name)))}function Fv(e,t){let[r,i]=or(e.argumentPath),n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){n.getDeepField(e.argumentPath)?.markAsError();let s=n.getDeepFieldValue(r)?.asObject();s&&ud(s,e.inputType)}t.addErrorMessage(s=>sd(s,i,e.inputType.fields.map(a=>a.name)))}function sd(e,t,r){let i=[`Unknown argument \`${e.red(t)}\`.`],n=Jv(t,r);return n&&i.push(`Did you mean \`${e.green(n)}\`?`),r.length>0&&i.push(Wr(e)),i.join(" ")}function Mv(e,t){let r;t.addErrorMessage(l=>r?.value instanceof Ae&&r.value.text==="null"?`Argument \`${l.green(s)}\` must not be ${l.red("null")}.`:`Argument \`${l.green(s)}\` is missing.`);let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(!i)return;let[n,s]=or(e.argumentPath),a=new id,o=i.getDeepFieldValue(n)?.asObject();if(o){if(r=o.getField(s),r&&o.removeField(s),e.inputTypes.length===1&&e.inputTypes[0].kind==="object"){for(let l of e.inputTypes[0].fields)a.addField(l.name,l.typeNames.join(" | "));o.addSuggestion(new Ze(s,a).makeRequired())}else{let l=e.inputTypes.map(ad).join(" | ");o.addSuggestion(new Ze(s,l).makeRequired())}if(e.dependentArgumentPath){i.getDeepField(e.dependentArgumentPath)?.markAsError();let[,l]=or(e.dependentArgumentPath);t.addErrorMessage(u=>`Argument \`${u.green(s)}\` is required because argument \`${u.green(l)}\` was provided.`)}}}function ad(e){return e.kind==="list"?`${ad(e.elementType)}[]`:e.name}function jv(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=rn("or",e.argument.typeNames.map(a=>n.green(a)));return`Argument \`${n.bold(r)}\`: Invalid value provided. Expected ${s}, provided ${n.red(e.inferredType)}.`})}function $v(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=[`Invalid value for argument \`${n.bold(r)}\``];if(e.underlyingError&&s.push(`: ${e.underlyingError}`),s.push("."),e.argument.typeNames.length>0){let a=rn("or",e.argument.typeNames.map(o=>n.green(o)));s.push(` Expected ${a}.`)}return s.join("")})}function Vv(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n;if(i){let s=i.getDeepField(e.argumentPath)?.value;s?.markAsError(),s instanceof Ae&&(n=s.text)}t.addErrorMessage(s=>{let a=["Unable to fit value"];return n&&a.push(s.red(n)),a.push(`into a 64-bit signed integer for field \`${s.bold(r)}\``),a.join(" ")})}function Bv(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getDeepFieldValue(e.argumentPath)?.asObject();n&&ud(n,e.inputType)}t.addErrorMessage(n=>{let s=[`Argument \`${n.bold(r)}\` of type ${n.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1?e.constraints.requiredFields?s.push(`${n.green("at least one of")} ${rn("or",e.constraints.requiredFields.map(a=>`\`${n.bold(a)}\``))} arguments.`):s.push(`${n.green("at least one")} argument.`):s.push(`${n.green(`at least ${e.constraints.minFieldCount}`)} arguments.`),s.push(Wr(n)),s.join(" ")})}function Gv(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n=[];if(i){let s=i.getDeepFieldValue(e.argumentPath)?.asObject();s&&(s.markAsError(),n=Object.keys(s.getFields()))}t.addErrorMessage(s=>{let a=[`Argument \`${s.bold(r)}\` of type ${s.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1&&e.constraints.maxFieldCount==1?a.push(`${s.green("exactly one")} argument,`):e.constraints.maxFieldCount==1?a.push(`${s.green("at most one")} argument,`):a.push(`${s.green(`at most ${e.constraints.maxFieldCount}`)} arguments,`),a.push(`but you provided ${rn("and",n.map(o=>s.red(o)))}. Please choose`),e.constraints.maxFieldCount===1?a.push("one."):a.push(`${e.constraints.maxFieldCount}.`),a.join(" ")})}function od(e,t){for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new Ze(r.name,"true"))}function Hv(e,t){for(let r of t.fields)r.isRelation&&!e.hasField(r.name)&&e.addSuggestion(new Ze(r.name,"true"))}function Qv(e,t){for(let r of t.fields)!e.hasField(r.name)&&!r.isRelation&&e.addSuggestion(new Ze(r.name,"true"))}function Kv(e,t){for(let r of t)e.hasField(r.name)||e.addSuggestion(new Ze(r.name,r.typeNames.join(" | ")))}function ld(e,t){let[r,i]=or(e),n=t.arguments.getDeepSubSelectionValue(r)?.asObject();if(!n)return{parentKind:"unknown",fieldName:i};let s=n.getFieldValue("select")?.asObject(),a=n.getFieldValue("include")?.asObject(),o=n.getFieldValue("omit")?.asObject(),l=s?.getField(i);return s&&l?{parentKind:"select",parent:s,field:l,fieldName:i}:(l=a?.getField(i),a&&l?{parentKind:"include",field:l,parent:a,fieldName:i}:(l=o?.getField(i),o&&l?{parentKind:"omit",field:l,parent:o,fieldName:i}:{parentKind:"unknown",fieldName:i}))}function ud(e,t){if(t.kind==="object")for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new Ze(r.name,r.typeNames.join(" | ")))}function or(e){let t=[...e],r=t.pop();if(!r)throw new Error("unexpected empty path");return[t,r]}function Wr({green:e,enabled:t}){return"Available options are "+(t?`listed in ${e("green")}`:"marked with ?")+"."}function rn(e,t){if(t.length===1)return t[0];let r=[...t],i=r.pop();return`${r.join(", ")} ${e} ${i}`}var zv=3;function Jv(e,t){let r=1/0,i;for(let n of t){let s=(0,Sv.default)(e,n);s>zv||s<r&&(r=s,i=n)}return i}var cd=class{modelName;name;typeName;isList;isEnum;constructor(e,t,r,i,n){this.modelName=e,this.name=t,this.typeName=r,this.isList=i,this.isEnum=n}_toGraphQLInputType(){let e=this.isList?"List":"",t=this.isEnum?"Enum":"";return`${e}${t}${this.typeName}FieldRefInput<${this.modelName}>`}};function va(e){return e instanceof cd}var Di=Symbol(),ws=new WeakMap,nn=class{constructor(e){e===Di?ws.set(this,`Prisma.${this._getName()}`):ws.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return ws.get(this)}},wa=class extends nn{_getNamespace(){return"NullTypes"}},Ks=class extends wa{#e};Sa(Ks,"DbNull");var zs=class extends wa{#e};Sa(zs,"JsonNull");var Js=class extends wa{#e};Sa(Js,"AnyNull");var dd={classes:{DbNull:Ks,JsonNull:zs,AnyNull:Js},instances:{DbNull:new Ks(Di),JsonNull:new zs(Di),AnyNull:new Js(Di)}};function Sa(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Iu=": ",Wv=class{constructor(e,t){this.name=e,this.value=t}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+Iu.length}write(e){let t=new tn(this.name);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t).write(Iu).write(this.value)}},Yv=class{arguments;errorMessages=[];constructor(e){this.arguments=e}write(e){e.write(this.arguments)}addErrorMessage(e){this.errorMessages.push(e)}renderAllMessages(e){return this.errorMessages.map(t=>t(e)).join(`
`)}};function Ea(e){return new Yv(fd(e))}function fd(e){let t=new rd;for(let[r,i]of Object.entries(e)){let n=new Wv(r,pd(i));t.addField(n)}return t}function pd(e){if(typeof e=="string")return new Ae(JSON.stringify(e));if(typeof e=="number"||typeof e=="boolean")return new Ae(String(e));if(typeof e=="bigint")return new Ae(`${e}n`);if(e===null)return new Ae("null");if(e===void 0)return new Ae("undefined");if(ya(e))return new Ae(`new Prisma.Decimal("${e.toFixed()}")`);if(e instanceof Uint8Array)return Buffer.isBuffer(e)?new Ae(`Buffer.alloc(${e.byteLength})`):new Ae(`new Uint8Array(${e.byteLength})`);if(e instanceof Date){let t=Fc(e)?e.toISOString():"Invalid Date";return new Ae(`new Date("${t}")`)}return e instanceof nn?new Ae(`Prisma.${e._getName()}`):va(e)?new Ae(`prisma.${Ji(e.modelName)}.$fields.${e.name}`):Array.isArray(e)?Xv(e):typeof e=="object"?fd(e):new Ae(Object.prototype.toString.call(e))}function Xv(e){let t=new td;for(let r of e)t.addItem(pd(r));return t}function hd(e,t){let r=t==="pretty"?Iv:ed,i=e.renderAllMessages(r),n=new Zc(0,{colors:r}).write(e).toString();return{message:i,args:n}}function md({args:e,errors:t,errorFormat:r,callsite:i,originalMethod:n,clientVersion:s,globalOmit:a}){let o=Ea(e);for(let d of t)nd(d,o,a);let{message:l,args:u}=hd(o,r),c=Yc({message:l,callsite:i,originalMethod:n,showColors:r==="pretty",callArguments:u});throw new ot(c,{clientVersion:s})}function Yr(e){return e.replace(/^./,t=>t.toLowerCase())}function Zv(e,t,r){let i=Yr(r);return!t.result||!(t.result.$allModels||t.result[i])?e:ew({...e,...Ou(t.name,e,t.result.$allModels),...Ou(t.name,e,t.result[i])})}function ew(e){let t=new Ur,r=(i,n)=>t.getOrCreate(i,()=>n.has(i)?[i]:(n.add(i),e[i]?e[i].needs.flatMap(s=>r(s,n)):[i]));return Dc(e,i=>({...i,needs:r(i.name,new Set)}))}function Ou(e,t,r){return r?Dc(r,({needs:i,compute:n},s)=>({name:s,needs:i?Object.keys(i).filter(a=>i[a]):[],compute:tw(t,s,n)})):{}}function tw(e,t,r){let i=e?.[t]?.compute;return i?n=>r({...n,[t]:i(n)}):r}function rw(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(e[i.name])for(let n of i.needs)r[n]=!0;return r}function iw(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(!e[i.name])for(let n of i.needs)delete r[n];return r}var _u=class{constructor(e,t){this.extension=e,this.previous=t}computedFieldsCache=new Ur;modelExtensionsCache=new Ur;queryCallbacksCache=new Ur;clientExtensions=Vs(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=Vs(()=>{let e=this.previous?.getAllBatchQueryCallbacks()??[],t=this.extension.query?.$__internalBatch;return t?e.concat(t):e});getAllComputedFields(e){return this.computedFieldsCache.getOrCreate(e,()=>Zv(this.previous?.getAllComputedFields(e),this.extension,e))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(e){return this.modelExtensionsCache.getOrCreate(e,()=>{let t=Yr(e);return!this.extension.model||!(this.extension.model[t]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(e):{...this.previous?.getAllModelExtensions(e),...this.extension.model.$allModels,...this.extension.model[t]}})}getAllQueryCallbacks(e,t){return this.queryCallbacksCache.getOrCreate(`${e}:${t}`,()=>{let r=this.previous?.getAllQueryCallbacks(e,t)??[],i=[],n=this.extension.query;return!n||!(n[e]||n.$allModels||n[t]||n.$allOperations)?r:(n[e]!==void 0&&(n[e][t]!==void 0&&i.push(n[e][t]),n[e].$allOperations!==void 0&&i.push(n[e].$allOperations)),e!=="$none"&&n.$allModels!==void 0&&(n.$allModels[t]!==void 0&&i.push(n.$allModels[t]),n.$allModels.$allOperations!==void 0&&i.push(n.$allModels.$allOperations)),n[t]!==void 0&&i.push(n[t]),n.$allOperations!==void 0&&i.push(n.$allOperations),r.concat(i))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},gd=class Ui{constructor(t){this.head=t}static empty(){return new Ui}static single(t){return new Ui(new _u(t))}isEmpty(){return this.head===void 0}append(t){return new Ui(new _u(t,this.head))}getAllComputedFields(t){return this.head?.getAllComputedFields(t)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(t){return this.head?.getAllModelExtensions(t)}getAllQueryCallbacks(t,r){return this.head?.getAllQueryCallbacks(t,r)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},yd=class{constructor(e){this.name=e}};function nw(e){return e instanceof yd}function sw(e){return new yd(e)}var bd=Symbol(),xd=class{constructor(e){if(e!==bd)throw new Error("Skip instance can not be constructed directly")}ifUndefined(e){return e===void 0?vd:e}},vd=new xd(bd);function Qt(e){return e instanceof xd}var aw={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},wd="explicitly `undefined` values are not allowed";function Sd({modelName:e,action:t,args:r,runtimeDataModel:i,extensions:n=gd.empty(),callsite:s,clientMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c}){let d=new mw({runtimeDataModel:i,modelName:e,action:t,rootArgs:r,callsite:s,extensions:n,selectionPath:[],argumentPath:[],originalMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c});return{modelName:e,action:aw[t],query:Hr(r,d)}}function Hr({select:e,include:t,...r}={},i){let n=r.omit;return delete r.omit,{arguments:kd(r,i),selection:ow(e,t,n,i)}}function ow(e,t,r,i){return e?(t?i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:i.getSelectionPath()}):r&&i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:i.getSelectionPath()}),dw(e,i)):lw(i,t,r)}function lw(e,t,r){let i={};return e.modelOrType&&!e.isRawAction()&&(i.$composites=!0,i.$scalars=!0),t&&uw(i,t,e),cw(i,r,e),i}function uw(e,t,r){for(let[i,n]of Object.entries(t)){if(Qt(n))continue;let s=r.nestSelection(i);if(ka(n,s),n===!1||n===void 0){e[i]=!1;continue}let a=r.findField(i);if(a&&a.kind!=="object"&&r.throwValidationError({kind:"IncludeOnScalar",selectionPath:r.getSelectionPath().concat(i),outputType:r.getOutputTypeDescription()}),a){e[i]=Hr(n===!0?{}:n,s);continue}if(n===!0){e[i]=!0;continue}e[i]=Hr(n,s)}}function cw(e,t,r){let i=r.getComputedFields(),n={...r.getGlobalOmit(),...t},s=iw(n,i);for(let[a,o]of Object.entries(s)){if(Qt(o))continue;ka(o,r.nestSelection(a));let l=r.findField(a);i?.[a]&&!l||(e[a]=!o)}}function dw(e,t){let r={},i=t.getComputedFields(),n=rw(e,i);for(let[s,a]of Object.entries(n)){if(Qt(a))continue;let o=t.nestSelection(s);ka(a,o);let l=t.findField(s);if(!(i?.[s]&&!l)){if(a===!1||a===void 0||Qt(a)){r[s]=!1;continue}if(a===!0){l?.kind==="object"?r[s]=Hr({},o):r[s]=!0;continue}r[s]=Hr(a,o)}}return r}function Ed(e,t){if(e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="bigint")return{$type:"BigInt",value:String(e)};if(ma(e)){if(Fc(e))return{$type:"DateTime",value:e.toISOString()};t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(nw(e))return{$type:"Param",value:e.name};if(va(e))return{$type:"FieldRef",value:{_ref:e.name,_container:e.modelName}};if(Array.isArray(e))return fw(e,t);if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{$type:"Bytes",value:Buffer.from(r,i,n).toString("base64")}}if(pw(e))return e.values;if(ya(e))return{$type:"Decimal",value:e.toFixed()};if(e instanceof nn){if(e!==dd.instances[e._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:e._getName()}}if(hw(e))return e.toJSON();if(typeof e=="object")return kd(e,t);t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(e)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function kd(e,t){if(e.$type)return{$type:"Raw",value:e};let r={};for(let i in e){let n=e[i],s=t.nestArgument(i);Qt(n)||(n!==void 0?r[i]=Ed(n,s):t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidArgumentValue",argumentPath:s.getArgumentPath(),selectionPath:t.getSelectionPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:wd}))}return r}function fw(e,t){let r=[];for(let i=0;i<e.length;i++){let n=t.nestArgument(String(i)),s=e[i];if(s===void 0||Qt(s)){let a=s===void 0?"undefined":"Prisma.skip";t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:n.getSelectionPath(),argumentPath:n.getArgumentPath(),argument:{name:`${t.getArgumentName()}[${i}]`,typeNames:[]},underlyingError:`Can not use \`${a}\` value within array. Use \`null\` or filter out \`${a}\` values`})}r.push(Ed(s,n))}return r}function pw(e){return typeof e=="object"&&e!==null&&e.__prismaRawParameters__===!0}function hw(e){return typeof e=="object"&&e!==null&&typeof e.toJSON=="function"}function ka(e,t){e===void 0&&t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidSelectionValue",selectionPath:t.getSelectionPath(),underlyingError:wd})}var mw=class Ws{constructor(t){this.params=t,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(t){md({errors:[t],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(t=>({name:t.name,typeName:"boolean",isRelation:t.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(t){return this.params.previewFeatures.includes(t)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(t){return this.modelOrType?.fields.find(r=>r.name===t)}nestSelection(t){let r=this.findField(t),i=r?.kind==="object"?r.type:void 0;return new Ws({...this.params,modelName:i,selectionPath:this.params.selectionPath.concat(t)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[Ji(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:ha(this.params.action,"Unknown action")}}nestArgument(t){return new Ws({...this.params,argumentPath:this.params.argumentPath.concat(t)})}};function qu(e){if(!e._hasPreviewFlag("metrics"))throw new ot("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:e._clientVersion})}var Ad=class{_client;constructor(e){this._client=e}prometheus(e){return qu(this._client),this._client._engine.metrics({format:"prometheus",...e})}json(e){return qu(this._client),this._client._engine.metrics({format:"json",...e})}};function gw(e,t){let r=Vs(()=>yw(t));Object.defineProperty(e,"dmmf",{get:()=>r.get()})}function yw(e){return{datamodel:{models:Ss(e.models),enums:Ss(e.enums),types:Ss(e.types)}}}function Ss(e){return Object.entries(e).map(([t,r])=>({name:t,...r}))}var Es=new WeakMap,Gi="$$PrismaTypedSql",Rd=class{constructor(e,t){Es.set(this,{sql:e,values:t}),Object.defineProperty(this,Gi,{value:Gi})}get sql(){return Es.get(this).sql}get values(){return Es.get(this).values}};function bw(e){return(...t)=>new Rd(e,t)}function Td(e){return e!=null&&e[Gi]===Gi}var xw=H(ac()),vw=require("node:async_hooks"),ww=require("node:events"),Sw=H(require("node:fs")),ks=H(require("node:path")),Rt=class Ys{constructor(t,r){if(t.length-1!==r.length)throw t.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${t.length} strings to have ${t.length-1} values`);let i=r.reduce((a,o)=>a+(o instanceof Ys?o.values.length:1),0);this.values=new Array(i),this.strings=new Array(i+1),this.strings[0]=t[0];let n=0,s=0;for(;n<r.length;){let a=r[n++],o=t[n];if(a instanceof Ys){this.strings[s]+=a.strings[0];let l=0;for(;l<a.values.length;)this.values[s++]=a.values[l++],this.strings[s]=a.strings[l];this.strings[s]+=o}else this.values[s++]=a,this.strings[s]=o}}get sql(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`?${this.strings[r++]}`;return i}get statement(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`:${r}${this.strings[r++]}`;return i}get text(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`$${r}${this.strings[r++]}`;return i}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function Ew(e,t=",",r="",i=""){if(e.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new Rt([r,...Array(e.length-1).fill(t),i],e)}function Id(e){return new Rt([e],[])}var kw=Id("");function Aw(e,...t){return new Rt(e,t)}function Od(e){return{getKeys(){return Object.keys(e)},getPropertyValue(t){return e[t]}}}function Ye(e,t){return{getKeys(){return[e]},getPropertyValue(){return t()}}}function Aa(e){let t=new Ur;return{getKeys(){return e.getKeys()},getPropertyValue(r){return t.getOrCreate(r,()=>e.getPropertyValue(r))},getPropertyDescriptor(r){return e.getPropertyDescriptor?.(r)}}}var Xs={enumerable:!0,configurable:!0,writable:!0};function _d(e){let t=new Set(e);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>Xs,has:(r,i)=>t.has(i),set:(r,i,n)=>t.add(i)&&Reflect.set(r,i,n),ownKeys:()=>[...t]}}var Cu=Symbol.for("nodejs.util.inspect.custom");function lr(e,t){let r=Rw(t),i=new Set,n=new Proxy(e,{get(s,a){if(i.has(a))return s[a];let o=r.get(a);return o?o.getPropertyValue(a):s[a]},has(s,a){if(i.has(a))return!0;let o=r.get(a);return o?o.has?.(a)??!0:Reflect.has(s,a)},ownKeys(s){let a=Pu(Reflect.ownKeys(s),r),o=Pu(Array.from(r.keys()),r);return[...new Set([...a,...o,...i])]},set(s,a,o){return r.get(a)?.getPropertyDescriptor?.(a)?.writable===!1?!1:(i.add(a),Reflect.set(s,a,o))},getOwnPropertyDescriptor(s,a){let o=Reflect.getOwnPropertyDescriptor(s,a);if(o&&!o.configurable)return o;let l=r.get(a);return l?l.getPropertyDescriptor?{...Xs,...l?.getPropertyDescriptor(a)}:Xs:o},defineProperty(s,a,o){return i.add(a),Reflect.defineProperty(s,a,o)},getPrototypeOf:()=>Object.prototype});return n[Cu]=function(){let s={...this};return delete s[Cu],s},n}function Rw(e){let t=new Map;for(let r of e){let i=r.getKeys();for(let n of i)t.set(n,r)}return t}function Pu(e,t){return e.filter(r=>t.get(r)?.has?.(r)??!0)}function Zs(e){return{getKeys(){return e},has(){return!1},getPropertyValue(){}}}function Ra(e,t){return{batch:e,transaction:t?.kind==="batch"?{isolationLevel:t.options.isolationLevel}:void 0}}function Tw(e){if(e===void 0)return"";let t=Ea(e);return new Zc(0,{colors:ed}).write(t).toString()}var Iw="P2037";function Ta({error:e,user_facing_error:t},r,i){return t.error_code?new Et(Ow(t,i),{code:t.error_code,clientVersion:r,meta:t.meta,batchRequestIdx:t.batch_request_idx}):new Oe(e,{clientVersion:r,batchRequestIdx:t.batch_request_idx})}function Ow(e,t){let r=e.message;return(t==="postgresql"||t==="postgres"||t==="mysql")&&e.error_code===Iw&&(r+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),r}var Xr="<unknown>";function _w(e){var t=e.split(`
`);return t.reduce(function(r,i){var n=Pw(i)||Dw(i)||Fw(i)||Vw(i)||jw(i);return n&&r.push(n),r},[])}var qw=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Cw=/\((\S*)(?::(\d+))(?::(\d+))\)/;function Pw(e){var t=qw.exec(e);if(!t)return null;var r=t[2]&&t[2].indexOf("native")===0,i=t[2]&&t[2].indexOf("eval")===0,n=Cw.exec(t[2]);return i&&n!=null&&(t[2]=n[1],t[3]=n[2],t[4]=n[3]),{file:r?null:t[2],methodName:t[1]||Xr,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var Nw=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Dw(e){var t=Nw.exec(e);return t?{file:t[2],methodName:t[1]||Xr,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var Uw=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Lw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Fw(e){var t=Uw.exec(e);if(!t)return null;var r=t[3]&&t[3].indexOf(" > eval")>-1,i=Lw.exec(t[3]);return r&&i!=null&&(t[3]=i[1],t[4]=i[2],t[5]=null),{file:t[3],methodName:t[1]||Xr,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var Mw=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function jw(e){var t=Mw.exec(e);return t?{file:t[3],methodName:t[1]||Xr,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var $w=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Vw(e){var t=$w.exec(e);return t?{file:t[2],methodName:t[1]||Xr,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var Bw=class{getLocation(){return null}},Gw=class{_error;constructor(){this._error=new Error}getLocation(){let e=this._error.stack;if(!e)return null;let t=_w(e).find(r=>{if(!r.file)return!1;let i=rx(r.file);return i!=="<anonymous>"&&!i.includes("@prisma")&&!i.includes("/packages/client/src/runtime/")&&!i.endsWith("/runtime/binary.js")&&!i.endsWith("/runtime/library.js")&&!i.endsWith("/runtime/edge.js")&&!i.endsWith("/runtime/edge-esm.js")&&!i.startsWith("internal/")&&!r.methodName.includes("new ")&&!r.methodName.includes("getCallSite")&&!r.methodName.includes("Proxy.")&&r.methodName.split(".").length<4});return!t||!t.file?null:{fileName:t.file,lineNumber:t.lineNumber,columnNumber:t.column}}};function Lr(e){return e==="minimal"?typeof $EnabledCallSite=="function"&&e!=="minimal"?new $EnabledCallSite:new Bw:new Gw}var Hw={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function Hi(e={}){let t=Qw(e);return Object.entries(t).reduce((r,[i,n])=>(Hw[i]!==void 0?r.select[i]={select:n}:r[i]=n,r),{select:{}})}function Qw(e={}){return typeof e._count=="boolean"?{...e,_count:{_all:e._count}}:e}function ea(e={}){return t=>(typeof e._count=="boolean"&&(t._count=t._count._all),t)}function Kw(e,t){let r=ea(e);return t({action:"aggregate",unpacker:r,argsMapper:Hi})(e)}function zw(e={}){let{select:t,...r}=e;return Hi(typeof t=="object"?{...r,_count:t}:{...r,_count:{_all:!0}})}function Jw(e={}){return typeof e.select=="object"?t=>ea(e)(t)._count:t=>ea(e)(t)._count._all}function Ww(e,t){return t({action:"count",unpacker:Jw(e),argsMapper:zw})(e)}function Yw(e={}){let t=Hi(e);if(Array.isArray(t.by))for(let r of t.by)typeof r=="string"&&(t.select[r]=!0);else typeof t.by=="string"&&(t.select[t.by]=!0);return t}function Xw(e={}){return t=>(typeof e?._count=="boolean"&&t.forEach(r=>{r._count=r._count._all}),t)}function Zw(e,t){return t({action:"groupBy",unpacker:Xw(e),argsMapper:Yw})(e)}function eS(e,t,r){if(t==="aggregate")return i=>Kw(i,r);if(t==="count")return i=>Ww(i,r);if(t==="groupBy")return i=>Zw(i,r)}function tS(e,t){let r=t.fields.filter(n=>!n.relationName),i=lx(r,"name");return new Proxy({},{get(n,s){if(s in n||typeof s=="symbol")return n[s];let a=i[s];if(a)return new cd(e,s,a.type,a.isList,a.kind==="enum")},..._d(Object.keys(i))})}var qd=e=>Array.isArray(e)?e:e.split("."),Cd=(e,t)=>qd(t).reduce((r,i)=>r&&r[i],e),rS=(e,t,r)=>qd(t).reduceRight((i,n,s,a)=>Object.assign({},Cd(e,a.slice(0,s)),{[n]:i}),r);function iS(e,t){return e===void 0||t===void 0?[]:[...t,"select",e]}function nS(e,t,r){return t===void 0?e??{}:rS(t,r,e||!0)}function Pd(e,t,r,i,n,s){let a=e._runtimeDataModel.models[t].fields.reduce((o,l)=>({...o,[l.name]:l}),{});return o=>{let l=Lr(e._errorFormat),u=iS(i,n),c=nS(o,s,u),d=r({dataPath:u,callsite:l})(c),f=sS(e,t);return new Proxy(d,{get(p,m){if(!f.includes(m))return p[m];let g=[a[m].type,r,m],E=[u,c];return Pd(e,...g,...E)},..._d([...f,...Object.getOwnPropertyNames(d)])})}}function sS(e,t){return e._runtimeDataModel.models[t].fields.filter(r=>r.kind==="object").map(r=>r.name)}var aS=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],oS=["aggregate","count","groupBy"];function Nu(e,t){let r=e._extensions.getAllModelExtensions(t)??{},i=[lS(e,t),cS(e,t),Od(r),Ye("name",()=>t),Ye("$name",()=>t),Ye("$parent",()=>e._appliedParent)];return lr({},i)}function lS(e,t){let r=Yr(t),i=Object.keys(en).concat("count");return{getKeys(){return i},getPropertyValue(n){let s=n,a=o=>l=>{let u=Lr(e._errorFormat);return e._createPrismaPromise(c=>{let d={args:l,dataPath:[],action:s,model:t,clientMethod:`${r}.${n}`,jsModelName:r,transaction:c,callsite:u};return e._request({...d,...o})},{action:s,args:l,model:t})};return aS.includes(s)?Pd(e,t,a):uS(n)?eS(e,n,a):a({})}}}function uS(e){return oS.includes(e)}function cS(e,t){return Aa(Ye("fields",()=>{let r=e._runtimeDataModel.models[t];return tS(t,r)}))}function dS(e){return e.replace(/^./,t=>t.toUpperCase())}var ta=Symbol();function ra(e){let t=[fS(e),pS(e),Ye(ta,()=>e),Ye("$parent",()=>e._appliedParent)],r=e._extensions.getAllClientExtensions();return r&&t.push(Od(r)),lr(e,t)}function fS(e){let t=Object.getPrototypeOf(e._originalClient),r=[...new Set(Object.getOwnPropertyNames(t))];return{getKeys(){return r},getPropertyValue(i){return e[i]}}}function pS(e){let t=Object.keys(e._runtimeDataModel.models),r=t.map(Yr),i=[...new Set(t.concat(r))];return Aa({getKeys(){return i},getPropertyValue(n){let s=dS(n);if(e._runtimeDataModel.models[s]!==void 0)return Nu(e,s);if(e._runtimeDataModel.models[n]!==void 0)return Nu(e,n)},getPropertyDescriptor(n){if(!r.includes(n))return{enumerable:!1}}})}function hS(e){return e[ta]?e[ta]:e}function mS(e){if(typeof e=="function")return e(this);if(e.client?.__AccelerateEngine){let r=e.client.__AccelerateEngine;this._originalClient._engine=new r(this._originalClient._accelerateEngineConfig)}let t=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(e)},_appliedParent:{value:this,configurable:!0},$on:{value:void 0}});return ra(t)}function gS({result:e,modelName:t,select:r,omit:i,extensions:n}){let s=n.getAllComputedFields(t);if(!s)return e;let a=[],o=[];for(let l of Object.values(s)){if(i){if(i[l.name])continue;let u=l.needs.filter(c=>i[c]);u.length>0&&o.push(Zs(u))}else if(r){if(!r[l.name])continue;let u=l.needs.filter(c=>!r[c]);u.length>0&&o.push(Zs(u))}yS(e,l.needs)&&a.push(bS(l,lr(e,a)))}return a.length>0||o.length>0?lr(e,[...a,...o]):e}function yS(e,t){return t.every(r=>ax(e,r))}function bS(e,t){return Aa(Ye(e.name,()=>e.compute(t)))}function Ia({visitor:e,result:t,args:r,runtimeDataModel:i,modelName:n}){if(Array.isArray(t)){for(let a=0;a<t.length;a++)t[a]=Ia({result:t[a],args:r,modelName:n,runtimeDataModel:i,visitor:e});return t}let s=e(t,n,r)??t;return r.include&&Du({includeOrSelect:r.include,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),r.select&&Du({includeOrSelect:r.select,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),s}function Du({includeOrSelect:e,result:t,parentModelName:r,runtimeDataModel:i,visitor:n}){for(let[s,a]of Object.entries(e)){if(!a||t[s]==null||Qt(a))continue;let o=i.models[r].fields.find(u=>u.name===s);if(!o||o.kind!=="object"||!o.relationName)continue;let l=typeof a=="object"?a:{};t[s]=Ia({visitor:n,result:t[s],args:l,modelName:o.type,runtimeDataModel:i})}}function xS({result:e,modelName:t,args:r,extensions:i,runtimeDataModel:n,globalOmit:s}){return i.isEmpty()||e==null||typeof e!="object"||!n.models[t]?e:Ia({result:e,args:r??{},modelName:t,runtimeDataModel:n,visitor:(a,o,l)=>{let u=Yr(o);return gS({result:a,modelName:u,select:l.select,omit:l.select?void 0:{...s?.[u],...l.omit},extensions:i})}})}var vS=["$connect","$disconnect","$on","$transaction","$extends"],wS=vS;function SS(e){if(e instanceof Rt)return ES(e);if(Td(e))return kS(e);if(Array.isArray(e)){let r=[e[0]];for(let i=1;i<e.length;i++)r[i]=Fr(e[i]);return r}let t={};for(let r in e)t[r]=Fr(e[r]);return t}function ES(e){return new Rt(e.strings,e.values)}function kS(e){return new Rd(e.sql,e.values)}function Fr(e){if(typeof e!="object"||e==null||e instanceof nn||va(e))return e;if(ya(e))return new Zi(e.toFixed());if(ma(e))return new Date(+e);if(ArrayBuffer.isView(e))return e.slice(0);if(Array.isArray(e)){let t=e.length,r;for(r=Array(t);t--;)r[t]=Fr(e[t]);return r}if(typeof e=="object"){let t={};for(let r in e)r==="__proto__"?Object.defineProperty(t,r,{value:Fr(e[r]),configurable:!0,enumerable:!0,writable:!0}):t[r]=Fr(e[r]);return t}ha(e,"Unknown value")}function Nd(e,t,r,i=0){return e._createPrismaPromise(n=>{let s=t.customDataProxyFetch;return"transaction"in t&&n!==void 0&&(t.transaction?.kind==="batch"&&t.transaction.lock.then(),t.transaction=n),i===r.length?e._executeRequest(t):r[i]({model:t.model,operation:t.model?t.action:t.clientMethod,args:SS(t.args??{}),__internalParams:t,query:(a,o=t)=>{let l=o.customDataProxyFetch;return o.customDataProxyFetch=Ud(s,l),o.args=a,Nd(e,o,r,i+1)}})})}function AS(e,t){let{jsModelName:r,action:i,clientMethod:n}=t,s=r?i:n;if(e._extensions.isEmpty())return e._executeRequest(t);let a=e._extensions.getAllQueryCallbacks(r??"$none",s);return Nd(e,t,a)}function RS(e){return t=>{let r={requests:t},i=t[0].extensions.getAllBatchQueryCallbacks();return i.length?Dd(r,i,0,e):e(r)}}function Dd(e,t,r,i){if(r===t.length)return i(e);let n=e.customDataProxyFetch,s=e.requests[0].transaction;return t[r]({args:{queries:e.requests.map(a=>({model:a.modelName,operation:a.action,args:a.args})),transaction:s?{isolationLevel:s.kind==="batch"?s.isolationLevel:void 0}:void 0},__internalParams:e,query(a,o=e){let l=o.customDataProxyFetch;return o.customDataProxyFetch=Ud(n,l),Dd(o,t,r+1,i)}})}var Uu=e=>e;function Ud(e=Uu,t=Uu){return r=>e(t(r))}var Lu=ve("prisma:client"),Fu={Vercel:"vercel","Netlify CI":"netlify"};function TS({postinstall:e,ciName:t,clientVersion:r,generator:i}){if(Lu("checkPlatformCaching:postinstall",e),Lu("checkPlatformCaching:ciName",t),e===!0&&!(i?.output&&typeof(i.output.fromEnvVar??i.output.value)=="string")&&t&&t in Fu){let n=`Prisma has detected that this project was built on ${t}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${Fu[t]}-build`;throw console.error(n),new ae(n,r)}}function IS(e,t){return e?e.datasources?e.datasources:e.datasourceUrl?{[t[0]]:{url:e.datasourceUrl}}:{}:{}}var OS=H(require("node:fs")),Li=H(require("node:path"));function Ld(e){let{runtimeBinaryTarget:t}=e;return`Add "${t}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${_S(e)}`}function _S(e){let{generator:t,generatorBinaryTargets:r,runtimeBinaryTarget:i}=e,n={fromEnvVar:null,value:i},s=[...r,n];return H1({...t,binaryTargets:s})}function sn(e){let{runtimeBinaryTarget:t}=e;return`Prisma Client could not locate the Query Engine for runtime "${t}".`}function an(e){let{searchedLocations:t}=e;return`The following locations have been searched:
${[...new Set(t)].map(r=>`  ${r}`).join(`
`)}`}function qS(e){let{runtimeBinaryTarget:t}=e;return`${sn(e)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${t}".
${Ld(e)}

${an(e)}`}function Fd(e){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${e}`}function Md(e){let{errorStack:t}=e;return t?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function CS(e){let{queryEngineName:t}=e;return`${sn(e)}${Md(e)}

This is likely caused by a bundler that has not copied "${t}" next to the resulting bundle.
Ensure that "${t}" has been copied next to the bundle or in "${e.expectedLocation}".

${Fd("engine-not-found-bundler-investigation")}

${an(e)}`}function PS(e){let{runtimeBinaryTarget:t,generatorBinaryTargets:r}=e,i=r.find(n=>n.native);return`${sn(e)}

This happened because Prisma Client was generated for "${i?.value??"unknown"}", but the actual deployment required "${t}".
${Ld(e)}

${an(e)}`}function NS(e){let{queryEngineName:t}=e;return`${sn(e)}${Md(e)}

This is likely caused by tooling that has not copied "${t}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${t}" has been copied to "${e.expectedLocation}".

${Fd("engine-not-found-tooling-investigation")}

${an(e)}`}var DS=ve("prisma:client:engines:resolveEnginePath"),US=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function LS(e,t){let r={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[e]??t.prismaPath;if(r!==void 0)return r;let{enginePath:i,searchedLocations:n}=await FS(e,t);if(DS("enginePath",i),i!==void 0&&e==="binary"&&F1(i),i!==void 0)return t.prismaPath=i;let s=await ua(),a=t.generator?.binaryTargets??[],o=a.some(f=>f.native),l=!a.some(f=>f.value===s),u=__filename.match(US())===null,c={searchedLocations:n,generatorBinaryTargets:a,generator:t.generator,runtimeBinaryTarget:s,queryEngineName:jd(e,s),expectedLocation:Li.default.relative(process.cwd(),t.dirname),errorStack:new Error().stack},d;throw o&&l?d=PS(c):l?d=qS(c):u?d=CS(c):d=NS(c),new ae(d,t.clientVersion)}async function FS(e,t){let r=await ua(),i=[],n=[t.dirname,Li.default.resolve(__dirname,".."),t.generator?.output?.value??__dirname,Li.default.resolve(__dirname,"../../../.prisma/client"),"/tmp/prisma-engines",t.cwd];__filename.includes("resolveEnginePath")&&n.push(L1());for(let s of n){let a=jd(e,r),o=Li.default.join(s,a);if(i.push(s),OS.default.existsSync(o))return{enginePath:o,searchedLocations:i}}return{enginePath:void 0,searchedLocations:i}}function jd(e,t){return e==="library"?_b(t,"fs"):`query-engine-${t}${t==="windows"?".exe":""}`}function MS(e){return e?e.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,t=>`${t[0]}5`):""}function jS(e){return e.split(`
`).map(t=>t.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var $S=H(Xy());function VS({title:e,user:t="prisma",repo:r="prisma",template:i="bug_report.yml",body:n}){return(0,$S.default)({user:t,repo:r,template:i,title:e,body:n})}function BS({version:e,binaryTarget:t,title:r,description:i,engineVersion:n,database:s,query:a}){let o=Ab(6e3-(a?.length??0)),l=jS(Ms(o)),u=i?`# Description
\`\`\`
${i}
\`\`\``:"",c=Ms(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${t?.padEnd(19)}|
| Prisma Client   | ${e?.padEnd(19)}|
| Query Engine    | ${n?.padEnd(19)}|
| Database        | ${s?.padEnd(19)}|

${u}

## Logs
\`\`\`
${l}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${a?MS(a):""}
\`\`\`
`),d=VS({title:r,body:c});return`${r}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Ce(d)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function GS(e,t){throw new Error(t)}function HS(e){return e!==null&&typeof e=="object"&&typeof e.$type=="string"}function QS(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function Qi(e){return e===null?e:Array.isArray(e)?e.map(Qi):typeof e=="object"?HS(e)?KS(e):e.constructor!==null&&e.constructor.name!=="Object"?e:QS(e,Qi):e}function KS({$type:e,value:t}){switch(e){case"BigInt":return BigInt(t);case"Bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"DateTime":return new Date(t);case"Decimal":return new zt(t);case"Json":return JSON.parse(t);default:GS(t,"Unknown tagged value")}}var zS="6.19.0",JS=()=>globalThis.process?.release?.name==="node",WS=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,YS=()=>!!globalThis.Deno,XS=()=>typeof globalThis.Netlify=="object",ZS=()=>typeof globalThis.EdgeRuntime=="object",eE=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function tE(){return[[XS,"netlify"],[ZS,"edge-light"],[eE,"workerd"],[YS,"deno"],[WS,"bun"],[JS,"node"]].flatMap(e=>e[0]()?[e[1]]:[]).at(0)??""}var rE={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function $d(){let e=tE();return{id:e,prettyName:rE[e]||e,isEdge:["workerd","deno","netlify","edge-light"].includes(e)}}function Oa({inlineDatasources:e,overrideDatasources:t,env:r,clientVersion:i}){let n,s=Object.keys(e)[0],a=e[s]?.url,o=t[s]?.url;if(s===void 0?n=void 0:o?n=o:a?.value?n=a.value:a?.fromEnvVar&&(n=r[a.fromEnvVar]),a?.fromEnvVar!==void 0&&n===void 0)throw new ae(`error: Environment variable not found: ${a.fromEnvVar}.`,i);if(n===void 0)throw new ae("error: Missing URL environment variable, value, or override.",i);return n}var iE=class extends Error{clientVersion;cause;constructor(e,t){super(e),this.clientVersion=t.clientVersion,this.cause=t.cause}get[Symbol.toStringTag](){return this.name}},ur=class extends iE{isRetryable;constructor(e,t){super(e,t),this.isRetryable=t.isRetryable??!0}};function me(e,t){return{...e,isRetryable:t}}var Fi=class extends ur{name="InvalidDatasourceError";code="P6001";constructor(e,t){super(e,me(t,!1))}};ne(Fi,"InvalidDatasourceError");function nE(e){let t={clientVersion:e.clientVersion},r=Object.keys(e.inlineDatasources)[0],i=Oa({inlineDatasources:e.inlineDatasources,overrideDatasources:e.overrideDatasources,clientVersion:e.clientVersion,env:{...e.env,...typeof process<"u"?process.env:{}}}),n;try{n=new URL(i)}catch{throw new Fi(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\``,t)}let{protocol:s,searchParams:a}=n;if(s!=="prisma:"&&s!==Ic)throw new Fi(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\` or \`prisma+postgres://\``,t);let o=a.get("api_key");if(o===null||o.length<1)throw new Fi(`Error validating datasource \`${r}\`: the URL must contain a valid API key`,t);let l=B1(n)?"http:":"https:";process.env.TEST_CLIENT_ENGINE_REMOTE_EXECUTOR&&n.searchParams.has("use_http")&&(l="http:");let u=new URL(n.href.replace(s,l));return{apiKey:o,url:u}}var sE=H(aa()),aE=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:e,tracingHelper:t,logLevel:r,logQueries:i,engineHash:n}){this.apiKey=e,this.tracingHelper=t,this.logLevel=r,this.logQueries=i,this.engineHash=n}build({traceparent:e,transactionId:t}={}){let r={Accept:"application/json",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","Prisma-Engine-Hash":this.engineHash,"Prisma-Engine-Version":sE.enginesVersion};this.tracingHelper.isEnabled()&&(r.traceparent=e??this.tracingHelper.getTraceParent()),t&&(r["X-Transaction-Id"]=t);let i=this.#e();return i.length>0&&(r["X-Capture-Telemetry"]=i.join(", ")),r}#e(){let e=[];return this.tracingHelper.isEnabled()&&e.push("tracing"),this.logLevel&&e.push(this.logLevel),this.logQueries&&e.push("query"),e}};function oE(e){return e[0]*1e3+e[1]/1e6}function Mu(e){return new Date(oE(e))}var ia=class extends ur{name="ForcedRetryError";code="P5001";constructor(e){super("This request must be retried",me(e,!0))}};ne(ia,"ForcedRetryError");var _a=class extends ur{name="NotImplementedYetError";code="P5004";constructor(e,t){super(e,me(t,!1))}};ne(_a,"NotImplementedYetError");var De=class extends ur{response;constructor(e,t){super(e,t),this.response=t.response;let r=this.response.headers.get("prisma-request-id");if(r){let i=`(The request id was: ${r})`;this.message=this.message+" "+i}}},qa=class extends De{name="SchemaMissingError";code="P5005";constructor(e){super("Schema needs to be uploaded",me(e,!0))}};ne(qa,"SchemaMissingError");var Vd="This request could not be understood by the server",Bd=class extends De{name="BadRequestError";code="P5000";constructor(e,t,r){super(t||Vd,me(e,!1)),r&&(this.code=r)}};ne(Bd,"BadRequestError");var Gd=class extends De{name="HealthcheckTimeoutError";code="P5013";logs;constructor(e,t){super("Engine not started: healthcheck timeout",me(e,!0)),this.logs=t}};ne(Gd,"HealthcheckTimeoutError");var Hd=class extends De{name="EngineStartupError";code="P5014";logs;constructor(e,t,r){super(t,me(e,!0)),this.logs=r}};ne(Hd,"EngineStartupError");var Qd=class extends De{name="EngineVersionNotSupportedError";code="P5012";constructor(e){super("Engine version is not supported",me(e,!1))}};ne(Qd,"EngineVersionNotSupportedError");var Kd="Request timed out",zd=class extends De{name="GatewayTimeoutError";code="P5009";constructor(e,t=Kd){super(t,me(e,!1))}};ne(zd,"GatewayTimeoutError");var lE="Interactive transaction error",Jd=class extends De{name="InteractiveTransactionError";code="P5015";constructor(e,t=lE){super(t,me(e,!1))}};ne(Jd,"InteractiveTransactionError");var uE="Request parameters are invalid",Wd=class extends De{name="InvalidRequestError";code="P5011";constructor(e,t=uE){super(t,me(e,!1))}};ne(Wd,"InvalidRequestError");var Yd="Requested resource does not exist",Xd=class extends De{name="NotFoundError";code="P5003";constructor(e,t=Yd){super(t,me(e,!1))}};ne(Xd,"NotFoundError");var Zd="Unknown server error",na=class extends De{name="ServerError";code="P5006";logs;constructor(e,t,r){super(t||Zd,me(e,!0)),this.logs=r}};ne(na,"ServerError");var ef="Unauthorized, check your connection string",tf=class extends De{name="UnauthorizedError";code="P5007";constructor(e,t=ef){super(t,me(e,!1))}};ne(tf,"UnauthorizedError");var rf="Usage exceeded, retry again later",nf=class extends De{name="UsageExceededError";code="P5008";constructor(e,t=rf){super(t,me(e,!0))}};ne(nf,"UsageExceededError");async function cE(e){let t;try{t=await e.text()}catch{return{type:"EmptyError"}}try{let r=JSON.parse(t);if(typeof r=="string")switch(r){case"InternalDataProxyError":return{type:"DataProxyError",body:r};default:return{type:"UnknownTextError",body:r}}if(typeof r=="object"&&r!==null){if("is_panic"in r&&"message"in r&&"error_code"in r)return{type:"QueryEngineError",body:r};if("EngineNotStarted"in r||"InteractiveTransactionMisrouted"in r||"InvalidRequestError"in r){let i=Object.values(r)[0].reason;return typeof i=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(i)?{type:"UnknownJsonError",body:r}:{type:"DataProxyError",body:r}}}return{type:"UnknownJsonError",body:r}}catch{return t===""?{type:"EmptyError"}:{type:"UnknownTextError",body:t}}}async function _i(e,t){if(e.ok)return;let r={clientVersion:t,response:e},i=await cE(e);if(i.type==="QueryEngineError")throw new Et(i.body.message,{code:i.body.error_code,clientVersion:t});if(i.type==="DataProxyError"){if(i.body==="InternalDataProxyError")throw new na(r,"Internal Data Proxy error");if("EngineNotStarted"in i.body){if(i.body.EngineNotStarted.reason==="SchemaMissing")return new qa(r);if(i.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new Qd(r);if("EngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,logs:s}=i.body.EngineNotStarted.reason.EngineStartupError;throw new Hd(r,n,s)}if("KnownEngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,error_code:s}=i.body.EngineNotStarted.reason.KnownEngineStartupError;throw new ae(n,t,s)}if("HealthcheckTimeout"in i.body.EngineNotStarted.reason){let{logs:n}=i.body.EngineNotStarted.reason.HealthcheckTimeout;throw new Gd(r,n)}}if("InteractiveTransactionMisrouted"in i.body){let n={IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"};throw new Jd(r,n[i.body.InteractiveTransactionMisrouted.reason])}if("InvalidRequestError"in i.body)throw new Wd(r,i.body.InvalidRequestError.reason)}if(e.status===401||e.status===403)throw new tf(r,tr(ef,i));if(e.status===404)return new Xd(r,tr(Yd,i));if(e.status===429)throw new nf(r,tr(rf,i));if(e.status===504)throw new zd(r,tr(Kd,i));if(e.status>=500)throw new na(r,tr(Zd,i));if(e.status>=400)throw new Bd(r,tr(Vd,i))}function tr(e,t){return t.type==="EmptyError"?e:`${e}: ${JSON.stringify(t)}`}function dE(e){let t=Math.pow(2,e)*50,r=Math.ceil(Math.random()*t)-Math.ceil(t/2),i=t+r;return new Promise(n=>setTimeout(()=>n(i),i))}var st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function fE(e){let t=new TextEncoder().encode(e),r="",i=t.byteLength,n=i%3,s=i-n,a,o,l,u,c;for(let d=0;d<s;d=d+3)c=t[d]<<16|t[d+1]<<8|t[d+2],a=(c&16515072)>>18,o=(c&258048)>>12,l=(c&4032)>>6,u=c&63,r+=st[a]+st[o]+st[l]+st[u];return n==1?(c=t[s],a=(c&252)>>2,o=(c&3)<<4,r+=st[a]+st[o]+"=="):n==2&&(c=t[s]<<8|t[s+1],a=(c&64512)>>10,o=(c&1008)>>4,l=(c&15)<<2,r+=st[a]+st[o]+st[l]+"="),r}function pE(e){if(e.generator?.previewFeatures.some(t=>t.toLowerCase().includes("metrics")))throw new ae("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",e.clientVersion)}var hE={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},sf=class extends ur{name="RequestError";code="P5010";constructor(e,t){super(`Cannot fetch data from service:
${e}`,me(t,!0))}};ne(sf,"RequestError");async function Cr(e,t,r=i=>i){let{clientVersion:i,...n}=t,s=r(fetch);try{return await s(e,n)}catch(a){let o=a.message??"Unknown error";throw new sf(o,{clientVersion:i,cause:a})}}var mE=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,af=ve("prisma:client:dataproxyEngine");async function gE(e,t){let r=hE["@prisma/engines-version"],i=t.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(e.includes("accelerate")&&i!=="0.0.0"&&i!=="in-memory")return i;let[n,s]=i?.split("-")??[];if(s===void 0&&mE.test(n))return n;if(s!==void 0||i==="0.0.0"||i==="in-memory"){let[a]=r.split("-")??[],[o,l,u]=a.split("."),c=bE(`<=${o}.${l}.${u}`),d=await Cr(c,{clientVersion:i});if(!d.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${d.status} ${d.statusText}, response body: ${await d.text()||"<empty body>"}`);let f=await d.text();af("length of body fetched from unpkg.com",f.length);let p;try{p=JSON.parse(f)}catch(m){throw console.error("JSON.parse error: body fetched from unpkg.com: ",f),m}return p.version}throw new _a("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:i})}async function yE(e,t){let r=await gE(e,t);return af("version",r),r}function bE(e){return encodeURI(`https://unpkg.com/prisma@${e}/package.json`)}var ju=3,Or=ve("prisma:client:dataproxyEngine"),xE=class{name="DataProxyEngine";inlineSchema;inlineSchemaHash;inlineDatasources;config;logEmitter;env;clientVersion;engineHash;tracingHelper;remoteClientVersion;host;headerBuilder;startPromise;protocol;constructor(e){pE(e),this.config=e,this.env=e.env,this.inlineSchema=fE(e.inlineSchema),this.inlineDatasources=e.inlineDatasources,this.inlineSchemaHash=e.inlineSchemaHash,this.clientVersion=e.clientVersion,this.engineHash=e.engineVersion,this.logEmitter=e.logEmitter,this.tracingHelper=e.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let{apiKey:e,url:t}=this.getURLAndAPIKey();this.host=t.host,this.protocol=t.protocol,this.headerBuilder=new aE({apiKey:e,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel??"error",logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await yE(this.host,this.config),Or("host",this.host),Or("protocol",this.protocol)})(),await this.startPromise}async stop(){}propagateResponseExtensions(e){e?.logs?.length&&e.logs.forEach(t=>{switch(t.level){case"debug":case"trace":Or(t);break;case"error":case"warn":case"info":{this.logEmitter.emit(t.level,{timestamp:Mu(t.timestamp),message:t.attributes.message??"",target:t.target??"BinaryEngine"});break}case"query":{this.logEmitter.emit("query",{query:t.attributes.query??"",timestamp:Mu(t.timestamp),duration:t.attributes.duration_ms??0,params:t.attributes.params??"",target:t.target??"BinaryEngine"});break}default:t.level}}),e?.traces?.length&&this.tracingHelper.dispatchEngineSpans(e.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(e){return await this.start(),`${this.protocol}//${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${e}`}async uploadSchema(){let e={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(e,async()=>{let t=await Cr(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});t.ok||Or("schema response status",t.status);let r=await _i(t,this.clientVersion);if(r)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${r.message}`,timestamp:new Date,target:""}),r;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(e,{traceparent:t,interactiveTransaction:r,customDataProxyFetch:i}){return this.requestInternal({body:e,traceparent:t,interactiveTransaction:r,customDataProxyFetch:i})}async requestBatch(e,{traceparent:t,transaction:r,customDataProxyFetch:i}){let n=r?.kind==="itx"?r.options:void 0,s=Ra(e,r);return(await this.requestInternal({body:s,customDataProxyFetch:i,interactiveTransaction:n,traceparent:t})).map(a=>(a.extensions&&this.propagateResponseExtensions(a.extensions),"errors"in a?this.convertProtocolErrorsToClientError(a.errors):a))}requestInternal({body:e,traceparent:t,customDataProxyFetch:r,interactiveTransaction:i}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:n})=>{let s=i?`${i.payload.endpoint}/graphql`:await this.url("graphql");n(s);let a=await Cr(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t,transactionId:i?.id}),body:JSON.stringify(e),clientVersion:this.clientVersion},r);a.ok||Or("graphql response status",a.status),await this.handleError(await _i(a,this.clientVersion));let o=await a.json();if(o.extensions&&this.propagateResponseExtensions(o.extensions),"errors"in o)throw this.convertProtocolErrorsToClientError(o.errors);return"batchResult"in o?o.batchResult:o}})}async transaction(e,t,r){let i={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${i[e]} transaction`,callback:async({logHttpCall:n})=>{if(e==="start"){let s=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel}),a=await this.url("transaction/start");n(a);let o=await Cr(a,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),body:s,clientVersion:this.clientVersion});await this.handleError(await _i(o,this.clientVersion));let l=await o.json(),{extensions:u}=l;u&&this.propagateResponseExtensions(u);let c=l.id,d=l["data-proxy"].endpoint;return{id:c,payload:{endpoint:d}}}else{let s=`${r.payload.endpoint}/${e}`;n(s);let a=await Cr(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),clientVersion:this.clientVersion});await this.handleError(await _i(a,this.clientVersion));let o=await a.json(),{extensions:l}=o;l&&this.propagateResponseExtensions(l);return}}})}getURLAndAPIKey(){return nE({clientVersion:this.clientVersion,env:this.env,inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources})}metrics(){throw new _a("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(e){for(let t=0;;t++){let r=i=>{this.logEmitter.emit("info",{message:`Calling ${i} (n=${t})`,timestamp:new Date,target:""})};try{return await e.callback({logHttpCall:r})}catch(i){if(!(i instanceof ur)||!i.isRetryable)throw i;if(t>=ju)throw i instanceof ia?i.cause:i;this.logEmitter.emit("warn",{message:`Attempt ${t+1}/${ju} failed for ${e.actionGerund}: ${i.message??"(unknown)"}`,timestamp:new Date,target:""});let n=await dE(t);this.logEmitter.emit("warn",{message:`Retrying after ${n}ms`,timestamp:new Date,target:""})}}}async handleError(e){if(e instanceof qa)throw await this.uploadSchema(),new ia({clientVersion:this.clientVersion,cause:e});if(e)throw e}convertProtocolErrorsToClientError(e){return e.length===1?Ta(e[0],this.config.clientVersion,this.config.activeProvider):new Oe(JSON.stringify(e),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function vE(e){if(e?.kind==="itx")return e.options.id}var $u=H(require("node:os")),wE=H(require("node:path")),As=Symbol("PrismaLibraryEngineCache");function SE(){let e=globalThis;return e[As]===void 0&&(e[As]={}),e[As]}function EE(e){let t=SE();if(t[e]!==void 0)return t[e];let r=wE.default.toNamespacedPath(e),i={exports:{}},n=0;return process.platform!=="win32"&&(n=$u.default.constants.dlopen.RTLD_LAZY|$u.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(i,r,n),t[e]=i.exports,i.exports}var kE={async loadLibrary(e){let t=await Wb(),r=await LS("library",e);try{return e.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>EE(r))}catch(i){let n=M1({e:i,platformInfo:t,id:r});throw new ae(n,e.clientVersion)}}},Rs,AE={async loadLibrary(e){let{clientVersion:t,adapter:r,engineWasm:i}=e;if(r===void 0)throw new ae(`The \`adapter\` option for \`PrismaClient\` is required in this context (${$d().prettyName})`,t);if(i===void 0)throw new ae("WASM engine was unexpectedly `undefined`",t);Rs===void 0&&(Rs=(async()=>{let s=await i.getRuntime(),a=await i.getQueryEngineWasmModule();if(a==null)throw new ae("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",t);let o={"./query_engine_bg.js":s},l=new WebAssembly.Instance(a,o),u=l.exports.__wbindgen_start;return s.__wbg_set_wasm(l.exports),u(),s.QueryEngine})());let n=await Rs;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:n}}},RE="P2036",He=ve("prisma:client:libraryEngine");function TE(e){return e.item_type==="query"&&"query"in e}function IE(e){return"level"in e?e.level==="error"&&e.message==="PANIC":!1}var Vu=[...Ob,"native"],OE=0xffffffffffffffffn,Ts=1n;function _E(){let e=Ts++;return Ts>OE&&(Ts=1n),e}var Bu=class{name="LibraryEngine";engine;libraryInstantiationPromise;libraryStartingPromise;libraryStoppingPromise;libraryStarted;executingQueryPromise;config;QueryEngineConstructor;libraryLoader;library;logEmitter;libQueryEnginePath;binaryTarget;datasourceOverrides;datamodel;logQueries;logLevel;lastQuery;loggerRustPanic;tracingHelper;adapterPromise;versionInfo;constructor(e,t){this.libraryLoader=t??kE,e.engineWasm!==void 0&&(this.libraryLoader=t??AE),this.config=e,this.libraryStarted=!1,this.logQueries=e.logQueries??!1,this.logLevel=e.logLevel??"error",this.logEmitter=e.logEmitter,this.datamodel=e.inlineSchema,this.tracingHelper=e.tracingHelper,e.enableDebugLogs&&(this.logLevel="debug");let r=Object.keys(e.overrideDatasources)[0],i=e.overrideDatasources[r]?.url;r!==void 0&&i!==void 0&&(this.datasourceOverrides={[r]:i}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(e){return{applyPendingMigrations:e.applyPendingMigrations?.bind(e),commitTransaction:this.withRequestId(e.commitTransaction.bind(e)),connect:this.withRequestId(e.connect.bind(e)),disconnect:this.withRequestId(e.disconnect.bind(e)),metrics:e.metrics?.bind(e),query:this.withRequestId(e.query.bind(e)),rollbackTransaction:this.withRequestId(e.rollbackTransaction.bind(e)),sdlSchema:e.sdlSchema?.bind(e),startTransaction:this.withRequestId(e.startTransaction.bind(e)),trace:e.trace.bind(e),free:e.free?.bind(e)}}withRequestId(e){return async(...t)=>{let r=_E().toString();try{return await e(...t,r)}finally{if(this.tracingHelper.isEnabled()){let i=await this.engine?.trace(r);if(i){let n=JSON.parse(i);this.tracingHelper.dispatchEngineSpans(n.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(e,t,r){await this.start();let i=await this.adapterPromise,n=JSON.stringify(t),s;if(e==="start"){let o=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel});s=await this.engine?.startTransaction(o,n)}else e==="commit"?s=await this.engine?.commitTransaction(r.id,n):e==="rollback"&&(s=await this.engine?.rollbackTransaction(r.id,n));let a=this.parseEngineResponse(s);if(qE(a)){let o=this.getExternalAdapterError(a,i?.errorRegistry);throw o?o.error:new Et(a.message,{code:a.error_code,clientVersion:this.config.clientVersion,meta:a.meta})}else if(typeof a.message=="string")throw new Oe(a.message,{clientVersion:this.config.clientVersion});return a}async instantiateLibrary(){if(He("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;Ib(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let e=await this.tracingHelper.runInChildSpan("detect_platform",()=>ua());if(!Vu.includes(e))throw new ae(`Unknown ${Ht("PRISMA_QUERY_ENGINE_LIBRARY")} ${Ht($e(e))}. Possible binaryTargets: ${Mr(Vu.join(", "))} or a path to the query engine library.
You may have to run ${Mr("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return e}}parseEngineResponse(e){if(!e)throw new Oe("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(e)}catch{throw new Oe("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let e=new WeakRef(this);this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(yu));let t=await this.adapterPromise;t&&He("Using driver adapter: %O",t),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},r=>{e.deref()?.logger(r)},t))}catch(e){let t=e,r=this.parseInitError(t.message);throw typeof r=="string"?t:new ae(r.message,this.config.clientVersion,r.error_code)}}}logger(e){let t=this.parseEngineResponse(e);t&&(t.level=t?.level.toLowerCase()??"unknown",TE(t)?this.logEmitter.emit("query",{timestamp:new Date,query:t.query,params:t.params,duration:Number(t.duration_ms),target:t.module_path}):IE(t)?this.loggerRustPanic=new wt(Is(this,`${t.message}: ${t.reason} in ${t.file}:${t.line}:${t.column}`),this.config.clientVersion):this.logEmitter.emit(t.level,{timestamp:new Date,message:t.message,target:t.module_path}))}parseInitError(e){try{return JSON.parse(e)}catch{}return e}parseRequestError(e){try{return JSON.parse(e)}catch{}return e}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(this.libraryInstantiationPromise||(this.libraryInstantiationPromise=this.instantiateLibrary()),await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return He(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let e=async()=>{He("library starting");try{let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(t)),this.libraryStarted=!0,this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(yu)),await this.adapterPromise,He("library started")}catch(t){let r=this.parseInitError(t.message);throw typeof r=="string"?t:new ae(r.message,this.config.clientVersion,r.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",e),this.libraryStartingPromise}async stop(){if(await this.libraryInstantiationPromise,await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return He("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted){await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0;return}let e=async()=>{await new Promise(r=>setImmediate(r)),He("library stopping");let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(t)),this.engine?.free&&this.engine.free(),this.engine=void 0,this.libraryStarted=!1,this.libraryStoppingPromise=void 0,this.libraryInstantiationPromise=void 0,await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0,He("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",e),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(e){return this.library?.debugPanic(e)}async request(e,{traceparent:t,interactiveTransaction:r}){He(`sending request, this.libraryStarted: ${this.libraryStarted}`);let i=JSON.stringify({traceparent:t}),n=JSON.stringify(e);try{await this.start();let s=await this.adapterPromise;this.executingQueryPromise=this.engine?.query(n,i,r?.id),this.lastQuery=n;let a=this.parseEngineResponse(await this.executingQueryPromise);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],s?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:a}}catch(s){if(s instanceof ae)throw s;if(s.code==="GenericFailure"&&s.message?.startsWith("PANIC:"))throw new wt(Is(this,s.message),this.config.clientVersion);let a=this.parseRequestError(s.message);throw typeof a=="string"?s:new Oe(`${a.message}
${a.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(e,{transaction:t,traceparent:r}){He("requestBatch");let i=Ra(e,t);await this.start();let n=await this.adapterPromise;this.lastQuery=JSON.stringify(i),this.executingQueryPromise=this.engine?.query(this.lastQuery,JSON.stringify({traceparent:r}),vE(t));let s=await this.executingQueryPromise,a=this.parseEngineResponse(s);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],n?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});let{batchResult:o,errors:l}=a;if(Array.isArray(o))return o.map(u=>u.errors&&u.errors.length>0?this.loggerRustPanic??this.buildQueryError(u.errors[0],n?.errorRegistry):{data:u});throw l&&l.length===1?new Error(l[0].error):new Error(JSON.stringify(a))}buildQueryError(e,t){if(e.user_facing_error.is_panic)return new wt(Is(this,e.user_facing_error.message),this.config.clientVersion);let r=this.getExternalAdapterError(e.user_facing_error,t);return r?r.error:Ta(e,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(e,t){if(e.error_code===RE&&t){let r=e.meta?.id;vu(typeof r=="number","Malformed external JS error received from the engine");let i=t.consumeError(r);return vu(i,"External error with reported id was not registered"),i}}async metrics(e){await this.start();let t=await this.engine.metrics(JSON.stringify(e));return e.format==="prometheus"?t:this.parseEngineResponse(t)}};function qE(e){return typeof e=="object"&&e!==null&&e.error_code!==void 0}function Is(e,t){return BS({binaryTarget:e.binaryTarget,title:t,version:e.config.clientVersion,engineVersion:e.versionInfo?.commit,database:e.config.activeProvider,query:e.lastQuery})}function CE({url:e,adapter:t,copyEngine:r,targetBuildType:i}){let n=[],s=[],a=g=>{n.push({_tag:"warning",value:g})},o=g=>{let E=g.join(`
`);s.push({_tag:"error",value:E})},l=!!e?.startsWith("prisma://"),u=Oc(e),c=!!t,d=l||u;!c&&r&&d&&i!=="client"&&i!=="wasm-compiler-edge"&&a(["recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"]);let f=d||!r;c&&(f||i==="edge")&&(i==="edge"?o(["Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint.","Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."]):d?o(["You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate.","Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."]):r||o(["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."]));let p={accelerate:f,ppg:u,driverAdapters:c};function m(g){return g.length>0}return m(s)?{ok:!1,diagnostics:{warnings:n,errors:s},isUsing:p}:{ok:!0,diagnostics:{warnings:n},isUsing:p}}function PE({copyEngine:e=!0},t){let r;try{r=Oa({inlineDatasources:t.inlineDatasources,overrideDatasources:t.overrideDatasources,env:{...t.env,...process.env},clientVersion:t.clientVersion})}catch{}let{ok:i,isUsing:n,diagnostics:s}=CE({url:r,adapter:t.adapter,copyEngine:e,targetBuildType:"library"});for(let d of s.warnings)Uc(...d.value);if(!i){let d=s.errors[0];throw new ot(d.value,{clientVersion:t.clientVersion})}let a=Ls(t.generator),o=a==="library",l=a==="binary",u=a==="client",c=(n.accelerate||n.ppg)&&!n.driverAdapters;return n.accelerate?new xE(t):(n.driverAdapters,o?new Bu(t):(n.accelerate,new Bu(t)))}function NE({generator:e}){return e?.previewFeatures??[]}var DE=e=>({command:e}),UE=e=>e.strings.reduce((t,r,i)=>`${t}@P${i}${r}`);function _r(e){try{return Gu(e,"fast")}catch{return Gu(e,"slow")}}function Gu(e,t){return JSON.stringify(e.map(r=>of(r,t)))}function of(e,t){if(Array.isArray(e))return e.map(r=>of(r,t));if(typeof e=="bigint")return{prisma__type:"bigint",prisma__value:e.toString()};if(ma(e))return{prisma__type:"date",prisma__value:e.toJSON()};if(Zi.isDecimal(e))return{prisma__type:"decimal",prisma__value:e.toJSON()};if(Buffer.isBuffer(e))return{prisma__type:"bytes",prisma__value:e.toString("base64")};if(LE(e))return{prisma__type:"bytes",prisma__value:Buffer.from(e).toString("base64")};if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{prisma__type:"bytes",prisma__value:Buffer.from(r,i,n).toString("base64")}}return typeof e=="object"&&t==="slow"?lf(e):e}function LE(e){return e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?!0:typeof e=="object"&&e!==null?e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer":!1}function lf(e){if(typeof e!="object"||e===null)return e;if(typeof e.toJSON=="function")return e.toJSON();if(Array.isArray(e))return e.map(Hu);let t={};for(let r of Object.keys(e))t[r]=Hu(e[r]);return t}function Hu(e){return typeof e=="bigint"?e.toString():lf(e)}var FE=/^(\s*alter\s)/i,Qu=ve("prisma:client");function Ku(e,t,r,i){if(!(e!=="postgresql"&&e!=="cockroachdb")&&r.length>0&&FE.exec(t))throw new Error(`Running ALTER using ${i} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var zu=({clientMethod:e,activeProvider:t})=>r=>{let i="",n;if(Td(r))i=r.sql,n={values:_r(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[s,...a]=r;i=s,n={values:_r(a||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{i=r.sql,n={values:_r(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{i=r.text,n={values:_r(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{i=UE(r),n={values:_r(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return n?.values?Qu(`prisma.${e}(${i}, ${n.values})`):Qu(`prisma.${e}(${i})`),{query:i,parameters:n}},ME={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Rt(t,r)}},jE={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function Ju(e){return function(t,r){let i,n=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=Wu(t(s)):Wu(t(s))}catch(a){return Promise.reject(a)}};return{get spec(){return r},then(s,a){return n().then(s,a)},catch(s){return n().catch(s)},finally(s){return n().finally(s)},requestTransaction(s){let a=n(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function Wu(e){return typeof e.then=="function"?e:Promise.resolve(e)}var $E=q1.split(".")[0],VE={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},BE=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(e){return this.getGlobalTracingHelper().getTraceParent(e)}dispatchEngineSpans(e){return this.getGlobalTracingHelper().dispatchEngineSpans(e)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(e,t){return this.getGlobalTracingHelper().runInChildSpan(e,t)}getGlobalTracingHelper(){let e=globalThis[`V${$E}_PRISMA_INSTRUMENTATION`],t=globalThis.PRISMA_INSTRUMENTATION;return e?.helper??t?.helper??VE}};function GE(){return new BE}function HE(e,t=()=>{}){let r,i=new Promise(n=>r=n);return{then(n){return--e===0&&r(t()),n?.(i)}}}function QE(e){return typeof e=="string"?e:e.reduce((t,r)=>{let i=typeof r=="string"?r:r.level;return i==="query"?t:t&&(r==="info"||t==="info")?"info":i},void 0)}function uf(e){return typeof e.batchRequestIdx=="number"}function KE(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(sa(e.query.arguments)),t.push(sa(e.query.selection)),t.join("")}function sa(e){return`(${Object.keys(e).sort().map(t=>{let r=e[t];return typeof r=="object"&&r!==null?`(${t} ${sa(r)})`:t}).join(" ")})`}var zE={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function Yu(e){return zE[e]}var JE=class{constructor(e){this.options=e,this.batches={}}batches;tickActive=!1;request(e){let t=this.options.batchBy(e);return t?(this.batches[t]||(this.batches[t]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((r,i)=>{this.batches[t].push({request:e,resolve:r,reject:i})})):this.options.singleLoader(e)}dispatchBatches(){for(let e in this.batches){let t=this.batches[e];delete this.batches[e],t.length===1?this.options.singleLoader(t[0].request).then(r=>{r instanceof Error?t[0].reject(r):t[0].resolve(r)}).catch(r=>{t[0].reject(r)}):(t.sort((r,i)=>this.options.batchOrder(r.request,i.request)),this.options.batchLoader(t.map(r=>r.request)).then(r=>{if(r instanceof Error)for(let i=0;i<t.length;i++)t[i].reject(r);else for(let i=0;i<t.length;i++){let n=r[i];n instanceof Error?t[i].reject(n):t[i].resolve(n)}}).catch(r=>{for(let i=0;i<t.length;i++)t[i].reject(r)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function Bt(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"decimal":return new Zi(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Bt("bigint",r));case"bytes-array":return t.map(r=>Bt("bytes",r));case"decimal-array":return t.map(r=>Bt("decimal",r));case"datetime-array":return t.map(r=>Bt("datetime",r));case"date-array":return t.map(r=>Bt("date",r));case"time-array":return t.map(r=>Bt("time",r));default:return t}}function cf(e){let t=[],r=WE(e);for(let i=0;i<e.rows.length;i++){let n=e.rows[i],s={...r};for(let a=0;a<n.length;a++)s[e.columns[a]]=Bt(e.types[a],n[a]);t.push(s)}return t}function WE(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var YE=ve("prisma:client:request_handler"),XE=class{client;dataloader;logEmitter;constructor(e,t){this.logEmitter=t,this.client=e,this.dataloader=new JE({batchLoader:RS(async({requests:r,customDataProxyFetch:i})=>{let{transaction:n,otelParentCtx:s}=r[0],a=r.map(u=>u.protocolQuery),o=this.client._tracingHelper.getTraceParent(s),l=r.some(u=>Yu(u.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:o,transaction:ZE(n),containsWrite:l,customDataProxyFetch:i})).map((u,c)=>{if(u instanceof Error)return u;try{return this.mapQueryEngineResult(r[c],u)}catch(d){return d}})}),singleLoader:async r=>{let i=r.transaction?.kind==="itx"?df(r.transaction):void 0,n=await this.client._engine.request(r.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:Yu(r.protocolQuery.action),customDataProxyFetch:r.customDataProxyFetch});return this.mapQueryEngineResult(r,n)},batchBy:r=>r.transaction?.id?`transaction-${r.transaction.id}`:KE(r.protocolQuery),batchOrder(r,i){return r.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?r.transaction.index-i.transaction.index:0}})}async request(e){try{return await this.dataloader.request(e)}catch(t){let{clientMethod:r,callsite:i,transaction:n,args:s,modelName:a}=e;this.handleAndLogRequestError({error:t,clientMethod:r,callsite:i,transaction:n,args:s,modelName:a,globalOmit:e.globalOmit})}}mapQueryEngineResult({dataPath:e,unpacker:t},r){let i=r?.data,n=this.unpack(i,e,t);return process.env.PRISMA_CLIENT_GET_TIME?{data:n}:n}handleAndLogRequestError(e){try{this.handleRequestError(e)}catch(t){throw this.logEmitter&&this.logEmitter.emit("error",{message:t.message,target:e.clientMethod,timestamp:new Date}),t}}handleRequestError({error:e,clientMethod:t,callsite:r,transaction:i,args:n,modelName:s,globalOmit:a}){if(YE(e),ek(e,i))throw e;if(e instanceof Et&&tk(e)){let l=ff(e.meta);md({args:n,errors:[l],callsite:r,errorFormat:this.client._errorFormat,originalMethod:t,clientVersion:this.client._clientVersion,globalOmit:a})}let o=e.message;if(r&&(o=Yc({callsite:r,originalMethod:t,isPanic:e.isPanic,showColors:this.client._errorFormat==="pretty",message:o})),o=this.sanitizeMessage(o),e.code){let l=s?{modelName:s,...e.meta}:e.meta;throw new Et(o,{code:e.code,clientVersion:this.client._clientVersion,meta:l,batchRequestIdx:e.batchRequestIdx})}else{if(e.isPanic)throw new wt(o,this.client._clientVersion);if(e instanceof Oe)throw new Oe(o,{clientVersion:this.client._clientVersion,batchRequestIdx:e.batchRequestIdx});if(e instanceof ae)throw new ae(o,this.client._clientVersion);if(e instanceof wt)throw new wt(o,this.client._clientVersion)}throw e.clientVersion=this.client._clientVersion,e}sanitizeMessage(e){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Ms(e):e}unpack(e,t,r){if(!e||(e.data&&(e=e.data),!e))return e;let i=Object.keys(e)[0],n=Object.values(e)[0],s=t.filter(l=>l!=="select"&&l!=="include"),a=Cd(n,s),o=i==="queryRaw"?cf(a):Qi(a);return r?r(o):o}get[Symbol.toStringTag](){return"RequestHandler"}};function ZE(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:df(e)};ha(e,"Unknown transaction kind")}}function df(e){return{id:e.id,payload:e.payload}}function ek(e,t){return uf(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function tk(e){return e.code==="P2009"||e.code==="P2012"}function ff(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(ff)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var rk=zS,ik=H(lc()),Y=class extends Error{constructor(e){super(e+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};ne(Y,"PrismaClientConstructorValidationError");var Xu=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],Zu=["pretty","colorless","minimal"],ec=["info","query","warn","error"],nk={datasources:(e,{datasourceNames:t})=>{if(e){if(typeof e!="object"||Array.isArray(e))throw new Y(`Invalid value ${JSON.stringify(e)} for "datasources" provided to PrismaClient constructor`);for(let[r,i]of Object.entries(e)){if(!t.includes(r)){let n=rr(r,t)||` Available datasources: ${t.join(", ")}`;throw new Y(`Unknown datasource ${r} provided to PrismaClient constructor.${n}`)}if(typeof i!="object"||Array.isArray(i))throw new Y(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(i&&typeof i=="object")for(let[n,s]of Object.entries(i)){if(n!=="url")throw new Y(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof s!="string")throw new Y(`Invalid value ${JSON.stringify(s)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(e,t)=>{if(!e&&Ls(t.generator)==="client")throw new Y('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(e!==null){if(e===void 0)throw new Y('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(Ls(t.generator)==="binary")throw new Y('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')}},datasourceUrl:e=>{if(typeof e<"u"&&typeof e!="string")throw new Y(`Invalid value ${JSON.stringify(e)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:e=>{if(e){if(typeof e!="string")throw new Y(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!Zu.includes(e)){let t=rr(e,Zu);throw new Y(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new Y(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!ec.includes(r)){let i=rr(r,ec);throw new Y(`Invalid log level "${r}" provided to PrismaClient constructor.${i}`)}}for(let r of e){t(r);let i={level:t,emit:n=>{let s=["stdout","event"];if(!s.includes(n)){let a=rr(n,s);throw new Y(`Invalid value ${JSON.stringify(n)} for "emit" in logLevel provided to PrismaClient constructor.${a}`)}}};if(r&&typeof r=="object")for(let[n,s]of Object.entries(r))if(i[n])i[n](s);else throw new Y(`Invalid property ${n} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new Y(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new Y(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new Y('"omit" option is expected to be an object.');if(e===null)throw new Y('"omit" option can not be `null`');let r=[];for(let[i,n]of Object.entries(e)){let s=ok(i,t.runtimeDataModel);if(!s){r.push({kind:"UnknownModel",modelKey:i});continue}for(let[a,o]of Object.entries(n)){let l=s.fields.find(u=>u.name===a);if(!l){r.push({kind:"UnknownField",modelKey:i,fieldName:a});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:i,fieldName:a});continue}typeof o!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:i,fieldName:a})}}if(r.length>0)throw new Y(lk(e,r))},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new Y(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let i=rr(r,t);throw new Y(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${i}`)}}};function sk(e,t){for(let[r,i]of Object.entries(e)){if(!Xu.includes(r)){let n=rr(r,Xu);throw new Y(`Unknown property ${r} provided to PrismaClient constructor.${n}`)}nk[r](i,t)}if(e.datasourceUrl&&e.datasources)throw new Y('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function rr(e,t){if(t.length===0||typeof e!="string")return"";let r=ak(e,t);return r?` Did you mean "${r}"?`:""}function ak(e,t){if(t.length===0)return null;let r=t.map(n=>({value:n,distance:(0,ik.default)(e,n)}));r.sort((n,s)=>n.distance<s.distance?-1:1);let i=r[0];return i.distance<3?i.value:null}function ok(e,t){return tc(t.models,e)??tc(t.types,e)}function tc(e,t){let r=Object.keys(e).find(i=>Ji(i)===t);if(r)return e[r]}function lk(e,t){let r=Ea(e);for(let s of t)switch(s.kind){case"UnknownModel":r.arguments.getField(s.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${s.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${s.modelKey}" does not have a field named "${s.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:i,args:n}=hd(r,"colorless");return`Error validating "omit" option:

${n}

${i}`}function uk(e){return e.length===0?Promise.resolve([]):new Promise((t,r)=>{let i=new Array(e.length),n=null,s=!1,a=0,o=()=>{s||(a++,a===e.length&&(s=!0,n?r(n):t(i)))},l=u=>{s||(s=!0,r(u))};for(let u=0;u<e.length;u++)e[u].then(c=>{i[u]=c,o()},c=>{if(!uf(c)){l(c);return}c.batchRequestIdx===u?l(c):(n||(n=c),o())})})}var ht=ve("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var ck={requestArgsToMiddlewareArgs:e=>e,middlewareArgsToRequestArgs:e=>e},dk=Symbol.for("prisma.client.transaction.id"),fk={id:0,nextId(){return++this.id}};function pk(e){class t{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=Ju();constructor(i){e=i?.__internal?.configOverride?.(e)??e,TS(e),i&&sk(i,e);let n=new ww.EventEmitter().on("error",()=>{});this._extensions=gd.empty(),this._previewFeatures=NE(e),this._clientVersion=e.clientVersion??rk,this._activeProvider=e.activeProvider,this._globalOmit=i?.omit,this._tracingHelper=GE();let s=e.relativeEnvPaths&&{rootEnvPath:e.relativeEnvPaths.rootEnvPath&&ks.default.resolve(e.dirname,e.relativeEnvPaths.rootEnvPath),schemaEnvPath:e.relativeEnvPaths.schemaEnvPath&&ks.default.resolve(e.dirname,e.relativeEnvPaths.schemaEnvPath)},a;if(i?.adapter){a=i.adapter;let l=e.activeProvider==="postgresql"||e.activeProvider==="cockroachdb"?"postgres":e.activeProvider;if(a.provider!==l)throw new ae(`The Driver Adapter \`${a.adapterName}\`, based on \`${a.provider}\`, is not compatible with the provider \`${l}\` specified in the Prisma schema.`,this._clientVersion);if(i.datasources||i.datasourceUrl!==void 0)throw new ae("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let o=!a&&s&&Pc(s,{conflictCheck:"none"})||e.injectableEdgeEnv?.();try{let l=i??{},u=l.__internal??{},c=u.debug===!0;c&&ve.enable("prisma:client");let d=ks.default.resolve(e.dirname,e.relativePath);Sw.default.existsSync(d)||(d=e.dirname),ht("dirname",e.dirname),ht("relativePath",e.relativePath),ht("cwd",d);let f=u.engine||{};if(l.errorFormat?this._errorFormat=l.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=e.runtimeDataModel,this._engineConfig={cwd:d,dirname:e.dirname,enableDebugLogs:c,allowTriggerPanic:f.allowTriggerPanic,prismaPath:f.binaryPath??void 0,engineEndpoint:f.endpoint,generator:e.generator,showColors:this._errorFormat==="pretty",logLevel:l.log&&QE(l.log),logQueries:l.log&&!!(typeof l.log=="string"?l.log==="query":l.log.find(p=>typeof p=="string"?p==="query":p.level==="query")),env:o?.parsed??{},flags:[],engineWasm:e.engineWasm,compilerWasm:e.compilerWasm,clientVersion:e.clientVersion,engineVersion:e.engineVersion,previewFeatures:this._previewFeatures,activeProvider:e.activeProvider,inlineSchema:e.inlineSchema,overrideDatasources:IS(l,e.datasourceNames),inlineDatasources:e.inlineDatasources,inlineSchemaHash:e.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:l.transactionOptions?.maxWait??2e3,timeout:l.transactionOptions?.timeout??5e3,isolationLevel:l.transactionOptions?.isolationLevel},logEmitter:n,isBundled:e.isBundled,adapter:a},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:Oa,getBatchRequestPayload:Ra,prismaGraphQLToJSError:Ta,PrismaClientUnknownRequestError:Oe,PrismaClientInitializationError:ae,PrismaClientKnownRequestError:Et,debug:ve("prisma:client:accelerateEngine"),engineVersion:xw.version,clientVersion:e.clientVersion}},ht("clientVersion",e.clientVersion),this._engine=PE(e,this._engineConfig),this._requestHandler=new XE(this,n),l.log)for(let p of l.log){let m=typeof p=="string"?p:p.emit==="stdout"?p.level:null;m&&this.$on(m,g=>{Fs.log(`${Fs.tags[m]??""}`,g.message||g.query)})}}catch(l){throw l.clientVersion=this._clientVersion,l}return this._appliedParent=ra(this)}get[Symbol.toStringTag](){return"PrismaClient"}$on(i,n){return i==="beforeExit"?this._engine.onBeforeExit(n):i&&this._engineConfig.logEmitter.on(i,n),this}$connect(){try{return this._engine.start()}catch(i){throw i.clientVersion=this._clientVersion,i}}async $disconnect(){try{await this._engine.stop()}catch(i){throw i.clientVersion=this._clientVersion,i}finally{Rb()}}$executeRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"executeRaw",args:s,transaction:i,clientMethod:n,argsMapper:zu({clientMethod:n,activeProvider:o}),callsite:Lr(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$executeRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0){let[a,o]=rc(i,n);return Ku(this._activeProvider,a.text,a.values,Array.isArray(i)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(s,"$executeRaw",a,o)}throw new ot("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(i,...n){return this._createPrismaPromise(s=>(Ku(this._activeProvider,i,n,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(s,"$executeRawUnsafe",[i,...n])))}$runCommandRaw(i){if(e.activeProvider!=="mongodb")throw new ot(`The ${e.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(n=>this._request({args:i,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:DE,callsite:Lr(this._errorFormat),transaction:n}))}async $queryRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"queryRaw",args:s,transaction:i,clientMethod:n,argsMapper:zu({clientMethod:n,activeProvider:o}),callsite:Lr(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$queryRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0)return this.$queryRawInternal(s,"$queryRaw",...rc(i,n));throw new ot("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(i){return this._createPrismaPromise(n=>{if(!this._hasPreviewFlag("typedSql"))throw new ot("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(n,"$queryRawTyped",i)})}$queryRawUnsafe(i,...n){return this._createPrismaPromise(s=>this.$queryRawInternal(s,"$queryRawUnsafe",[i,...n]))}_transactionWithArray({promises:i,options:n}){let s=fk.nextId(),a=HE(i.length),o=i.map((l,u)=>{if(l?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let c=n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,d={kind:"batch",id:s,index:u,isolationLevel:c,lock:a};return l.requestTransaction?.(d)??l});return uk(o)}async _transactionWithCallback({callback:i,options:n}){let s={traceparent:this._tracingHelper.getTraceParent()},a={maxWait:n?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:n?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},o=await this._engine.transaction("start",s,a),l;try{let u={kind:"itx",...o};l=await i(this._createItxClient(u)),await this._engine.transaction("commit",s,o)}catch(u){throw await this._engine.transaction("rollback",s,o).catch(()=>{}),u}return l}_createItxClient(i){return lr(ra(lr(hS(this),[Ye("_appliedParent",()=>this._appliedParent._createItxClient(i)),Ye("_createPrismaPromise",()=>Ju(i)),Ye(dk,()=>i.id)])),[Zs(wS)])}$transaction(i,n){let s;typeof i=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?s=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:s=()=>this._transactionWithCallback({callback:i,options:n}):s=()=>this._transactionWithArray({promises:i,options:n});let a={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(a,s)}_request(i){i.otelParentCtx=this._tracingHelper.getActiveContext();let n=i.middlewareArgsMapper??ck,s={args:n.requestArgsToMiddlewareArgs(i.args),dataPath:i.dataPath,runInTransaction:!!i.transaction,action:i.action,model:i.model},a={operation:{name:"operation",attributes:{method:s.action,model:s.model,name:s.model?`${s.model}.${s.action}`:s.action}}},o=async l=>{let{runInTransaction:u,args:c,...d}=l,f={...i,...d};c&&(f.args=n.middlewareArgsToRequestArgs(c)),i.transaction!==void 0&&u===!1&&delete f.transaction;let p=await AS(this,f);return f.model?xS({result:p,modelName:f.model,args:f.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):p};return this._tracingHelper.runInChildSpan(a.operation,()=>new vw.AsyncResource("prisma-client-request").runInAsyncScope(()=>o(s)))}async _executeRequest({args:i,clientMethod:n,dataPath:s,callsite:a,action:o,model:l,argsMapper:u,transaction:c,unpacker:d,otelParentCtx:f,customDataProxyFetch:p}){try{i=u?u(i):i;let m={name:"serialize"},g=this._tracingHelper.runInChildSpan(m,()=>Sd({modelName:l,runtimeDataModel:this._runtimeDataModel,action:o,args:i,clientMethod:n,callsite:a,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return ve.enabled("prisma:client")&&(ht("Prisma Client call:"),ht(`prisma.${n}(${Tw(i)})`),ht("Generated request:"),ht(JSON.stringify(g,null,2)+`
`)),c?.kind==="batch"&&await c.lock,this._requestHandler.request({protocolQuery:g,modelName:l,action:o,clientMethod:n,dataPath:s,callsite:a,args:i,extensions:this._extensions,transaction:c,unpacker:d,otelParentCtx:f,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:p})}catch(m){throw m.clientVersion=this._clientVersion,m}}$metrics=new Ad(this);_hasPreviewFlag(i){return!!this._engineConfig.previewFeatures?.includes(i)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}$extends=mS}return t}function rc(e,t){return hk(e)?[new Rt(e,t),ME]:[e,jE]}function hk(e){return Array.isArray(e)&&Array.isArray(e.raw)}var mk=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function gk(e){return new Proxy(e,{get(t,r){if(r in t)return t[r];if(!mk.has(r))throw new TypeError(`Invalid enum value: ${String(r)}`)}})}function yk(e){Pc(e,{conflictCheck:"warn"})}});var gf=h(D=>{Object.defineProperty(D,"__esModule",{value:!0});var{PrismaClientKnownRequestError:bk,PrismaClientUnknownRequestError:xk,PrismaClientRustPanicError:vk,PrismaClientInitializationError:wk,PrismaClientValidationError:Sk,getPrismaClient:Ek,sqltag:kk,empty:Ak,join:Rk,raw:Tk,skip:kP,Decimal:Ik,Debug:AP,objectEnumValues:cr,makeStrictEnum:Ok,Extensions:mf,warnOnce:RP,defineDmmfProperty:_k,Public:qk,getRuntime:TP,createParam:IP}=Ca(),z={};D.Prisma=z;D.$Enums={};z.prismaVersion={client:"6.19.0",engine:"2ba551f319ab1df4bc874a89965d8b3641056773"};z.PrismaClientKnownRequestError=bk;z.PrismaClientUnknownRequestError=xk;z.PrismaClientRustPanicError=vk;z.PrismaClientInitializationError=wk;z.PrismaClientValidationError=Sk;z.Decimal=Ik;z.sql=kk;z.empty=Ak;z.join=Rk;z.raw=Tk;z.validator=qk.validator;z.getExtensionContext=mf.getExtensionContext;z.defineExtension=mf.defineExtension;z.DbNull=cr.instances.DbNull;z.JsonNull=cr.instances.JsonNull;z.AnyNull=cr.instances.AnyNull;z.NullTypes={DbNull:cr.classes.DbNull,JsonNull:cr.classes.JsonNull,AnyNull:cr.classes.AnyNull};var ct=require("path");D.Prisma.TransactionIsolationLevel=Ok({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});D.Prisma.UserScalarFieldEnum={id:"id",username:"username",email:"email",normalizedEmail:"normalizedEmail",password:"password",displayName:"displayName",bio:"bio",avatar:"avatar",name:"name",role:"role",emailVerified:"emailVerified",emailVerifiedAt:"emailVerifiedAt",twoFactorEnabled:"twoFactorEnabled",twoFactorSecret:"twoFactorSecret",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ScriptScalarFieldEnum={id:"id",title:"title",summary:"summary",authorId:"authorId",createdAt:"createdAt"};D.Prisma.AuditionScalarFieldEnum={id:"id",title:"title",summary:"summary",hostId:"hostId",createdAt:"createdAt"};D.Prisma.PostScalarFieldEnum={id:"id",content:"content",media:"media",authorId:"authorId",createdAt:"createdAt"};D.Prisma.ReelScalarFieldEnum={id:"id",videoUrl:"videoUrl",thumbnail:"thumbnail",caption:"caption",authorId:"authorId",createdAt:"createdAt"};D.Prisma.CommentScalarFieldEnum={id:"id",text:"text",reelId:"reelId",authorId:"authorId",createdAt:"createdAt"};D.Prisma.LikeScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};D.Prisma.BookmarkScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};D.Prisma.ConversationScalarFieldEnum={id:"id",title:"title",lastMessage:"lastMessage",lastMessageAt:"lastMessageAt",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ConversationParticipantScalarFieldEnum={id:"id",conversationId:"conversationId",userId:"userId",joinedAt:"joinedAt"};D.Prisma.MessageScalarFieldEnum={id:"id",text:"text",conversationId:"conversationId",senderId:"senderId",createdAt:"createdAt"};D.Prisma.NotificationScalarFieldEnum={id:"id",type:"type",message:"message",recipientId:"recipientId",triggererId:"triggererId",isRead:"isRead",metadata:"metadata",createdAt:"createdAt"};D.Prisma.ConnectionRequestScalarFieldEnum={id:"id",senderId:"senderId",receiverId:"receiverId",status:"status",message:"message",createdAt:"createdAt"};D.Prisma.ProfileScalarFieldEnum={id:"id",userId:"userId",vanityUrl:"vanityUrl",headline:"headline",bio:"bio",roles:"roles",location:"location",privacy:"privacy",tags:"tags",socialLinks:"socialLinks",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.MediaScalarFieldEnum={id:"id",profileId:"profileId",type:"type",s3Key:"s3Key",posterS3Key:"posterS3Key",title:"title",description:"description",duration:"duration",width:"width",height:"height",fileSize:"fileSize",privacy:"privacy",processedStatus:"processedStatus",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.CreditScalarFieldEnum={id:"id",profileId:"profileId",title:"title",role:"role",company:"company",year:"year",description:"description",orderIndex:"orderIndex",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.UserSettingsScalarFieldEnum={id:"id",userId:"userId",notifications:"notifications",accountSecurity:"accountSecurity",privacy:"privacy",billing:"billing",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ReelRequestScalarFieldEnum={id:"id",mediaId:"mediaId",requesterId:"requesterId",ownerId:"ownerId",status:"status",message:"message",response:"response",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.EmailVerificationTokenScalarFieldEnum={id:"id",userId:"userId",token:"token",expiresAt:"expiresAt",createdAt:"createdAt"};D.Prisma.RefreshTokenScalarFieldEnum={id:"id",userId:"userId",jti:"jti",expiresAt:"expiresAt",invalidatedAt:"invalidatedAt",createdAt:"createdAt",lastUsedAt:"lastUsedAt"};D.Prisma.PRIntelligenceScalarFieldEnum={id:"id",prNumber:"prNumber",changedFilesCount:"changedFilesCount",sensitivePathsCount:"sensitivePathsCount",riskScore:"riskScore",metadata:"metadata",createdAt:"createdAt"};D.Prisma.TestRunScalarFieldEnum={id:"id",suite:"suite",testName:"testName",status:"status",durationMs:"durationMs",runAt:"runAt",metadata:"metadata"};D.Prisma.ModerationReportScalarFieldEnum={id:"id",reporterId:"reporterId",targetType:"targetType",targetId:"targetId",category:"category",description:"description",evidenceUrls:"evidenceUrls",status:"status",severity:"severity",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ModerationActionScalarFieldEnum={id:"id",reportId:"reportId",action:"action",reason:"reason",actorId:"actorId",createdAt:"createdAt"};D.Prisma.AnalyticsEventScalarFieldEnum={id:"id",event:"event",anonId:"anonId",userId:"userId",sessionId:"sessionId",properties:"properties",createdAt:"createdAt"};D.Prisma.SortOrder={asc:"asc",desc:"desc"};D.Prisma.NullableJsonNullValueInput={DbNull:z.DbNull,JsonNull:z.JsonNull};D.Prisma.JsonNullValueInput={JsonNull:z.JsonNull};D.Prisma.QueryMode={default:"default",insensitive:"insensitive"};D.Prisma.NullsOrder={first:"first",last:"last"};D.Prisma.JsonNullValueFilter={DbNull:z.DbNull,JsonNull:z.JsonNull,AnyNull:z.AnyNull};D.Prisma.ModelName={User:"User",Script:"Script",Audition:"Audition",Post:"Post",Reel:"Reel",Comment:"Comment",Like:"Like",Bookmark:"Bookmark",Conversation:"Conversation",ConversationParticipant:"ConversationParticipant",Message:"Message",Notification:"Notification",ConnectionRequest:"ConnectionRequest",Profile:"Profile",Media:"Media",Credit:"Credit",UserSettings:"UserSettings",ReelRequest:"ReelRequest",EmailVerificationToken:"EmailVerificationToken",RefreshToken:"RefreshToken",PRIntelligence:"PRIntelligence",TestRun:"TestRun",ModerationReport:"ModerationReport",ModerationAction:"ModerationAction",AnalyticsEvent:"AnalyticsEvent"};var Te={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\node_modules\\@prisma\\client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"rhel-openssl-3.0.x"}],previewFeatures:[],sourceFilePath:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\prisma\\schema.prisma"},relativeEnvPaths:{rootEnvPath:null},relativePath:"../../../prisma",clientVersion:"6.19.0",engineVersion:"2ba551f319ab1df4bc874a89965d8b3641056773",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(uuid())
  username         String    @unique
  email            String    @unique
  normalizedEmail  String?   @unique // Lowercase normalized email for case-insensitive lookups
  password         String // hashed password
  displayName      String
  bio              String?
  avatar           String?
  name             String?
  role             String    @default("artist") // 'artist' | 'observer'
  emailVerified    Boolean   @default(false)
  emailVerifiedAt  DateTime?
  twoFactorEnabled Boolean   @default(false)
  twoFactorSecret  String? // Encrypted or hashed TOTP secret
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  scripts              Script[]
  auditions            Audition[]
  posts                Post[]
  reels                Reel[]
  comments             Comment[]
  likes                Like[]
  bookmarks            Bookmark[]
  sentRequests         ConnectionRequest[]       @relation("sender")
  receivedRequests     ConnectionRequest[]       @relation("receiver")
  sentMessages         Message[]                 @relation("sender")
  conversations        ConversationParticipant[]
  notifications        Notification[]            @relation("recipient")
  triggeredNotifs      Notification[]            @relation("triggerer")
  profile              Profile?
  settings             UserSettings?
  sentReelRequests     ReelRequest[]             @relation("requester")
  receivedReelRequests ReelRequest[]             @relation("owner")
  verificationTokens   EmailVerificationToken[]
  refreshTokens        RefreshToken[]

  @@map("users")
}

model Script {
  id        String   @id @default(cuid())
  title     String
  summary   String
  authorId  String
  author    User     @relation(fields: [authorId], references: [id])
  createdAt DateTime @default(now())
}

model Audition {
  id        String   @id @default(cuid())
  title     String
  summary   String
  hostId    String
  host      User     @relation(fields: [hostId], references: [id])
  createdAt DateTime @default(now())
}

model Post {
  id        String   @id @default(uuid())
  content   String   @db.Text
  media     String[]
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([authorId])
  @@map("posts")
}

model Reel {
  id        String   @id @default(uuid())
  videoUrl  String
  thumbnail String?
  caption   String?  @db.Text
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  comments  Comment[]
  likes     Like[]
  bookmarks Bookmark[]

  @@index([authorId])
  @@index([createdAt])
  @@map("reels")
}

model Comment {
  id        String   @id @default(uuid())
  text      String   @db.Text
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([reelId])
  @@index([authorId])
  @@map("comments")
}

model Like {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("likes")
}

model Bookmark {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("bookmarks")
}

model Conversation {
  id            String    @id @default(uuid())
  title         String?
  lastMessage   String?   @db.Text
  lastMessageAt DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  participants ConversationParticipant[]
  messages     Message[]

  @@map("conversations")
}

model ConversationParticipant {
  id             String       @id @default(uuid())
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  userId         String
  user           User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  joinedAt       DateTime     @default(now())

  @@unique([conversationId, userId])
  @@index([userId])
  @@map("conversation_participants")
}

model Message {
  id             String       @id @default(uuid())
  text           String       @db.Text
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  senderId       String
  sender         User         @relation("sender", fields: [senderId], references: [id], onDelete: Cascade)
  createdAt      DateTime     @default(now())

  @@index([conversationId])
  @@index([senderId])
  @@map("messages")
}

model Notification {
  id          String   @id @default(uuid())
  type        String // 'like', 'comment', 'follow', 'message'
  message     String   @db.Text
  recipientId String
  recipient   User     @relation("recipient", fields: [recipientId], references: [id], onDelete: Cascade)
  triggererId String?
  triggerer   User?    @relation("triggerer", fields: [triggererId], references: [id], onDelete: SetNull)
  isRead      Boolean  @default(false)
  metadata    Json? // Additional data like reelId, commentId, etc.
  createdAt   DateTime @default(now())

  @@index([recipientId, isRead])
  @@index([createdAt])
  @@map("notifications")
}

model ConnectionRequest {
  id         String   @id @default(uuid())
  senderId   String
  sender     User     @relation("sender", fields: [senderId], references: [id])
  receiverId String
  receiver   User     @relation("receiver", fields: [receiverId], references: [id])
  status     String   @default("pending")
  message    String?
  createdAt  DateTime @default(now())

  @@unique([senderId, receiverId])
  @@map("connection_requests")
}

model Profile {
  id          String   @id @default(uuid())
  userId      String   @unique
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  vanityUrl   String   @unique
  headline    String?
  bio         String?  @db.Text
  roles       String[] // ["Actor", "Director", "Writer"]
  location    Json? // { city: "Los Angeles", state: "CA", country: "USA" }
  privacy     Json     @default("{}") // { visibility: "public|network|private", showEmail: false, showPhone: false }
  tags        String[] // searchable tags
  socialLinks Json? // { website: "", instagram: "", imdb: "" }
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  media   Media[]
  credits Credit[]

  @@index([vanityUrl])
  @@index([roles])
  @@map("profiles")
}

model Media {
  id              String   @id @default(uuid())
  profileId       String
  profile         Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  type            String // "image" | "video" | "pdf"
  s3Key           String // S3 object key
  posterS3Key     String? // For videos - thumbnail/poster frame
  title           String?
  description     String?  @db.Text
  duration        Int? // For videos in seconds
  width           Int?
  height          Int?
  fileSize        Int? // In bytes
  privacy         String   @default("public") // "public" | "on-request" | "private"
  processedStatus String   @default("pending") // "pending" | "processing" | "complete" | "failed"
  metadata        Json? // Additional metadata like tags, derivatives, etc.
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  reelRequests ReelRequest[]

  @@index([profileId])
  @@index([type])
  @@index([privacy])
  @@index([processedStatus])
  @@map("media")
}

model Credit {
  id          String   @id @default(uuid())
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  title       String // Project/show title
  role        String // Character or position
  company     String? // Production company
  year        Int?
  description String?  @db.Text
  orderIndex  Int      @default(0) // For custom ordering
  metadata    Json? // Additional fields like genre, awards, etc.
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([profileId])
  @@index([year])
  @@map("credits")
}

model UserSettings {
  id              String   @id @default(uuid())
  userId          String   @unique
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  notifications   Json     @default("{}") // { email: true, push: true, reelRequests: true, messages: true }
  accountSecurity Json     @default("{}") // { twoFactorEnabled: false, loginNotifications: true }
  privacy         Json     @default("{}") // { showActivity: true, allowMessagesFrom: "everyone" }
  billing         Json? // Reference to billing info (not stored directly for PCI compliance)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("user_settings")
}

model ReelRequest {
  id          String   @id @default(uuid())
  mediaId     String
  media       Media    @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  requesterId String
  requester   User     @relation("requester", fields: [requesterId], references: [id], onDelete: Cascade)
  ownerId     String
  owner       User     @relation("owner", fields: [ownerId], references: [id], onDelete: Cascade)
  status      String   @default("pending") // "pending" | "approved" | "denied"
  message     String?  @db.Text
  response    String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([mediaId, requesterId])
  @@index([mediaId])
  @@index([requesterId])
  @@index([ownerId, status])
  @@map("reel_requests")
}

model EmailVerificationToken {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@index([userId])
  @@index([token])
  @@map("email_verification_tokens")
}

model RefreshToken {
  id            String    @id @default(uuid())
  userId        String
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  jti           String    @unique // JWT ID for tracking
  expiresAt     DateTime
  invalidatedAt DateTime? // When token was invalidated (logout)
  createdAt     DateTime  @default(now())
  lastUsedAt    DateTime  @default(now())

  @@index([userId])
  @@index([jti])
  @@index([userId, invalidatedAt])
  @@map("refresh_tokens")
}

model PRIntelligence {
  id                  String   @id @default(uuid())
  prNumber            Int
  changedFilesCount   Int
  sensitivePathsCount Int
  riskScore           Float
  metadata            Json? // Additional PR metadata
  createdAt           DateTime @default(now())

  @@index([prNumber])
  @@index([riskScore])
  @@map("pr_intelligence")
}

model TestRun {
  id         String   @id @default(uuid())
  suite      String
  testName   String
  status     String // "passed" | "failed" | "skipped"
  durationMs Int
  runAt      DateTime @default(now())
  metadata   Json? // Additional test metadata

  @@index([suite, testName])
  @@index([runAt])
  @@index([status])
  @@map("test_runs")
}

model ModerationReport {
  id           String   @id @default(cuid())
  reporterId   String
  targetType   String // "user" | "profile" | "post" | "comment" | "link"
  targetId     String
  category     String // from REPORT_CATEGORY_ALLOWLIST
  description  String?  @db.Text
  evidenceUrls String[] @default([])
  status       String   @default("open") // "open" | "reviewed" | "actioned" | "dismissed"
  severity     Int      @default(0) // 0=info,1=low,2=med,3=high
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  actions ModerationAction[]

  @@index([reporterId])
  @@index([targetType, targetId])
  @@index([status])
  @@index([category])
  @@index([severity])
  @@index([createdAt])
  @@map("moderation_reports")
}

model ModerationAction {
  id        String   @id @default(cuid())
  reportId  String
  action    String // "allow" | "remove" | "ban" | "warn"
  reason    String?  @db.Text
  actorId   String // admin userId
  createdAt DateTime @default(now())

  report ModerationReport @relation(fields: [reportId], references: [id], onDelete: Cascade)

  @@index([reportId])
  @@index([actorId])
  @@index([createdAt])
  @@map("moderation_actions")
}

model AnalyticsEvent {
  id         String   @id @default(cuid())
  event      String
  anonId     String? // random UUID per browser (cookie); no userId unless strictly needed
  userId     String? // optional: only if user is logged in AND consented (flag controlled)
  sessionId  String? // generated client-side ephemeral (no personal data)
  properties Json?
  createdAt  DateTime @default(now())

  @@index([event])
  @@index([createdAt])
  @@map("analytics_events")
}
`,inlineSchemaHash:"7e2e2a26a1c41eb103ff9d68413a3e4434415fea613cb1fa8dc67b1314b1865b",copyEngine:!0},hf=require("fs");Te.dirname=__dirname;if(!hf.existsSync(ct.join(__dirname,"schema.prisma"))){let e=["node_modules/.prisma/client",".prisma/client"],t=e.find(r=>hf.existsSync(ct.join(process.cwd(),r,"schema.prisma")))??e[0];Te.dirname=ct.join(process.cwd(),t),Te.isBundled=!0}Te.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":"users","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"username","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"normalizedEmail","kind":"scalar","isList":false,"isRequired":false,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"displayName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"avatar","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"artist","isGenerated":false,"isUpdatedAt":false},{"name":"emailVerified","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"emailVerifiedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorEnabled","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorSecret","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"scripts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Script","nativeType":null,"relationName":"ScriptToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"auditions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Audition","nativeType":null,"relationName":"AuditionToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"posts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Post","nativeType":null,"relationName":"PostToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"reels","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"ReelToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"receiver","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentMessages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"conversations","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"recipient","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"triggeredNotifs","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"triggerer","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"ProfileToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"settings","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"UserSettings","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"requester","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"owner","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"verificationTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"EmailVerificationToken","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"refreshTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"RefreshToken","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Script":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ScriptToUser","relationFromFields":["authorId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Audition":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"hostId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"host","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"AuditionToUser","relationFromFields":["hostId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Post":{"dbName":"posts","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"content","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"PostToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Reel":{"dbName":"reels","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"videoUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"thumbnail","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"caption","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ReelToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Comment":{"dbName":"comments","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"CommentToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"CommentToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Like":{"dbName":"likes","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"LikeToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"LikeToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Bookmark":{"dbName":"bookmarks","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Conversation":{"dbName":"conversations","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessage","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessageAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"participants","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"messages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConversationParticipant":{"dbName":"conversation_participants","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"joinedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["conversationId","userId"]],"uniqueIndexes":[{"name":null,"fields":["conversationId","userId"]}],"isGenerated":false},"Message":{"dbName":"messages","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Notification":{"dbName":"notifications","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"recipientId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"recipient","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"recipient","relationFromFields":["recipientId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"triggererId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"triggerer","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"triggerer","relationFromFields":["triggererId"],"relationToFields":["id"],"relationOnDelete":"SetNull","isGenerated":false,"isUpdatedAt":false},{"name":"isRead","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConnectionRequest":{"dbName":"connection_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"receiverId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"receiver","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"receiver","relationFromFields":["receiverId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["senderId","receiverId"]],"uniqueIndexes":[{"name":null,"fields":["senderId","receiverId"]}],"isGenerated":false},"Profile":{"dbName":"profiles","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ProfileToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"vanityUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"headline","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"roles","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"location","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"tags","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"socialLinks","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"media","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"credits","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Credit","nativeType":null,"relationName":"CreditToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Media":{"dbName":"media","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"MediaToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"s3Key","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"posterS3Key","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"duration","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"width","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"height","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"fileSize","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"public","isGenerated":false,"isUpdatedAt":false},{"name":"processedStatus","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"reelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Credit":{"dbName":"credits","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"CreditToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"company","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"year","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"orderIndex","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"UserSettings":{"dbName":"user_settings","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"accountSecurity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"billing","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ReelRequest":{"dbName":"reel_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"mediaId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":["mediaId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"requesterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"requester","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"requester","relationFromFields":["requesterId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"ownerId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"owner","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"owner","relationFromFields":["ownerId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"response","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[["mediaId","requesterId"]],"uniqueIndexes":[{"name":null,"fields":["mediaId","requesterId"]}],"isGenerated":false},"EmailVerificationToken":{"dbName":"email_verification_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"token","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"RefreshToken":{"dbName":"refresh_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"jti","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"invalidatedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"lastUsedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"PRIntelligence":{"dbName":"pr_intelligence","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"prNumber","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"changedFilesCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sensitivePathsCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"riskScore","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"TestRun":{"dbName":"test_runs","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"suite","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"testName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"durationMs","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"runAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationReport":{"dbName":"moderation_reports","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reporterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetType","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"category","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"evidenceUrls","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":[],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"open","isGenerated":false,"isUpdatedAt":false},{"name":"severity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"actions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationAction","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationAction":{"dbName":"moderation_actions","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reportId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"action","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reason","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"actorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"report","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationReport","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":["reportId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"AnalyticsEvent":{"dbName":"analytics_events","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"event","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"anonId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sessionId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"properties","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{},"types":{}}');_k(D.Prisma,Te.runtimeDataModel);Te.engineWasm=void 0;Te.compilerWasm=void 0;var{warnEnvConflicts:Ck}=Ca();Ck({rootEnvPath:Te.relativeEnvPaths.rootEnvPath&&ct.resolve(Te.dirname,Te.relativeEnvPaths.rootEnvPath),schemaEnvPath:Te.relativeEnvPaths.schemaEnvPath&&ct.resolve(Te.dirname,Te.relativeEnvPaths.schemaEnvPath)});var Pk=Ek(Te);D.PrismaClient=Pk;Object.assign(D,z);ct.join(__dirname,"libquery_engine-rhel-openssl-3.0.x.so.node");ct.join(process.cwd(),"node_modules/.prisma/client/libquery_engine-rhel-openssl-3.0.x.so.node");ct.join(__dirname,"schema.prisma");ct.join(process.cwd(),"node_modules/.prisma/client/schema.prisma")});var bf=h((_P,yf)=>{yf.exports={...gf()}});var vf=h((qP,xf)=>{xf.exports={...bf()}});var Af=h(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});function Lk(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var kf=Lk(require("crypto")),Fk=(e,t,r)=>kf.createHmac(e,Buffer.from(t,"hex")).update(Buffer.from(r,"hex")).digest().toString("hex"),Mk=(e,t)=>kf.randomBytes(e).toString(t);on.createDigest=Fk;on.createRandomBytes=Mk});var Tf=h(Na=>{"use strict";var jk="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Rf=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function $k(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1}Na.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t=0,r=0,i=0,n=0,s=new Buffer($k(e)*8);t<e.length;){var a=e[t];i>3?(n=a&255>>i,i=(i+5)%8,n=n<<i|(t+1<e.length?e[t+1]:0)>>8-i,t++):(n=a>>8-(i+5)&31,i=(i+5)%8,i===0&&t++),s[r]=jk.charCodeAt(n),r++}for(t=r;t<s.length;t++)s[t]=61;return s};Na.decode=function(e){var t=0,r=0,i,n=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var s=new Buffer(Math.ceil(e.length*5/8)),a=0;a<e.length&&e[a]!==61;a++){var o=e[a]-48;if(o<Rf.length)r=Rf[o],t<=3?(t=(t+5)%8,t===0?(i|=r,s[n]=i,n++,i=0):i|=255&r<<8-t):(t=(t+5)%8,i|=255&r>>>t,s[n]=i,n++,i=255&r<<8-t);else throw new Error("Invalid input - it is not base32 encoded string")}return s.slice(0,n)}});var Of=h(Da=>{var If=Tf();Da.encode=If.encode;Da.decode=If.decode});var qf=h(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});function Vk(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var _f=Vk(Of()),Bk=(e,t)=>_f.decode(e).toString(t),Gk=(e,t)=>_f.encode(Buffer.from(e,t).toString("ascii")).toString().replace(/=/g,"");ln.keyDecoder=Bk;ln.keyEncoder=Gk});var Zf=h(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});function hn(e){return Object.keys(e).map(t=>e[t])}(function(e){e.SHA1="sha1",e.SHA256="sha256",e.SHA512="sha512"})(w.HashAlgorithms||(w.HashAlgorithms={}));var cn=hn(w.HashAlgorithms);(function(e){e.ASCII="ascii",e.BASE64="base64",e.HEX="hex",e.LATIN1="latin1",e.UTF8="utf8"})(w.KeyEncodings||(w.KeyEncodings={}));var Ua=hn(w.KeyEncodings);(function(e){e.HOTP="hotp",e.TOTP="totp"})(w.Strategy||(w.Strategy={}));var La=hn(w.Strategy),mn=()=>{throw new Error("Please provide an options.createDigest implementation.")};function ja(e){return/^(\d+)$/.test(e)}function $a(e,t,r){return e.length>=t?e:`${Array(t+1).join(r)}${e}`.slice(-1*t)}function Va(e){let t=`otpauth://${e.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,r=[];if(La.indexOf(e.type)<0)throw new Error(`Expecting options.type to be one of ${La.join(", ")}. Received ${e.type}.`);if(e.type==="hotp"){if(e.counter==null||typeof e.counter!="number")throw new Error('Expecting options.counter to be a number when options.type is "hotp".');r.push(`&counter=${e.counter}`)}return e.type==="totp"&&e.step&&r.push(`&period=${e.step}`),e.digits&&r.push(`&digits=${e.digits}`),e.algorithm&&r.push(`&algorithm=${e.algorithm.toUpperCase()}`),e.issuer&&r.push(`&issuer=${encodeURIComponent(e.issuer)}`),t.replace("{labelPrefix}",encodeURIComponent(e.issuer||e.accountName)).replace("{accountName}",encodeURIComponent(e.accountName)).replace("{secret}",e.secret).replace("{query}",r.join(""))}var dn=class e{constructor(t={}){this._defaultOptions=Object.freeze({...t}),this._options=Object.freeze({})}create(t={}){return new e(t)}clone(t={}){let r=this.create({...this._defaultOptions,...t});return r.options=this._options,r}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(t){this._options=Object.freeze({...this._options,...t})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}};function Ba(e){if(typeof e.createDigest!="function")throw new Error("Expecting options.createDigest to be a function.");if(typeof e.createHmacKey!="function")throw new Error("Expecting options.createHmacKey to be a function.");if(typeof e.digits!="number")throw new Error("Expecting options.digits to be a number.");if(!e.algorithm||cn.indexOf(e.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${cn.join(", ")}. Received ${e.algorithm}.`);if(!e.encoding||Ua.indexOf(e.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${Ua.join(", ")}. Received ${e.encoding}.`)}var Pf=(e,t,r)=>Buffer.from(t,r).toString("hex");function Nf(){return{algorithm:w.HashAlgorithms.SHA1,createHmacKey:Pf,createDigest:mn,digits:6,encoding:w.KeyEncodings.ASCII}}function Df(e){let t={...Nf(),...e};return Ba(t),Object.freeze(t)}function Uf(e){let t=e.toString(16);return $a(t,16,"0")}function Lf(e,t){let r=Buffer.from(e,"hex"),i=r[r.length-1]&15,s=((r[i]&127)<<24|(r[i+1]&255)<<16|(r[i+2]&255)<<8|r[i+3]&255)%Math.pow(10,t);return $a(String(s),t,"0")}function Hk(e,t,r){let i=Uf(t),n=r.createHmacKey(r.algorithm,e,r.encoding);return r.createDigest(r.algorithm,n,i)}function gn(e,t,r){let i=r.digest||Hk(e,t,r);return Lf(i,r.digits)}function Ff(e,t,r,i){if(!ja(e))return!1;let n=gn(t,r,i);return e===n}function Mf(e,t,r,i,n){return Va({algorithm:n.algorithm,digits:n.digits,type:w.Strategy.HOTP,accountName:e,counter:i,issuer:t,secret:r})}var fn=class e extends dn{create(t={}){return new e(t)}allOptions(){return Df(this.options)}generate(t,r){return gn(t,r,this.allOptions())}check(t,r,i){return Ff(t,r,i,this.allOptions())}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret,t.counter)}keyuri(t,r,i,n){return Mf(t,r,i,n,this.allOptions())}};function jf(e){if(typeof e=="number")return[Math.abs(e),Math.abs(e)];if(Array.isArray(e)){let[t,r]=e;if(typeof t=="number"&&typeof r=="number")return[Math.abs(t),Math.abs(r)]}throw new Error("Expecting options.window to be an number or [number, number].")}function Ga(e){if(Ba(e),jf(e.window),typeof e.epoch!="number")throw new Error("Expecting options.epoch to be a number.");if(typeof e.step!="number")throw new Error("Expecting options.step to be a number.")}var un=(e,t,r)=>{let i=e.length,n=Buffer.from(e,t).toString("hex");if(i<r){let s=new Array(r-i+1).join(n);return Buffer.from(s,"hex").slice(0,r).toString("hex")}return n},Ha=(e,t,r)=>{switch(e){case w.HashAlgorithms.SHA1:return un(t,r,20);case w.HashAlgorithms.SHA256:return un(t,r,32);case w.HashAlgorithms.SHA512:return un(t,r,64);default:throw new Error(`Expecting algorithm to be one of ${cn.join(", ")}. Received ${e}.`)}};function $f(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:mn,createHmacKey:Ha,digits:6,encoding:w.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function Vf(e){let t={...$f(),...e};return Ga(t),Object.freeze(t)}function Bf(e,t){return Math.floor(e/t/1e3)}function yn(e,t){let r=Bf(t.epoch,t.step);return gn(e,r,t)}function Cf(e,t,r,i){let n=[];if(i===0)return n;for(let s=1;s<=i;s++){let a=t*s*r;n.push(e+a)}return n}function Gf(e,t,r){let i=jf(r),n=t*1e3;return{current:e,past:Cf(e,-1,n,i[0]),future:Cf(e,1,n,i[1])}}function Qa(e,t,r){if(!ja(e))return!1;let i=yn(t,r);return e===i}function Fa(e,t,r,i){let n=null;return e.some((s,a)=>Qa(t,r,{...i,epoch:s})?(n=a+1,!0):!1),n}function Ka(e,t,r){if(Qa(e,t,r))return 0;let i=Gf(r.epoch,r.step,r.window),n=Fa(i.past,e,t,r);return n!==null?n*-1:Fa(i.future,e,t,r)}function za(e,t){return Math.floor(e/1e3)%t}function Hf(e,t){return t-za(e,t)}function Qf(e,t,r,i){return Va({algorithm:i.algorithm,digits:i.digits,step:i.step,type:w.Strategy.TOTP,accountName:e,issuer:t,secret:r})}var pn=class e extends fn{create(t={}){return new e(t)}allOptions(){return Vf(this.options)}generate(t){return yn(t,this.allOptions())}checkDelta(t,r){return Ka(t,r,this.allOptions())}check(t,r){return typeof this.checkDelta(t,r)=="number"}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret)}timeRemaining(){let t=this.allOptions();return Hf(t.epoch,t.step)}timeUsed(){let t=this.allOptions();return za(t.epoch,t.step)}keyuri(t,r,i){return Qf(t,r,i,this.allOptions())}};function Kf(e){if(Ga(e),typeof e.keyDecoder!="function")throw new Error("Expecting options.keyDecoder to be a function.");if(e.keyEncoder&&typeof e.keyEncoder!="function")throw new Error("Expecting options.keyEncoder to be a function.")}function zf(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:mn,createHmacKey:Ha,digits:6,encoding:w.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function Jf(e){let t={...zf(),...e};return Kf(t),Object.freeze(t)}function Ja(e,t){return t.keyEncoder(e,t.encoding)}function bn(e,t){return t.keyDecoder(e,t.encoding)}function Wf(e,t){let r=t.createRandomBytes(e,t.encoding);return Ja(r,t)}function Yf(e,t){return yn(bn(e,t),t)}function Xf(e,t,r){return Ka(e,bn(t,r),r)}var Ma=class e extends pn{create(t={}){return new e(t)}allOptions(){return Jf(this.options)}generate(t){return Yf(t,this.allOptions())}checkDelta(t,r){return Xf(t,r,this.allOptions())}encode(t){return Ja(t,this.allOptions())}decode(t){return bn(t,this.allOptions())}generateSecret(t=10){return Wf(t,this.allOptions())}};w.Authenticator=Ma;w.HASH_ALGORITHMS=cn;w.HOTP=fn;w.KEY_ENCODINGS=Ua;w.OTP=dn;w.STRATEGY=La;w.TOTP=pn;w.authenticatorCheckWithWindow=Xf;w.authenticatorDecoder=bn;w.authenticatorDefaultOptions=zf;w.authenticatorEncoder=Ja;w.authenticatorGenerateSecret=Wf;w.authenticatorOptionValidator=Kf;w.authenticatorOptions=Jf;w.authenticatorToken=Yf;w.createDigestPlaceholder=mn;w.hotpCheck=Ff;w.hotpCounter=Uf;w.hotpCreateHmacKey=Pf;w.hotpDefaultOptions=Nf;w.hotpDigestToToken=Lf;w.hotpKeyuri=Mf;w.hotpOptions=Df;w.hotpOptionsValidator=Ba;w.hotpToken=gn;w.isTokenValid=ja;w.keyuri=Va;w.objectValues=hn;w.padStart=$a;w.totpCheck=Qa;w.totpCheckByEpoch=Fa;w.totpCheckWithWindow=Ka;w.totpCounter=Bf;w.totpCreateHmacKey=Ha;w.totpDefaultOptions=$f;w.totpEpochAvailable=Gf;w.totpKeyuri=Qf;w.totpOptions=Vf;w.totpOptionsValidator=Ga;w.totpPadSecret=un;w.totpTimeRemaining=Hf;w.totpTimeUsed=za;w.totpToken=yn});var tp=h(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var xn=Af(),ep=qf(),Wa=Zf(),Qk=new Wa.HOTP({createDigest:xn.createDigest}),Kk=new Wa.TOTP({createDigest:xn.createDigest}),zk=new Wa.Authenticator({createDigest:xn.createDigest,createRandomBytes:xn.createRandomBytes,keyDecoder:ep.keyDecoder,keyEncoder:ep.keyEncoder});Zr.authenticator=zk;Zr.hotp=Qk;Zr.totp=Kk});var ip=h(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var rp=tp();Object.keys(rp).forEach(function(e){e!=="default"&&Object.defineProperty(Ya,e,{enumerable:!0,get:function(){return rp[e]}})})});var np=h((QP,Jk)=>{Jk.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var dr=h(_e=>{"use strict";var Wk=_e&&_e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.getKeyIndexes=_e.hasFlag=_e.exists=_e.list=void 0;var vn=Wk(np());_e.list=Object.keys(vn.default);var Xa={};_e.list.forEach(e=>{Xa[e]=vn.default[e].flags.reduce(function(t,r){return t[r]=!0,t},{})});function Yk(e){return!!vn.default[e]}_e.exists=Yk;function Xk(e,t){if(!Xa[e])throw new Error("Unknown command "+e);return!!Xa[e][t]}_e.hasFlag=Xk;function Zk(e,t,r){let i=vn.default[e];if(!i)throw new Error("Unknown command "+e);if(!Array.isArray(t))throw new Error("Expect args to be an array");let n=[],s=!!(r&&r.parseExternalKey),a=(l,u)=>{let c=[],d=Number(l[u]);for(let f=0;f<d;f++)c.push(f+u+1);return c},o=(l,u,c)=>{for(let d=u;d<l.length-1;d+=1)if(String(l[d]).toLowerCase()===c.toLowerCase())return d+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":n.push(0,...a(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":n.push(...a(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{n.push(...a(t,0));break}case"georadius":{n.push(0);let l=o(t,5,"STORE");l&&n.push(l);let u=o(t,5,"STOREDIST");u&&n.push(u);break}case"georadiusbymember":{n.push(0);let l=o(t,4,"STORE");l&&n.push(l);let u=o(t,4,"STOREDIST");u&&n.push(u);break}case"sort":case"sort_ro":n.push(0);for(let l=1;l<t.length-1;l++){let u=t[l];if(typeof u!="string")continue;let c=u.toUpperCase();c==="GET"?(l+=1,u=t[l],u!=="#"&&(s?n.push([l,sp(u)]):n.push(l))):c==="BY"?(l+=1,s?n.push([l,sp(t[l])]):n.push(l)):c==="STORE"&&(l+=1,n.push(l))}break;case"migrate":if(t[2]==="")for(let l=5;l<t.length-1;l++){let u=t[l];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let c=l+1;c<t.length;c++)n.push(c);break}}else n.push(2);break;case"xreadgroup":case"xread":for(let l=e==="xread"?0:3;l<t.length-1;l++)if(String(t[l]).toUpperCase()==="STREAMS"){for(let u=l+1;u<=l+(t.length-1-l)/2;u++)n.push(u);break}break;default:if(i.step>0){let l=i.keyStart-1,u=i.keyStop>0?i.keyStop:t.length+i.keyStop+1;for(let c=l;c<u;c+=i.step)n.push(c)}break}return n}_e.getKeyIndexes=Zk;function sp(e){typeof e!="string"&&(e=String(e));let t=e.indexOf("->");return t===-1?e.length:t}});var ap=h(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.tryCatch=Ot.errorObj=void 0;Ot.errorObj={e:{}};var Za;function eA(e,t){try{let r=Za;return Za=null,r.apply(this,arguments)}catch(r){return Ot.errorObj.e=r,Ot.errorObj}}function tA(e){return Za=e,eA}Ot.tryCatch=tA});var _t=h(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});var fr=ap();function op(e){setTimeout(function(){throw e},0)}function rA(e,t,r){return typeof t=="function"&&e.then(i=>{let n;r!==void 0&&Object(r).spread&&Array.isArray(i)?n=fr.tryCatch(t).apply(void 0,[null].concat(i)):n=i===void 0?fr.tryCatch(t)(null):fr.tryCatch(t)(null,i),n===fr.errorObj&&op(n.e)},i=>{if(!i){let s=new Error(i+"");Object.assign(s,{cause:i}),i=s}let n=fr.tryCatch(t)(i);n===fr.errorObj&&op(n.e)}),e}eo.default=rA});var cp=h((WP,up)=>{"use strict";var lp=require("assert"),ei=require("util");function pr(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ei.inherits(pr,Error);Object.defineProperty(pr.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function to(e,t,r){lp(t),lp.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=r,this.buffer=t}ei.inherits(to,pr);Object.defineProperty(to.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function ro(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}ei.inherits(ro,pr);Object.defineProperty(ro.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function wn(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ei.inherits(wn,pr);Object.defineProperty(wn.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function io(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ei.inherits(io,wn);Object.defineProperty(io.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});up.exports={RedisError:pr,ParserError:to,ReplyError:ro,AbortError:wn,InterruptError:io}});var pp=h((YP,fp)=>{"use strict";var dp=require("assert"),hr=class extends Error{get name(){return this.constructor.name}},no=class extends hr{constructor(t,r,i){dp(r),dp.strictEqual(typeof i,"number");let n=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=n,this.offset=i,this.buffer=r}get name(){return this.constructor.name}},so=class extends hr{constructor(t){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=r}get name(){return this.constructor.name}},Sn=class extends hr{get name(){return this.constructor.name}},ao=class extends Sn{get name(){return this.constructor.name}};fp.exports={RedisError:hr,ParserError:no,ReplyError:so,AbortError:Sn,InterruptError:ao}});var Jt=h((XP,hp)=>{"use strict";var iA=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?cp():pp();hp.exports=iA});var ti=h((ZP,oo)=>{var mp=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],nA=function(t){for(var r,i=0,n=0,s=[],a=t.length;i<a;i++)r=t.charCodeAt(i),r<128?s[n++]=r:r<2048?(s[n++]=r>>6|192,s[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),s[n++]=r>>18|240,s[n++]=r>>12&63|128,s[n++]=r>>6&63|128,s[n++]=r&63|128):(s[n++]=r>>12|224,s[n++]=r>>6&63|128,s[n++]=r&63|128);return s},gp=oo.exports=function(t){for(var r,i=0,n=-1,s=0,a=0,o=typeof t=="string"?nA(t):t,l=o.length;i<l;){if(r=o[i++],n===-1)r===123&&(n=i);else if(r!==125)a=mp[(r^a>>8)&255]^a<<8;else if(i-1!==n)return a&16383;s=mp[(r^s>>8)&255]^s<<8}return s&16383};oo.exports.generateMulti=function(t){for(var r=1,i=t.length,n=gp(t[0]);r<i;)if(gp(t[r++])!==n)return-1;return n}});var kp=h((eN,Ep)=>{var bp=9007199254740991,sA="[object Arguments]",aA="[object Function]",oA="[object GeneratorFunction]",lA=/^(?:0|[1-9]\d*)$/;function xp(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function uA(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var ri=Object.prototype,ii=ri.hasOwnProperty,vp=ri.toString,cA=ri.propertyIsEnumerable,yp=Math.max;function dA(e,t){var r=wA(e)||vA(e)?uA(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||ii.call(e,s))&&!(n&&(s=="length"||Sp(s,i)))&&r.push(s);return r}function fA(e,t,r,i){return e===void 0||lo(e,ri[r])&&!ii.call(i,r)?t:e}function pA(e,t,r){var i=e[t];(!(ii.call(e,t)&&lo(i,r))||r===void 0&&!(t in e))&&(e[t]=r)}function hA(e){if(!co(e))return xA(e);var t=bA(e),r=[];for(var i in e)i=="constructor"&&(t||!ii.call(e,i))||r.push(i);return r}function wp(e,t){return t=yp(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,n=yp(r.length-t,0),s=Array(n);++i<n;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=s,xp(e,this,a)}}function mA(e,t,r,i){r||(r={});for(var n=-1,s=t.length;++n<s;){var a=t[n],o=i?i(r[a],e[a],a,r,e):void 0;pA(r,a,o===void 0?e[a]:o)}return r}function gA(e){return wp(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&yA(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}function Sp(e,t){return t=t??bp,!!t&&(typeof e=="number"||lA.test(e))&&e>-1&&e%1==0&&e<t}function yA(e,t,r){if(!co(r))return!1;var i=typeof t;return(i=="number"?uo(r)&&Sp(t,r.length):i=="string"&&t in r)?lo(r[t],e):!1}function bA(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ri;return e===r}function xA(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function lo(e,t){return e===t||e!==e&&t!==t}function vA(e){return SA(e)&&ii.call(e,"callee")&&(!cA.call(e,"callee")||vp.call(e)==sA)}var wA=Array.isArray;function uo(e){return e!=null&&kA(e.length)&&!EA(e)}function SA(e){return AA(e)&&uo(e)}function EA(e){var t=co(e)?vp.call(e):"";return t==aA||t==oA}function kA(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bp}function co(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function AA(e){return!!e&&typeof e=="object"}var RA=gA(function(e,t,r,i){mA(t,IA(t),e,i)}),TA=wp(function(e){return e.push(void 0,fA),xp(RA,void 0,e)});function IA(e){return uo(e)?dA(e,!0):hA(e)}Ep.exports=TA});var Tp=h((tN,Rp)=>{var OA=9007199254740991,_A="[object Arguments]",qA="[object Function]",CA="[object GeneratorFunction]",fo=Object.prototype,PA=fo.hasOwnProperty,Ap=fo.toString,NA=fo.propertyIsEnumerable;function DA(e){return LA(e)&&PA.call(e,"callee")&&(!NA.call(e,"callee")||Ap.call(e)==_A)}function UA(e){return e!=null&&MA(e.length)&&!FA(e)}function LA(e){return $A(e)&&UA(e)}function FA(e){var t=jA(e)?Ap.call(e):"";return t==qA||t==CA}function MA(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=OA}function jA(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function $A(e){return!!e&&typeof e=="object"}Rp.exports=DA});var En=h(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.isArguments=qt.defaults=qt.noop=void 0;var VA=kp();qt.defaults=VA;var BA=Tp();qt.isArguments=BA;function GA(){}qt.noop=GA});var po=h((iN,Ip)=>{var mr=1e3,gr=mr*60,yr=gr*60,Wt=yr*24,HA=Wt*7,QA=Wt*365.25;Ip.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return KA(e);if(r==="number"&&isFinite(e))return t.long?JA(e):zA(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function KA(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*QA;case"weeks":case"week":case"w":return r*HA;case"days":case"day":case"d":return r*Wt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*yr;case"minutes":case"minute":case"mins":case"min":case"m":return r*gr;case"seconds":case"second":case"secs":case"sec":case"s":return r*mr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function zA(e){var t=Math.abs(e);return t>=Wt?Math.round(e/Wt)+"d":t>=yr?Math.round(e/yr)+"h":t>=gr?Math.round(e/gr)+"m":t>=mr?Math.round(e/mr)+"s":e+"ms"}function JA(e){var t=Math.abs(e);return t>=Wt?kn(e,t,Wt,"day"):t>=yr?kn(e,t,yr,"hour"):t>=gr?kn(e,t,gr,"minute"):t>=mr?kn(e,t,mr,"second"):e+" ms"}function kn(e,t,r,i){var n=t>=r*1.5;return Math.round(e/r)+" "+i+(n?"s":"")}});var ho=h((nN,Op)=>{function WA(e){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=n,r.enabled=o,r.humanize=po(),r.destroy=u,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(c){let d,f=null,p,m;function g(...E){if(!g.enabled)return;let O=g,q=Number(new Date),P=q-(d||q);O.diff=P,O.prev=d,O.curr=q,d=q,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let B=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(R,b)=>{if(R==="%%")return"%";B++;let k=r.formatters[b];if(typeof k=="function"){let I=E[B];R=k.call(O,I),E.splice(B,1),B--}return R}),r.formatArgs.call(O,E),(O.log||r.log).apply(O,E)}return g.namespace=c,g.useColors=r.useColors(),g.color=r.selectColor(c),g.extend=i,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(c)),m),set:E=>{f=E}}),typeof r.init=="function"&&r.init(g),g}function i(c,d){let f=r(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let f of d)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function s(c,d){let f=0,p=0,m=-1,g=0;for(;f<c.length;)if(p<d.length&&(d[p]===c[f]||d[p]==="*"))d[p]==="*"?(m=p,g=f,p++):(f++,p++);else if(m!==-1)p=m+1,g++,f=g;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}function a(){let c=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),c}function o(c){for(let d of r.skips)if(s(c,d))return!1;for(let d of r.names)if(s(c,d))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Op.exports=WA});var _p=h((Ie,An)=>{Ie.formatArgs=XA;Ie.save=ZA;Ie.load=eR;Ie.useColors=YA;Ie.storage=tR();Ie.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ie.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function YA(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function XA(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+An.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),e.splice(i,0,t)}Ie.log=console.debug||console.log||(()=>{});function ZA(e){try{e?Ie.storage.setItem("debug",e):Ie.storage.removeItem("debug")}catch{}}function eR(){let e;try{e=Ie.storage.getItem("debug")||Ie.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function tR(){try{return localStorage}catch{}}An.exports=ho()(Ie);var{formatters:rR}=An.exports;rR.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Cp=h((sN,qp)=>{"use strict";qp.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}});var Dp=h((aN,Np)=>{"use strict";var iR=require("os"),Pp=require("tty"),Ue=Cp(),{env:ue}=process,Rn;Ue("no-color")||Ue("no-colors")||Ue("color=false")||Ue("color=never")?Rn=0:(Ue("color")||Ue("colors")||Ue("color=true")||Ue("color=always"))&&(Rn=1);function nR(){if("FORCE_COLOR"in ue)return ue.FORCE_COLOR==="true"?1:ue.FORCE_COLOR==="false"?0:ue.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ue.FORCE_COLOR,10),3)}function sR(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function aR(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let i=nR();i!==void 0&&(Rn=i);let n=r?Rn:i;if(n===0)return 0;if(r){if(Ue("color=16m")||Ue("color=full")||Ue("color=truecolor"))return 3;if(Ue("color=256"))return 2}if(e&&!t&&n===void 0)return 0;let s=n||0;if(ue.TERM==="dumb")return s;if(process.platform==="win32"){let a=iR.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in ue)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in ue)||ue.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ue)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ue.TEAMCITY_VERSION)?1:0;if(ue.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ue){let a=Number.parseInt((ue.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ue.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ue.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ue.TERM)||"COLORTERM"in ue?1:s}function mo(e,t={}){let r=aR(e,{streamIsTTY:e&&e.isTTY,...t});return sR(r)}Np.exports={supportsColor:mo,stdout:mo({isTTY:Pp.isatty(1)}),stderr:mo({isTTY:Pp.isatty(2)})}});var Lp=h((ce,In)=>{var oR=require("tty"),Tn=require("util");ce.init=hR;ce.log=dR;ce.formatArgs=uR;ce.save=fR;ce.load=pR;ce.useColors=lR;ce.destroy=Tn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ce.colors=[6,2,3,4,5,1];try{let e=Dp();e&&(e.stderr||e).level>=2&&(ce.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ce.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});function lR(){return"colors"in ce.inspectOpts?!!ce.inspectOpts.colors:oR.isatty(process.stderr.fd)}function uR(e){let{namespace:t,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(n+"m+"+In.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=cR()+t+" "+e[0]}function cR(){return ce.inspectOpts.hideDate?"":new Date().toISOString()+" "}function dR(...e){return process.stderr.write(Tn.formatWithOptions(ce.inspectOpts,...e)+`
`)}function fR(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function pR(){return process.env.DEBUG}function hR(e){e.inspectOpts={};let t=Object.keys(ce.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=ce.inspectOpts[t[r]]}In.exports=ho()(ce);var{formatters:Up}=In.exports;Up.o=function(e){return this.inspectOpts.colors=this.useColors,Tn.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Up.O=function(e){return this.inspectOpts.colors=this.useColors,Tn.inspect(e,this.inspectOpts)}});var Fp=h((oN,go)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?go.exports=_p():go.exports=Lp()});var $p=h(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.genRedactedString=dt.getStringValue=dt.MAX_ARGUMENT_LENGTH=void 0;var mR=Fp(),yo=200;dt.MAX_ARGUMENT_LENGTH=yo;var gR="ioredis";function Mp(e){if(e!==null)switch(typeof e){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch{return}case"string":return e}}dt.getStringValue=Mp;function jp(e,t){let{length:r}=e;return r<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+r+'">'}dt.genRedactedString=jp;function yR(e){let t=(0,mR.default)(`${gR}:${e}`);function r(...i){if(t.enabled){for(let n=1;n<i.length;n++){let s=Mp(i[n]);typeof s=="string"&&s.length>yo&&(i[n]=jp(s,yo))}return t.apply(null,i)}}return Object.defineProperties(r,{namespace:{get(){return t.namespace}},enabled:{get(){return t.enabled}},destroy:{get(){return t.destroy}},log:{get(){return t.log},set(i){t.log=i}}}),r}dt.default=yR});var Bp=h(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});var Vp=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,bR={RedisCloudFixed:{ca:Vp},RedisCloudFlexible:{ca:Vp}};bo.default=bR});var fe=h(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.noop=U.defaults=U.Debug=U.getPackageMeta=U.zipMap=U.CONNECTION_CLOSED_ERROR_MSG=U.shuffle=U.sample=U.resolveTLSProfile=U.parseURL=U.optimizeErrorStack=U.toArg=U.convertMapToArray=U.convertObjectToArray=U.timeout=U.packObject=U.isInt=U.wrapMultiResult=U.convertBufferToString=void 0;var xR=require("fs"),vR=require("path"),Gp=require("url"),xo=En();Object.defineProperty(U,"defaults",{enumerable:!0,get:function(){return xo.defaults}});Object.defineProperty(U,"noop",{enumerable:!0,get:function(){return xo.noop}});var wR=$p();U.Debug=wR.default;var SR=Bp();function Hp(e,t){if(e instanceof Buffer)return e.toString(t);if(Array.isArray(e)){let r=e.length,i=Array(r);for(let n=0;n<r;++n)i[n]=e[n]instanceof Buffer&&t==="utf8"?e[n].toString():Hp(e[n],t);return i}return e}U.convertBufferToString=Hp;function ER(e){if(!e)return null;let t=[],r=e.length;for(let i=0;i<r;++i){let n=e[i];n instanceof Error?t.push([n]):t.push([null,n])}return t}U.wrapMultiResult=ER;function Qp(e){let t=parseFloat(e);return!isNaN(e)&&(t|0)===t}U.isInt=Qp;function kR(e){let t={},r=e.length;for(let i=1;i<r;i+=2)t[e[i-1]]=e[i];return t}U.packObject=kR;function AR(e,t){let r=null,i=function(){r&&(clearTimeout(r),r=null,e.apply(this,arguments))};return r=setTimeout(i,t,new Error("timeout")),i}U.timeout=AR;function RR(e){let t=[],r=Object.keys(e);for(let i=0,n=r.length;i<n;i++)t.push(r[i],e[r[i]]);return t}U.convertObjectToArray=RR;function TR(e){let t=[],r=0;return e.forEach(function(i,n){t[r]=n,t[r+1]=i,r+=2}),t}U.convertMapToArray=TR;function IR(e){return e===null||typeof e>"u"?"":String(e)}U.toArg=IR;function OR(e,t,r){let i=t.split(`
`),n="",s;for(s=1;s<i.length&&i[s].indexOf(r)!==-1;++s);for(let a=s;a<i.length;++a)n+=`
`+i[a];if(e.stack){let a=e.stack.indexOf(`
`);e.stack=e.stack.slice(0,a)+n}return e}U.optimizeErrorStack=OR;function _R(e){if(Qp(e))return{port:e};let t=(0,Gp.parse)(e,!0,!0);!t.slashes&&e[0]!=="/"&&(e="//"+e,t=(0,Gp.parse)(e,!0,!0));let r=t.query||{},i={};if(t.auth){let n=t.auth.indexOf(":");i.username=n===-1?t.auth:t.auth.slice(0,n),i.password=n===-1?"":t.auth.slice(n+1)}if(t.pathname&&(t.protocol==="redis:"||t.protocol==="rediss:"?t.pathname.length>1&&(i.db=t.pathname.slice(1)):i.path=t.pathname),t.host&&(i.host=t.hostname),t.port&&(i.port=t.port),typeof r.family=="string"){let n=Number.parseInt(r.family,10);Number.isNaN(n)||(i.family=n)}return(0,xo.defaults)(i,r),i}U.parseURL=_R;function qR(e){let t=e?.tls;typeof t=="string"&&(t={profile:t});let r=SR.default[t?.profile];return r&&(t=Object.assign({},r,t),delete t.profile,e=Object.assign({},e,{tls:t})),e}U.resolveTLSProfile=qR;function CR(e,t=0){let r=e.length;return t>=r?null:e[t+Math.floor(Math.random()*(r-t))]}U.sample=CR;function PR(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e}U.shuffle=PR;U.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function NR(e,t){let r=new Map;return e.forEach((i,n)=>{r.set(i,t[n])}),r}U.zipMap=NR;var br=null;async function DR(){if(br)return br;try{let e=(0,vR.resolve)(__dirname,"..","..","package.json"),t=await xR.promises.readFile(e,"utf8");return br={version:JSON.parse(t).version},br}catch{return br={version:"error-fetching-version"},br}}U.getPackageMeta=DR});var ft=h(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});var Kp=dr(),UR=ti(),LR=_t(),Yt=fe(),et=class e{constructor(t,r=[],i={},n){if(this.name=t,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=i.replyEncoding,this.errorStack=i.errorStack,this.args=r.flat(),this.callback=n,this.initPromise(),i.keyPrefix){let s=i.keyPrefix instanceof Buffer,a=s?i.keyPrefix:null;this._iterateKeys(o=>o instanceof Buffer?(a===null&&(a=Buffer.from(i.keyPrefix)),Buffer.concat([a,o])):s?Buffer.concat([i.keyPrefix,Buffer.from(String(o))]):i.keyPrefix+o)}i.readOnly&&(this.isReadOnly=!0)}static checkFlag(t,r){return!!this.getFlagMap()[t][r]}static setArgumentTransformer(t,r){this._transformer.argument[t]=r}static setReplyTransformer(t,r){this._transformer.reply[t]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(e.FLAGS).reduce((t,r)=>(t[r]={},e.FLAGS[r].forEach(i=>{t[r][i]=!0}),t),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let t=this.getKeys()[0];this.slot=t==null?null:UR(t)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(t){let r,i="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let n=new vo;n.push(i);for(let s=0;s<this.args.length;++s){let a=this.args[s];a instanceof Buffer?a.length===0?n.push(`$0\r
\r
`):(n.push("$"+a.length+`\r
`),n.push(a),n.push(`\r
`)):n.push("$"+Buffer.byteLength(a)+`\r
`+a+`\r
`)}r=n.toBuffer()}else{r=i;for(let n=0;n<this.args.length;++n){let s=this.args[n];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let t=0;t<this.args.length;++t){let r=this.args[t];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[t]=(0,Yt.toArg)(r))}}transformReply(t){this.replyEncoding&&(t=(0,Yt.convertBufferToString)(t,this.replyEncoding));let r=e._transformer.reply[this.name];return r&&(t=r(t)),t}setTimeout(t){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},t))}initPromise(){let t=new Promise((r,i)=>{if(!this.transformed){this.transformed=!0;let n=e._transformer.argument[this.name];n&&(this.args=n(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=n=>{i((0,Yt.optimizeErrorStack)(n,this.errorStack.stack,__dirname))}:this.reject=i});this.promise=(0,LR.default)(t,this.callback)}_iterateKeys(t=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,Kp.exists)(this.name))){let r=(0,Kp.getKeyIndexes)(this.name,this.args);for(let i of r)this.args[i]=t(this.args[i]),this.keys.push(this.args[i])}return this.keys}_convertValue(t){return r=>{try{let i=this._commandTimeoutTimer;i&&(clearTimeout(i),delete this._commandTimeoutTimer),t(this.transformReply(r)),this.isResolved=!0}catch(i){this.reject(i)}return this.promise}}};wo.default=et;et.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};et._transformer={argument:{},reply:{}};var zp=function(e){if(e.length===1){if(e[0]instanceof Map)return(0,Yt.convertMapToArray)(e[0]);if(typeof e[0]=="object"&&e[0]!==null)return(0,Yt.convertObjectToArray)(e[0])}return e},Jp=function(e){if(e.length===2){if(e[1]instanceof Map)return[e[0]].concat((0,Yt.convertMapToArray)(e[1]));if(typeof e[1]=="object"&&e[1]!==null)return[e[0]].concat((0,Yt.convertObjectToArray)(e[1]))}return e};et.setArgumentTransformer("mset",zp);et.setArgumentTransformer("msetnx",zp);et.setArgumentTransformer("hset",Jp);et.setArgumentTransformer("hmset",Jp);et.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];i in t?Object.defineProperty(t,i,{value:n,configurable:!0,enumerable:!0,writable:!0}):t[i]=n}return t}return e});var vo=class{constructor(){this.length=0,this.items=[]}push(t){this.length+=Buffer.byteLength(t),this.items.push(t)}toBuffer(){let t=Buffer.allocUnsafe(this.length),r=0;for(let i of this.items){let n=Buffer.byteLength(i);Buffer.isBuffer(i)?i.copy(t,r):t.write(i,r,n),r+=n}return t}}});var Wp=h(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var FR=Jt(),On=class extends FR.RedisError{constructor(t,r){super(t),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};So.default=On;On.defaultMessage="Failed to refresh slots cache."});var _n=h(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var MR=require("stream"),Eo=class extends MR.Readable{constructor(t){super(t),this.opt=t,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let t=[this._redisCursor];this.opt.key&&t.unshift(this.opt.key),this.opt.match&&t.push("MATCH",this.opt.match),this.opt.type&&t.push("TYPE",this.opt.type),this.opt.count&&t.push("COUNT",String(this.opt.count)),this.opt.noValues&&t.push("NOVALUES"),this.opt.redis[this.opt.command](t,(r,i)=>{if(r){this.emit("error",r);return}this._redisCursor=i[0]instanceof Buffer?i[0].toString():i[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(i[1])})}close(){this._redisDrained=!0}};ko.default=Eo});var rh=h(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.executeWithAutoPipelining=se.getFirstValueInFlattenedArray=se.shouldUseAutoPipelining=se.notAllowedAutoPipelineCommands=se.kCallbacks=se.kExec=void 0;var Xp=En(),jR=ti(),Yp=_t();se.kExec=Symbol("exec");se.kCallbacks=Symbol("callbacks");se.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function Zp(e,t){if(e._runningAutoPipelines.has(t)||!e._autoPipelines.has(t))return;e._runningAutoPipelines.add(t);let r=e._autoPipelines.get(t);e._autoPipelines.delete(t);let i=r[se.kCallbacks];r[se.kCallbacks]=null,r.exec(function(n,s){if(e._runningAutoPipelines.delete(t),n)for(let a=0;a<i.length;a++)process.nextTick(i[a],n);else for(let a=0;a<i.length;a++)process.nextTick(i[a],...s[a]);e._autoPipelines.has(t)&&Zp(e,t)})}function $R(e,t,r){return t&&e.options.enableAutoPipelining&&!e.isPipeline&&!se.notAllowedAutoPipelineCommands.includes(r)&&!e.options.autoPipeliningIgnoredCommands.includes(r)}se.shouldUseAutoPipelining=$R;function eh(e){for(let t=0;t<e.length;t++){let r=e[t];if(typeof r=="string")return r;if(Array.isArray(r)||(0,Xp.isArguments)(r)){if(r.length===0)continue;return r[0]}let i=[r].flat();if(i.length>0)return i[0]}}se.getFirstValueInFlattenedArray=eh;function th(e,t,r,i,n){if(e.isCluster&&!e.slots.length)return e.status==="wait"&&e.connect().catch(Xp.noop),(0,Yp.default)(new Promise(function(u,c){e.delayUntilReady(d=>{if(d){c(d);return}th(e,t,r,i,null).then(u,c)})}),n);let s=e.options.keyPrefix||"",a=e.isCluster?e.slots[jR(`${s}${eh(i)}`)].join(","):"main";if(!e._autoPipelines.has(a)){let u=e.pipeline();u[se.kExec]=!1,u[se.kCallbacks]=[],e._autoPipelines.set(a,u)}let o=e._autoPipelines.get(a);o[se.kExec]||(o[se.kExec]=!0,setImmediate(Zp,e,a));let l=new Promise(function(u,c){o[se.kCallbacks].push(function(d,f){if(d){c(d);return}u(f)}),t==="call"&&i.unshift(r),o[t](...i)});return(0,Yp.default)(l,n)}se.executeWithAutoPipelining=th});var ih=h(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var VR=require("crypto"),BR=ft(),GR=_t(),Ao=class{constructor(t,r=null,i="",n=!1){this.lua=t,this.numberOfKeys=r,this.keyPrefix=i,this.readOnly=n,this.sha=(0,VR.createHash)("sha1").update(t).digest("hex");let s=this.sha,a=new WeakSet;this.Command=class extends BR.default{toWritable(l){let u=this.reject;return this.reject=c=>{c.message.indexOf("NOSCRIPT")!==-1&&a.delete(l),u.call(this,c)},a.has(l)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(a.add(l),this.name="eval",this.args[0]=t),super.toWritable(l)}}}execute(t,r,i,n){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(i.keyPrefix=this.keyPrefix),this.readOnly&&(i.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],i);return s.promise=s.promise.catch(a=>{if(a.message.indexOf("NOSCRIPT")===-1)throw a;let o=new this.Command("evalsha",[this.sha,...r],i);return(t.isPipeline?t.redis:t).sendCommand(o)}),(0,GR.default)(s.promise,n),t.sendCommand(s)}};Ro.default=Ao});var Cn=h(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var HR=dr(),qn=rh(),QR=ft(),KR=ih(),pt=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return To.slice(0)}createBuiltinCommand(t){return{string:Ct(null,t,"utf8"),buffer:Ct(null,t,null)}}addBuiltinCommand(t){this.addedBuiltinSet.add(t),this[t]=Ct(t,t,"utf8"),this[t+"Buffer"]=Ct(t+"Buffer",t,null)}defineCommand(t,r){let i=new KR.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[t]=i,this[t]=nh(t,t,i,"utf8"),this[t+"Buffer"]=nh(t+"Buffer",t,i,null)}sendCommand(t,r,i){throw new Error('"sendCommand" is not implemented')}},To=HR.list.filter(e=>e!=="monitor");To.push("sentinel");To.forEach(function(e){pt.prototype[e]=Ct(e,e,"utf8"),pt.prototype[e+"Buffer"]=Ct(e+"Buffer",e,null)});pt.prototype.call=Ct("call","utf8");pt.prototype.callBuffer=Ct("callBuffer",null);pt.prototype.send_command=pt.prototype.call;function Ct(e,t,r){return typeof r>"u"&&(r=t,t=null),function(...i){let n=t||i.shift(),s=i[i.length-1];typeof s=="function"?i.pop():s=void 0;let a={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,qn.shouldUseAutoPipelining)(this,e,n)?(0,qn.executeWithAutoPipelining)(this,e,n,i,s):this.sendCommand(new QR.default(n,i,a,s))}}function nh(e,t,r,i){return function(...n){let s=typeof n[n.length-1]=="function"?n.pop():void 0,a={replyEncoding:i};return this.options.showFriendlyErrorStack&&(a.errorStack=new Error),(0,qn.shouldUseAutoPipelining)(this,e,t)?(0,qn.executeWithAutoPipelining)(this,e,t,n,s):r.execute(this,n,a,s)}}Io.default=pt});var qo=h(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var Oo=ti(),sh=dr(),ah=_t(),zR=require("util"),JR=ft(),WR=fe(),YR=Cn();function XR(e,t){let r=Oo(t[0]),i=e._groupsBySlot[r];for(let n=1;n<t.length;n++)if(e._groupsBySlot[Oo(t[n])]!==i)return-1;return r}var Pt=class extends YR.default{constructor(t){super(),this.redis=t,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=t.options,Object.keys(t.scriptsSet).forEach(i=>{let n=t.scriptsSet[i];this._shaToScript[n.sha]=n,this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),t.addedBuiltinSet.forEach(i=>{this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(t,r){if(this._queue[r].name==="exec"&&Array.isArray(t[1])){let n=t[1].length;for(let s=0;s<n;s++){if(t[1][s]instanceof Error)continue;let a=this._queue[r-(n-s)];try{t[1][s]=a.transformReply(t[1][s])}catch(o){t[1][s]=o}}}if(this._result[r]=t,--this.replyPending)return;if(this.isCluster){let n=!0,s;for(let a=0;a<this._result.length;++a){let o=this._result[a][0],l=this._queue[a];if(o){if(l.name==="exec"&&o.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:o.name,message:o.message};else if(s.name!==o.name||s.message!==o.message){n=!1;break}}else if(!l.inTransaction&&!((0,sh.exists)(l.name)&&(0,sh.hasFlag)(l.name,"readonly"))){n=!1;break}}if(s&&n){let a=this,o=s.message.split(" "),l=this._queue,u=!1;this._queue=[];for(let p=0;p<l.length;++p){if(o[0]==="ASK"&&!u&&l[p].name!=="asking"&&(!l[p-1]||l[p-1].name!=="asking")){let m=new JR.default("asking");m.ignore=!0,this.sendCommand(m)}l[p].initPromise(),this.sendCommand(l[p]),u=l[p].inTransaction}let c=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){a.exec()},f=this.redis;if(f.handleError(s,this.leftRedirections,{moved:function(p,m){a.preferKey=m,f.slots[o[1]]=[m],f._groupsBySlot[o[1]]=f._groupsIds[f.slots[o[1]].join(";")],f.refreshSlotsCache(),a.exec()},ask:function(p,m){a.preferKey=m,a.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{c=!1},defaults:()=>{c=!1}}),c)return}}let i=0;for(let n=0;n<this._queue.length-i;++n)this._queue[n+i].ignore&&(i+=1),this._result[n]=this._result[n+i];this.resolve(this._result.slice(0,this._result.length-i))}sendCommand(t){this._transactions>0&&(t.inTransaction=!0);let r=this._queue.length;return t.pipelineIndex=r,t.promise.then(i=>{this.fillResult([null,i],r)}).catch(i=>{this.fillResult([i],r)}),this._queue.push(t),this}addBatch(t){let r,i,n;for(let s=0;s<t.length;++s)r=t[s],i=r[0],n=r.slice(1),this[i].apply(this,n);return this}};_o.default=Pt;var ZR=Pt.prototype.multi;Pt.prototype.multi=function(){return this._transactions+=1,ZR.apply(this,arguments)};var oh=Pt.prototype.execBuffer;Pt.prototype.execBuffer=(0,zR.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),oh.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");Pt.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(WR.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,ah.default)(this.promise,e)),this.redis.delayUntilReady(n=>{if(n){this.reject(n);return}this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,oh.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,ah.default)(this.promise,e)),this._queue.length||this.resolve([]);let t;if(this.isCluster){let n=[];for(let s=0;s<this._queue.length;s++){let a=this._queue[s].getKeys();if(a.length&&n.push(a[0]),a.length&&Oo.generateMulti(a)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(n.length){if(t=XR(this.redis,n),t<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=Math.random()*16384|0}let r=this;return i(),this.promise;function i(){let n=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:t,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let a="",o,l={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(u){typeof u!="string"?(o||(o=[]),a&&(o.push(Buffer.from(a,"utf8")),a=""),o.push(u)):a+=u,--n||(o?(a&&o.push(Buffer.from(a,"utf8")),l.destination.redis.stream.write(Buffer.concat(o))):l.destination.redis.stream.write(a),n=r._queue.length,a="",o=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],l,s);return r.promise}}});var No=h(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.addTransactionSupport=void 0;var Co=fe(),Po=_t(),lh=qo();function eT(e){e.pipeline=function(i){let n=new lh.default(this);return Array.isArray(i)&&n.addBatch(i),n};let{multi:t}=e;e.multi=function(i,n){if(typeof n>"u"&&!Array.isArray(i)&&(n=i,i=null),n&&n.pipeline===!1)return t.call(this);let s=new lh.default(this);s.multi(),Array.isArray(i)&&s.addBatch(i);let a=s.exec;s.exec=function(l){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Co.noop),(0,Po.default)(new Promise((c,d)=>{this.redis.delayUntilReady(f=>{if(f){d(f);return}this.exec(s).then(c,d)})}),l);if(this._transactions>0&&a.call(s),this.nodeifiedPromise)return a.call(s);let u=a.call(s);return(0,Po.default)(u.then(function(c){let d=c[c.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let f=0;f<c.length-1;++f)c[f][0]&&d[0].previousErrors.push(c[f][0]);throw d[0]}return(0,Co.wrapMultiResult)(d[1])}),l)};let{execBuffer:o}=s;return s.execBuffer=function(l){return this._transactions>0&&o.call(s),s.exec(l)},s};let{exec:r}=e;e.exec=function(i){return(0,Po.default)(r.call(this).then(function(n){return Array.isArray(n)&&(n=(0,Co.wrapMultiResult)(n)),n}),i)}}Pn.addTransactionSupport=eT});var Uo=h(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});function tT(e,t){Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})}Do.default=tT});var ch=h(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.DEFAULT_CLUSTER_OPTIONS=void 0;var uh=require("dns");Nn.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+e*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:uh.resolveSrv,dnsLookup:uh.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var ni=h(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.getConnectionName=ge.weightSrvRecords=ge.groupSrvRecords=ge.getUniqueHostnamesFromOptions=ge.normalizeNodeOptions=ge.nodeKeyToRedisOptions=ge.getNodeKey=void 0;var dh=fe(),rT=require("net");function iT(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port}ge.getNodeKey=iT;function nT(e){let t=e.lastIndexOf(":");if(t===-1)throw new Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}}ge.nodeKeyToRedisOptions=nT;function sT(e){return e.map(t=>{let r={};if(typeof t=="object")Object.assign(r,t);else if(typeof t=="string")Object.assign(r,(0,dh.parseURL)(t));else if(typeof t=="number")r.port=t;else throw new Error("Invalid argument "+t);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,dh.resolveTLSProfile)(r)})}ge.normalizeNodeOptions=sT;function aT(e){let t={};return e.forEach(r=>{t[r.host]=!0}),Object.keys(t).filter(r=>!(0,rT.isIP)(r))}ge.getUniqueHostnamesFromOptions=aT;function oT(e){let t={};for(let r of e)t.hasOwnProperty(r.priority)?(t[r.priority].totalWeight+=r.weight,t[r.priority].records.push(r)):t[r.priority]={totalWeight:r.weight,records:[r]};return t}ge.groupSrvRecords=oT;function lT(e){if(e.records.length===1)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),r=0;for(let[i,n]of e.records.entries())if(r+=1+n.weight,r>t)return e.totalWeight-=n.weight,e.records.splice(i,1),n}ge.weightSrvRecords=lT;function uT(e,t){let r=`ioredis-cluster(${e})`;return t?`${r}:${t}`:r}ge.getConnectionName=uT});var jo=h(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});var fh=ni(),Lo=fe(),cT=Nt(),tt=(0,Lo.Debug)("cluster:subscriber"),Fo=class{constructor(t,r,i=!1){this.connectionPool=t,this.emitter=r,this.isSharded=i,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){tt("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}tt("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,s)=>{!this.started||!this.subscriber||(0,fh.getNodeKey)(this.subscriber.options)===s&&(tt("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(tt("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(t){return this.isSharded&&(this.slotRange=t),this.slotRange}start(){this.started=!0,this.selectSubscriber(),tt("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let t=this.lastActiveSubscriber;t&&(t.off("end",this.onSubscriberEnd),t.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,Lo.sample)(this.connectionPool.getNodes());if(!r){tt("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:i}=r;tt("selected a subscriber %s:%s",i.host,i.port);let n="subscriber";this.isSharded&&(n="ssubscriber"),this.subscriber=new cT.default({port:i.port,host:i.host,username:i.username,password:i.password,enableReadyCheck:!0,connectionName:(0,fh.getConnectionName)(n,i.connectionName),lazyConnect:!0,tls:i.tls,retryStrategy:null}),this.subscriber.on("error",Lo.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(t){let a=t.condition||t.prevCondition;a&&a.subscriber&&(s.subscribe=a.subscriber.channels("subscribe"),s.psubscribe=a.subscriber.channels("psubscribe"),s.ssubscribe=a.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let a=0;for(let o of["subscribe","psubscribe","ssubscribe"]){let l=s[o];if(l.length!=0)if(tt("%s %d channels",o,l.length),o==="ssubscribe")for(let u of l)a+=1,this.subscriber[o](u).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{tt("failed to ssubscribe to channel: %s",u)});else a+=1,this.subscriber[o](l).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{tt("failed to %s %d channels",o,l.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let a of["message","messageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)});for(let a of["pmessage","pmessageBuffer"])this.subscriber.on(a,(o,l,u)=>{this.emitter.emit(a,o,l,u)});if(this.isSharded==!0)for(let a of["smessage","smessageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)})}};Mo.default=Fo});var Go=h(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});var dT=require("events"),Dn=fe(),$o=ni(),fT=Nt(),si=(0,Dn.Debug)("cluster:connectionPool"),Vo=class extends dT.EventEmitter{constructor(t){super(),this.redisOptions=t,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(t="all"){let r=this.nodes[t];return Object.keys(r).map(i=>r[i])}getInstanceByKey(t){return this.nodes.all[t]}getSampleInstance(t){let r=Object.keys(this.nodes[t]),i=(0,Dn.sample)(r);return this.nodes[t][i]}addMasterNode(t){let r=(0,$o.getNodeKey)(t.options),i=this.createRedisFromOptions(t,t.options.readOnly);return t.options.readOnly?!1:(this.nodes.all[r]=i,this.nodes.master[r]=i,!0)}createRedisFromOptions(t,r){return new fT.default((0,Dn.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},t,this.redisOptions,{lazyConnect:!0}))}findOrCreate(t,r=!1){let i=(0,$o.getNodeKey)(t);r=!!r,this.specifiedOptions[i]?Object.assign(t,this.specifiedOptions[i]):this.specifiedOptions[i]=t;let n;return this.nodes.all[i]?(n=this.nodes.all[i],n.options.readOnly!==r&&(n.options.readOnly=r,si("Change role of %s to %s",i,r?"slave":"master"),n[r?"readonly":"readwrite"]().catch(Dn.noop),r?(delete this.nodes.master[i],this.nodes.slave[i]=n):(delete this.nodes.slave[i],this.nodes.master[i]=n))):(si("Connecting to %s as %s",i,r?"slave":"master"),n=this.createRedisFromOptions(t,r),this.nodes.all[i]=n,this.nodes[r?"slave":"master"][i]=n,n.once("end",()=>{this.removeNode(i),this.emit("-node",n,i),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",n,i),n.on("error",function(s){this.emit("nodeError",s,i)})),n}reset(t){si("Reset with %O",t);let r={};t.forEach(i=>{let n=(0,$o.getNodeKey)(i);i.readOnly&&r[n]||(r[n]=i)}),Object.keys(this.nodes.all).forEach(i=>{r[i]||(si("Disconnect %s because the node does not hold any slot",i),this.nodes.all[i].disconnect(),this.removeNode(i))}),Object.keys(r).forEach(i=>{let n=r[i];this.findOrCreate(n,n.readOnly)})}removeNode(t){let{nodes:r}=this;r.all[t]&&(si("Remove %s from the pool",t),delete r.all[t]),delete r.master[t],delete r.slave[t]}};Bo.default=Vo});var Un=h((AN,ph)=>{"use strict";function re(e,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}re.prototype.peekAt=function(t){var r=t;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};re.prototype.get=function(t){return this.peekAt(t)};re.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};re.prototype.peekFront=function(){return this.peek()};re.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(re.prototype,"length",{get:function(){return this.size()}});re.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};re.prototype.unshift=function(t){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};re.prototype.shift=function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};re.prototype.push=function(t){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};re.prototype.pop=function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),i}};re.prototype.removeOne=function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(t<i/2){for(a=t;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-t;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};re.prototype.remove=function(t,r){var i=t,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var l;for(n=new Array(r),l=0;l<r;l++)n[l]=this._list[this._head+i+l&this._capacityMask];if(i=this._head+i&this._capacityMask,t+r===a){for(this._tail=this._tail-r+o&this._capacityMask,l=r;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(t===0){for(this._head=this._head+r+o&this._capacityMask,l=r-1;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+t+r+o&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;t<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,l=a-(r+t);l>0;l--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};re.prototype.splice=function(t,r){var i=t;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,l=arguments.length,u=this._list.length,c=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);l>c;)this.unshift(arguments[--l]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var d=a.length;for(s=0;s<d;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-d+u&this._capacityMask);c<l;)this.push(arguments[c++]);for(s=0;s<d;s++)this.push(a[s])}return o}else return this.remove(i,r)}};re.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};re.prototype.isEmpty=function(){return this._head===this._tail};re.prototype.toArray=function(){return this._copyArray(!1)};re.prototype._fromArray=function(t){var r=t.length,i=this._nextPowerOf2(r);this._list=new Array(i),this._capacityMask=i-1,this._tail=r;for(var n=0;n<r;n++)this._list[n]=t[n]};re.prototype._copyArray=function(t,r){var i=this._list,n=i.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=new Array(r),o=0,l;if(t||this._head>this._tail){for(l=this._head;l<n;l++)a[o++]=i[l];for(l=0;l<this._tail;l++)a[o++]=i[l]}else for(l=this._head;l<this._tail;l++)a[o++]=i[l];return a};re.prototype._growArray=function(){if(this._head!=0){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};re.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};re.prototype._nextPowerOf2=function(t){var r=Math.log(t)/Math.log(2),i=1<<r+1;return Math.max(i,4)};ph.exports=re});var hh=h(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var pT=fe(),hT=Un(),mT=(0,pT.Debug)("delayqueue"),Ho=class{constructor(){this.queues={},this.timeouts={}}push(t,r,i){let n=i.callback||process.nextTick;this.queues[t]||(this.queues[t]=new hT),this.queues[t].push(r),this.timeouts[t]||(this.timeouts[t]=setTimeout(()=>{n(()=>{this.timeouts[t]=null,this.execute(t)})},i.timeout))}execute(t){let r=this.queues[t];if(!r)return;let{length:i}=r;if(i)for(mT("send %d commands in %s queue",i,t),this.queues[t]=null;r.length>0;)r.shift()()}};Qo.default=Ho});var yh=h(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});var gT=fe(),yT=jo(),bT=Go(),mh=ni(),Ln=ti(),gh=(0,gT.Debug)("cluster:subscriberGroup"),Ko=class{constructor(t,r){this.cluster=t,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,t.on("+node",i=>{this._addSubscriber(i)}),t.on("-node",i=>{this._removeSubscriber(i)}),t.on("refresh",()=>{this._refreshSlots(t)}),t.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(t){let r=this.clusterSlots[t][0];return this.shardedSubscribers.get(r)}addChannels(t){let r=Ln(t[0]);t.forEach(n=>{if(Ln(n)!=r)return-1});let i=this.channels.get(r);return i?this.channels.set(r,i.concat(t)):this.channels.set(r,t),[...this.channels.values()].flatMap(n=>n).length}removeChannels(t){let r=Ln(t[0]);t.forEach(n=>{if(Ln(n)!=r)return-1});let i=this.channels.get(r);if(i){let n=i.filter(s=>!t.includes(s));this.channels.set(r,n)}return[...this.channels.values()].flatMap(n=>n).length}stop(){for(let t of this.shardedSubscribers.values())t.stop()}start(){for(let t of this.shardedSubscribers.values())t.isStarted()||t.start()}_addSubscriber(t){let r=new bT.default(t.options);if(r.addMasterNode(t)){let i=new yT.default(r,this.cluster,!0),n=(0,mh.getNodeKey)(t.options);return this.shardedSubscribers.set(n,i),i.start(),this._resubscribe(),this.cluster.emit("+subscriber"),i}return null}_removeSubscriber(t){let r=(0,mh.getNodeKey)(t.options),i=this.shardedSubscribers.get(r);return i&&(i.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(t){if(this._slotsAreEqual(t.slots))gh("Nothing to refresh because the new cluster map is equal to the previous one.");else{gh("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<t.slots.length;r++){let i=t.slots[r][0];this.subscriberToSlotsIndex.has(i)||this.subscriberToSlotsIndex.set(i,[]),this.subscriberToSlotsIndex.get(i).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(t.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((t,r)=>{let i=this.subscriberToSlotsIndex.get(r);i&&(t.associateSlotRange(i),i.forEach(n=>{let s=t.getInstance(),a=this.channels.get(n);a&&a.length>0&&s&&(s.ssubscribe(a),s.on("ready",()=>{s.ssubscribe(a)}))}))})}_slotsAreEqual(t){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(t)}};zo.default=Ko});var Yo=h(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var bh=dr(),Eh=require("events"),ai=Jt(),xh=_t(),vh=ft(),Jo=Wp(),xT=Nt(),vT=_n(),wT=No(),qe=fe(),ST=Uo(),ET=Cn(),kT=ch(),AT=jo(),RT=Go(),TT=hh(),xr=ni(),wh=Un(),IT=yh(),ie=(0,qe.Debug)("cluster"),Sh=new WeakSet,oi=class e extends ET.default{constructor(t,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new TT.default,this.offlineQueue=new wh,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,Eh.EventEmitter.call(this),this.startupNodes=t,this.options=(0,qe.defaults)({},r,kT.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new IT.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new RT.default(this.options.redisOptions),this.connectionPool.on("-node",(i,n)=>{this.emit("-node",i)}),this.connectionPool.on("+node",i=>{this.emit("+node",i)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(i,n)=>{this.emit("node error",i,n)}),this.subscriber=new AT.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,n])=>{this.defineCommand(i,n)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(i=>{ie("connecting failed: %s",i)})}connect(){return new Promise((t,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let i=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(n=>{if(this.connectionEpoch!==i){ie("discard connecting after resolving startup nodes because epoch not match: %d != %d",i,this.connectionEpoch),r(new ai.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){ie("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new ai.RedisError("Connection is aborted"));return}this.connectionPool.reset(n);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),t()},a,o=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",a),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((l,u)=>{l||u?(ie("Ready check failed (%s). Reconnecting...",l||u),this.status==="connect"&&this.disconnect(!0)):s()}):s()};a=()=>{let l=new Error("None of startup nodes is available");this.removeListener("refresh",o),this.invokeReadyDelayedCallbacks(l),r(l)},this.once("refresh",o),this.once("close",a),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(l=>{l&&l.message===Jo.default.defaultMessage&&(xT.default.prototype.silentEmit.call(this,"error",l),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(n=>{this.setStatus("close"),this.handleCloseEvent(n),this.invokeReadyDelayedCallbacks(n),r(n)})})}disconnect(t=!1){let r=this.status;this.setStatus("disconnecting"),t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,ie("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(t){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let i=(0,xh.default)(Promise.resolve("OK"),t);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),i}return(0,xh.default)(Promise.all(this.nodes().map(i=>i.quit().catch(n=>{if(n.message===qe.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw n}))).then(()=>"OK"),t)}duplicate(t=[],r={}){let i=t.length>0?t:this.startupNodes.slice(0),n=Object.assign({},this.options,r);return new e(i,n)}nodes(t="all"){if(t!=="all"&&t!=="master"&&t!=="slave")throw new Error('Invalid role "'+t+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(t)}delayUntilReady(t){this._readyDelayedCallbacks.push(t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}refreshSlotsCache(t){if(t&&this._refreshSlotsCacheCallbacks.push(t),this.isRefreshing)return;this.isRefreshing=!0;let r=this,i=o=>{this.isRefreshing=!1;for(let l of this._refreshSlotsCacheCallbacks)l(o);this._refreshSlotsCacheCallbacks=[]},n=(0,qe.shuffle)(this.connectionPool.getNodes()),s=null;function a(o){if(o===n.length){let c=new Jo.default(Jo.default.defaultMessage,s);return i(c)}let l=n[o],u=`${l.options.host}:${l.options.port}`;ie("getting slot cache from %s",u),r.getInfoFromNode(l,function(c){switch(r.status){case"close":case"end":return i(new Error("Cluster is disconnected."));case"disconnecting":return i(new Error("Cluster is disconnecting."))}c?(r.emit("node error",c,u),s=c,a(o+1)):(r.emit("refresh"),i())})}a(0)}sendCommand(t,r,i){if(this.status==="wait"&&this.connect().catch(qe.noop),this.status==="end")return t.reject(new Error(qe.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let n=this.options.scaleReads;n!=="master"&&(t.isReadOnly||(0,bh.exists)(t.name)&&(0,bh.hasFlag)(t.name,"readonly")||(n="master"));let s=i?i.slot:t.getSlot(),a={},o=this;if(!i&&!Sh.has(t)){Sh.add(t);let u=t.reject;t.reject=function(c){let d=l.bind(null,!0);o.handleError(c,a,{moved:function(f,p){ie("command %s is moved to %s",t.name,p),s=Number(f),o.slots[f]?o.slots[f][0]=p:o.slots[f]=[p],o._groupsBySlot[f]=o._groupsIds[o.slots[f].join(";")],o.connectionPool.findOrCreate(o.natMapper(p)),l(),ie("refreshing slot caches... (triggered by MOVED error)"),o.refreshSlotsCache()},ask:function(f,p){ie("command %s is required to ask %s:%s",t.name,p);let m=o.natMapper(p);o.connectionPool.findOrCreate(m),l(!1,`${m.host}:${m.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(f){u.call(t,f)},defaults:function(){u.call(t,c)}})}}l();function l(u,c){if(o.status==="end"){t.reject(new ai.AbortError("Cluster is ended."));return}let d;if(o.status==="ready"||t.name==="cluster"){if(i&&i.redis)d=i.redis;else if(vh.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||vh.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(o.options.shardedSubscribers==!0&&(t.name=="ssubscribe"||t.name=="sunsubscribe")){let f=o.shardedSubscribers.getResponsibleSubscriber(s),p=-1;t.name=="ssubscribe"&&(p=o.shardedSubscribers.addChannels(t.getKeys())),t.name=="sunsubscribe"&&(p=o.shardedSubscribers.removeChannels(t.getKeys())),p!==-1?d=f.getInstance():t.reject(new ai.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else d=o.subscriber.getInstance();if(!d){t.reject(new ai.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof s=="number"&&o.slots[s]){let f=o.slots[s];if(typeof n=="function"){let p=f.map(function(m){return o.connectionPool.getInstanceByKey(m)});d=n(p,t),Array.isArray(d)&&(d=(0,qe.sample)(d)),d||(d=p[0])}else{let p;n==="all"?p=(0,qe.sample)(f):n==="slave"&&f.length>1?p=(0,qe.sample)(f,1):p=f[0],d=o.connectionPool.getInstanceByKey(p)}}c&&(d=o.connectionPool.getInstanceByKey(c),d.asking())}d||(d=(typeof n=="function"?null:o.connectionPool.getSampleInstance(n))||o.connectionPool.getSampleInstance("all"))}i&&!i.redis&&(i.redis=d)}d?d.sendCommand(t,r):o.options.enableOfflineQueue?o.offlineQueue.push({command:t,stream:r,node:i}):t.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return t.promise}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}handleError(t,r,i){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){i.maxRedirections(new Error("Too many Cluster redirections. Last error: "+t));return}let n=t.message.split(" ");if(n[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",i.moved.bind(null,n[1],n[2]),{timeout:s}):i.moved(n[1],n[2])}else n[0]==="ASK"?i.ask(n[1],n[2]):n[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",i.tryagain,{timeout:this.options.retryDelayOnTryAgain}):n[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",i.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):t.message===qe.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",i.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):i.defaults()}resetOfflineQueue(){this.offlineQueue=new wh}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let t=()=>{this.slotsTimer=setTimeout(()=>{ie('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{t()})},this.options.slotsRefreshInterval)};t()}setStatus(t){ie("status: %s -> %s",this.status||"[empty]",t),this.status=t,process.nextTick(()=>{this.emit(t)})}handleCloseEvent(t){t&&ie("closed because %s",t);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,t)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,ie("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(i){ie("Got error %s when reconnecting. Ignoring...",i)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(t){let r;for(;r=this.offlineQueue.shift();)r.command.reject(t)}executeOfflineCommands(){if(this.offlineQueue.length){ie("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=t.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(t){let r=typeof t=="string"?t:`${t.host}:${t.port}`,i=null;return this.options.natMap&&typeof this.options.natMap=="function"?i=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(i=this.options.natMap[r]),i?(ie("NAT mapping %s -> %O",r,i),Object.assign({},i)):typeof t=="string"?(0,xr.nodeKeyToRedisOptions)(t):t}getInfoFromNode(t,r){if(!t)return r(new Error("Node is disconnected"));let i=t.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,xr.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});i.on("error",qe.noop),i.cluster("SLOTS",(0,qe.timeout)((n,s)=>{if(i.disconnect(),n)return ie("error encountered running CLUSTER.SLOTS: %s",n),r(n);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){ie("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let a=[];ie("cluster slots result count: %d",s.length);for(let l=0;l<s.length;++l){let u=s[l],c=u[0],d=u[1],f=[];for(let p=2;p<u.length;p++){if(!u[p][0])continue;let m=this.natMapper({host:u[p][0],port:u[p][1]});m.readOnly=p!==2,a.push(m),f.push(m.host+":"+m.port)}ie("cluster slots result [%d]: slots %d~%d served by %s",l,c,d,f);for(let p=c;p<=d;p++)this.slots[p]=f}this._groupsIds=Object.create(null);let o=0;for(let l=0;l<16384;l++){let u=(this.slots[l]||[]).join(";");if(!u.length){this._groupsBySlot[l]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++o),this._groupsBySlot[l]=this._groupsIds[u]}this.connectionPool.reset(a),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(t){for(let r of this._readyDelayedCallbacks)process.nextTick(r,t);this._readyDelayedCallbacks=[]}readyCheck(t){this.cluster("INFO",(r,i)=>{if(r)return t(r);if(typeof i!="string")return t();let n,s=i.split(`\r
`);for(let a=0;a<s.length;++a){let o=s[a].split(":");if(o[0]==="cluster_state"){n=o[1];break}}n==="fail"?(ie("cluster state not ok (%s)",n),t(null,n)):t()})}resolveSrv(t){return new Promise((r,i)=>{this.options.resolveSrv(t,(n,s)=>{if(n)return i(n);let a=this,o=(0,xr.groupSrvRecords)(s),l=Object.keys(o).sort((c,d)=>parseInt(c)-parseInt(d));function u(c){if(!l.length)return i(c);let d=l[0],f=o[d],p=(0,xr.weightSrvRecords)(f);f.records.length||l.shift(),a.dnsLookup(p.name).then(m=>r({host:m,port:p.port}),u)}u()})})}dnsLookup(t){return new Promise((r,i)=>{this.options.dnsLookup(t,(n,s)=>{n?(ie("failed to resolve hostname %s to IP: %s",t,n.message),i(n)):(ie("resolved hostname %s to IP %s",t,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let t=(0,xr.normalizeNodeOptions)(this.startupNodes),r=(0,xr.getUniqueHostnamesFromOptions)(t);if(r.length===0)return t;let i=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),n=(0,qe.zipMap)(r,i);return t.map(s=>{let a=n.get(s.host);return a?this.options.useSRVRecords?Object.assign({},s,a):Object.assign({},s,{host:a}):s})}createScanStream(t,{key:r,options:i={}}){return new vT.default({objectMode:!0,key:r,redis:this,command:t,...i})}};(0,ST.default)(oi,Eh.EventEmitter);(0,wT.addTransactionSupport)(oi.prototype);Wo.default=oi});var Fn=h(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});var OT=fe(),_T=(0,OT.Debug)("AbstractConnector"),Xo=class{constructor(t){this.connecting=!1,this.disconnectTimeout=t}check(t){return!0}disconnect(){if(this.connecting=!1,this.stream){let t=this.stream,r=setTimeout(()=>{_T("stream %s:%s still open, destroying it",t.remoteAddress,t.remotePort),t.destroy()},this.disconnectTimeout);t.on("close",()=>clearTimeout(r)),t.end()}}};Zo.default=Xo});var kh=h(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var qT=require("net"),CT=require("tls"),PT=fe(),NT=Fn(),el=class extends NT.default{constructor(t){super(t.disconnectTimeout),this.options=t}connect(t){let{options:r}=this;this.connecting=!0;let i;return"path"in r&&r.path?i={path:r.path}:(i={},"port"in r&&r.port!=null&&(i.port=r.port),"host"in r&&r.host!=null&&(i.host=r.host),"family"in r&&r.family!=null&&(i.family=r.family)),r.tls&&Object.assign(i,r.tls),new Promise((n,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(PT.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,CT.connect)(i):this.stream=(0,qT.createConnection)(i)}catch(a){s(a);return}this.stream.once("error",a=>{this.firstError=a}),n(this.stream)})})}};tl.default=el});var Ah=h(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});function DT(e,t){return(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379)}var rl=class{constructor(t){this.cursor=0,this.sentinels=t.slice(0)}next(){let t=this.cursor>=this.sentinels.length;return{done:t,value:t?void 0:this.sentinels[this.cursor++]}}reset(t){t&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(t){for(let r=0;r<this.sentinels.length;r++)if(DT(t,this.sentinels[r]))return!1;return this.sentinels.push(t),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};il.default=rl});var Th=h(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.FailoverDetector=void 0;var UT=fe(),nl=(0,UT.Debug)("FailoverDetector"),Rh="+switch-master",sl=class{constructor(t,r){this.isDisconnected=!1,this.connector=t,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let t of this.sentinels)t.client.disconnect()}async subscribe(){nl("Starting FailoverDetector");let t=[];for(let r of this.sentinels){let i=r.client.subscribe(Rh).catch(n=>{nl("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,n.message)});t.push(i),r.client.on("message",n=>{!this.isDisconnected&&n===Rh&&this.disconnect()})}await Promise.all(t)}disconnect(){this.isDisconnected=!0,nl("Failover detected, disconnecting"),this.connector.disconnect()}};Mn.FailoverDetector=sl});var jn=h(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.SentinelIterator=void 0;var LT=require("net"),li=fe(),FT=require("tls"),Ih=Ah();ui.SentinelIterator=Ih.default;var MT=Fn(),jT=Nt(),$T=Th(),vr=(0,li.Debug)("SentinelConnector"),al=class extends MT.default{constructor(t){if(super(t.disconnectTimeout),this.options=t,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new Ih.default(this.options.sentinels)}check(t){let r=!t.role||this.options.role===t.role;return r||(vr("role invalid, expected %s, but got %s",this.options.role,t.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(t){this.connecting=!0,this.retryAttempts=0;let r,i=async()=>{let n=this.sentinelIterator.next();if(n.done){this.sentinelIterator.reset(!1);let l=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof l!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${l}ms.`;r&&(u+=` Last error: ${r.message}`),vr(u);let c=new Error(u);if(typeof l=="number")return t("error",c),await new Promise(d=>setTimeout(d,l)),i();throw c}let s=null,a=null;try{s=await this.resolve(n.value)}catch(l){a=l}if(!this.connecting)throw new Error(li.CONNECTION_CLOSED_ERROR_MSG);let o=n.value.host+":"+n.value.port;if(s)return vr("resolved: %s:%s from sentinel %s",s.host,s.port,o),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,FT.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,LT.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",l=>{this.firstError=l}),this.stream;{let l=a?"failed to connect to sentinel "+o+" because "+a.message:"connected to sentinel "+o+" successfully, but got an invalid reply: "+s;return vr(l),t("sentinelError",new Error(l)),a&&(r=a),i()}};return i()}async updateSentinels(t){if(!this.options.updateSentinels)return;let r=await t.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(li.packObject).forEach(i=>{if((i.flags?i.flags.split(","):[]).indexOf("disconnected")===-1&&i.ip&&i.port){let s=this.sentinelNatResolve(Oh(i));this.sentinelIterator.add(s)&&vr("adding sentinel %s:%s",s.host,s.port)}}),vr("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(t){let r=await t.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(t),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(t){let r=await t.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let i=r.map(li.packObject).filter(n=>n.flags&&!n.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(VT(i,this.options.preferredSlaves))}sentinelNatResolve(t){if(!t||!this.options.natMap)return t;let r=`${t.host}:${t.port}`,i=t;return typeof this.options.natMap=="function"?i=this.options.natMap(r)||t:typeof this.options.natMap=="object"&&(i=this.options.natMap[r]||t),i}connectToSentinel(t,r){return new jT.default({port:t.port||26379,host:t.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:t.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(t){let r=this.connectToSentinel(t);r.on("error",BT);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var t;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:i,value:n}=this.sentinelIterator.next();if(i)break;let s=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var a;(a=this.emitter)===null||a===void 0||a.emit("sentinelReconnecting")}),r.push({address:n,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new $T.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(t=this.emitter)===null||t===void 0||t.emit("failoverSubscribed")}};ui.default=al;function VT(e,t){if(e.length===0)return null;let r;if(typeof t=="function")r=t(e);else if(t!==null&&typeof t=="object"){let i=Array.isArray(t)?t:[t];i.sort((n,s)=>(n.prio||(n.prio=1),s.prio||(s.prio=1),n.prio<s.prio?-1:n.prio>s.prio?1:0));for(let n=0;n<i.length;n++){for(let s=0;s<e.length;s++){let a=e[s];if(a.ip===i[n].ip&&a.port===i[n].port){r=a;break}}if(r)break}}return r||(r=(0,li.sample)(e)),Oh(r)}function Oh(e){return{host:e.ip,port:Number(e.port)}}function BT(){}});var _h=h(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.SentinelConnector=wr.StandaloneConnector=void 0;var GT=kh();wr.StandaloneConnector=GT.default;var HT=jn();wr.SentinelConnector=HT.default});var qh=h(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var QT=Jt(),ol=class extends QT.AbortError{constructor(t){let r=`Reached the max retries per request limit (which is ${t}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};ll.default=ol});var Ch=h($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.MaxRetriesPerRequestError=void 0;var KT=qh();$n.MaxRetriesPerRequestError=KT.default});var Mh=h((LN,Fh)=>{"use strict";var hl=require("buffer").Buffer,zT=require("string_decoder").StringDecoder,ul=new zT,Ph=Jt(),JT=Ph.ReplyError,WT=Ph.ParserError,Be=hl.allocUnsafe(32*1024),we=0,Vn=null,ci=0,cl=0;function YT(e){let t=e.buffer.length-1;var r=e.offset,i=0,n=1;for(e.buffer[r]===45&&(n=-1,r++);r<t;){let s=e.buffer[r++];if(s===13)return e.offset=r+1,n*i;i=i*10+(s-48)}}function XT(e){let t=e.buffer.length-1;var r=e.offset,i=0,n="";for(e.buffer[r]===45&&(n+="-",r++);r<t;){var s=e.buffer[r++];if(s===13)return e.offset=r+1,i!==0&&(n+=i),n;i>429496728?(n+=i*10+(s-48),i=0):s===48&&i===0?n+=0:i=i*10+(s-48)}}function Nh(e){let t=e.offset,r=e.buffer,i=r.length-1;for(var n=t;n<i;)if(r[n++]===13)return e.offset=n+1,e.optionReturnBuffers===!0?e.buffer.slice(t,n-1):e.buffer.toString("utf8",t,n-1)}function Dh(e){let t=e.buffer.length-1;for(var r=e.offset,i=0;r<t;){let n=e.buffer[r++];if(n===13)return e.offset=r+1,i;i=i*10+(n-48)}}function ZT(e){return e.optionStringNumbers===!0?XT(e):YT(e)}function eI(e){let t=Dh(e);if(t===void 0)return;if(t<0)return null;let r=e.offset+t;if(r+2>e.buffer.length){e.bigStrSize=r+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return e.offset=r+2,e.optionReturnBuffers===!0?e.buffer.slice(i,r):e.buffer.toString("utf8",i,r)}function tI(e){var t=Nh(e);if(t!==void 0)return e.optionReturnBuffers===!0&&(t=t.toString()),new JT(t)}function rI(e,t){let r=new WT("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(r)}function iI(e){let t=Dh(e);if(t===void 0)return;if(t<0)return null;let r=new Array(t);return Uh(e,r,0)}function dl(e,t,r){e.arrayCache.push(t),e.arrayPos.push(r)}function fl(e){let t=e.arrayCache.pop();var r=e.arrayPos.pop();if(e.arrayCache.length){let i=fl(e);if(i===void 0){dl(e,t,r);return}t[r++]=i}return Uh(e,t,r)}function Uh(e,t,r){let i=e.buffer.length;for(;r<t.length;){let n=e.offset;if(e.offset>=i){dl(e,t,r);return}let s=Lh(e,e.buffer[e.offset++]);if(s===void 0){e.arrayCache.length||e.bufferCache.length||(e.offset=n),dl(e,t,r);return}t[r]=s,r++}return t}function Lh(e,t){switch(t){case 36:return eI(e);case 43:return Nh(e);case 42:return iI(e);case 58:return ZT(e);case 45:return tI(e);default:return rI(e,t)}}function nI(){if(Be.length>50*1024)if(ci===1||cl>ci*2){let e=Math.floor(Be.length/10),t=e<we?we:e;we=0,Be=Be.slice(t,Be.length)}else cl++,ci--;else clearInterval(Vn),ci=0,cl=0,Vn=null}function sI(e){if(Be.length<e+we){let t=e>78643200?2:3;we>1024*1024*111&&(we=1024*1024*50),Be=hl.allocUnsafe(e*t+we),we=0,ci++,Vn===null&&(Vn=setInterval(nI,50))}}function aI(e){let t=e.bufferCache,r=e.offset;var i=t.length,n=e.bigStrSize-e.totalChunkSize;if(e.offset=n,n<=2){if(i===2)return t[0].toString("utf8",r,t[0].length+n-2);i--,n=t[t.length-2].length+n}for(var s=ul.write(t[0].slice(r)),a=1;a<i-1;a++)s+=ul.write(t[a]);return s+=ul.end(t[a].slice(0,n-2)),s}function oI(e){let t=e.bufferCache,r=e.offset,i=e.bigStrSize-r-2;var n=t.length,s=e.bigStrSize-e.totalChunkSize;if(e.offset=s,s<=2){if(n===2)return t[0].slice(r,t[0].length+s-2);n--,s=t[t.length-2].length+s}sI(i);let a=we;t[0].copy(Be,a,r,t[0].length),we+=t[0].length-r;for(var o=1;o<n-1;o++)t[o].copy(Be,we),we+=t[o].length;return t[o].copy(Be,we,0,s-2),we+=s-2,Be.slice(a,we)}var pl=class{constructor(t){if(!t)throw new TypeError("Options are mandatory.");if(typeof t.returnError!="function"||typeof t.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!t.returnBuffers),this.setStringNumbers(!!t.stringNumbers),this.returnError=t.returnError,this.returnFatalError=t.returnFatalError||t.returnError,this.returnReply=t.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(t){if(typeof t!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=t}setStringNumbers(t){if(typeof t!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=t}execute(t){if(this.buffer===null)this.buffer=t,this.offset=0;else if(this.bigStrSize===0){let i=this.buffer.length,n=i-this.offset,s=hl.allocUnsafe(n+t.length);if(this.buffer.copy(s,0,this.offset,i),t.copy(s,n,0,t.length),this.buffer=s,this.offset=0,this.arrayCache.length){let a=fl(this);if(a===void 0)return;this.returnReply(a)}}else if(this.totalChunkSize+t.length>=this.bigStrSize){this.bufferCache.push(t);var r=this.optionReturnBuffers?oI(this):aI(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=t,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=fl(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(t),this.totalChunkSize+=t.length;return}for(;this.offset<this.buffer.length;){let i=this.offset,n=this.buffer[this.offset++],s=Lh(this,n);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=i);return}n===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};Fh.exports=pl});var $h=h((FN,jh)=>{"use strict";jh.exports=Mh()});var Vh=h(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var gl=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(t,r){this.set[ml(t)][r]=!0}del(t,r){delete this.set[ml(t)][r]}channels(t){return Object.keys(this.set[ml(t)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};yl.default=gl;function ml(e){return e==="unsubscribe"?"subscribe":e==="punsubscribe"?"psubscribe":e==="sunsubscribe"?"ssubscribe":e}});var Qh=h(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var Bh=ft(),lI=fe(),uI=$h(),cI=Vh(),dI=(0,lI.Debug)("dataHandler"),bl=class{constructor(t,r){this.redis=t;let i=new uI({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:n=>{this.returnError(n)},returnFatalError:n=>{this.returnFatalError(n)},returnReply:n=>{this.returnReply(n)}});t.stream.prependListener("data",n=>{i.execute(n)}),t.stream.resume()}returnFatalError(t){t.message+=". Please report this.",this.redis.recoverFromFatalError(t,t,{offlineQueue:!1})}returnError(t){let r=this.shiftCommand(t);if(r){if(t.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&t.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(t,r)}}returnReply(t){if(this.handleMonitorReply(t)||this.handleSubscriberReply(t))return;let r=this.shiftCommand(t);r&&(Bh.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new cI.default,this.redis.condition.subscriber.add(r.command.name,t[1].toString()),Gh(r.command,t[2])||this.redis.commandQueue.unshift(r)):Bh.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?Hh(r.command,t[2])||this.redis.commandQueue.unshift(r):r.command.resolve(t))}handleSubscriberReply(t){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(t)?t[0].toString():null;switch(dI('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("messageBuffer",t[1],t[2]);break;case"pmessage":{let i=t[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",i,t[2].toString(),t[3].toString()),this.redis.emit("pmessageBuffer",i,t[2],t[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("smessageBuffer",t[1],t[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let i=t[1].toString();this.redis.condition.subscriber.add(r,i);let n=this.shiftCommand(t);if(!n)return;Gh(n.command,t[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let i=t[1]?t[1].toString():null;i&&this.redis.condition.subscriber.del(r,i);let n=t[2];Number(n)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(t);if(!s)return;Hh(s.command,n)||this.redis.commandQueue.unshift(s);break}default:{let i=this.shiftCommand(t);if(!i)return;i.command.resolve(t)}}return!0}handleMonitorReply(t){if(this.redis.status!=="monitoring")return!1;let r=t.toString();if(r==="OK")return!1;let i=r.indexOf(" "),n=r.slice(0,i),s=r.indexOf('"'),a=r.slice(s+1,-1).split('" "').map(l=>l.replace(/\\"/g,'"')),o=r.slice(i+2,s-2).split(" ");return this.redis.emit("monitor",n,a,o[1],o[0]),!0}shiftCommand(t){let r=this.redis.commandQueue.shift();if(!r){let i="Command queue state error. If you can reproduce this, please report it.",n=new Error(i+(t instanceof Error?` Last error: ${t.message}`:` Last reply: ${t.toString()}`));return this.redis.emit("error",n),null}return r}};xl.default=bl;var Dt=new WeakMap;function Gh(e,t){let r=Dt.has(e)?Dt.get(e):e.args.length;return r-=1,r<=0?(e.resolve(t),Dt.delete(e),!0):(Dt.set(e,r),!1)}function Hh(e,t){let r=Dt.has(e)?Dt.get(e):e.args.length;return r===0?Number(t)===0?(Dt.delete(e),e.resolve(t),!0):!1:(r-=1,r<=0?(e.resolve(t),!0):(Dt.set(e,r),!1))}});var Kh=h(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.readyHandler=Le.errorHandler=Le.closeHandler=Le.connectHandler=void 0;var fI=Jt(),pI=ft(),hI=Ch(),rt=fe(),mI=Qh(),pe=(0,rt.Debug)("connection");function gI(e){return function(){var t;e.setStatus("connect"),e.resetCommandQueue();let r=!1,{connectionEpoch:i}=e;e.condition.auth&&e.auth(e.condition.auth,function(s){i===e.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,e.recoverFromFatalError(s,s)))}),e.condition.select&&e.select(e.condition.select).catch(s=>{e.silentEmit("error",s)}),new mI.default(e,{stringNumbers:e.options.stringNumbers});let n=[];e.options.connectionName&&(pe("set the connection name [%s]",e.options.connectionName),n.push(e.client("setname",e.options.connectionName).catch(rt.noop))),e.options.disableClientInfo||(pe("set the client info"),n.push((0,rt.getPackageMeta)().then(s=>e.client("SETINFO","LIB-VER",s.version).catch(rt.noop)).catch(rt.noop)),n.push(e.client("SETINFO","LIB-NAME",!((t=e.options)===null||t===void 0)&&t.clientInfoTag?`ioredis(${e.options.clientInfoTag})`:"ioredis").catch(rt.noop))),Promise.all(n).catch(rt.noop).finally(()=>{e.options.enableReadyCheck||Le.readyHandler(e)(),e.options.enableReadyCheck&&e._readyCheck(function(s,a){i===e.connectionEpoch&&(s?r||e.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):e.connector.check(a)?Le.readyHandler(e)():e.disconnect(!0))})})}}Le.connectHandler=gI;function vl(e){let t=new fI.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}function yI(e){var t;let r=0;for(let i=0;i<e.length;){let n=(t=e.peekAt(i))===null||t===void 0?void 0:t.command,s=n.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){e.remove(i,1),n.reject(vl(n));continue}i++}}function bI(e){var t;for(let r=0;r<e.length;){let i=(t=e.peekAt(r))===null||t===void 0?void 0:t.command;if(i.name==="multi")break;if(i.name==="exec"){e.remove(r,1),i.reject(vl(i));break}i.inTransaction?(e.remove(r,1),i.reject(vl(i))):r++}}function xI(e){return function(){let r=e.status;if(e.setStatus("close"),e.commandQueue.length&&yI(e.commandQueue),e.offlineQueue.length&&bI(e.offlineQueue),r==="ready"&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,pe("skip reconnecting since the connection is manually closed."),t();if(typeof e.options.retryStrategy!="function")return pe("skip reconnecting because `retryStrategy` is not a function"),t();let i=e.options.retryStrategy(++e.retryAttempts);if(typeof i!="number")return pe("skip reconnecting because `retryStrategy` doesn't return a number"),t();pe("reconnect in %sms",i),e.setStatus("reconnecting",i),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(rt.noop)},i);let{maxRetriesPerRequest:n}=e.options;typeof n=="number"&&(n<0?pe("maxRetriesPerRequest is negative, ignoring..."):e.retryAttempts%(n+1)===0&&(pe("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new hI.MaxRetriesPerRequestError(n))))};function t(){e.setStatus("end"),e.flushQueue(new Error(rt.CONNECTION_CLOSED_ERROR_MSG))}}Le.closeHandler=xI;function vI(e){return function(t){pe("error: %s",t),e.silentEmit("error",t)}}Le.errorHandler=vI;function wI(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),i=>e.emit("error",i));let{sendCommand:r}=e;e.sendCommand=function(i){return pI.default.checkFlag("VALID_IN_MONITOR_MODE",i.name)?r.call(e,i):(i.reject(new Error("Connection is in monitoring mode, can't process commands.")),i.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.readOnly&&(pe("set the connection to readonly mode"),e.readonly().catch(rt.noop)),e.prevCondition){let r=e.prevCondition;if(e.prevCondition=null,r.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(pe("connect to db [%d]",t),e.select(t));let i=r.subscriber.channels("subscribe");i.length&&(pe("subscribe %d channels",i.length),e.subscribe(i));let n=r.subscriber.channels("psubscribe");n.length&&(pe("psubscribe %d channels",n.length),e.psubscribe(n));let s=r.subscriber.channels("ssubscribe");if(s.length){pe("ssubscribe %s",s.length);for(let a of s)e.ssubscribe(a)}}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(pe("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let r=e.prevCommandQueue.shift();r.select!==e.condition.select&&r.command.name!=="select"&&e.select(r.select),e.sendCommand(r.command,r.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){pe("send %d commands in offline queue",e.offlineQueue.length);let r=e.offlineQueue;for(e.resetOfflineQueue();r.length>0;){let i=r.shift();i.select!==e.condition.select&&i.command.name!=="select"&&e.select(i.select),e.sendCommand(i.command,i.stream)}}e.condition.select!==t&&(pe("connect to db [%d]",t),e.select(t))}}Le.readyHandler=wI});var zh=h(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.DEFAULT_REDIS_OPTIONS=void 0;Bn.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(e*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(e*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var Nt=h(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Jh=dr(),Yh=require("events"),wl=_t(),SI=Yo(),di=ft(),EI=_h(),kI=jn(),Ut=Kh(),AI=zh(),RI=_n(),TI=No(),Xt=fe(),II=Uo(),OI=Cn(),Lt=En(),Wh=Un(),Ft=(0,Xt.Debug)("redis"),Mt=class e extends OI.default{constructor(t,r,i){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(t,r,i),Yh.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let n=new kI.default(this.options);n.emitter=this,this.connector=n}else this.connector=new EI.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Lt.noop)}static createClient(...t){return new e(...t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}connect(t){let r=new Promise((i,n)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){n(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let a=this;(0,wl.default)(this.connector.connect(function(o,l){a.silentEmit(o,l)}),function(o,l){if(o){a.flushQueue(o),a.silentEmit("error",o),n(o),a.setStatus("end");return}let u=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(u="connect"),a.stream=l,s.noDelay&&l.setNoDelay(!0),typeof s.keepAlive=="number"&&(l.connecting?l.once(u,()=>{l.setKeepAlive(!0,s.keepAlive)}):l.setKeepAlive(!0,s.keepAlive)),l.connecting){if(l.once(u,Ut.connectHandler(a)),s.connectTimeout){let f=!1;l.setTimeout(s.connectTimeout,function(){if(f)return;l.setTimeout(0),l.destroy();let p=new Error("connect ETIMEDOUT");p.errorno="ETIMEDOUT",p.code="ETIMEDOUT",p.syscall="connect",Ut.errorHandler(a)(p)}),l.once(u,function(){f=!0,l.setTimeout(0)})}}else if(l.destroyed){let f=a.connector.firstError;f&&process.nextTick(()=>{Ut.errorHandler(a)(f)}),process.nextTick(Ut.closeHandler(a))}else process.nextTick(Ut.connectHandler(a));l.destroyed||(l.once("error",Ut.errorHandler(a)),l.once("close",Ut.closeHandler(a)));let c=function(){a.removeListener("close",d),i()};var d=function(){a.removeListener("ready",c),n(new Error(Xt.CONNECTION_CLOSED_ERROR_MSG))};a.once("ready",c),a.once("close",d)})});return(0,wl.default)(r,t)}disconnect(t=!1){t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Ut.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(t){return new e({...this.options,...t})}get mode(){var t;return this.options.monitor?"monitor":!((t=this.condition)===null||t===void 0)&&t.subscriber?"subscriber":"normal"}monitor(t){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,wl.default)(new Promise(function(i,n){r.once("error",n),r.once("monitoring",function(){i(r)})}),t)}sendCommand(t,r){var i,n;if(this.status==="wait"&&this.connect().catch(Lt.noop),this.status==="end")return t.reject(new Error(Xt.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if(!((i=this.condition)===null||i===void 0)&&i.subscriber&&!di.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;typeof this.options.commandTimeout=="number"&&t.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!r&&this.status==="connect"&&(0,Jh.exists)(t.name)&&((0,Jh.hasFlag)(t.name,"loading")||di.default.checkFlag("HANDSHAKE_COMMANDS",t.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)Ft.enabled&&Ft("write command[%s]: %d -> %s(%o)",this._getDescription(),(n=this.condition)===null||n===void 0?void 0:n.select,t.name,t.args),r?"isPipeline"in r&&r.isPipeline?r.write(t.toWritable(r.destination.redis.stream)):r.write(t.toWritable(r)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:r,select:this.condition.select}),di.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if(t.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;Ft.enabled&&Ft("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:r,select:this.condition.select})}if(t.name==="select"&&(0,Xt.isInt)(t.args[0])){let a=parseInt(t.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),Ft("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(t){return this.createScanStream("scan",{options:t})}scanBufferStream(t){return this.createScanStream("scanBuffer",{options:t})}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}silentEmit(t,r){let i;if(!(t==="error"&&(i=r,this.status==="end"||this.manuallyClosing&&i instanceof Error&&(i.message===Xt.CONNECTION_CLOSED_ERROR_MSG||i.syscall==="connect"||i.syscall==="read"))))return this.listeners(t).length>0?this.emit.apply(this,arguments):(i&&i instanceof Error&&console.error("[ioredis] Unhandled error event:",i.stack),!1)}recoverFromFatalError(t,r,i){this.flushQueue(r,i),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(t,r){var i;let n=!1;switch(this.options.reconnectOnError&&!di.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(n=this.options.reconnectOnError(t)),n){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(t);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((i=this.condition)===null||i===void 0?void 0:i.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(t)}}_getDescription(){let t;return"path"in this.options&&this.options.path?t=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?t=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?t=this.options.host+":"+this.options.port:t="",this.options.connectionName&&(t+=` (${this.options.connectionName})`),t}resetCommandQueue(){this.commandQueue=new Wh}resetOfflineQueue(){this.offlineQueue=new Wh}parseOptions(...t){let r={},i=!1;for(let n=0;n<t.length;++n){let s=t[n];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,Lt.defaults)(r,s);else if(typeof s=="string")(0,Lt.defaults)(r,(0,Xt.parseURL)(s)),s.startsWith("rediss://")&&(i=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}i&&(0,Lt.defaults)(r,{tls:!0}),(0,Lt.defaults)(r,e.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,Xt.resolveTLSProfile)(r)}setStatus(t,r){Ft.enabled&&Ft("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",t),this.status=t,process.nextTick(this.emit.bind(this,t,r))}createScanStream(t,{key:r,options:i={}}){return new RI.default({objectMode:!0,key:r,redis:this,command:t,...i})}flushQueue(t,r){r=(0,Lt.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let i;if(r.offlineQueue)for(;i=this.offlineQueue.shift();)i.command.reject(t);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");i=this.commandQueue.shift();)i.command.reject(t)}_readyCheck(t){let r=this;this.info(function(i,n){if(i)return i.message&&i.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${i.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),t(null,{})):t(i);if(typeof n!="string")return t(null,n);let s={},a=n.split(`\r
`);for(let o=0;o<a.length;++o){let[l,...u]=a[o].split(":"),c=u.join(":");c&&(s[l]=c)}if(!s.loading||s.loading==="0")t(null,s);else{let o=(s.loading_eta_seconds||1)*1e3,l=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<o?r.options.maxLoadingRetryTime:o;Ft("Redis server still loading, trying again in "+l+"ms"),setTimeout(function(){r._readyCheck(t)},l)}}).catch(Lt.noop)}};Mt.Cluster=SI.default;Mt.Command=di.default;Mt.defaultOptions=AI.DEFAULT_REDIS_OPTIONS;(0,II.default)(Mt,Yh.EventEmitter);(0,TI.addTransactionSupport)(Mt.prototype);Sl.default=Mt});var em=h((J,Zh)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.print=J.ReplyError=J.SentinelIterator=J.SentinelConnector=J.AbstractConnector=J.Pipeline=J.ScanStream=J.Command=J.Cluster=J.Redis=J.default=void 0;J=Zh.exports=Nt().default;var _I=Nt();Object.defineProperty(J,"default",{enumerable:!0,get:function(){return _I.default}});var qI=Nt();Object.defineProperty(J,"Redis",{enumerable:!0,get:function(){return qI.default}});var CI=Yo();Object.defineProperty(J,"Cluster",{enumerable:!0,get:function(){return CI.default}});var PI=ft();Object.defineProperty(J,"Command",{enumerable:!0,get:function(){return PI.default}});var NI=_n();Object.defineProperty(J,"ScanStream",{enumerable:!0,get:function(){return NI.default}});var DI=qo();Object.defineProperty(J,"Pipeline",{enumerable:!0,get:function(){return DI.default}});var UI=Fn();Object.defineProperty(J,"AbstractConnector",{enumerable:!0,get:function(){return UI.default}});var Xh=jn();Object.defineProperty(J,"SentinelConnector",{enumerable:!0,get:function(){return Xh.default}});Object.defineProperty(J,"SentinelIterator",{enumerable:!0,get:function(){return Xh.SentinelIterator}});J.ReplyError=Jt().ReplyError;Object.defineProperty(J,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function LI(e,t){console.log(e?"Error: "+e:"Reply: "+t)}J.print=LI});var Sr=h((El,rm)=>{var Gn=require("buffer"),it=Gn.Buffer;function tm(e,t){for(var r in e)t[r]=e[r]}it.from&&it.alloc&&it.allocUnsafe&&it.allocUnsafeSlow?rm.exports=Gn:(tm(Gn,El),El.Buffer=Zt);function Zt(e,t,r){return it(e,t,r)}Zt.prototype=Object.create(it.prototype);tm(it,Zt);Zt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return it(e,t,r)};Zt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=it(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};Zt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return it(e)};Zt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Gn.SlowBuffer(e)}});var kl=h((WN,im)=>{var Hn=Sr().Buffer,MI=require("stream"),jI=require("util");function Qn(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Hn.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Hn.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}jI.inherits(Qn,MI);Qn.prototype.write=function(t){this.buffer=Hn.concat([this.buffer,Hn.from(t)]),this.emit("data",t)};Qn.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};im.exports=Qn});var sm=h((YN,nm)=>{"use strict";function Al(e){var t=(e/8|0)+(e%8===0?0:1);return t}var $I={ES256:Al(256),ES384:Al(384),ES512:Al(521)};function VI(e){var t=$I[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}nm.exports=VI});var fm=h((XN,dm)=>{"use strict";var Kn=Sr().Buffer,om=sm(),zn=128,lm=0,BI=32,GI=16,HI=2,um=GI|BI|lm<<6,Jn=HI|lm<<6;function QI(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cm(e){if(Kn.isBuffer(e))return e;if(typeof e=="string")return Kn.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function KI(e,t){e=cm(e);var r=om(t),i=r+1,n=e.length,s=0;if(e[s++]!==um)throw new Error('Could not find expected "seq"');var a=e[s++];if(a===(zn|1)&&(a=e[s++]),n-s<a)throw new Error('"seq" specified length of "'+a+'", only "'+(n-s)+'" remaining');if(e[s++]!==Jn)throw new Error('Could not find expected "int" for "r"');var o=e[s++];if(n-s-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(n-s-2)+'" available');if(i<o)throw new Error('"r" specified length of "'+o+'", max of "'+i+'" is acceptable');var l=s;if(s+=o,e[s++]!==Jn)throw new Error('Could not find expected "int" for "s"');var u=e[s++];if(n-s!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(n-s)+'"');if(i<u)throw new Error('"s" specified length of "'+u+'", max of "'+i+'" is acceptable');var c=s;if(s+=u,s!==n)throw new Error('Expected to consume entire buffer, but "'+(n-s)+'" bytes remain');var d=r-o,f=r-u,p=Kn.allocUnsafe(d+o+f+u);for(s=0;s<d;++s)p[s]=0;e.copy(p,s,l+Math.max(-d,0),l+o),s=r;for(var m=s;s<m+f;++s)p[s]=0;return e.copy(p,s,c+Math.max(-f,0),c+u),p=p.toString("base64"),p=QI(p),p}function am(e,t,r){for(var i=0;t+i<r&&e[t+i]===0;)++i;var n=e[t+i]>=zn;return n&&--i,i}function zI(e,t){e=cm(e);var r=om(t),i=e.length;if(i!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+i+'"');var n=am(e,0,r),s=am(e,r,e.length),a=r-n,o=r-s,l=2+a+1+1+o,u=l<zn,c=Kn.allocUnsafe((u?2:3)+l),d=0;return c[d++]=um,u?c[d++]=l:(c[d++]=zn|1,c[d++]=l&255),c[d++]=Jn,c[d++]=a,n<0?(c[d++]=0,d+=e.copy(c,d,0,r)):d+=e.copy(c,d,n,r),c[d++]=Jn,c[d++]=o,s<0?(c[d++]=0,e.copy(c,d,r)):e.copy(c,d,r+s),c}dm.exports={derToJose:KI,joseToDer:zI}});var hm=h((ZN,pm)=>{"use strict";var fi=require("buffer").Buffer,Rl=require("buffer").SlowBuffer;pm.exports=Wn;function Wn(e,t){if(!fi.isBuffer(e)||!fi.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}Wn.install=function(){fi.prototype.equal=Rl.prototype.equal=function(t){return Wn(this,t)}};var JI=fi.prototype.equal,WI=Rl.prototype.equal;Wn.restore=function(){fi.prototype.equal=JI,Rl.prototype.equal=WI}});var _l=h((e6,Em)=>{var kr=Sr().Buffer,Fe=require("crypto"),gm=fm(),mm=require("util"),YI=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,pi="secret must be a string or buffer",Er="key must be a string or a buffer",XI="key must be a string, a buffer or an object",Il=typeof Fe.createPublicKey=="function";Il&&(Er+=" or a KeyObject",pi+="or a KeyObject");function ym(e){if(!kr.isBuffer(e)&&typeof e!="string"&&(!Il||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw Ge(Er)}function bm(e){if(!kr.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw Ge(XI)}function ZI(e){if(!kr.isBuffer(e)){if(typeof e=="string")return e;if(!Il||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw Ge(pi)}}function Ol(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xm(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function Ge(e){var t=[].slice.call(arguments,1),r=mm.format.bind(mm,e).apply(null,t);return new TypeError(r)}function e2(e){return kr.isBuffer(e)||typeof e=="string"}function hi(e){return e2(e)||(e=JSON.stringify(e)),e}function vm(e){return function(r,i){ZI(i),r=hi(r);var n=Fe.createHmac("sha"+e,i),s=(n.update(r),n.digest("base64"));return Ol(s)}}var Tl,t2="timingSafeEqual"in Fe?function(t,r){return t.byteLength!==r.byteLength?!1:Fe.timingSafeEqual(t,r)}:function(t,r){return Tl||(Tl=hm()),Tl(t,r)};function r2(e){return function(r,i,n){var s=vm(e)(r,n);return t2(kr.from(i),kr.from(s))}}function wm(e){return function(r,i){bm(i),r=hi(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign(i,"base64"));return Ol(s)}}function Sm(e){return function(r,i,n){ym(n),r=hi(r),i=xm(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify(n,i,"base64")}}function i2(e){return function(r,i){bm(i),r=hi(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign({key:i,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Ol(s)}}function n2(e){return function(r,i,n){ym(n),r=hi(r),i=xm(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify({key:n,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},i,"base64")}}function s2(e){var t=wm(e);return function(){var i=t.apply(null,arguments);return i=gm.derToJose(i,"ES"+e),i}}function a2(e){var t=Sm(e);return function(i,n,s){n=gm.joseToDer(n,"ES"+e).toString("base64");var a=t(i,n,s);return a}}function o2(){return function(){return""}}function l2(){return function(t,r){return r===""}}Em.exports=function(t){var r={hs:vm,rs:wm,ps:i2,es:s2,none:o2},i={hs:r2,rs:Sm,ps:n2,es:a2,none:l2},n=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw Ge(YI,t);var s=(n[1]||n[3]).toLowerCase(),a=n[2];return{sign:r[s](a),verify:i[s](a)}}});var ql=h((t6,km)=>{var u2=require("buffer").Buffer;km.exports=function(t){return typeof t=="string"?t:typeof t=="number"||u2.isBuffer(t)?t.toString():JSON.stringify(t)}});var _m=h((r6,Om)=>{var c2=Sr().Buffer,Am=kl(),d2=_l(),f2=require("stream"),Rm=ql(),Cl=require("util");function Tm(e,t){return c2.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p2(e,t,r){r=r||"utf8";var i=Tm(Rm(e),"binary"),n=Tm(Rm(t),r);return Cl.format("%s.%s",i,n)}function Im(e){var t=e.header,r=e.payload,i=e.secret||e.privateKey,n=e.encoding,s=d2(t.alg),a=p2(t,r,n),o=s.sign(a,i);return Cl.format("%s.%s",a,o)}function Yn(e){var t=e.secret||e.privateKey||e.key,r=new Am(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Am(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Cl.inherits(Yn,f2);Yn.prototype.sign=function(){try{var t=Im({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Yn.sign=Im;Om.exports=Yn});var jm=h((i6,Mm)=>{var Cm=Sr().Buffer,qm=kl(),h2=_l(),m2=require("stream"),Pm=ql(),g2=require("util"),y2=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function b2(e){return Object.prototype.toString.call(e)==="[object Object]"}function x2(e){if(b2(e))return e;try{return JSON.parse(e)}catch{return}}function Nm(e){var t=e.split(".",1)[0];return x2(Cm.from(t,"base64").toString("binary"))}function v2(e){return e.split(".",2).join(".")}function Dm(e){return e.split(".")[2]}function w2(e,t){t=t||"utf8";var r=e.split(".")[1];return Cm.from(r,"base64").toString(t)}function Um(e){return y2.test(e)&&!!Nm(e)}function Lm(e,t,r){if(!t){var i=new Error("Missing algorithm parameter for jws.verify");throw i.code="MISSING_ALGORITHM",i}e=Pm(e);var n=Dm(e),s=v2(e),a=h2(t);return a.verify(s,n,r)}function Fm(e,t){if(t=t||{},e=Pm(e),!Um(e))return null;var r=Nm(e);if(!r)return null;var i=w2(e);return(r.typ==="JWT"||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:Dm(e)}}function Ar(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new qm(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new qm(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}g2.inherits(Ar,m2);Ar.prototype.verify=function(){try{var t=Lm(this.signature.buffer,this.algorithm,this.key.buffer),r=Fm(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(i){this.readable=!1,this.emit("error",i),this.emit("close")}};Ar.decode=Fm;Ar.isValid=Um;Ar.verify=Lm;Mm.exports=Ar});var Zn=h(jt=>{var $m=_m(),Xn=jm(),S2=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];jt.ALGORITHMS=S2;jt.sign=$m.sign;jt.verify=Xn.verify;jt.decode=Xn.decode;jt.isValid=Xn.isValid;jt.createSign=function(t){return new $m(t)};jt.createVerify=function(t){return new Xn(t)}});var Pl=h((s6,Vm)=>{var E2=Zn();Vm.exports=function(e,t){t=t||{};var r=E2.decode(e,t);if(!r)return null;var i=r.payload;if(typeof i=="string")try{var n=JSON.parse(i);n!==null&&typeof n=="object"&&(i=n)}catch{}return t.complete===!0?{header:r.header,payload:i,signature:r.signature}:i}});var mi=h((a6,Bm)=>{var es=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};es.prototype=Object.create(Error.prototype);es.prototype.constructor=es;Bm.exports=es});var Nl=h((o6,Hm)=>{var Gm=mi(),ts=function(e,t){Gm.call(this,e),this.name="NotBeforeError",this.date=t};ts.prototype=Object.create(Gm.prototype);ts.prototype.constructor=ts;Hm.exports=ts});var Dl=h((l6,Km)=>{var Qm=mi(),rs=function(e,t){Qm.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};rs.prototype=Object.create(Qm.prototype);rs.prototype.constructor=rs;Km.exports=rs});var Ul=h((u6,zm)=>{var k2=po();zm.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if(typeof e=="string"){var i=k2(e);return typeof i>"u"?void 0:Math.floor(r+i/1e3)}else return typeof e=="number"?r+e:void 0}});var gi=h((c6,Jm)=>{"use strict";var A2="2.0.0",R2=Number.MAX_SAFE_INTEGER||9007199254740991,T2=16,I2=250,O2=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Jm.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:T2,MAX_SAFE_BUILD_LENGTH:I2,MAX_SAFE_INTEGER:R2,RELEASE_TYPES:O2,SEMVER_SPEC_VERSION:A2,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var yi=h((d6,Wm)=>{"use strict";var _2=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Wm.exports=_2});var Rr=h((nt,Ym)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ll,MAX_SAFE_BUILD_LENGTH:q2,MAX_LENGTH:C2}=gi(),P2=yi();nt=Ym.exports={};var N2=nt.re=[],D2=nt.safeRe=[],x=nt.src=[],U2=nt.safeSrc=[],v=nt.t={},L2=0,Fl="[a-zA-Z0-9-]",F2=[["\\s",1],["\\d",C2],[Fl,q2]],M2=e=>{for(let[t,r]of F2)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},_=(e,t,r)=>{let i=M2(t),n=L2++;P2(e,n,t),v[e]=n,x[n]=t,U2[n]=i,N2[n]=new RegExp(t,r?"g":void 0),D2[n]=new RegExp(i,r?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*");_("NUMERICIDENTIFIERLOOSE","\\d+");_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Fl}*`);_("MAINVERSION",`(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})`);_("MAINVERSIONLOOSE",`(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})`);_("PRERELEASEIDENTIFIER",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIER]})`);_("PRERELEASEIDENTIFIERLOOSE",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIERLOOSE]})`);_("PRERELEASE",`(?:-(${x[v.PRERELEASEIDENTIFIER]}(?:\\.${x[v.PRERELEASEIDENTIFIER]})*))`);_("PRERELEASELOOSE",`(?:-?(${x[v.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${x[v.PRERELEASEIDENTIFIERLOOSE]})*))`);_("BUILDIDENTIFIER",`${Fl}+`);_("BUILD",`(?:\\+(${x[v.BUILDIDENTIFIER]}(?:\\.${x[v.BUILDIDENTIFIER]})*))`);_("FULLPLAIN",`v?${x[v.MAINVERSION]}${x[v.PRERELEASE]}?${x[v.BUILD]}?`);_("FULL",`^${x[v.FULLPLAIN]}$`);_("LOOSEPLAIN",`[v=\\s]*${x[v.MAINVERSIONLOOSE]}${x[v.PRERELEASELOOSE]}?${x[v.BUILD]}?`);_("LOOSE",`^${x[v.LOOSEPLAIN]}$`);_("GTLT","((?:<|>)?=?)");_("XRANGEIDENTIFIERLOOSE",`${x[v.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);_("XRANGEIDENTIFIER",`${x[v.NUMERICIDENTIFIER]}|x|X|\\*`);_("XRANGEPLAIN",`[v=\\s]*(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:${x[v.PRERELEASE]})?${x[v.BUILD]}?)?)?`);_("XRANGEPLAINLOOSE",`[v=\\s]*(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:${x[v.PRERELEASELOOSE]})?${x[v.BUILD]}?)?)?`);_("XRANGE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAIN]}$`);_("XRANGELOOSE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAINLOOSE]}$`);_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ll}})(?:\\.(\\d{1,${Ll}}))?(?:\\.(\\d{1,${Ll}}))?`);_("COERCE",`${x[v.COERCEPLAIN]}(?:$|[^\\d])`);_("COERCEFULL",x[v.COERCEPLAIN]+`(?:${x[v.PRERELEASE]})?(?:${x[v.BUILD]})?(?:$|[^\\d])`);_("COERCERTL",x[v.COERCE],!0);_("COERCERTLFULL",x[v.COERCEFULL],!0);_("LONETILDE","(?:~>?)");_("TILDETRIM",`(\\s*)${x[v.LONETILDE]}\\s+`,!0);nt.tildeTrimReplace="$1~";_("TILDE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAIN]}$`);_("TILDELOOSE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAINLOOSE]}$`);_("LONECARET","(?:\\^)");_("CARETTRIM",`(\\s*)${x[v.LONECARET]}\\s+`,!0);nt.caretTrimReplace="$1^";_("CARET",`^${x[v.LONECARET]}${x[v.XRANGEPLAIN]}$`);_("CARETLOOSE",`^${x[v.LONECARET]}${x[v.XRANGEPLAINLOOSE]}$`);_("COMPARATORLOOSE",`^${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]})$|^$`);_("COMPARATOR",`^${x[v.GTLT]}\\s*(${x[v.FULLPLAIN]})$|^$`);_("COMPARATORTRIM",`(\\s*)${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]}|${x[v.XRANGEPLAIN]})`,!0);nt.comparatorTrimReplace="$1$2$3";_("HYPHENRANGE",`^\\s*(${x[v.XRANGEPLAIN]})\\s+-\\s+(${x[v.XRANGEPLAIN]})\\s*$`);_("HYPHENRANGELOOSE",`^\\s*(${x[v.XRANGEPLAINLOOSE]})\\s+-\\s+(${x[v.XRANGEPLAINLOOSE]})\\s*$`);_("STAR","(<|>)?=?\\s*\\*");_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var is=h((f6,Xm)=>{"use strict";var j2=Object.freeze({loose:!0}),$2=Object.freeze({}),V2=e=>e?typeof e!="object"?j2:e:$2;Xm.exports=V2});var Ml=h((p6,t0)=>{"use strict";var Zm=/^[0-9]+$/,e0=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=Zm.test(e),i=Zm.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},B2=(e,t)=>e0(t,e);t0.exports={compareIdentifiers:e0,rcompareIdentifiers:B2}});var ye=h((h6,i0)=>{"use strict";var ns=yi(),{MAX_LENGTH:r0,MAX_SAFE_INTEGER:ss}=gi(),{safeRe:as,t:os}=Rr(),G2=is(),{compareIdentifiers:jl}=Ml(),$l=class e{constructor(t,r){if(r=G2(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>r0)throw new TypeError(`version is longer than ${r0} characters`);ns("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?as[os.LOOSE]:as[os.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ss||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ss||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ss||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<ss)return s}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ns("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=t.prerelease[r];if(ns("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return jl(i,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let i=this.build[r],n=t.build[r];if(ns("build compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return jl(i,n)}while(++r)}inc(t,r,i){if(t.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let n=`-${r}`.match(this.options.loose?as[os.PRERELEASELOOSE]:as[os.PRERELEASE]);if(!n||n[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let s=[r,n];i===!1&&(s=[r]),jl(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};i0.exports=$l});var er=h((m6,s0)=>{"use strict";var n0=ye(),H2=(e,t,r=!1)=>{if(e instanceof n0)return e;try{return new n0(e,t)}catch(i){if(!r)return null;throw i}};s0.exports=H2});var o0=h((g6,a0)=>{"use strict";var Q2=er(),K2=(e,t)=>{let r=Q2(e,t);return r?r.version:null};a0.exports=K2});var u0=h((y6,l0)=>{"use strict";var z2=er(),J2=(e,t)=>{let r=z2(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};l0.exports=J2});var f0=h((b6,d0)=>{"use strict";var c0=ye(),W2=(e,t,r,i,n)=>{typeof r=="string"&&(n=i,i=r,r=void 0);try{return new c0(e instanceof c0?e.version:e,r).inc(t,i,n).version}catch{return null}};d0.exports=W2});var m0=h((x6,h0)=>{"use strict";var p0=er(),Y2=(e,t)=>{let r=p0(e,null,!0),i=p0(t,null,!0),n=r.compare(i);if(n===0)return null;let s=n>0,a=s?r:i,o=s?i:r,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}let c=l?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"};h0.exports=Y2});var y0=h((v6,g0)=>{"use strict";var X2=ye(),Z2=(e,t)=>new X2(e,t).major;g0.exports=Z2});var x0=h((w6,b0)=>{"use strict";var eO=ye(),tO=(e,t)=>new eO(e,t).minor;b0.exports=tO});var w0=h((S6,v0)=>{"use strict";var rO=ye(),iO=(e,t)=>new rO(e,t).patch;v0.exports=iO});var E0=h((E6,S0)=>{"use strict";var nO=er(),sO=(e,t)=>{let r=nO(e,t);return r&&r.prerelease.length?r.prerelease:null};S0.exports=sO});var Me=h((k6,A0)=>{"use strict";var k0=ye(),aO=(e,t,r)=>new k0(e,r).compare(new k0(t,r));A0.exports=aO});var T0=h((A6,R0)=>{"use strict";var oO=Me(),lO=(e,t,r)=>oO(t,e,r);R0.exports=lO});var O0=h((R6,I0)=>{"use strict";var uO=Me(),cO=(e,t)=>uO(e,t,!0);I0.exports=cO});var ls=h((T6,q0)=>{"use strict";var _0=ye(),dO=(e,t,r)=>{let i=new _0(e,r),n=new _0(t,r);return i.compare(n)||i.compareBuild(n)};q0.exports=dO});var P0=h((I6,C0)=>{"use strict";var fO=ls(),pO=(e,t)=>e.sort((r,i)=>fO(r,i,t));C0.exports=pO});var D0=h((O6,N0)=>{"use strict";var hO=ls(),mO=(e,t)=>e.sort((r,i)=>hO(i,r,t));N0.exports=mO});var bi=h((_6,U0)=>{"use strict";var gO=Me(),yO=(e,t,r)=>gO(e,t,r)>0;U0.exports=yO});var us=h((q6,L0)=>{"use strict";var bO=Me(),xO=(e,t,r)=>bO(e,t,r)<0;L0.exports=xO});var Vl=h((C6,F0)=>{"use strict";var vO=Me(),wO=(e,t,r)=>vO(e,t,r)===0;F0.exports=wO});var Bl=h((P6,M0)=>{"use strict";var SO=Me(),EO=(e,t,r)=>SO(e,t,r)!==0;M0.exports=EO});var cs=h((N6,j0)=>{"use strict";var kO=Me(),AO=(e,t,r)=>kO(e,t,r)>=0;j0.exports=AO});var ds=h((D6,$0)=>{"use strict";var RO=Me(),TO=(e,t,r)=>RO(e,t,r)<=0;$0.exports=TO});var Gl=h((U6,V0)=>{"use strict";var IO=Vl(),OO=Bl(),_O=bi(),qO=cs(),CO=us(),PO=ds(),NO=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return IO(e,r,i);case"!=":return OO(e,r,i);case">":return _O(e,r,i);case">=":return qO(e,r,i);case"<":return CO(e,r,i);case"<=":return PO(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}};V0.exports=NO});var G0=h((L6,B0)=>{"use strict";var DO=ye(),UO=er(),{safeRe:fs,t:ps}=Rr(),LO=(e,t)=>{if(e instanceof DO)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?fs[ps.COERCEFULL]:fs[ps.COERCE]);else{let l=t.includePrerelease?fs[ps.COERCERTLFULL]:fs[ps.COERCERTL],u;for(;(u=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],n=r[3]||"0",s=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",o=t.includePrerelease&&r[6]?`+${r[6]}`:"";return UO(`${i}.${n}.${s}${a}${o}`,t)};B0.exports=LO});var Q0=h((F6,H0)=>{"use strict";var Hl=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(t,r)}return this}};H0.exports=Hl});var je=h((M6,W0)=>{"use strict";var FO=/\s+/g,Ql=class e{constructor(t,r){if(r=jO(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof Kl)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(FO," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(n=>!z0(n[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&KO(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let i=((this.options.includePrerelease&&HO)|(this.options.loose&&QO))+":"+t,n=K0.get(i);if(n)return n;let s=this.options.loose,a=s?Se[be.HYPHENRANGELOOSE]:Se[be.HYPHENRANGE];t=t.replace(a,i_(this.options.includePrerelease)),Z("hyphen replace",t),t=t.replace(Se[be.COMPARATORTRIM],VO),Z("comparator trim",t),t=t.replace(Se[be.TILDETRIM],BO),Z("tilde trim",t),t=t.replace(Se[be.CARETTRIM],GO),Z("caret trim",t);let o=t.split(" ").map(d=>zO(d,this.options)).join(" ").split(/\s+/).map(d=>r_(d,this.options));s&&(o=o.filter(d=>(Z("loose invalid filter",d,this.options),!!d.match(Se[be.COMPARATORLOOSE])))),Z("range list",o);let l=new Map,u=o.map(d=>new Kl(d,this.options));for(let d of u){if(z0(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return K0.set(i,c),c}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(i=>J0(i,r)&&t.set.some(n=>J0(n,r)&&i.every(s=>n.every(a=>s.intersects(a,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new $O(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(n_(this.set[r],t,this.options))return!0;return!1}};W0.exports=Ql;var MO=Q0(),K0=new MO,jO=is(),Kl=xi(),Z=yi(),$O=ye(),{safeRe:Se,t:be,comparatorTrimReplace:VO,tildeTrimReplace:BO,caretTrimReplace:GO}=Rr(),{FLAG_INCLUDE_PRERELEASE:HO,FLAG_LOOSE:QO}=gi(),z0=e=>e.value==="<0.0.0-0",KO=e=>e.value==="",J0=(e,t)=>{let r=!0,i=e.slice(),n=i.pop();for(;r&&i.length;)r=i.every(s=>n.intersects(s,t)),n=i.pop();return r},zO=(e,t)=>(e=e.replace(Se[be.BUILD],""),Z("comp",e,t),e=YO(e,t),Z("caret",e),e=JO(e,t),Z("tildes",e),e=ZO(e,t),Z("xrange",e),e=t_(e,t),Z("stars",e),e),Ee=e=>!e||e.toLowerCase()==="x"||e==="*",JO=(e,t)=>e.trim().split(/\s+/).map(r=>WO(r,t)).join(" "),WO=(e,t)=>{let r=t.loose?Se[be.TILDELOOSE]:Se[be.TILDE];return e.replace(r,(i,n,s,a,o)=>{Z("tilde",e,i,n,s,a,o);let l;return Ee(n)?l="":Ee(s)?l=`>=${n}.0.0 <${+n+1}.0.0-0`:Ee(a)?l=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?(Z("replaceTilde pr",o),l=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`):l=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,Z("tilde return",l),l})},YO=(e,t)=>e.trim().split(/\s+/).map(r=>XO(r,t)).join(" "),XO=(e,t)=>{Z("caret",e,t);let r=t.loose?Se[be.CARETLOOSE]:Se[be.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(n,s,a,o,l)=>{Z("caret",e,n,s,a,o,l);let u;return Ee(s)?u="":Ee(a)?u=`>=${s}.0.0${i} <${+s+1}.0.0-0`:Ee(o)?s==="0"?u=`>=${s}.${a}.0${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${i} <${+s+1}.0.0-0`:l?(Z("replaceCaret pr",l),s==="0"?a==="0"?u=`>=${s}.${a}.${o}-${l} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o}-${l} <${+s+1}.0.0-0`):(Z("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${o}${i} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o} <${+s+1}.0.0-0`),Z("caret return",u),u})},ZO=(e,t)=>(Z("replaceXRanges",e,t),e.split(/\s+/).map(r=>e_(r,t)).join(" ")),e_=(e,t)=>{e=e.trim();let r=t.loose?Se[be.XRANGELOOSE]:Se[be.XRANGE];return e.replace(r,(i,n,s,a,o,l)=>{Z("xRange",e,i,n,s,a,o,l);let u=Ee(s),c=u||Ee(a),d=c||Ee(o),f=d;return n==="="&&f&&(n=""),l=t.includePrerelease?"-0":"",u?n===">"||n==="<"?i="<0.0.0-0":i="*":n&&f?(c&&(a=0),o=0,n===">"?(n=">=",c?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",c?s=+s+1:a=+a+1),n==="<"&&(l="-0"),i=`${n+s}.${a}.${o}${l}`):c?i=`>=${s}.0.0${l} <${+s+1}.0.0-0`:d&&(i=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),Z("xRange return",i),i})},t_=(e,t)=>(Z("replaceStars",e,t),e.trim().replace(Se[be.STAR],"")),r_=(e,t)=>(Z("replaceGTE0",e,t),e.trim().replace(Se[t.includePrerelease?be.GTE0PRE:be.GTE0],"")),i_=e=>(t,r,i,n,s,a,o,l,u,c,d,f)=>(Ee(i)?r="":Ee(n)?r=`>=${i}.0.0${e?"-0":""}`:Ee(s)?r=`>=${i}.${n}.0${e?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Ee(u)?l="":Ee(c)?l=`<${+u+1}.0.0-0`:Ee(d)?l=`<${u}.${+c+1}.0-0`:f?l=`<=${u}.${c}.${d}-${f}`:e?l=`<${u}.${c}.${+d+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),n_=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(Z(e[i].semver),e[i].semver!==Kl.ANY&&e[i].semver.prerelease.length>0){let n=e[i].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}});var xi=h((j6,rg)=>{"use strict";var vi=Symbol("SemVer ANY"),Wl=class e{static get ANY(){return vi}constructor(t,r){if(r=Y0(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),Jl("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===vi?this.value="":this.value=this.operator+this.semver.version,Jl("comp",this)}parse(t){let r=this.options.loose?X0[Z0.COMPARATORLOOSE]:X0[Z0.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new eg(i[2],this.options.loose):this.semver=vi}toString(){return this.value}test(t){if(Jl("Comparator.test",t,this.options.loose),this.semver===vi||t===vi)return!0;if(typeof t=="string")try{t=new eg(t,this.options)}catch{return!1}return zl(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new tg(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new tg(this.value,r).test(t.semver):(r=Y0(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||zl(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||zl(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};rg.exports=Wl;var Y0=is(),{safeRe:X0,t:Z0}=Rr(),zl=Gl(),Jl=yi(),eg=ye(),tg=je()});var wi=h(($6,ig)=>{"use strict";var s_=je(),a_=(e,t,r)=>{try{t=new s_(t,r)}catch{return!1}return t.test(e)};ig.exports=a_});var sg=h((V6,ng)=>{"use strict";var o_=je(),l_=(e,t)=>new o_(e,t).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));ng.exports=l_});var og=h((B6,ag)=>{"use strict";var u_=ye(),c_=je(),d_=(e,t,r)=>{let i=null,n=null,s=null;try{s=new c_(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===-1)&&(i=a,n=new u_(i,r))}),i};ag.exports=d_});var ug=h((G6,lg)=>{"use strict";var f_=ye(),p_=je(),h_=(e,t,r)=>{let i=null,n=null,s=null;try{s=new p_(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===1)&&(i=a,n=new f_(i,r))}),i};lg.exports=h_});var fg=h((H6,dg)=>{"use strict";var Yl=ye(),m_=je(),cg=bi(),g_=(e,t)=>{e=new m_(e,t);let r=new Yl("0.0.0");if(e.test(r)||(r=new Yl("0.0.0-0"),e.test(r)))return r;r=null;for(let i=0;i<e.set.length;++i){let n=e.set[i],s=null;n.forEach(a=>{let o=new Yl(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||cg(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||cg(r,s))&&(r=s)}return r&&e.test(r)?r:null};dg.exports=g_});var hg=h((Q6,pg)=>{"use strict";var y_=je(),b_=(e,t)=>{try{return new y_(e,t).range||"*"}catch{return null}};pg.exports=b_});var hs=h((K6,bg)=>{"use strict";var x_=ye(),yg=xi(),{ANY:v_}=yg,w_=je(),S_=wi(),mg=bi(),gg=us(),E_=ds(),k_=cs(),A_=(e,t,r,i)=>{e=new x_(e,i),t=new w_(t,i);let n,s,a,o,l;switch(r){case">":n=mg,s=E_,a=gg,o=">",l=">=";break;case"<":n=gg,s=k_,a=mg,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(S_(e,t,i))return!1;for(let u=0;u<t.set.length;++u){let c=t.set[u],d=null,f=null;if(c.forEach(p=>{p.semver===v_&&(p=new yg(">=0.0.0")),d=d||p,f=f||p,n(p.semver,d.semver,i)?d=p:a(p.semver,f.semver,i)&&(f=p)}),d.operator===o||d.operator===l||(!f.operator||f.operator===o)&&s(e,f.semver))return!1;if(f.operator===l&&a(e,f.semver))return!1}return!0};bg.exports=A_});var vg=h((z6,xg)=>{"use strict";var R_=hs(),T_=(e,t,r)=>R_(e,t,">",r);xg.exports=T_});var Sg=h((J6,wg)=>{"use strict";var I_=hs(),O_=(e,t,r)=>I_(e,t,"<",r);wg.exports=O_});var Ag=h((W6,kg)=>{"use strict";var Eg=je(),__=(e,t,r)=>(e=new Eg(e,r),t=new Eg(t,r),e.intersects(t,r));kg.exports=__});var Tg=h((Y6,Rg)=>{"use strict";var q_=wi(),C_=Me();Rg.exports=(e,t,r)=>{let i=[],n=null,s=null,a=e.sort((c,d)=>C_(c,d,r));for(let c of a)q_(c,t,r)?(s=c,n||(n=c)):(s&&i.push([n,s]),s=null,n=null);n&&i.push([n,null]);let o=[];for(let[c,d]of i)c===d?o.push(c):!d&&c===a[0]?o.push("*"):d?c===a[0]?o.push(`<=${d}`):o.push(`${c} - ${d}`):o.push(`>=${c}`);let l=o.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return l.length<u.length?l:t}});var Pg=h((X6,Cg)=>{"use strict";var Ig=je(),Zl=xi(),{ANY:Xl}=Zl,Si=wi(),eu=Me(),P_=(e,t,r={})=>{if(e===t)return!0;e=new Ig(e,r),t=new Ig(t,r);let i=!1;e:for(let n of e.set){for(let s of t.set){let a=D_(n,s,r);if(i=i||a!==null,a)continue e}if(i)return!1}return!0},N_=[new Zl(">=0.0.0-0")],Og=[new Zl(">=0.0.0")],D_=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Xl){if(t.length===1&&t[0].semver===Xl)return!0;r.includePrerelease?e=N_:e=Og}if(t.length===1&&t[0].semver===Xl){if(r.includePrerelease)return!0;t=Og}let i=new Set,n,s;for(let p of e)p.operator===">"||p.operator===">="?n=_g(n,p,r):p.operator==="<"||p.operator==="<="?s=qg(s,p,r):i.add(p.semver);if(i.size>1)return null;let a;if(n&&s){if(a=eu(n.semver,s.semver,r),a>0)return null;if(a===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let p of i){if(n&&!Si(p,String(n),r)||s&&!Si(p,String(s),r))return null;for(let m of t)if(!Si(p,String(m),r))return!1;return!0}let o,l,u,c,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of t){if(c=c||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",n){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(o=_g(n,p,r),o===p&&o!==n)return!1}else if(n.operator===">="&&!Si(n.semver,String(p),r))return!1}if(s){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(l=qg(s,p,r),l===p&&l!==s)return!1}else if(s.operator==="<="&&!Si(s.semver,String(p),r))return!1}if(!p.operator&&(s||n)&&a!==0)return!1}return!(n&&u&&!s&&a!==0||s&&c&&!n&&a!==0||f||d)},_g=(e,t,r)=>{if(!e)return t;let i=eu(e.semver,t.semver,r);return i>0?e:i<0||t.operator===">"&&e.operator===">="?t:e},qg=(e,t,r)=>{if(!e)return t;let i=eu(e.semver,t.semver,r);return i<0?e:i>0||t.operator==="<"&&e.operator==="<="?t:e};Cg.exports=P_});var ms=h((Z6,Ug)=>{"use strict";var tu=Rr(),Ng=gi(),U_=ye(),Dg=Ml(),L_=er(),F_=o0(),M_=u0(),j_=f0(),$_=m0(),V_=y0(),B_=x0(),G_=w0(),H_=E0(),Q_=Me(),K_=T0(),z_=O0(),J_=ls(),W_=P0(),Y_=D0(),X_=bi(),Z_=us(),eq=Vl(),tq=Bl(),rq=cs(),iq=ds(),nq=Gl(),sq=G0(),aq=xi(),oq=je(),lq=wi(),uq=sg(),cq=og(),dq=ug(),fq=fg(),pq=hg(),hq=hs(),mq=vg(),gq=Sg(),yq=Ag(),bq=Tg(),xq=Pg();Ug.exports={parse:L_,valid:F_,clean:M_,inc:j_,diff:$_,major:V_,minor:B_,patch:G_,prerelease:H_,compare:Q_,rcompare:K_,compareLoose:z_,compareBuild:J_,sort:W_,rsort:Y_,gt:X_,lt:Z_,eq,neq:tq,gte:rq,lte:iq,cmp:nq,coerce:sq,Comparator:aq,Range:oq,satisfies:lq,toComparators:uq,maxSatisfying:cq,minSatisfying:dq,minVersion:fq,validRange:pq,outside:hq,gtr:mq,ltr:gq,intersects:yq,simplifyRange:bq,subset:xq,SemVer:U_,re:tu.re,src:tu.src,tokens:tu.t,SEMVER_SPEC_VERSION:Ng.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ng.RELEASE_TYPES,compareIdentifiers:Dg.compareIdentifiers,rcompareIdentifiers:Dg.rcompareIdentifiers}});var Fg=h((eD,Lg)=>{var vq=ms();Lg.exports=vq.satisfies(process.version,">=15.7.0")});var jg=h((tD,Mg)=>{var wq=ms();Mg.exports=wq.satisfies(process.version,">=16.9.0")});var ru=h((rD,$g)=>{var Sq=Fg(),Eq=jg(),kq={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},Aq={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};$g.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let i=kq[r];if(!i)throw new Error(`Unknown key type "${r}".`);if(!i.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${i.join(", ")}.`);if(Sq)switch(r){case"ec":let n=t.asymmetricKeyDetails.namedCurve,s=Aq[e];if(n!==s)throw new Error(`"alg" parameter "${e}" requires curve "${s}".`);break;case"rsa-pss":if(Eq){let a=parseInt(e.slice(-3),10),{hashAlgorithm:o,mgf1HashAlgorithm:l,saltLength:u}=t.asymmetricKeyDetails;if(o!==`sha${a}`||l!==o)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var iu=h((iD,Vg)=>{var Rq=ms();Vg.exports=Rq.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Hg=h((nD,Gg)=>{var W=mi(),Tq=Nl(),Bg=Dl(),Iq=Pl(),Oq=Ul(),_q=ru(),qq=iu(),Cq=Zn(),{KeyObject:Pq,createSecretKey:Nq,createPublicKey:Dq}=require("crypto"),nu=["RS256","RS384","RS512"],Uq=["ES256","ES384","ES512"],su=["RS256","RS384","RS512"],Lq=["HS256","HS384","HS512"];qq&&(nu.splice(nu.length,0,"PS256","PS384","PS512"),su.splice(su.length,0,"PS256","PS384","PS512"));Gg.exports=function(e,t,r,i){typeof r=="function"&&!i&&(i=r,r={}),r||(r={}),r=Object.assign({},r);let n;if(i?n=i:n=function(c,d){if(c)throw c;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return n(new W("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return n(new W("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return n(new W("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return n(new W("jwt must be provided"));if(typeof e!="string")return n(new W("jwt must be a string"));let a=e.split(".");if(a.length!==3)return n(new W("jwt malformed"));let o;try{o=Iq(e,{complete:!0})}catch(c){return n(c)}if(!o)return n(new W("invalid token"));let l=o.header,u;if(typeof t=="function"){if(!i)return n(new W("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(c,d){return d(null,t)};return u(l,function(c,d){if(c)return n(new W("error in secret or public key callback: "+c.message));let f=a[2].trim()!=="";if(!f&&d)return n(new W("jwt signature is required"));if(f&&!d)return n(new W("secret or public key must be provided"));if(!f&&!r.algorithms)return n(new W('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof Pq))try{d=Dq(d)}catch{try{d=Nq(typeof d=="string"?Buffer.from(d):d)}catch{return n(new W("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=Lq:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=su:d.asymmetricKeyType==="ec"?r.algorithms=Uq:r.algorithms=nu),r.algorithms.indexOf(o.header.alg)===-1)return n(new W("invalid algorithm"));if(l.alg.startsWith("HS")&&d.type!=="secret")return n(new W(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&d.type!=="public")return n(new W(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{_q(l.alg,d)}catch(g){return n(g)}let p;try{p=Cq.verify(e,o.header.alg,d)}catch(g){return n(g)}if(!p)return n(new W("invalid signature"));let m=o.payload;if(typeof m.nbf<"u"&&!r.ignoreNotBefore){if(typeof m.nbf!="number")return n(new W("invalid nbf value"));if(m.nbf>s+(r.clockTolerance||0))return n(new Tq("jwt not active",new Date(m.nbf*1e3)))}if(typeof m.exp<"u"&&!r.ignoreExpiration){if(typeof m.exp!="number")return n(new W("invalid exp value"));if(s>=m.exp+(r.clockTolerance||0))return n(new Bg("jwt expired",new Date(m.exp*1e3)))}if(r.audience){let g=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(m.aud)?m.aud:[m.aud]).some(function(q){return g.some(function(P){return P instanceof RegExp?P.test(q):P===q})}))return n(new W("jwt audience invalid. expected: "+g.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&m.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(m.iss)===-1))return n(new W("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&m.sub!==r.subject)return n(new W("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&m.jti!==r.jwtid)return n(new W("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&m.nonce!==r.nonce)return n(new W("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof m.iat!="number")return n(new W("iat required when maxAge is specified"));let g=Oq(r.maxAge,m.iat);if(typeof g>"u")return n(new W('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=g+(r.clockTolerance||0))return n(new Bg("maxAge exceeded",new Date(g*1e3)))}if(r.complete===!0){let g=o.signature;return n(null,{header:l,payload:m,signature:g})}return n(null,m)})}});var Yg=h((sD,Wg)=>{var Qg=1/0,zg=9007199254740991,Fq=17976931348623157e292,Kg=NaN,Mq="[object Arguments]",jq="[object Function]",$q="[object GeneratorFunction]",Vq="[object String]",Bq="[object Symbol]",Gq=/^\s+|\s+$/g,Hq=/^[-+]0x[0-9a-f]+$/i,Qq=/^0b[01]+$/i,Kq=/^0o[0-7]+$/i,zq=/^(?:0|[1-9]\d*)$/,Jq=parseInt;function Wq(e,t){for(var r=-1,i=e?e.length:0,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function Yq(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function Xq(e,t,r){if(t!==t)return Yq(e,Zq,r);for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}function Zq(e){return e!==e}function eC(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function tC(e,t){return Wq(t,function(r){return e[r]})}function rC(e,t){return function(r){return e(t(r))}}var gs=Object.prototype,ou=gs.hasOwnProperty,ys=gs.toString,iC=gs.propertyIsEnumerable,nC=rC(Object.keys,Object),sC=Math.max;function aC(e,t){var r=Jg(e)||dC(e)?eC(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||ou.call(e,s))&&!(n&&(s=="length"||lC(s,i)))&&r.push(s);return r}function oC(e){if(!uC(e))return nC(e);var t=[];for(var r in Object(e))ou.call(e,r)&&r!="constructor"&&t.push(r);return t}function lC(e,t){return t=t??zg,!!t&&(typeof e=="number"||zq.test(e))&&e>-1&&e%1==0&&e<t}function uC(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||gs;return e===r}function cC(e,t,r,i){e=lu(e)?e:wC(e),r=r&&!i?bC(r):0;var n=e.length;return r<0&&(r=sC(n+r,0)),mC(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&Xq(e,t,r)>-1}function dC(e){return fC(e)&&ou.call(e,"callee")&&(!iC.call(e,"callee")||ys.call(e)==Mq)}var Jg=Array.isArray;function lu(e){return e!=null&&hC(e.length)&&!pC(e)}function fC(e){return uu(e)&&lu(e)}function pC(e){var t=au(e)?ys.call(e):"";return t==jq||t==$q}function hC(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=zg}function au(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function uu(e){return!!e&&typeof e=="object"}function mC(e){return typeof e=="string"||!Jg(e)&&uu(e)&&ys.call(e)==Vq}function gC(e){return typeof e=="symbol"||uu(e)&&ys.call(e)==Bq}function yC(e){if(!e)return e===0?e:0;if(e=xC(e),e===Qg||e===-Qg){var t=e<0?-1:1;return t*Fq}return e===e?e:0}function bC(e){var t=yC(e),r=t%1;return t===t?r?t-r:t:0}function xC(e){if(typeof e=="number")return e;if(gC(e))return Kg;if(au(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=au(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Gq,"");var r=Qq.test(e);return r||Kq.test(e)?Jq(e.slice(2),r?2:8):Hq.test(e)?Kg:+e}function vC(e){return lu(e)?aC(e):oC(e)}function wC(e){return e?tC(e,vC(e)):[]}Wg.exports=cC});var Zg=h((aD,Xg)=>{var SC="[object Boolean]",EC=Object.prototype,kC=EC.toString;function AC(e){return e===!0||e===!1||RC(e)&&kC.call(e)==SC}function RC(e){return!!e&&typeof e=="object"}Xg.exports=AC});var ny=h((oD,iy)=>{var ey=1/0,TC=17976931348623157e292,ty=NaN,IC="[object Symbol]",OC=/^\s+|\s+$/g,_C=/^[-+]0x[0-9a-f]+$/i,qC=/^0b[01]+$/i,CC=/^0o[0-7]+$/i,PC=parseInt,NC=Object.prototype,DC=NC.toString;function UC(e){return typeof e=="number"&&e==jC(e)}function ry(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function LC(e){return!!e&&typeof e=="object"}function FC(e){return typeof e=="symbol"||LC(e)&&DC.call(e)==IC}function MC(e){if(!e)return e===0?e:0;if(e=$C(e),e===ey||e===-ey){var t=e<0?-1:1;return t*TC}return e===e?e:0}function jC(e){var t=MC(e),r=t%1;return t===t?r?t-r:t:0}function $C(e){if(typeof e=="number")return e;if(FC(e))return ty;if(ry(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ry(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(OC,"");var r=qC.test(e);return r||CC.test(e)?PC(e.slice(2),r?2:8):_C.test(e)?ty:+e}iy.exports=UC});var ay=h((lD,sy)=>{var VC="[object Number]",BC=Object.prototype,GC=BC.toString;function HC(e){return!!e&&typeof e=="object"}function QC(e){return typeof e=="number"||HC(e)&&GC.call(e)==VC}sy.exports=QC});var cy=h((uD,uy)=>{var KC="[object Object]";function zC(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function JC(e,t){return function(r){return e(t(r))}}var WC=Function.prototype,oy=Object.prototype,ly=WC.toString,YC=oy.hasOwnProperty,XC=ly.call(Object),ZC=oy.toString,e3=JC(Object.getPrototypeOf,Object);function t3(e){return!!e&&typeof e=="object"}function r3(e){if(!t3(e)||ZC.call(e)!=KC||zC(e))return!1;var t=e3(e);if(t===null)return!0;var r=YC.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ly.call(r)==XC}uy.exports=r3});var fy=h((cD,dy)=>{var i3="[object String]",n3=Object.prototype,s3=n3.toString,a3=Array.isArray;function o3(e){return!!e&&typeof e=="object"}function l3(e){return typeof e=="string"||!a3(e)&&o3(e)&&s3.call(e)==i3}dy.exports=l3});var yy=h((dD,gy)=>{var u3="Expected a function",py=1/0,c3=17976931348623157e292,hy=NaN,d3="[object Symbol]",f3=/^\s+|\s+$/g,p3=/^[-+]0x[0-9a-f]+$/i,h3=/^0b[01]+$/i,m3=/^0o[0-7]+$/i,g3=parseInt,y3=Object.prototype,b3=y3.toString;function x3(e,t){var r;if(typeof t!="function")throw new TypeError(u3);return e=k3(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}function v3(e){return x3(2,e)}function my(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function w3(e){return!!e&&typeof e=="object"}function S3(e){return typeof e=="symbol"||w3(e)&&b3.call(e)==d3}function E3(e){if(!e)return e===0?e:0;if(e=A3(e),e===py||e===-py){var t=e<0?-1:1;return t*c3}return e===e?e:0}function k3(e){var t=E3(e),r=t%1;return t===t?r?t-r:t:0}function A3(e){if(typeof e=="number")return e;if(S3(e))return hy;if(my(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=my(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(f3,"");var r=h3.test(e);return r||m3.test(e)?g3(e.slice(2),r?2:8):p3.test(e)?hy:+e}gy.exports=v3});var Ry=h((fD,Ay)=>{var by=Ul(),R3=iu(),T3=ru(),xy=Zn(),I3=Yg(),bs=Zg(),vy=ny(),cu=ay(),Sy=cy(),$t=fy(),O3=yy(),{KeyObject:_3,createSecretKey:q3,createPrivateKey:C3}=require("crypto"),Ey=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];R3&&Ey.splice(3,0,"PS256","PS384","PS512");var P3={expiresIn:{isValid:function(e){return vy(e)||$t(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return vy(e)||$t(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return $t(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:I3.bind(null,Ey),message:'"algorithm" must be a valid string enum value'},header:{isValid:Sy,message:'"header" must be an object'},encoding:{isValid:$t,message:'"encoding" must be a string'},issuer:{isValid:$t,message:'"issuer" must be a string'},subject:{isValid:$t,message:'"subject" must be a string'},jwtid:{isValid:$t,message:'"jwtid" must be a string'},noTimestamp:{isValid:bs,message:'"noTimestamp" must be a boolean'},keyid:{isValid:$t,message:'"keyid" must be a string'},mutatePayload:{isValid:bs,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:bs,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:bs,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},N3={iat:{isValid:cu,message:'"iat" should be a number of seconds'},exp:{isValid:cu,message:'"exp" should be a number of seconds'},nbf:{isValid:cu,message:'"nbf" should be a number of seconds'}};function ky(e,t,r,i){if(!Sy(r))throw new Error('Expected "'+i+'" to be a plain object.');Object.keys(r).forEach(function(n){let s=e[n];if(!s){if(!t)throw new Error('"'+n+'" is not allowed in "'+i+'"');return}if(!s.isValid(r[n]))throw new Error(s.message)})}function D3(e){return ky(P3,!1,e,"options")}function U3(e){return ky(N3,!0,e,"payload")}var wy={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},L3=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Ay.exports=function(e,t,r,i){typeof r=="function"?(i=r,r={}):r=r||{};let n=typeof e=="object"&&!Buffer.isBuffer(e),s=Object.assign({alg:r.algorithm||"HS256",typ:n?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(i)return i(u);throw u}if(!t&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(t!=null&&!(t instanceof _3))try{t=C3(t)}catch{try{t=q3(typeof t=="string"?Buffer.from(t):t)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&t.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(t.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&t.asymmetricKeyDetails!==void 0&&t.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof e>"u")return a(new Error("payload is required"));if(n){try{U3(e)}catch(u){return a(u)}r.mutatePayload||(e=Object.assign({},e))}else{let u=L3.filter(function(c){return typeof r[c]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{D3(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{T3(s.alg,t)}catch(u){return a(u)}let o=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:n&&(e.iat=o),typeof r.notBefore<"u"){try{e.nbf=by(r.notBefore,o)}catch(u){return a(u)}if(typeof e.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof e=="object"){try{e.exp=by(r.expiresIn,o)}catch(u){return a(u)}if(typeof e.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(wy).forEach(function(u){let c=wy[u];if(typeof r[u]<"u"){if(typeof e[c]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+c+'" property.'));e[c]=r[u]}});let l=r.encoding||"utf8";if(typeof i=="function")i=i&&O3(i),xy.createSign({header:s,privateKey:t,payload:e,encoding:l}).once("error",i).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));i(null,u)});else{let u=xy.sign({header:s,payload:e,secret:t,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return u}}});var Iy=h((pD,Ty)=>{Ty.exports={decode:Pl(),verify:Hg(),sign:Ry(),JsonWebTokenError:mi(),NotBeforeError:Nl(),TokenExpiredError:Dl()}});var K3={};Fy(K3,{createComment:()=>H3,createReel:()=>Q3,getComments:()=>G3,listReels:()=>$3,toggleBookmark:()=>B3,toggleLike:()=>V3});module.exports=My(K3);var wf=ki(vf(),1),Pa;function Tt(){return Pa||(Pa=new wf.PrismaClient),Pa}var Nk=process.env.FRONTEND_URL||"http://localhost:5173",Dk=process.env.NODE_ENV||"development",Sf=Dk==="production",Uk=()=>{let e=[Nk];return Sf&&e.push("https://dkmxy676d3vgc.cloudfront.net"),Sf||e.push("http://localhost:3000","http://localhost:5173"),e},Ef=e=>{let t=Uk(),r=e?.headers?.origin||e?.headers?.Origin||"";return{"Access-Control-Allow-Origin":t.includes(r)?r:t[0],"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,X-CSRF-Token","Access-Control-Max-Age":"86400"}};function It(e,t=200,r={}){let i=Ef(r.event);return delete r.event,{statusCode:t,headers:{"content-type":"application/json",...i,"x-content-type-options":"nosniff","referrer-policy":"strict-origin-when-cross-origin","permissions-policy":"camera=(), microphone=(), geolocation=()","strict-transport-security":"max-age=63072000; includeSubDomains; preload",...r},body:JSON.stringify(e)}}function oe(e,t=400,r={}){return It({error:e},t,r)}var NP=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;var DP="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");var j3=ki(ip(),1);var GP=process.env.CSRF_ENABLED==="true";var FI=ki(em(),1);var GN={auth:{maxRequests:10,windowMs:9e5,message:"Too many authentication attempts. Please try again later."},emailVerification:{maxRequests:5,windowMs:36e5,message:"Too many verification email requests. Please try again later."},reports:{maxRequests:parseInt(process.env.REPORTS_MAX_PER_HOUR||"5",10),windowMs:36e5,message:"Too many reports submitted. Please try again later."},write:{maxRequests:100,windowMs:36e5,message:"Too many write requests. Please try again later."},read:{maxRequests:1e3,windowMs:36e5,message:"Too many read requests. Please try again later."}};var Oy=ki(Iy(),1);var F3=process.env.JWT_SECRET||"dev-secret-key-change-in-production";var hD=process.env.COOKIE_DOMAIN||void 0,mD=process.env.NODE_ENV||"development";var _y=e=>{try{return Oy.default.verify(e,F3)}catch{return null}},qy=(e,t="access")=>{let r=t==="access"?"access_token":"refresh_token",i=M3(e.headers?.cookie||e.headers?.Cookie||"");if(i[r])return i[r];if(t==="access"){let n=e.headers?.authorization||e.headers?.Authorization;if(n&&n.startsWith("Bearer "))return n.substring(7)}return null},M3=e=>{let t={};return e&&e.split(";").forEach(r=>{let[i,...n]=r.split("=");i&&n.length>0&&(t[i.trim()]=n.join("=").trim())}),t};var Cy=e=>{let t=qy(e,"access");if(!t)return null;let r=_y(t);return!r||r.type!=="access"?null:r.userId||null};function Tr(e){try{return Cy(e)||null}catch{return null}}var $3=async e=>{try{let{limit:t="20",cursor:r}=e.queryStringParameters||{},i=Tr(e),s=await Tt().reel.findMany({take:parseInt(t)+1,...r&&{cursor:{id:r},skip:1},orderBy:{createdAt:"desc"},include:{author:{select:{id:!0,username:!0,displayName:!0,avatar:!0}},_count:{select:{likes:!0,comments:!0}},...i&&{likes:{where:{userId:i},select:{id:!0}},bookmarks:{where:{userId:i},select:{id:!0}}}}}),a=s.length>parseInt(t),o=a?s.slice(0,-1):s,l=a?o[o.length-1].id:null,u=o.map(c=>({id:c.id,videoUrl:c.videoUrl,thumbnail:c.thumbnail,caption:c.caption,author:c.author,likes:c._count.likes,comments:c._count.comments,isLiked:i?c.likes.length>0:!1,isBookmarked:i?c.bookmarks.length>0:!1,createdAt:c.createdAt}));return It({items:u,nextCursor:l,hasMore:a})}catch(t){return console.error("List reels error:",t),oe("Server error: "+t.message,500)}},V3=async e=>{try{let t=Tr(e);if(!t)return oe("Unauthorized",401);let r=e.pathParameters?.id;if(!r)return oe("Reel ID is required",400);let i=Tt();if(!await i.reel.findUnique({where:{id:r}}))return oe("Reel not found",404);let s=await i.like.findUnique({where:{reelId_userId:{reelId:r,userId:t}}});s?await i.like.delete({where:{id:s.id}}):await i.like.create({data:{reelId:r,userId:t}});let a=await i.like.count({where:{reelId:r}});return It({success:!0,likes:a,isLiked:!s})}catch(t){return console.error("Toggle like error:",t),oe("Server error: "+t.message,500)}},B3=async e=>{try{let t=Tr(e);if(!t)return oe("Unauthorized",401);let r=e.pathParameters?.id;if(!r)return oe("Reel ID is required",400);let i=Tt();if(!await i.reel.findUnique({where:{id:r}}))return oe("Reel not found",404);let s=await i.bookmark.findUnique({where:{reelId_userId:{reelId:r,userId:t}}});return s?await i.bookmark.delete({where:{id:s.id}}):await i.bookmark.create({data:{reelId:r,userId:t}}),It({success:!0,isBookmarked:!s})}catch(t){return console.error("Toggle bookmark error:",t),oe("Server error: "+t.message,500)}},G3=async e=>{try{let t=e.pathParameters?.id;if(!t)return oe("Reel ID is required",400);let{limit:r="50",cursor:i}=e.queryStringParameters||{},s=await Tt().comment.findMany({where:{reelId:t},take:parseInt(r)+1,...i&&{cursor:{id:i},skip:1},orderBy:{createdAt:"desc"},include:{author:{select:{id:!0,username:!0,displayName:!0,avatar:!0}}}}),a=s.length>parseInt(r),o=a?s.slice(0,-1):s,l=a?o[o.length-1].id:null;return It({comments:o,nextCursor:l,hasMore:a})}catch(t){return console.error("Get comments error:",t),oe("Server error: "+t.message,500)}},H3=async e=>{try{let t=Tr(e);if(!t)return oe("Unauthorized",401);let r=e.pathParameters?.id;if(!r)return oe("Reel ID is required",400);let{text:i}=JSON.parse(e.body||"{}");if(!i||i.trim().length===0)return oe("Comment text is required",400);let n=Tt();if(!await n.reel.findUnique({where:{id:r}}))return oe("Reel not found",404);let a=await n.comment.create({data:{text:i.trim(),reelId:r,authorId:t},include:{author:{select:{id:!0,username:!0,displayName:!0,avatar:!0}}}});return It({comment:a},201)}catch(t){return console.error("Create comment error:",t),oe("Server error: "+t.message,500)}},Q3=async e=>{try{let t=Tr(e);if(!t)return oe("Unauthorized",401);let{videoUrl:r,thumbnail:i,caption:n}=JSON.parse(e.body||"{}");if(!r)return oe("videoUrl is required",400);let a=await Tt().reel.create({data:{videoUrl:r,thumbnail:i,caption:n,authorId:t},include:{author:{select:{id:!0,username:!0,displayName:!0,avatar:!0}},_count:{select:{likes:!0,comments:!0}}}});return It({id:a.id,videoUrl:a.videoUrl,thumbnail:a.thumbnail,caption:a.caption,author:a.author,likes:a._count.likes,comments:a._count.comments,isLiked:!1,isBookmarked:!1,createdAt:a.createdAt},201)}catch(t){return console.error("Create reel error:",t),oe("Server error: "+t.message,500)}};0&&(module.exports={createComment,createReel,getComments,listReels,toggleBookmark,toggleLike});
/*! Bundled license information:

@prisma/client/runtime/library.js:
  (*! Bundled license information:
  
  decimal.js/decimal.mjs:
    (*!
     *  decimal.js v10.5.0
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     *)
  *)

@otplib/plugin-crypto/index.js:
  (**
   * @otplib/plugin-crypto
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/plugin-thirty-two/index.js:
  (**
   * @otplib/plugin-thirty-two
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/core/index.js:
  (**
   * @otplib/core
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/preset-default/index.js:
  (**
   * @otplib/preset-default
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

otplib/index.js:
  (**
   * otplib
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
