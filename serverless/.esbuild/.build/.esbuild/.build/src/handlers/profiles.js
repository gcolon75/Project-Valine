var eb=Object.create;var Ai=Object.defineProperty;var tb=Object.getOwnPropertyDescriptor;var rb=Object.getOwnPropertyNames;var ib=Object.getPrototypeOf,nb=Object.prototype.hasOwnProperty;var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),sb=(e,t)=>{for(var r in t)Ai(e,r,{get:t[r],enumerable:!0})},wu=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of rb(t))!nb.call(e,n)&&n!==r&&Ai(e,n,{get:()=>t[n],enumerable:!(i=tb(t,n))||i.enumerable});return e};var tr=(e,t,r)=>(r=e!=null?eb(ib(e)):{},wu(t||!e||!e.__esModule?Ai(r,"default",{value:e,enumerable:!0}):r,e)),ab=e=>wu(Ai({},"__esModule",{value:!0}),e);var Na=h((XP,Ef)=>{"use strict";var ob=Object.create,Ki=Object.defineProperty,lb=Object.getOwnPropertyDescriptor,ub=Object.getOwnPropertyNames,cb=Object.getPrototypeOf,db=Object.prototype.hasOwnProperty,pc=(e,t)=>()=>(e&&(t=e(e=0)),t),Pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Kt=(e,t)=>{for(var r in t)Ki(e,r,{get:t[r],enumerable:!0})},hc=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ub(t))!db.call(e,n)&&n!==r&&Ki(e,n,{get:()=>t[n],enumerable:!(i=lb(t,n))||i.enumerable});return e},Q=(e,t,r)=>(r=e!=null?ob(cb(e)):{},hc(t||!e||!e.__esModule?Ki(r,"default",{value:e,enumerable:!0}):r,e)),fb=e=>hc(Ki({},"__esModule",{value:!0}),e),mc=Pe((e,t)=>{"use strict";t.exports=(r,i=process.argv)=>{let n=r.startsWith("-")?"":r.length===1?"-":"--",s=i.indexOf(n+r),a=i.indexOf("--");return s!==-1&&(a===-1||s<a)}}),pb=Pe((e,t)=>{"use strict";var r=require("node:os"),i=require("node:tty"),n=mc(),{env:s}=process,a;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in s&&(s.FORCE_COLOR==="true"?a=1:s.FORCE_COLOR==="false"?a=0:a=s.FORCE_COLOR.length===0?1:Math.min(parseInt(s.FORCE_COLOR,10),3));function o(c){return c===0?!1:{level:c,hasBasic:!0,has256:c>=2,has16m:c>=3}}function l(c,d){if(a===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(c&&!d&&a===void 0)return 0;let f=a||0;if(s.TERM==="dumb")return f;if(process.platform==="win32"){let p=r.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in s)||s.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){let p=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:f}function u(c){let d=l(c,c&&c.isTTY);return o(d)}t.exports={supportsColor:u,stdout:o(l(!0,i.isatty(1))),stderr:o(l(!0,i.isatty(2)))}}),hb=Pe((e,t)=>{"use strict";var r=pb(),i=mc();function n(a){if(/^\d{3,4}$/.test(a)){let l=/(\d{1,2})(\d{2})/.exec(a)||[];return{major:0,minor:parseInt(l[1],10),patch:parseInt(l[2],10)}}let o=(a||"").split(".").map(l=>parseInt(l,10));return{major:o[0],minor:o[1],patch:o[2]}}function s(a){let{CI:o,FORCE_HYPERLINK:l,NETLIFY:u,TEAMCITY_VERSION:c,TERM_PROGRAM:d,TERM_PROGRAM_VERSION:f,VTE_VERSION:p,TERM:m}=process.env;if(l)return!(l.length>0&&parseInt(l,10)===0);if(i("no-hyperlink")||i("no-hyperlinks")||i("hyperlink=false")||i("hyperlink=never"))return!1;if(i("hyperlink=true")||i("hyperlink=always")||u)return!0;if(!r.supportsColor(a)||a&&!a.isTTY)return!1;if("WT_SESSION"in process.env)return!0;if(process.platform==="win32"||o||c)return!1;if(d){let g=n(f||"");switch(d){case"iTerm.app":return g.major===3?g.minor>=1:g.major>3;case"WezTerm":return g.major>=20200620;case"vscode":return g.major>1||g.major===1&&g.minor>=72;case"ghostty":return!0}}if(p){if(p==="0.50.0")return!1;let g=n(p);return g.major>0||g.minor>=50}switch(m){case"alacritty":return!0}return!1}t.exports={supportsHyperlink:s,stdout:s(process.stdout),stderr:s(process.stderr)}}),mb=Pe((e,t)=>{t.exports={name:"@prisma/internals",version:"6.19.0",description:"This package is intended for Prisma's internal use",main:"dist/index.js",types:"dist/index.d.ts",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/internals"},homepage:"https://www.prisma.io",author:"Tim Suchanek <suchanek@prisma.io>",bugs:"https://github.com/prisma/prisma/issues",license:"Apache-2.0",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",test:"dotenv -e ../../.db.env -- jest --silent",prepublishOnly:"pnpm run build"},files:["README.md","dist","!**/libquery_engine*","!dist/get-generators/engines/*","scripts"],devDependencies:{"@babel/helper-validator-identifier":"7.25.9","@opentelemetry/api":"1.9.0","@swc/core":"1.11.5","@swc/jest":"0.2.37","@types/babel__helper-validator-identifier":"7.15.2","@types/jest":"29.5.14","@types/node":"18.19.76","@types/resolve":"1.20.6",archiver:"6.0.2","checkpoint-client":"1.1.33","cli-truncate":"4.0.0",dotenv:"16.5.0",empathic:"2.0.0","escape-string-regexp":"5.0.0",execa:"8.0.1","fast-glob":"3.3.3","find-up":"7.0.0","fp-ts":"2.16.9","fs-extra":"11.3.0","global-directory":"4.0.0",globby:"11.1.0","identifier-regex":"1.0.0","indent-string":"4.0.0","is-windows":"1.0.2","is-wsl":"3.1.0",jest:"29.7.0","jest-junit":"16.0.0",kleur:"4.1.5","mock-stdin":"1.0.0","new-github-issue-url":"0.2.1","node-fetch":"3.3.2","npm-packlist":"5.1.3",open:"7.4.2","p-map":"4.0.0",resolve:"1.22.10","string-width":"7.2.0","strip-indent":"4.0.0","temp-dir":"2.0.0",tempy:"1.0.1","terminal-link":"4.0.0",tmp:"0.2.3","ts-pattern":"5.6.2","ts-toolbelt":"9.6.0",typescript:"5.4.5",yarn:"1.22.22"},dependencies:{"@prisma/config":"workspace:*","@prisma/debug":"workspace:*","@prisma/dmmf":"workspace:*","@prisma/driver-adapter-utils":"workspace:*","@prisma/engines":"workspace:*","@prisma/fetch-engine":"workspace:*","@prisma/generator":"workspace:*","@prisma/generator-helper":"workspace:*","@prisma/get-platform":"workspace:*","@prisma/prisma-schema-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-engine-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-files-loader":"workspace:*",arg:"5.0.2",prompts:"2.4.2"},peerDependencies:{typescript:">=5.1.0"},peerDependenciesMeta:{typescript:{optional:!0}},sideEffects:!1}}),gc=Pe((e,t)=>{t.exports={name:"@prisma/engines-version",version:"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"2ba551f319ab1df4bc874a89965d8b3641056773"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),la=Pe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enginesVersion=void 0,e.enginesVersion=gc().prisma.enginesVersion}),gb=Pe((e,t)=>{"use strict";t.exports=r=>{let i=r.match(/^[ \t]*(?=\S)/gm);return i?i.reduce((n,s)=>Math.min(n,s.length),1/0):0}}),yc=Pe((e,t)=>{"use strict";t.exports=(r,i=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof i!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof i}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(i===0)return r;let s=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(s,n.indent.repeat(i))}}),yb=Pe((e,t)=>{t.exports={name:"dotenv",version:"16.5.0",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),bb=Pe((e,t)=>{"use strict";var r=require("node:fs"),i=require("node:path"),n=require("node:os"),s=require("node:crypto"),a=yb(),o=a.version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function u(b){let R={},q=b.toString();q=q.replace(/\r\n?/mg,`
`);let G;for(;(G=l.exec(q))!=null;){let M=G[1],D=G[2]||"";D=D.trim();let j=D[0];D=D.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),j==='"'&&(D=D.replace(/\\n/g,`
`),D=D.replace(/\\r/g,"\r")),R[M]=D}return R}function c(b){let R=g(b),q=A.configDotenv({path:R});if(!q.parsed){let j=new Error(`MISSING_DATA: Cannot parse ${R} for an unknown reason`);throw j.code="MISSING_DATA",j}let G=p(b).split(","),M=G.length,D;for(let j=0;j<M;j++)try{let re=G[j].trim(),H=m(q,re);D=A.decrypt(H.ciphertext,H.key);break}catch(re){if(j+1>=M)throw re}return A.parse(D)}function d(b){console.log(`[dotenv@${o}][WARN] ${b}`)}function f(b){console.log(`[dotenv@${o}][DEBUG] ${b}`)}function p(b){return b&&b.DOTENV_KEY&&b.DOTENV_KEY.length>0?b.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function m(b,R){let q;try{q=new URL(R)}catch(re){if(re.code==="ERR_INVALID_URL"){let H=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw H.code="INVALID_DOTENV_KEY",H}throw re}let G=q.password;if(!G){let re=new Error("INVALID_DOTENV_KEY: Missing key part");throw re.code="INVALID_DOTENV_KEY",re}let M=q.searchParams.get("environment");if(!M){let re=new Error("INVALID_DOTENV_KEY: Missing environment part");throw re.code="INVALID_DOTENV_KEY",re}let D=`DOTENV_VAULT_${M.toUpperCase()}`,j=b.parsed[D];if(!j){let re=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${D} in your .env.vault file.`);throw re.code="NOT_FOUND_DOTENV_ENVIRONMENT",re}return{ciphertext:j,key:G}}function g(b){let R=null;if(b&&b.path&&b.path.length>0)if(Array.isArray(b.path))for(let q of b.path)r.existsSync(q)&&(R=q.endsWith(".vault")?q:`${q}.vault`);else R=b.path.endsWith(".vault")?b.path:`${b.path}.vault`;else R=i.resolve(process.cwd(),".env.vault");return r.existsSync(R)?R:null}function E(b){return b[0]==="~"?i.join(n.homedir(),b.slice(1)):b}function I(b){b&&b.debug&&f("Loading env from encrypted .env.vault");let R=A._parseVault(b),q=process.env;return b&&b.processEnv!=null&&(q=b.processEnv),A.populate(q,R,b),{parsed:R}}function C(b){let R=i.resolve(process.cwd(),".env"),q="utf8",G=!!(b&&b.debug);b&&b.encoding?q=b.encoding:G&&f("No encoding is specified. UTF-8 is used by default");let M=[R];if(b&&b.path)if(!Array.isArray(b.path))M=[E(b.path)];else{M=[];for(let H of b.path)M.push(E(H))}let D,j={};for(let H of M)try{let F=A.parse(r.readFileSync(H,{encoding:q}));A.populate(j,F,b)}catch(F){G&&f(`Failed to load ${H} ${F.message}`),D=F}let re=process.env;return b&&b.processEnv!=null&&(re=b.processEnv),A.populate(re,j,b),D?{parsed:j,error:D}:{parsed:j}}function S(b){if(p(b).length===0)return A.configDotenv(b);let R=g(b);return R?A._configVault(b):(d(`You set DOTENV_KEY but you are missing a .env.vault file at ${R}. Did you forget to build it?`),A.configDotenv(b))}function O(b,R){let q=Buffer.from(R.slice(-64),"hex"),G=Buffer.from(b,"base64"),M=G.subarray(0,12),D=G.subarray(-16);G=G.subarray(12,-16);try{let j=s.createDecipheriv("aes-256-gcm",q,M);return j.setAuthTag(D),`${j.update(G)}${j.final()}`}catch(j){let re=j instanceof RangeError,H=j.message==="Invalid key length",F=j.message==="Unsupported state or unable to authenticate data";if(re||H){let Or=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Or.code="INVALID_DOTENV_KEY",Or}else if(F){let Or=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Or.code="DECRYPTION_FAILED",Or}else throw j}}function K(b,R,q={}){let G=!!(q&&q.debug),M=!!(q&&q.override);if(typeof R!="object"){let D=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw D.code="OBJECT_REQUIRED",D}for(let D of Object.keys(R))Object.prototype.hasOwnProperty.call(b,D)?(M===!0&&(b[D]=R[D]),G&&f(M===!0?`"${D}" is already defined and WAS overwritten`:`"${D}" is already defined and was NOT overwritten`)):b[D]=R[D]}var A={configDotenv:C,_configVault:I,_parseVault:c,config:S,decrypt:O,parse:u,populate:K};t.exports.configDotenv=A.configDotenv,t.exports._configVault=A._configVault,t.exports._parseVault=A._parseVault,t.exports.config=A.config,t.exports.decrypt=A.decrypt,t.exports.parse=A.parse,t.exports.populate=A.populate,t.exports=A}),xb=Pe((e,t)=>{"use strict";t.exports=(r={})=>{let i;if(r.repoUrl)i=r.repoUrl;else if(r.user&&r.repo)i=`https://github.com/${r.user}/${r.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let n=new URL(`${i}/issues/new`),s=["body","title","labels","template","milestone","assignee","projects"];for(let a of s){let o=r[a];if(o!==void 0){if(a==="labels"||a==="projects"){if(!Array.isArray(o))throw new TypeError(`The \`${a}\` option should be an array`);o=o.join(",")}n.searchParams.set(a,o)}}return n.toString()},t.exports.default=t.exports}),bc=Pe((e,t)=>{"use strict";t.exports=(function(){function r(i,n,s,a,o){return i<n||s<n?i>s?s+1:i+1:a===o?n:n+1}return function(i,n){if(i===n)return 0;if(i.length>n.length){var s=i;i=n,n=s}for(var a=i.length,o=n.length;a>0&&i.charCodeAt(a-1)===n.charCodeAt(o-1);)a--,o--;for(var l=0;l<a&&i.charCodeAt(l)===n.charCodeAt(l);)l++;if(a-=l,o-=l,a===0||o<3)return o;var u=0,c,d,f,p,m,g,E,I,C,S,O,K,A=[];for(c=0;c<a;c++)A.push(c+1),A.push(i.charCodeAt(l+c));for(var b=A.length-1;u<o-3;)for(C=n.charCodeAt(l+(d=u)),S=n.charCodeAt(l+(f=u+1)),O=n.charCodeAt(l+(p=u+2)),K=n.charCodeAt(l+(m=u+3)),g=u+=4,c=0;c<b;c+=2)E=A[c],I=A[c+1],d=r(E,d,f,C,I),f=r(d,f,p,S,I),p=r(f,p,m,O,I),g=r(p,m,g,K,I),A[c]=g,m=p,p=f,f=d,d=E;for(;u<o;)for(C=n.charCodeAt(l+(d=u)),g=++u,c=0;c<b;c+=2)E=A[c],A[c]=g=r(E,d,g,C,A[c+1]),d=E;return g}})()}),vb=pc(()=>{"use strict"}),wb=pc(()=>{"use strict"}),xc={};Kt(xc,{DMMF:()=>ad,Debug:()=>we,Decimal:()=>Zi,Extensions:()=>vc,MetricsClient:()=>Dd,PrismaClientInitializationError:()=>le,PrismaClientKnownRequestError:()=>kt,PrismaClientRustPanicError:()=>Et,PrismaClientUnknownRequestError:()=>Oe,PrismaClientValidationError:()=>ot,Public:()=>wc,Sql:()=>It,createParam:()=>Rw,defineDmmfProperty:()=>Uw,deserializeJsonResponse:()=>Qi,deserializeRawResult:()=>vf,dmmfToRuntimeDataModel:()=>_x,empty:()=>Hw,getPrismaClient:()=>NA,getRuntime:()=>Yd,join:()=>Gw,makeStrictEnum:()=>UA,makeTypedQueryFactory:()=>Mw,objectEnumValues:()=>wd,raw:()=>Fd,serializeJsonQuery:()=>Cd,skip:()=>_d,sqltag:()=>Qw,warnEnvConflicts:()=>FA,warnOnce:()=>Qc});Ef.exports=fb(xc);var vc={};Kt(vc,{defineExtension:()=>Sb,getExtensionContext:()=>Eb});function Sb(e){return typeof e=="function"?e:t=>t.$extends(e)}function Eb(e){return e}var wc={};Kt(wc,{validator:()=>Ab});function Ab(...e){return t=>t}var qs={};Kt(qs,{$:()=>Rc,bgBlack:()=>Nb,bgBlue:()=>Fb,bgCyan:()=>$b,bgGreen:()=>Lb,bgMagenta:()=>Mb,bgRed:()=>Db,bgWhite:()=>jb,bgYellow:()=>Ub,black:()=>_b,blue:()=>Nr,bold:()=>je,cyan:()=>Gt,dim:()=>Kr,gray:()=>ua,green:()=>$r,grey:()=>Pb,hidden:()=>Ib,inverse:()=>Tb,italic:()=>Rb,magenta:()=>qb,red:()=>Ht,reset:()=>kb,strikethrough:()=>Ob,underline:()=>Ce,white:()=>Cb,yellow:()=>zr});var Cs,Sc,Ec,Ac,kc=!0;typeof process<"u"&&({FORCE_COLOR:Cs,NODE_DISABLE_COLORS:Sc,NO_COLOR:Ec,TERM:Ac}=process.env||{},kc=process.stdout&&process.stdout.isTTY);var Rc={enabled:!Sc&&Ec==null&&Ac!=="dumb"&&(Cs!=null&&Cs!=="0"||kc)};function J(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),i=`\x1B[${e}m`,n=`\x1B[${t}m`;return function(s){return!Rc.enabled||s==null?s:i+(~(""+s).indexOf(n)?s.replace(r,n+i):s)+n}}var kb=J(0,0),je=J(1,22),Kr=J(2,22),Rb=J(3,23),Ce=J(4,24),Tb=J(7,27),Ib=J(8,28),Ob=J(9,29),_b=J(30,39),Ht=J(31,39),$r=J(32,39),zr=J(33,39),Nr=J(34,39),qb=J(35,39),Gt=J(36,39),Cb=J(37,39),ua=J(90,39),Pb=J(90,39),Nb=J(40,49),Db=J(41,49),Lb=J(42,49),Ub=J(43,49),Fb=J(44,49),Mb=J(45,49),$b=J(46,49),jb=J(47,49),Vb=100,Su=["green","yellow","blue","magenta","cyan","red"],Dr=[],Eu=Date.now(),Bb=0,Ps=typeof process<"u"?process.env:{};globalThis.DEBUG??=Ps.DEBUG??"";globalThis.DEBUG_COLORS??=Ps.DEBUG_COLORS?Ps.DEBUG_COLORS==="true":!0;var Lr={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(n=>n.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(n=>n===""||n[0]==="-"?!1:e.match(RegExp(n.split("*").join(".*")+"$"))),i=t.some(n=>n===""||n[0]!=="-"?!1:e.match(RegExp(n.slice(1).split("*").join(".*")+"$")));return r&&!i},log:(...e)=>{let[t,r,...i]=e;(console.warn??console.log)(`${t} ${r}`,...i)},formatters:{}};function Gb(e){let t={color:Su[Bb++%Su.length],enabled:Lr.enabled(e),namespace:e,log:Lr.log,extend:()=>{}},r=(...i)=>{let{enabled:n,namespace:s,color:a,log:o}=t;if(i.length!==0&&Dr.push([s,...i]),Dr.length>Vb&&Dr.shift(),Lr.enabled(s)||n){let l=i.map(c=>typeof c=="string"?c:Hb(c)),u=`+${Date.now()-Eu}ms`;Eu=Date.now(),globalThis.DEBUG_COLORS?o(qs[a](je(s)),...l,qs[a](u)):o(s,...l,u)}};return new Proxy(r,{get:(i,n)=>t[n],set:(i,n,s)=>t[n]=s})}var we=new Proxy(Gb,{get:(e,t)=>Lr[t],set:(e,t,r)=>Lr[t]=r});function Hb(e,t=2){let r=new Set;return JSON.stringify(e,(i,n)=>{if(typeof n=="object"&&n!==null){if(r.has(n))return"[Circular *]";r.add(n)}else if(typeof n=="bigint")return n.toString();return n},t)}function Qb(e=7500){let t=Dr.map(([r,...i])=>`${r} ${i.map(n=>typeof n=="string"?n:JSON.stringify(n)).join(" ")}`).join(`
`);return t.length<e?t:t.slice(-e)}function Kb(){Dr.length=0}var ca=we,zb=Q(require("node:fs"));function Jb(){let e=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(e&&zb.default.existsSync(e))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var Wb=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],ki="libquery_engine";function Yb(e,t){let r=t==="url";return e.includes("windows")?r?"query_engine.dll.node":`query_engine-${e}.dll.node`:e.includes("darwin")?r?`${ki}.dylib.node`:`${ki}-${e}.dylib.node`:r?`${ki}.so.node`:`${ki}-${e}.so.node`}var Xb=Q(require("node:child_process")),Tc=Q(require("node:fs/promises")),Ns=Q(require("node:os")),ut=Symbol.for("@ts-pattern/matcher"),Zb=Symbol.for("@ts-pattern/isVariadic"),Mi="@ts-pattern/anonymous-select-key",Ds=e=>!!(e&&typeof e=="object"),qi=e=>e&&!!e[ut],Je=(e,t,r)=>{if(qi(e)){let i=e[ut](),{matched:n,selections:s}=i.match(t);return n&&s&&Object.keys(s).forEach(a=>r(a,s[a])),n}if(Ds(e)){if(!Ds(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let i=[],n=[],s=[];for(let a of e.keys()){let o=e[a];qi(o)&&o[Zb]?s.push(o):s.length?n.push(o):i.push(o)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<i.length+n.length)return!1;let a=t.slice(0,i.length),o=n.length===0?[]:t.slice(-n.length),l=t.slice(i.length,n.length===0?1/0:-n.length);return i.every((u,c)=>Je(u,a[c],r))&&n.every((u,c)=>Je(u,o[c],r))&&(s.length===0||Je(s[0],l,r))}return e.length===t.length&&e.every((a,o)=>Je(a,t[o],r))}return Reflect.ownKeys(e).every(i=>{let n=e[i];return(i in t||qi(s=n)&&s[ut]().matcherType==="optional")&&Je(n,t[i],r);var s})}return Object.is(t,e)},At=e=>{var t,r,i;return Ds(e)?qi(e)?(t=(r=(i=e[ut]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(e)?jr(e,At):jr(Object.values(e),At):[]},jr=(e,t)=>e.reduce((r,i)=>r.concat(t(i)),[]);function Ne(e){return Object.assign(e,{optional:()=>e1(e),and:t=>ie(e,t),or:t=>t1(e,t),select:t=>t===void 0?Au(e):Au(t,e)})}function e1(e){return Ne({[ut]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return t===void 0?(At(e).forEach(n=>i(n,void 0)),{matched:!0,selections:r}):{matched:Je(e,t,i),selections:r}},getSelectionKeys:()=>At(e),matcherType:"optional"})})}function ie(...e){return Ne({[ut]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return{matched:e.every(n=>Je(n,t,i)),selections:r}},getSelectionKeys:()=>jr(e,At),matcherType:"and"})})}function t1(...e){return Ne({[ut]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return jr(e,At).forEach(n=>i(n,void 0)),{matched:e.some(n=>Je(n,t,i)),selections:r}},getSelectionKeys:()=>jr(e,At),matcherType:"or"})})}function V(e){return{[ut]:()=>({match:t=>({matched:!!e(t)})})}}function Au(...e){let t=typeof e[0]=="string"?e[0]:void 0,r=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return Ne({[ut]:()=>({match:i=>{let n={[t??Mi]:i};return{matched:r===void 0||Je(r,i,(s,a)=>{n[s]=a}),selections:n}},getSelectionKeys:()=>[t??Mi].concat(r===void 0?[]:At(r))})})}function Qe(e){return typeof e=="number"}function yt(e){return typeof e=="string"}function bt(e){return typeof e=="bigint"}var TP=Ne(V(function(e){return!0})),xt=e=>Object.assign(Ne(e),{startsWith:t=>{return xt(ie(e,(r=t,V(i=>yt(i)&&i.startsWith(r)))));var r},endsWith:t=>{return xt(ie(e,(r=t,V(i=>yt(i)&&i.endsWith(r)))));var r},minLength:t=>xt(ie(e,(r=>V(i=>yt(i)&&i.length>=r))(t))),length:t=>xt(ie(e,(r=>V(i=>yt(i)&&i.length===r))(t))),maxLength:t=>xt(ie(e,(r=>V(i=>yt(i)&&i.length<=r))(t))),includes:t=>{return xt(ie(e,(r=t,V(i=>yt(i)&&i.includes(r)))));var r},regex:t=>{return xt(ie(e,(r=t,V(i=>yt(i)&&!!i.match(r)))));var r}}),IP=xt(V(yt)),Ke=e=>Object.assign(Ne(e),{between:(t,r)=>Ke(ie(e,((i,n)=>V(s=>Qe(s)&&i<=s&&n>=s))(t,r))),lt:t=>Ke(ie(e,(r=>V(i=>Qe(i)&&i<r))(t))),gt:t=>Ke(ie(e,(r=>V(i=>Qe(i)&&i>r))(t))),lte:t=>Ke(ie(e,(r=>V(i=>Qe(i)&&i<=r))(t))),gte:t=>Ke(ie(e,(r=>V(i=>Qe(i)&&i>=r))(t))),int:()=>Ke(ie(e,V(t=>Qe(t)&&Number.isInteger(t)))),finite:()=>Ke(ie(e,V(t=>Qe(t)&&Number.isFinite(t)))),positive:()=>Ke(ie(e,V(t=>Qe(t)&&t>0))),negative:()=>Ke(ie(e,V(t=>Qe(t)&&t<0)))}),OP=Ke(V(Qe)),vt=e=>Object.assign(Ne(e),{between:(t,r)=>vt(ie(e,((i,n)=>V(s=>bt(s)&&i<=s&&n>=s))(t,r))),lt:t=>vt(ie(e,(r=>V(i=>bt(i)&&i<r))(t))),gt:t=>vt(ie(e,(r=>V(i=>bt(i)&&i>r))(t))),lte:t=>vt(ie(e,(r=>V(i=>bt(i)&&i<=r))(t))),gte:t=>vt(ie(e,(r=>V(i=>bt(i)&&i>=r))(t))),positive:()=>vt(ie(e,V(t=>bt(t)&&t>0))),negative:()=>vt(ie(e,V(t=>bt(t)&&t<0)))}),_P=vt(V(bt)),qP=Ne(V(function(e){return typeof e=="boolean"})),CP=Ne(V(function(e){return typeof e=="symbol"})),PP=Ne(V(function(e){return e==null})),NP=Ne(V(function(e){return e!=null})),r1=class extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch{t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}},Ls={matched:!1,value:void 0};function zi(e){return new i1(e,Ls)}var i1=class Us{constructor(t,r){this.input=void 0,this.state=void 0,this.input=t,this.state=r}with(...t){if(this.state.matched)return this;let r=t[t.length-1],i=[t[0]],n;t.length===3&&typeof t[1]=="function"?n=t[1]:t.length>2&&i.push(...t.slice(1,t.length-1));let s=!1,a={},o=(u,c)=>{s=!0,a[u]=c},l=!i.some(u=>Je(u,this.input,o))||n&&!n(this.input)?Ls:{matched:!0,value:r(s?Mi in a?a[Mi]:a:this.input,this.input)};return new Us(this.input,l)}when(t,r){if(this.state.matched)return this;let i=!!t(this.input);return new Us(this.input,i?{matched:!0,value:r(this.input,this.input)}:Ls)}otherwise(t){return this.state.matched?this.state.value:t(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new r1(this.input)}run(){return this.exhaustive()}returnType(){return this}},n1=require("node:util"),s1={warn:zr("prisma:warn")},a1={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function ws(e,...t){a1.warn()&&console.warn(`${s1.warn} ${e}`,...t)}var o1=(0,n1.promisify)(Xb.default.exec),ve=ca("prisma:get-platform"),l1=["1.0.x","1.1.x","3.0.x"];async function u1(){let e=Ns.default.platform(),t=process.arch;if(e==="freebsd"){let a=await $i("freebsd-version");if(a&&a.trim().length>0){let o=/^(\d+)\.?/.exec(a);if(o)return{platform:"freebsd",targetDistro:`freebsd${o[1]}`,arch:t}}}if(e!=="linux")return{platform:e,arch:t};let r=await d1(),i=await v1(),n=p1({arch:t,archFromUname:i,familyDistro:r.familyDistro}),{libssl:s}=await h1(n);return{platform:"linux",libssl:s,arch:t,archFromUname:i,...r}}function c1(e){let t=/^ID="?([^"\n]*)"?$/im,r=/^ID_LIKE="?([^"\n]*)"?$/im,i=t.exec(e),n=i&&i[1]&&i[1].toLowerCase()||"",s=r.exec(e),a=s&&s[1]&&s[1].toLowerCase()||"",o=zi({id:n,idLike:a}).with({id:"alpine"},({id:l})=>({targetDistro:"musl",familyDistro:l,originalDistro:l})).with({id:"raspbian"},({id:l})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:l})).with({id:"nixos"},({id:l})=>({targetDistro:"nixos",originalDistro:l,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).when(({idLike:l})=>l.includes("debian")||l.includes("ubuntu"),({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).when(({idLike:l})=>n==="arch"||l.includes("arch"),({id:l})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:l})).when(({idLike:l})=>l.includes("centos")||l.includes("fedora")||l.includes("rhel")||l.includes("suse"),({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).otherwise(({id:l})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:l}));return ve(`Found distro info:
${JSON.stringify(o,null,2)}`),o}async function d1(){let e="/etc/os-release";try{let t=await Tc.default.readFile(e,{encoding:"utf-8"});return c1(t)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function f1(e){let t=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(e);if(t){let r=`${t[1]}.x`;return Ic(r)}}function ku(e){let t=/libssl\.so\.(\d)(\.\d)?/.exec(e);if(t){let r=`${t[1]}${t[2]??".0"}.x`;return Ic(r)}}function Ic(e){let t=(()=>{if(_c(e))return e;let r=e.split(".");return r[1]="0",r.join(".")})();if(l1.includes(t))return t}function p1(e){return zi(e).with({familyDistro:"musl"},()=>(ve('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:t})=>(ve('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${t}-linux-gnu`,`/lib/${t}-linux-gnu`])).with({familyDistro:"rhel"},()=>(ve('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:t,arch:r,archFromUname:i})=>(ve(`Don't know any platform-specific paths for "${t}" on ${r} (${i})`),[]))}async function h1(e){let t='grep -v "libssl.so.0"',r=await Ru(e);if(r){ve(`Found libssl.so file using platform-specific paths: ${r}`);let s=ku(r);if(ve(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"libssl-specific-path"}}ve('Falling back to "ldconfig" and other generic paths');let i=await $i(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${t}`);if(i||(i=await Ru(["/lib64","/usr/lib64","/lib","/usr/lib"])),i){ve(`Found libssl.so file using "ldconfig" or other generic paths: ${i}`);let s=ku(i);if(ve(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"ldconfig"}}let n=await $i("openssl version -v");if(n){ve(`Found openssl binary with version: ${n}`);let s=f1(n);if(ve(`The parsed openssl version is: ${s}`),s)return{libssl:s,strategy:"openssl-binary"}}return ve("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function Ru(e){for(let t of e){let r=await m1(t);if(r)return r}}async function m1(e){try{return(await Tc.default.readdir(e)).find(t=>t.startsWith("libssl.so.")&&!t.startsWith("libssl.so.0"))}catch(t){if(t.code==="ENOENT")return;throw t}}async function da(){let{binaryTarget:e}=await Oc();return e}function g1(e){return e.binaryTarget!==void 0}async function y1(){let{memoized:e,...t}=await Oc();return t}var Ri={};async function Oc(){if(g1(Ri))return Promise.resolve({...Ri,memoized:!0});let e=await u1(),t=b1(e);return Ri={...e,binaryTarget:t},{...Ri,memoized:!1}}function b1(e){let{platform:t,arch:r,archFromUname:i,libssl:n,targetDistro:s,familyDistro:a,originalDistro:o}=e;t==="linux"&&!["x64","arm64"].includes(r)&&ws(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${r}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${i}".`);let l="1.1.x";if(t==="linux"&&n===void 0){let c=zi({familyDistro:a}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");ws(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${l}".
${c}`)}let u="debian";if(t==="linux"&&s===void 0&&ve(`Distro is "${o}". Falling back to Prisma engines built for "${u}".`),t==="darwin"&&r==="arm64")return"darwin-arm64";if(t==="darwin")return"darwin";if(t==="win32")return"windows";if(t==="freebsd")return s;if(t==="openbsd")return"openbsd";if(t==="netbsd")return"netbsd";if(t==="linux"&&s==="nixos")return"linux-nixos";if(t==="linux"&&r==="arm64")return`${s==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${n||l}`;if(t==="linux"&&r==="arm")return`linux-arm-openssl-${n||l}`;if(t==="linux"&&s==="musl"){let c="linux-musl";return!n||_c(n)?c:`${c}-openssl-${n}`}return t==="linux"&&s&&n?`${s}-openssl-${n}`:(t!=="linux"&&ws(`Prisma detected unknown OS "${t}" and may not work as expected. Defaulting to "linux".`),n?`${u}-openssl-${n}`:s?`${s}-openssl-${l}`:`${u}-openssl-${l}`)}async function x1(e){try{return await e()}catch{return}}function $i(e){return x1(async()=>{let t=await o1(e);return ve(`Command "${e}" successfully returned "${t.stdout}"`),t.stdout})}async function v1(){return typeof Ns.default.machine=="function"?Ns.default.machine():(await $i("uname -m"))?.trim()}function _c(e){return e.startsWith("1.")}var qc={};Kt(qc,{beep:()=>Q1,clearScreen:()=>V1,clearTerminal:()=>B1,cursorBackward:()=>T1,cursorDown:()=>k1,cursorForward:()=>R1,cursorGetPosition:()=>_1,cursorHide:()=>P1,cursorLeft:()=>Nc,cursorMove:()=>A1,cursorNextLine:()=>q1,cursorPrevLine:()=>C1,cursorRestorePosition:()=>O1,cursorSavePosition:()=>I1,cursorShow:()=>N1,cursorTo:()=>E1,cursorUp:()=>Pc,enterAlternativeScreen:()=>G1,eraseDown:()=>F1,eraseEndLine:()=>L1,eraseLine:()=>Dc,eraseLines:()=>D1,eraseScreen:()=>Fs,eraseStartLine:()=>U1,eraseUp:()=>M1,exitAlternativeScreen:()=>H1,iTerm:()=>J1,image:()=>z1,link:()=>K1,scrollDown:()=>j1,scrollUp:()=>$1});var fa=Q(require("node:process"),1),pa=globalThis.window?.document!==void 0,DP=globalThis.process?.versions?.node!==void 0,LP=globalThis.process?.versions?.bun!==void 0,UP=globalThis.Deno?.version?.deno!==void 0,FP=globalThis.process?.versions?.electron!==void 0,MP=globalThis.navigator?.userAgent?.includes("jsdom")===!0,$P=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,jP=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,VP=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,BP=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,Jr=globalThis.navigator?.userAgentData?.platform,GP=Jr==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",HP=Jr==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",QP=Jr==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",KP=Jr==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),zP=Jr==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android",B="\x1B[",Vr="\x1B]",sr="\x07",Cr=";",Cc=!pa&&fa.default.env.TERM_PROGRAM==="Apple_Terminal",w1=!pa&&fa.default.platform==="win32",S1=pa?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:fa.default.cwd,E1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?B+(e+1)+"G":B+(t+1)+Cr+(e+1)+"H"},A1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=B+-e+"D":e>0&&(r+=B+e+"C"),t<0?r+=B+-t+"A":t>0&&(r+=B+t+"B"),r},Pc=(e=1)=>B+e+"A",k1=(e=1)=>B+e+"B",R1=(e=1)=>B+e+"C",T1=(e=1)=>B+e+"D",Nc=B+"G",I1=Cc?"\x1B7":B+"s",O1=Cc?"\x1B8":B+"u",_1=B+"6n",q1=B+"E",C1=B+"F",P1=B+"?25l",N1=B+"?25h",D1=e=>{let t="";for(let r=0;r<e;r++)t+=Dc+(r<e-1?Pc():"");return e&&(t+=Nc),t},L1=B+"K",U1=B+"1K",Dc=B+"2K",F1=B+"J",M1=B+"1J",Fs=B+"2J",$1=B+"S",j1=B+"T",V1="\x1Bc",B1=w1?`${Fs}${B}0f`:`${Fs}${B}3J${B}H`,G1=B+"?1049h",H1=B+"?1049l",Q1=sr,K1=(e,t)=>[Vr,"8",Cr,Cr,t,sr,e,Vr,"8",Cr,Cr,sr].join(""),z1=(e,t={})=>{let r=`${Vr}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+sr},J1={setCwd:(e=S1())=>`${Vr}50;CurrentDir=${e}${sr}`,annotation(e,t={}){let r=`${Vr}1337;`,i=t.x!==void 0,n=t.y!==void 0;if((i||n)&&!(i&&n&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(i?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+sr}},ha=Q(hb(),1);function Br(e,t,{target:r="stdout",...i}={}){return ha.default[r]?qc.link(e,t):i.fallback===!1?e:typeof i.fallback=="function"?i.fallback(e,t):`${e} (\u200B${t}\u200B)`}Br.isSupported=ha.default.stdout;Br.stderr=(e,t,r={})=>Br(e,t,{target:"stderr",...r});Br.stderr.isSupported=ha.default.stderr;function W1(e){return Br(e,e,{fallback:Ce})}var Y1=mb(),X1=Y1.version;function Ms(e){return Z1()||(e?.config.engineType==="library"?"library":e?.config.engineType==="binary"?"binary":e?.config.engineType==="client"?"client":ex())}function Z1(){let e=process.env.PRISMA_CLIENT_ENGINE_TYPE;return e==="library"?"library":e==="binary"?"binary":e==="client"?"client":void 0}function ex(){return"library"}function Lc(e){return e.name==="DriverAdapterError"&&typeof e.cause=="object"}function ma(e){return{ok:!0,value:e,map(t){return ma(t(e))},flatMap(t){return t(e)}}}function ar(e){return{ok:!1,error:e,map(){return ar(e)},flatMap(){return ar(e)}}}var Uc=we("driver-adapter-utils"),tx=class{registeredErrors=[];consumeError(e){return this.registeredErrors[e]}registerNewError(e){let t=0;for(;this.registeredErrors[t]!==void 0;)t++;return this.registeredErrors[t]={error:e},t}},Tu=(e,t=new tx)=>{let r={adapterName:e.adapterName,errorRegistry:t,queryRaw:at(t,e.queryRaw.bind(e)),executeRaw:at(t,e.executeRaw.bind(e)),executeScript:at(t,e.executeScript.bind(e)),dispose:at(t,e.dispose.bind(e)),provider:e.provider,startTransaction:async(...i)=>(await at(t,e.startTransaction.bind(e))(...i)).map(n=>rx(t,n))};return e.getConnectionInfo&&(r.getConnectionInfo=ix(t,e.getConnectionInfo.bind(e))),r},rx=(e,t)=>({adapterName:t.adapterName,provider:t.provider,options:t.options,queryRaw:at(e,t.queryRaw.bind(t)),executeRaw:at(e,t.executeRaw.bind(t)),commit:at(e,t.commit.bind(t)),rollback:at(e,t.rollback.bind(t))});function at(e,t){return async(...r)=>{try{return ma(await t(...r))}catch(i){if(Uc("[error@wrapAsync]",i),Lc(i))return ar(i.cause);let n=e.registerNewError(i);return ar({kind:"GenericJs",id:n})}}}function ix(e,t){return(...r)=>{try{return ma(t(...r))}catch(i){if(Uc("[error@wrapSync]",i),Lc(i))return ar(i.cause);let n=e.registerNewError(i);return ar({kind:"GenericJs",id:n})}}}var JP=Q(la()),ee=Q(require("node:path")),WP=Q(la()),YP=we("prisma:engines");function nx(){return ee.default.join(__dirname,"../")}ee.default.join(__dirname,"../query-engine-darwin");ee.default.join(__dirname,"../query-engine-darwin-arm64");ee.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");ee.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");ee.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");ee.default.join(__dirname,"../query-engine-linux-static-x64");ee.default.join(__dirname,"../query-engine-linux-static-arm64");ee.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");ee.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");ee.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");ee.default.join(__dirname,"../libquery_engine-darwin.dylib.node");ee.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");ee.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");ee.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");ee.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");ee.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");ee.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");ee.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");ee.default.join(__dirname,"../libquery_engine-linux-musl.so.node");ee.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");ee.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");ee.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");ee.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");ee.default.join(__dirname,"../query_engine-windows.dll.node");var Iu=Q(require("node:fs")),Ou=ca("chmodPlusX");function sx(e){if(process.platform==="win32")return;let t=Iu.default.statSync(e),r=t.mode|64|8|1;if(t.mode===r){Ou(`Execution permissions of ${e} are fine`);return}let i=r.toString(8).slice(-3);Ou(`Have to call chmodPlusX on ${e}`),Iu.default.chmodSync(e,i)}function ax(e){let t=e.e,r=o=>`Prisma cannot find the required \`${o}\` system library in your system`,i=t.message.includes("cannot open shared object file"),n=`Please refer to the documentation about Prisma's system requirements: ${W1("https://pris.ly/d/system-requirements")}`,s=`Unable to require(\`${Kr(e.id)}\`).`,a=zi({message:t.message,code:t.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:o})=>i&&o.includes("libz"),()=>`${r("libz")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libgcc_s"),()=>`${r("libgcc_s")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libssl"),()=>{let o=e.platformInfo.libssl?`openssl-${e.platformInfo.libssl}`:"openssl";return`${r("libssl")}. Please install ${o} and try again.`}).when(({message:o})=>o.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${n}`).when(({message:o})=>e.platformInfo.platform==="linux"&&o.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${e.platformInfo.originalDistro} on (${e.platformInfo.archFromUname}) which uses the \`${e.platformInfo.binaryTarget}\` binaryTarget by default. ${n}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${n}`);return`${s}
${a}

Details: ${t.message}`}var ox=Q(gb(),1);function lx(e){let t=(0,ox.default)(e);if(t===0)return e;let r=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(r,"")}var ux="prisma+postgres",Fc=`${ux}:`;function Mc(e){return e?.toString().startsWith(`${Fc}//`)??!1}function cx(e){if(!Mc(e))return!1;let{host:t}=new URL(e);return t.includes("localhost")||t.includes("127.0.0.1")||t.includes("[::1]")}var dx=Q(yc());function fx(e){return String(new px(e))}var px=class{constructor(e){this.config=e}toString(){let{config:e}=this,t=e.provider.fromEnvVar?`env("${e.provider.fromEnvVar}")`:e.provider.value,r=JSON.parse(JSON.stringify({provider:t,binaryTargets:hx(e.binaryTargets)}));return`generator ${e.name} {
${(0,dx.default)(mx(r),2)}
}`}};function hx(e){let t;if(e.length>0){let r=e.find(i=>i.fromEnvVar!==null);r?t=`env("${r.fromEnvVar}")`:t=e.map(i=>i.native?"native":i.value)}else t=void 0;return t}function mx(e){let t=Object.keys(e).reduce((r,i)=>Math.max(r,i.length),0);return Object.entries(e).map(([r,i])=>`${r.padEnd(t)} = ${gx(i)}`).join(`
`)}function gx(e){return JSON.parse(JSON.stringify(e,(t,r)=>Array.isArray(r)?`[${r.map(i=>JSON.stringify(i)).join(", ")}]`:JSON.stringify(r)))}var $s={};Kt($s,{error:()=>xx,info:()=>bx,log:()=>yx,query:()=>vx,should:()=>$c,tags:()=>Wr,warn:()=>jc});var Wr={error:Ht("prisma:error"),warn:zr("prisma:warn"),info:Gt("prisma:info"),query:Nr("prisma:query")},$c={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function yx(...e){console.log(...e)}function jc(e,...t){$c.warn()&&console.warn(`${Wr.warn} ${e}`,...t)}function bx(e,...t){console.info(`${Wr.info} ${e}`,...t)}function xx(e,...t){console.error(`${Wr.error} ${e}`,...t)}function vx(e,...t){console.log(`${Wr.query} ${e}`,...t)}function _u(e,t){if(!e)throw new Error(`${t}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function ga(e,t){throw new Error(t)}function wx({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var Sx=wx();function js(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Sx,"")}var Ti=Q(require("node:path"));function Ex(e){return Ti.default.sep===Ti.default.posix.sep?e:e.split(Ti.default.sep).join(Ti.default.posix.sep)}var Vc=Q(bb()),Vs=Q(require("node:fs")),Gr=Q(require("node:path"));function Ax(e){let t=e.ignoreProcessEnv?{}:process.env,r=i=>i.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(n,s){let a=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(s);if(!a)return n;let o=a[1],l,u;if(o==="\\")u=a[0],l=u.replace("\\$","$");else{let c=a[2];u=a[0].substring(o.length),l=Object.hasOwnProperty.call(t,c)?t[c]:e.parsed[c]||"",l=r(l)}return n.replace(u,l)},i)??i;for(let i in e.parsed){let n=Object.hasOwnProperty.call(t,i)?t[i]:e.parsed[i];e.parsed[i]=r(n)}for(let i in e.parsed)t[i]=e.parsed[i];return e}var Bs=ca("prisma:tryLoadEnv");function Bc({rootEnvPath:e,schemaEnvPath:t},r={conflictCheck:"none"}){let i=qu(e);r.conflictCheck!=="none"&&kx(i,t,r.conflictCheck);let n=null;return Gc(i?.path,t)||(n=qu(t)),!i&&!n&&Bs("No Environment variables loaded"),n?.dotenvResult.error?console.error(Ht(je("Schema Env Error: "))+n.dotenvResult.error):{message:[i?.message,n?.message].filter(Boolean).join(`
`),parsed:{...i?.dotenvResult?.parsed,...n?.dotenvResult?.parsed}}}function kx(e,t,r){let i=e?.dotenvResult.parsed,n=!Gc(e?.path,t);if(i&&t&&n&&Vs.default.existsSync(t)){let s=Vc.default.parse(Vs.default.readFileSync(t)),a=[];for(let o in s)i[o]===s[o]&&a.push(o);if(a.length>0){let o=Gr.default.relative(process.cwd(),e.path),l=Gr.default.relative(process.cwd(),t);if(r==="error"){let u=`There is a conflict between env var${a.length>1?"s":""} in ${Ce(o)} and ${Ce(l)}
Conflicting env vars:
${a.map(c=>`  ${je(c)}`).join(`
`)}

We suggest to move the contents of ${Ce(l)} to ${Ce(o)} to consolidate your env vars.
`;throw new Error(u)}else if(r==="warn"){let u=`Conflict for env var${a.length>1?"s":""} ${a.map(c=>je(c)).join(", ")} in ${Ce(o)} and ${Ce(l)}
Env vars from ${Ce(l)} overwrite the ones from ${Ce(o)}
      `;console.warn(`${zr("warn(prisma)")} ${u}`)}}}}function qu(e){if(Rx(e)){Bs(`Environment variables loaded from ${e}`);let t=Vc.default.config({path:e,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:Ax(t),message:Kr(`Environment variables loaded from ${Gr.default.relative(process.cwd(),e)}`),path:e}}else Bs(`Environment variables not found at ${e}`);return null}function Gc(e,t){return e&&t&&Gr.default.resolve(e)===Gr.default.resolve(t)}function Rx(e){return!!(e&&Vs.default.existsSync(e))}function Tx(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Hc(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function Ix(e,t){if(e.length===0)return;let r=e[0];for(let i=1;i<e.length;i++)t(r,e[i])<0&&(r=e[i]);return r}function ae(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Cu=new Set,Qc=(e,t,...r)=>{Cu.has(e)||(Cu.add(e),jc(t,...r))},le=class Kc extends Error{clientVersion;errorCode;retryable;constructor(t,r,i){super(t),this.name="PrismaClientInitializationError",this.clientVersion=r,this.errorCode=i,Error.captureStackTrace(Kc)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};ae(le,"PrismaClientInitializationError");var kt=class extends Error{code;meta;clientVersion;batchRequestIdx;constructor(e,{code:t,clientVersion:r,meta:i,batchRequestIdx:n}){super(e),this.name="PrismaClientKnownRequestError",this.code=t,this.clientVersion=r,this.meta=i,Object.defineProperty(this,"batchRequestIdx",{value:n,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};ae(kt,"PrismaClientKnownRequestError");var Et=class extends Error{clientVersion;constructor(e,t){super(e),this.name="PrismaClientRustPanicError",this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};ae(Et,"PrismaClientRustPanicError");var Oe=class extends Error{clientVersion;batchRequestIdx;constructor(e,{clientVersion:t,batchRequestIdx:r}){super(e),this.name="PrismaClientUnknownRequestError",this.clientVersion=t,Object.defineProperty(this,"batchRequestIdx",{value:r,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};ae(Oe,"PrismaClientUnknownRequestError");var ot=class extends Error{name="PrismaClientValidationError";clientVersion;constructor(e,{clientVersion:t}){super(e),this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};ae(ot,"PrismaClientValidationError");var Ur=class{_map=new Map;get(e){return this._map.get(e)?.value}set(e,t){this._map.set(e,{value:t})}getOrCreate(e,t){let r=this._map.get(e);if(r)return r.value;let i=t();return this.set(e,i),i}};function Ji(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function Ox(e,t){let r={};for(let i of e){let n=i[t];r[n]=i}return r}function Gs(e){let t;return{get(){return t||(t={value:e()}),t.value}}}function _x(e){return{models:Ss(e.models),enums:Ss(e.enums),types:Ss(e.types)}}function Ss(e){let t={};for(let{name:r,...i}of e)t[r]=i;return t}function ya(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function zc(e){return e.toString()!=="Invalid Date"}var nr=9e15,Tt=1e9,Hs="0123456789abcdef",ji="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Vi="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Qs={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-nr,maxE:nr,crypto:!1},Jc,lt,_=!0,Wi="[DecimalError] ",Rt=Wi+"Invalid argument: ",Wc=Wi+"Precision limit exceeded",Yc=Wi+"crypto unavailable",Xc="[object Decimal]",me=Math.floor,ue=Math.pow,qx=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Cx=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Px=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Zc=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ve=1e7,T=7,Nx=9007199254740991,Dx=ji.length-1,Ks=Vi.length-1,y={toStringTag:Xc};y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),k(e)};y.ceil=function(){return k(new this.constructor(this),this.e+1,2)};y.clampedTo=y.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Rt+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};y.comparedTo=y.cmp=function(e){var t,r,i,n,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(i=a.length,n=o.length,t=0,r=i<n?i:n;t<r;++t)if(a[t]!==o[t])return a[t]>o[t]^l<0?1:-1;return i===n?0:i>n^l<0?1:-1};y.cosine=y.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+T,i.rounding=1,r=Lx(i,nd(i,r)),i.precision=e,i.rounding=t,k(lt==2||lt==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};y.cubeRoot=y.cbrt=function(){var e,t,r,i,n,s,a,o,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(_=!1,s=c.s*ue(c.s*c,1/3),!s||Math.abs(s)==1/0?(r=fe(c.d),e=c.e,(s=(e-r.length+1)%3)&&(r+=s==1||s==-2?"0":"00"),s=ue(r,1/3),e=me((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new d(r),i.s=c.s):i=new d(s.toString()),a=(e=d.precision)+3;;)if(o=i,l=o.times(o).times(o),u=l.plus(c),i=z(u.plus(c).times(o),u.plus(l),a+2,1),fe(o.d).slice(0,a)===(r=fe(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!n&&r=="4999"){if(!n&&(k(o,e+1,0),o.times(o).times(o).eq(c))){i=o;break}a+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(k(i,e+1,1),t=!i.times(i).times(i).eq(c));break}return _=!0,k(i,e,d.rounding,t)};y.decimalPlaces=y.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-me(this.e/T))*T,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};y.dividedBy=y.div=function(e){return z(this,new this.constructor(e))};y.dividedToIntegerBy=y.divToInt=function(e){var t=this,r=t.constructor;return k(z(t,new r(e),0,1,1),r.precision,r.rounding)};y.equals=y.eq=function(e){return this.cmp(e)===0};y.floor=function(){return k(new this.constructor(this),this.e+1,3)};y.greaterThan=y.gt=function(e){return this.cmp(e)>0};y.greaterThanOrEqualTo=y.gte=function(e){var t=this.cmp(e);return t==1||t===0};y.hyperbolicCosine=y.cosh=function(){var e,t,r,i,n,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;r=a.precision,i=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,n=s.d.length,n<32?(e=Math.ceil(n/3),t=(1/Xi(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=or(a,1,s.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return k(s,a.precision=r,a.rounding=i,!0)};y.hyperbolicSine=y.sinh=function(){var e,t,r,i,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,i=n.d.length,i<3)n=or(s,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/Xi(5,e)),n=or(s,2,n,n,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);e--;)a=n.times(n),n=n.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=t,s.rounding=r,k(n,t,r,!0)};y.hyperbolicTangent=y.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,z(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};y.inverseCosine=y.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,n=t.rounding;return r!==-1?r===0?e.isNeg()?We(t,i,n):new t(0):new t(NaN):e.isZero()?We(t,i+4,n).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=n,e.times(2))};y.inverseHyperbolicCosine=y.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,_=!1,r=r.times(r).minus(1).sqrt().plus(r),_=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};y.inverseHyperbolicSine=y.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,_=!1,r=r.times(r).plus(1).sqrt().plus(r),_=!0,i.precision=e,i.rounding=t,r.ln())};y.inverseHyperbolicTangent=y.atanh=function(){var e,t,r,i,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=s.precision,t=s.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?k(new s(n),e,t,!0):(s.precision=r=i-n.e,n=z(n.plus(1),new s(1).minus(n),r+e,1),s.precision=e+4,s.rounding=1,n=n.ln(),s.precision=e,s.rounding=t,n.times(.5))):new s(NaN)};y.inverseSine=y.asin=function(){var e,t,r,i,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),r=s.precision,i=s.rounding,t!==-1?t===0?(e=We(s,r+4,i).times(.5),e.s=n.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=i,n.times(2)))};y.inverseTangent=y.atan=function(){var e,t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=Ks)return a=We(c,d+4,f).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=Ks)return a=We(c,d+4,f).times(.5),a.s=u.s,a}for(c.precision=o=d+10,c.rounding=1,r=Math.min(28,o/T+2|0),e=r;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(_=!1,t=Math.ceil(o/T),i=1,l=u.times(u),a=new c(u),n=u;e!==-1;)if(n=n.times(l),s=a.minus(n.div(i+=2)),n=n.times(l),a=s.plus(n.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===s.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),_=!0,k(a,c.precision=d,c.rounding=f,!0)};y.isFinite=function(){return!!this.d};y.isInteger=y.isInt=function(){return!!this.d&&me(this.e/T)>this.d.length-2};y.isNaN=function(){return!this.s};y.isNegative=y.isNeg=function(){return this.s<0};y.isPositive=y.isPos=function(){return this.s>0};y.isZero=function(){return!!this.d&&this.d[0]===0};y.lessThan=y.lt=function(e){return this.cmp(e)<0};y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1};y.logarithm=y.log=function(e){var t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding,p=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(n=r[0];n%10===0;)n/=10;s=n!==1}if(_=!1,o=d+p,a=St(u,o),i=t?Bi(c,o+10):St(e,o),l=z(a,i,o,1),Hr(l.d,n=d,f))do if(o+=10,a=St(u,o),i=t?Bi(c,o+10):St(e,o),l=z(a,i,o,1),!s){+fe(l.d).slice(n+1,n+15)+1==1e14&&(l=k(l,d+1,0));break}while(Hr(l.d,n+=10,f));return _=!0,k(l,d,f)};y.minus=y.sub=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,m=p.constructor;if(e=new m(e),!p.d||!e.d)return!p.s||!e.s?e=new m(NaN):p.d?e.s=-e.s:e=new m(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,f=e.d,o=m.precision,l=m.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else if(u[0])e=new m(p);else return new m(l===3?-0:0);return _?k(e,o,l):e}if(r=me(e.e/T),c=me(p.e/T),u=u.slice(),s=c-r,s){for(d=s<0,d?(t=u,s=-s,a=f.length):(t=f,r=c,a=u.length),i=Math.max(Math.ceil(o/T),a)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=u.length,a=f.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}s=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),a=u.length,i=f.length-a;i>0;--i)u[a++]=0;for(i=f.length;i>s;){if(u[--i]<f[i]){for(n=i;n&&u[--n]===0;)u[n]=Ve-1;--u[n],u[i]+=Ve}u[i]-=f[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=Yi(u,r),_?k(e,o,l):e):new m(l===3?-0:0)};y.modulo=y.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?k(new i(r),i.precision,i.rounding):(_=!1,i.modulo==9?(t=z(r,e.abs(),0,3,1),t.s*=e.s):t=z(r,e,0,i.modulo,1),t=t.times(e),_=!0,r.minus(t))};y.naturalExponential=y.exp=function(){return zs(this)};y.naturalLogarithm=y.ln=function(){return St(this)};y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,k(e)};y.plus=y.add=function(e){var t,r,i,n,s,a,o,l,u,c,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return!d.s||!e.s?e=new f(NaN):d.d||(e=new f(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,o=f.precision,l=f.rounding,!u[0]||!c[0])return c[0]||(e=new f(d)),_?k(e,o,l):e;if(s=me(d.e/T),i=me(e.e/T),u=u.slice(),n=s-i,n){for(n<0?(r=u,n=-n,a=c.length):(r=c,i=s,a=u.length),s=Math.ceil(o/T),a=s>a?s+1:a+1,n>a&&(n=a,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(a=u.length,n=c.length,a-n<0&&(n=a,r=c,c=u,u=r),t=0;n;)t=(u[--n]=u[n]+c[n]+t)/Ve|0,u[n]%=Ve;for(t&&(u.unshift(t),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=Yi(u,i),_?k(e,o,l):e};y.precision=y.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rt+e);return r.d?(t=ed(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};y.round=function(){var e=this,t=e.constructor;return k(new t(e),e.e+1,t.rounding)};y.sine=y.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+T,i.rounding=1,r=Fx(i,nd(i,r)),i.precision=e,i.rounding=t,k(lt>2?r.neg():r,e,t,!0)):new i(NaN)};y.squareRoot=y.sqrt=function(){var e,t,r,i,n,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(_=!1,u=Math.sqrt(+a),u==0||u==1/0?(t=fe(o),(t.length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=me((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),i=new c(t)):i=new c(u.toString()),r=(l=c.precision)+3;;)if(s=i,i=s.plus(z(a,s,r+2,1)).times(.5),fe(s.d).slice(0,r)===(t=fe(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(k(s,l+1,0),s.times(s).eq(a))){i=s;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(k(i,l+1,1),e=!i.times(i).eq(a));break}return _=!0,k(i,l,c.rounding,e)};y.tangent=y.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=z(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,k(lt==2||lt==4?r.neg():r,e,t,!0)):new i(NaN)};y.times=y.mul=function(e){var t,r,i,n,s,a,o,l,u,c=this,d=c.constructor,f=c.d,p=(e=new d(e)).d;if(e.s*=c.s,!f||!f[0]||!p||!p[0])return new d(!e.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?e.s/0:e.s*0);for(r=me(c.e/T)+me(e.e/T),l=f.length,u=p.length,l<u&&(s=f,f=p,p=s,a=l,l=u,u=a),s=[],a=l+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(t=0,n=l+i;n>i;)o=s[n]+p[i]*f[n-i-1]+t,s[n--]=o%Ve|0,t=o/Ve|0;s[n]=(s[n]+t)%Ve|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=Yi(s,r),_?k(e,d.precision,d.rounding):e};y.toBinary=function(e,t){return ba(this,2,e,t)};y.toDecimalPlaces=y.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(Re(e,0,Tt),t===void 0?t=i.rounding:Re(t,0,8),k(r,e+r.e+1,t))};y.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Xe(i,!0):(Re(e,0,Tt),t===void 0?t=n.rounding:Re(t,0,8),i=k(new n(i),e+1,t),r=Xe(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toFixed=function(e,t){var r,i,n=this,s=n.constructor;return e===void 0?r=Xe(n):(Re(e,0,Tt),t===void 0?t=s.rounding:Re(t,0,8),i=k(new s(n),e+n.e+1,t),r=Xe(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};y.toFraction=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,m=p.d,g=p.constructor;if(!m)return new g(p);if(u=r=new g(1),i=l=new g(0),t=new g(i),s=t.e=ed(m)-p.e-1,a=s%T,t.d[0]=ue(10,a<0?T+a:a),e==null)e=s>0?t:u;else{if(o=new g(e),!o.isInt()||o.lt(u))throw Error(Rt+o);e=o.gt(t)?s>0?t:u:o}for(_=!1,o=new g(fe(m)),c=g.precision,g.precision=s=m.length*T*2;d=z(o,t,0,1,1),n=r.plus(d.times(i)),n.cmp(e)!=1;)r=i,i=n,n=u,u=l.plus(d.times(n)),l=n,n=t,t=o.minus(d.times(n)),o=n;return n=z(e.minus(r),i,0,1,1),l=l.plus(n.times(u)),r=r.plus(n.times(i)),l.s=u.s=p.s,f=z(u,i,s,1).minus(p).abs().cmp(z(l,r,s,1).minus(p).abs())<1?[u,i]:[l,r],g.precision=c,_=!0,f};y.toHexadecimal=y.toHex=function(e,t){return ba(this,16,e,t)};y.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:Re(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(_=!1,r=z(r,e,0,t,1).times(e),_=!0,k(r)):(e.s=r.s,r=e),r};y.toNumber=function(){return+this};y.toOctal=function(e,t){return ba(this,8,e,t)};y.toPower=y.pow=function(e){var t,r,i,n,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new l(ue(+o,u));if(o=new l(o),o.eq(1))return o;if(i=l.precision,s=l.rounding,e.eq(1))return k(o,i,s);if(t=me(e.e/T),t>=e.d.length-1&&(r=u<0?-u:u)<=Nx)return n=td(l,o,r,i),e.s<0?new l(1).div(n):k(n,i,s);if(a=o.s,a<0){if(t<e.d.length-1)return new l(NaN);if((e.d[t]&1)==0&&(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return r=ue(+o,u),t=r==0||!isFinite(r)?me(u*(Math.log("0."+fe(o.d))/Math.LN10+o.e+1)):new l(r+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(_=!1,l.rounding=o.s=1,r=Math.min(12,(t+"").length),n=zs(e.times(St(o,i+r)),i),n.d&&(n=k(n,i+5,1),Hr(n.d,i,s)&&(t=i+10,n=k(zs(e.times(St(o,t+r)),t),t+5,1),+fe(n.d).slice(i+1,i+15)+1==1e14&&(n=k(n,i+1,0)))),n.s=a,_=!0,l.rounding=s,k(n,i,s))};y.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Xe(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(Re(e,1,Tt),t===void 0?t=n.rounding:Re(t,0,8),i=k(new n(i),e,t),r=Xe(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toSignificantDigits=y.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(Re(e,1,Tt),t===void 0?t=i.rounding:Re(t,0,8)),k(new i(r),e,t)};y.toString=function(){var e=this,t=e.constructor,r=Xe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};y.truncated=y.trunc=function(){return k(new this.constructor(this),this.e+1,1)};y.valueOf=y.toJSON=function(){var e=this,t=e.constructor,r=Xe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function fe(e){var t,r,i,n=e.length-1,s="",a=e[0];if(n>0){for(s+=a,t=1;t<n;t++)i=e[t]+"",r=T-i.length,r&&(s+=wt(r)),s+=i;a=e[t],i=a+"",r=T-i.length,r&&(s+=wt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function Re(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rt+e)}function Hr(e,t,r,i){var n,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=T,n=0):(n=Math.ceil((t+1)/T),t%=T),s=ue(10,T-t),o=e[n]%s|0,i==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),a=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):a=(r<4&&o+1==s||r>3&&o+1==s/2)&&(e[n+1]/s/100|0)==ue(10,t-2)-1||(o==s/2||o==0)&&(e[n+1]/s/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),a=(i||r<4)&&o==9999||!i&&r>3&&o==4999):a=((i||r<4)&&o+1==s||!i&&r>3&&o+1==s/2)&&(e[n+1]/s/1e3|0)==ue(10,t-3)-1,a}function Ci(e,t,r){for(var i,n=[0],s,a=0,o=e.length;a<o;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=Hs.indexOf(e.charAt(a++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function Lx(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/Xi(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=or(e,1,t.times(n),new e(1));for(var s=r;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var z=(function(){function e(i,n,s){var a,o=0,l=i.length;for(i=i.slice();l--;)a=i[l]*n+o,i[l]=a%s|0,o=a/s|0;return o&&i.unshift(o),i}function t(i,n,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=n[o]){l=i[o]>n[o]?1:-1;break}return l}function r(i,n,s,a){for(var o=0;s--;)i[s]-=o,o=i[s]<n[s]?1:0,i[s]=o*a+i[s]-n[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,s,a,o,l){var u,c,d,f,p,m,g,E,I,C,S,O,K,A,b,R,q,G,M,D,j=i.constructor,re=i.s==n.s?1:-1,H=i.d,F=n.d;if(!H||!H[0]||!F||!F[0])return new j(!i.s||!n.s||(H?F&&H[0]==F[0]:!F)?NaN:H&&H[0]==0||!F?re*0:re/0);for(l?(p=1,c=i.e-n.e):(l=Ve,p=T,c=me(i.e/p)-me(n.e/p)),M=F.length,q=H.length,I=new j(re),C=I.d=[],d=0;F[d]==(H[d]||0);d++);if(F[d]>(H[d]||0)&&c--,s==null?(A=s=j.precision,a=j.rounding):o?A=s+(i.e-n.e)+1:A=s,A<0)C.push(1),m=!0;else{if(A=A/p+2|0,d=0,M==1){for(f=0,F=F[0],A++;(d<q||f)&&A--;d++)b=f*l+(H[d]||0),C[d]=b/F|0,f=b%F|0;m=f||d<q}else{for(f=l/(F[0]+1)|0,f>1&&(F=e(F,f,l),H=e(H,f,l),M=F.length,q=H.length),R=M,S=H.slice(0,M),O=S.length;O<M;)S[O++]=0;D=F.slice(),D.unshift(0),G=F[0],F[1]>=l/2&&++G;do f=0,u=t(F,S,M,O),u<0?(K=S[0],M!=O&&(K=K*l+(S[1]||0)),f=K/G|0,f>1?(f>=l&&(f=l-1),g=e(F,f,l),E=g.length,O=S.length,u=t(g,S,E,O),u==1&&(f--,r(g,M<E?D:F,E,l))):(f==0&&(u=f=1),g=F.slice()),E=g.length,E<O&&g.unshift(0),r(S,g,O,l),u==-1&&(O=S.length,u=t(F,S,M,O),u<1&&(f++,r(S,M<O?D:F,O,l))),O=S.length):u===0&&(f++,S=[0]),C[d++]=f,u&&S[0]?S[O++]=H[R]||0:(S=[H[R]],O=1);while((R++<q||S[0]!==void 0)&&A--);m=S[0]!==void 0}C[0]||C.shift()}if(p==1)I.e=c,Jc=m;else{for(d=1,f=C[0];f>=10;f/=10)d++;I.e=d+c*p-1,k(I,o?s+I.e+1:s,a,m)}return I}})();function k(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(n=1,o=d[0];o>=10;o/=10)n++;if(s=t-n,s<0)s+=T,a=t,c=d[f=0],l=c/ue(10,n-a-1)%10|0;else if(f=Math.ceil((s+1)/T),o=d.length,f>=o)if(i){for(;o++<=f;)d.push(0);c=l=0,n=1,s%=T,a=s-T+1}else break e;else{for(c=o=d[f],n=1;o>=10;o/=10)n++;s%=T,a=s-T+n,l=a<0?0:c/ue(10,n-a-1)%10|0}if(i=i||t<0||d[f+1]!==void 0||(a<0?c:c%ue(10,n-a-1)),u=r<4?(l||i)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||i||r==6&&(s>0?a>0?c/ue(10,n-a):0:d[f-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=ue(10,(T-t%T)%T),e.e=-t||0):d[0]=e.e=0,e;if(s==0?(d.length=f,o=1,f--):(d.length=f+1,o=ue(10,T-s),d[f]=a>0?(c/ue(10,n-a)%ue(10,a)|0)*o:0),u)for(;;)if(f==0){for(s=1,a=d[0];a>=10;a/=10)s++;for(a=d[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,d[0]==Ve&&(d[0]=1));break}else{if(d[f]+=o,d[f]!=Ve)break;d[f--]=0,o=1}for(s=d.length;d[--s]===0;)d.pop()}return _&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Xe(e,t,r){if(!e.isFinite())return id(e);var i,n=e.e,s=fe(e.d),a=s.length;return t?(r&&(i=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+wt(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):n<0?(s="0."+wt(-n-1)+s,r&&(i=r-a)>0&&(s+=wt(i))):n>=a?(s+=wt(n+1-a),r&&(i=r-n-1)>0&&(s=s+"."+wt(i))):((i=n+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-a)>0&&(n+1===a&&(s+="."),s+=wt(i))),s}function Yi(e,t){var r=e[0];for(t*=T;r>=10;r/=10)t++;return t}function Bi(e,t,r){if(t>Dx)throw _=!0,r&&(e.precision=r),Error(Wc);return k(new e(ji),t,1,!0)}function We(e,t,r){if(t>Ks)throw Error(Wc);return k(new e(Vi),t,r,!0)}function ed(e){var t=e.length-1,r=t*T+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function wt(e){for(var t="";e--;)t+="0";return t}function td(e,t,r,i){var n,s=new e(1),a=Math.ceil(i/T+4);for(_=!1;;){if(r%2&&(s=s.times(t),Nu(s.d,a)&&(n=!0)),r=me(r/2),r===0){r=s.d.length-1,n&&s.d[r]===0&&++s.d[r];break}t=t.times(t),Nu(t.d,a)}return _=!0,s}function Pu(e){return e.d[e.d.length-1]&1}function rd(e,t,r){for(var i,n,s=new e(t[0]),a=0;++a<t.length;){if(n=new e(t[a]),!n.s){s=n;break}i=s.cmp(n),(i===r||i===0&&s.s===r)&&(s=n)}return s}function zs(e,t){var r,i,n,s,a,o,l,u=0,c=0,d=0,f=e.constructor,p=f.rounding,m=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(_=!1,l=m):l=t,o=new f(.03125);e.e>-2;)e=e.times(o),d+=5;for(i=Math.log(ue(2,d))/Math.LN10*2+5|0,l+=i,r=s=a=new f(1),f.precision=l;;){if(s=k(s.times(e),l,1),r=r.times(++c),o=a.plus(z(s,r,l,1)),fe(o.d).slice(0,l)===fe(a.d).slice(0,l)){for(n=d;n--;)a=k(a.times(a),l,1);if(t==null)if(u<3&&Hr(a.d,l-i,p,u))f.precision=l+=10,r=s=o=new f(1),c=0,u++;else return k(a,f.precision=m,p,_=!0);else return f.precision=m,a}a=o}}function St(e,t){var r,i,n,s,a,o,l,u,c,d,f,p=1,m=10,g=e,E=g.d,I=g.constructor,C=I.rounding,S=I.precision;if(g.s<0||!E||!E[0]||!g.e&&E[0]==1&&E.length==1)return new I(E&&!E[0]?-1/0:g.s!=1?NaN:E?0:g);if(t==null?(_=!1,c=S):c=t,I.precision=c+=m,r=fe(E),i=r.charAt(0),Math.abs(s=g.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)g=g.times(e),r=fe(g.d),i=r.charAt(0),p++;s=g.e,i>1?(g=new I("0."+r),s++):g=new I(i+"."+r.slice(1))}else return u=Bi(I,c+2,S).times(s+""),g=St(new I(i+"."+r.slice(1)),c-m).plus(u),I.precision=S,t==null?k(g,S,C,_=!0):g;for(d=g,l=a=g=z(g.minus(1),g.plus(1),c,1),f=k(g.times(g),c,1),n=3;;){if(a=k(a.times(f),c,1),u=l.plus(z(a,new I(n),c,1)),fe(u.d).slice(0,c)===fe(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(Bi(I,c+2,S).times(s+""))),l=z(l,new I(p),c,1),t==null)if(Hr(l.d,c-m,C,o))I.precision=c+=m,u=a=g=z(d.minus(1),d.plus(1),c,1),f=k(g.times(g),c,1),n=o=1;else return k(l,I.precision=S,C,_=!0);else return I.precision=S,l;l=u,n+=2}}function id(e){return String(e.s*e.s/0)}function Pi(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%T,r<0&&(i+=T),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=T;i<n;)e.d.push(+t.slice(i,i+=T));t=t.slice(i),i=T-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),_&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Ux(e,t){var r,i,n,s,a,o,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Zc.test(t))return Pi(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Cx.test(t))r=16,t=t.toLowerCase();else if(qx.test(t))r=2;else if(Px.test(t))r=8;else throw Error(Rt+t);for(s=t.search(/p/i),s>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),a=s>=0,i=e.constructor,a&&(t=t.replace(".",""),o=t.length,s=o-s,n=td(i,new i(r),s,s*2)),u=Ci(t,r,Ve),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new i(e.s*0):(e.e=Yi(u,c),e.d=u,_=!1,a&&(e=z(e,n,o*4)),l&&(e=e.times(Math.abs(l)<54?ue(2,l):zt.pow(2,l))),_=!0,e)}function Fx(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:or(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Xi(5,r)),t=or(e,2,t,t);for(var n,s=new e(5),a=new e(16),o=new e(20);r--;)n=t.times(t),t=t.times(s.plus(n.times(a.times(n).minus(o))));return t}function or(e,t,r,i,n){var s,a,o,l,u=1,c=e.precision,d=Math.ceil(c/T);for(_=!1,l=r.times(r),o=new e(i);;){if(a=z(o.times(l),new e(t++*t++),c,1),o=n?i.plus(a):i.minus(a),i=z(a.times(l),new e(t++*t++),c,1),a=o.plus(i),a.d[d]!==void 0){for(s=d;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=i,i=a,a=s,u++}return _=!0,a.d.length=d+1,a}function Xi(e,t){for(var r=e;--t;)r*=e;return r}function nd(e,t){var r,i=t.s<0,n=We(e,e.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return lt=i?4:1,t;if(r=t.divToInt(n),r.isZero())lt=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(s))return lt=Pu(r)?i?2:3:i?4:1,t;lt=Pu(r)?i?1:4:i?3:2}return t.minus(n).abs()}function ba(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor,m=r!==void 0;if(m?(Re(r,1,Tt),i===void 0?i=p.rounding:Re(i,0,8)):(r=p.precision,i=p.rounding),!e.isFinite())c=id(e);else{for(c=Xe(e),a=c.indexOf("."),m?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,a>=0&&(c=c.replace(".",""),f=new p(1),f.e=c.length-a,f.d=Ci(Xe(f),10,n),f.e=f.d.length),d=Ci(c,10,n),s=l=d.length;d[--l]==0;)d.pop();if(!d[0])c=m?"0p+0":"0";else{if(a<0?s--:(e=new p(e),e.d=d,e.e=s,e=z(e,f,r,i,0,n),d=e.d,s=e.e,u=Jc),a=d[r],o=n/2,u=u||d[r+1]!==void 0,u=i<4?(a!==void 0||u)&&(i===0||i===(e.s<0?3:2)):a>o||a===o&&(i===4||u||i===6&&d[r-1]&1||i===(e.s<0?8:7)),d.length=r,u)for(;++d[--r]>n-1;)d[r]=0,r||(++s,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,c="";a<l;a++)c+=Hs.charAt(d[a]);if(m){if(l>1)if(t==16||t==8){for(a=t==16?4:3,--l;l%a;l++)c+="0";for(d=Ci(c,n,t),l=d.length;!d[l-1];--l);for(a=1,c="1.";a<l;a++)c+=Hs.charAt(d[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Nu(e,t){if(e.length>t)return e.length=t,!0}function Mx(e){return new this(e).abs()}function $x(e){return new this(e).acos()}function jx(e){return new this(e).acosh()}function Vx(e,t){return new this(e).plus(t)}function Bx(e){return new this(e).asin()}function Gx(e){return new this(e).asinh()}function Hx(e){return new this(e).atan()}function Qx(e){return new this(e).atanh()}function Kx(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,s=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=We(this,s,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?We(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=We(this,s,1).times(.5),r.s=e.s):t.s<0?(this.precision=s,this.rounding=1,r=this.atan(z(e,t,s,1)),t=We(this,s,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(z(e,t,s,1)),r}function zx(e){return new this(e).cbrt()}function Jx(e){return k(e=new this(e),e.e+1,2)}function Wx(e,t,r){return new this(e).clamp(t,r)}function Yx(e){if(!e||typeof e!="object")throw Error(Wi+"Object expected");var t,r,i,n=e.defaults===!0,s=["precision",1,Tt,"rounding",0,8,"toExpNeg",-nr,0,"toExpPos",0,nr,"maxE",0,nr,"minE",-nr,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],n&&(this[r]=Qs[r]),(i=e[r])!==void 0)if(me(i)===i&&i>=s[t+1]&&i<=s[t+2])this[r]=i;else throw Error(Rt+r+": "+i);if(r="crypto",n&&(this[r]=Qs[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Yc);else this[r]=!1;else throw Error(Rt+r+": "+i);return this}function Xx(e){return new this(e).cos()}function Zx(e){return new this(e).cosh()}function sd(e){var t,r,i;function n(s){var a,o,l,u=this;if(!(u instanceof n))return new n(s);if(u.constructor=n,Du(s)){u.s=s.s,_?!s.d||s.e>n.maxE?(u.e=NaN,u.d=null):s.e<n.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;_?a>n.maxE?(u.e=NaN,u.d=null):a<n.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Pi(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),Zc.test(s)?Pi(u,s):Ux(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,Pi(u,s.toString());throw Error(Rt+s)}if(n.prototype=y,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Yx,n.clone=sd,n.isDecimal=Du,n.abs=Mx,n.acos=$x,n.acosh=jx,n.add=Vx,n.asin=Bx,n.asinh=Gx,n.atan=Hx,n.atanh=Qx,n.atan2=Kx,n.cbrt=zx,n.ceil=Jx,n.clamp=Wx,n.cos=Xx,n.cosh=Zx,n.div=ev,n.exp=tv,n.floor=rv,n.hypot=iv,n.ln=nv,n.log=sv,n.log10=ov,n.log2=av,n.max=lv,n.min=uv,n.mod=cv,n.mul=dv,n.pow=fv,n.random=pv,n.round=hv,n.sign=mv,n.sin=gv,n.sinh=yv,n.sqrt=bv,n.sub=xv,n.sum=vv,n.tan=wv,n.tanh=Sv,n.trunc=Ev,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function ev(e,t){return new this(e).div(t)}function tv(e){return new this(e).exp()}function rv(e){return k(e=new this(e),e.e+1,3)}function iv(){var e,t,r=new this(0);for(_=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return _=!0,new this(1/0);r=t}return _=!0,r.sqrt()}function Du(e){return e instanceof zt||e&&e.toStringTag===Xc||!1}function nv(e){return new this(e).ln()}function sv(e,t){return new this(e).log(t)}function av(e){return new this(e).log(2)}function ov(e){return new this(e).log(10)}function lv(){return rd(this,arguments,-1)}function uv(){return rd(this,arguments,1)}function cv(e,t){return new this(e).mod(t)}function dv(e,t){return new this(e).mul(t)}function fv(e,t){return new this(e).pow(t)}function pv(e){var t,r,i,n,s=0,a=new this(1),o=[];if(e===void 0?e=this.precision:Re(e,1,Tt),i=Math.ceil(e/T),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));s<i;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);s<i;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(n%1e7),s+=4);s=i/4}else throw Error(Yc);else for(;s<i;)o[s++]=Math.random()*1e7|0;for(i=o[--s],e%=T,i&&e&&(n=ue(10,T-e),o[s]=(i/n|0)*n);o[s]===0;s--)o.pop();if(s<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=T)o.shift();for(i=1,n=o[0];n>=10;n/=10)i++;i<T&&(r-=T-i)}return a.e=r,a.d=o,a}function hv(e){return k(e=new this(e),e.e+1,this.rounding)}function mv(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function gv(e){return new this(e).sin()}function yv(e){return new this(e).sinh()}function bv(e){return new this(e).sqrt()}function xv(e,t){return new this(e).sub(t)}function vv(){var e=0,t=arguments,r=new this(t[e]);for(_=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return _=!0,k(r,this.precision,this.rounding)}function wv(e){return new this(e).tan()}function Sv(e){return new this(e).tanh()}function Ev(e){return k(e=new this(e),e.e+1,1)}y[Symbol.for("nodejs.util.inspect.custom")]=y.toString;y[Symbol.toStringTag]="Decimal";var zt=y.constructor=sd(Qs);ji=new zt(ji);Vi=new zt(Vi);var Zi=zt;function xa(e){return zt.isDecimal(e)?!0:e!==null&&typeof e=="object"&&typeof e.s=="number"&&typeof e.e=="number"&&typeof e.toFixed=="function"&&Array.isArray(e.d)}var ad={};Kt(ad,{ModelAction:()=>en,datamodelEnumToSchemaEnum:()=>Av});function Av(e){return{name:e.name,values:e.values.map(t=>t.name)}}var en=(e=>(e.findUnique="findUnique",e.findUniqueOrThrow="findUniqueOrThrow",e.findFirst="findFirst",e.findFirstOrThrow="findFirstOrThrow",e.findMany="findMany",e.create="create",e.createMany="createMany",e.createManyAndReturn="createManyAndReturn",e.update="update",e.updateMany="updateMany",e.updateManyAndReturn="updateManyAndReturn",e.upsert="upsert",e.delete="delete",e.deleteMany="deleteMany",e.groupBy="groupBy",e.count="count",e.aggregate="aggregate",e.findRaw="findRaw",e.aggregateRaw="aggregateRaw",e))(en||{}),kv=Q(yc()),Rv=Q(require("node:fs")),Tv={keyword:Gt,entity:Gt,value:e=>je(Nr(e)),punctuation:Nr,directive:Gt,function:Gt,variable:e=>je(Nr(e)),string:e=>je($r(e)),boolean:zr,number:Gt,comment:ua},Iv=e=>e,Ii={},Ov=0,N={manual:Ii.Prism&&Ii.Prism.manual,disableWorkerMessageHandler:Ii.Prism&&Ii.Prism.disableWorkerMessageHandler,util:{encode:function(e){if(e instanceof ze){let t=e;return new ze(t.type,N.util.encode(t.content),t.alias)}else return Array.isArray(e)?e.map(N.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++Ov}),e.__id},clone:function e(t,r){let i,n,s=N.util.type(t);switch(r=r||{},s){case"Object":if(n=N.util.objId(t),r[n])return r[n];i={},r[n]=i;for(let a in t)t.hasOwnProperty(a)&&(i[a]=e(t[a],r));return i;case"Array":return n=N.util.objId(t),r[n]?r[n]:(i=[],r[n]=i,t.forEach(function(a,o){i[o]=e(a,r)}),i);default:return t}}},languages:{extend:function(e,t){let r=N.util.clone(N.languages[e]);for(let i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){i=i||N.languages;let n=i[e],s={};for(let o in n)if(n.hasOwnProperty(o)){if(o==t)for(let l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);r.hasOwnProperty(o)||(s[o]=n[o])}let a=i[e];return i[e]=s,N.languages.DFS(N.languages,function(o,l){l===a&&o!=e&&(this[o]=s)}),s},DFS:function e(t,r,i,n){n=n||{};let s=N.util.objId;for(let a in t)if(t.hasOwnProperty(a)){r.call(t,a,t[a],i||a);let o=t[a],l=N.util.type(o);l==="Object"&&!n[s(o)]?(n[s(o)]=!0,e(o,r,null,n)):l==="Array"&&!n[s(o)]&&(n[s(o)]=!0,e(o,r,a,n))}}},plugins:{},highlight:function(e,t,r){let i={code:e,grammar:t,language:r};return N.hooks.run("before-tokenize",i),i.tokens=N.tokenize(i.code,i.grammar),N.hooks.run("after-tokenize",i),ze.stringify(N.util.encode(i.tokens),i.language)},matchGrammar:function(e,t,r,i,n,s,a){for(let g in r){if(!r.hasOwnProperty(g)||!r[g])continue;if(g==a)return;let E=r[g];E=N.util.type(E)==="Array"?E:[E];for(let I=0;I<E.length;++I){let C=E[I],S=C.inside,O=!!C.lookbehind,K=!!C.greedy,A=0,b=C.alias;if(K&&!C.pattern.global){let R=C.pattern.toString().match(/[imuy]*$/)[0];C.pattern=RegExp(C.pattern.source,R+"g")}C=C.pattern||C;for(let R=i,q=n;R<t.length;q+=t[R].length,++R){let G=t[R];if(t.length>e.length)return;if(G instanceof ze)continue;if(K&&R!=t.length-1){C.lastIndex=q;var d=C.exec(e);if(!d)break;var c=d.index+(O?d[1].length:0),f=d.index+d[0].length,o=R,l=q;for(let F=t.length;o<F&&(l<f||!t[o].type&&!t[o-1].greedy);++o)l+=t[o].length,c>=l&&(++R,q=l);if(t[R]instanceof ze)continue;u=o-R,G=e.slice(q,l),d.index-=q}else{C.lastIndex=0;var d=C.exec(G),u=1}if(!d){if(s)break;continue}O&&(A=d[1]?d[1].length:0);var c=d.index+A,d=d[0].slice(A),f=c+d.length,p=G.slice(0,c),m=G.slice(f);let M=[R,u];p&&(++R,q+=p.length,M.push(p));let D=new ze(g,S?N.tokenize(d,S):d,b,d,K);if(M.push(D),m&&M.push(m),Array.prototype.splice.apply(t,M),u!=1&&N.matchGrammar(e,t,r,R,q,!0,g),s)break}}}},tokenize:function(e,t){let r=[e],i=t.rest;if(i){for(let n in i)t[n]=i[n];delete t.rest}return N.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){let r=N.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){let r=N.hooks.all[e];if(!(!r||!r.length))for(var i=0,n;n=r[i++];)n(t)}},Token:ze};N.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};N.languages.javascript=N.languages.extend("clike",{"class-name":[N.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});N.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;N.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:N.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:N.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:N.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:N.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});N.languages.markup&&N.languages.markup.tag.addInlined("script","javascript");N.languages.js=N.languages.javascript;N.languages.typescript=N.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});N.languages.ts=N.languages.typescript;function ze(e,t,r,i,n){this.type=e,this.content=t,this.alias=r,this.length=(i||"").length|0,this.greedy=!!n}ze.stringify=function(e,t){return typeof e=="string"?e:Array.isArray(e)?e.map(function(r){return ze.stringify(r,t)}).join(""):_v(e.type)(e.content)};function _v(e){return Tv[e]||Iv}function qv(e){return Cv(e,N.languages.javascript)}function Cv(e,t){return N.tokenize(e,t).map(r=>ze.stringify(r)).join("")}function Pv(e){return lx(e)}var Nv=class Vt{firstLineNumber;lines;static read(t){let r;try{r=Rv.default.readFileSync(t,"utf-8")}catch{return null}return Vt.fromContent(r)}static fromContent(t){let r=t.split(/\r?\n/);return new Vt(1,r)}constructor(t,r){this.firstLineNumber=t,this.lines=r}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(t,r){if(t<this.firstLineNumber||t>this.lines.length+this.firstLineNumber)return this;let i=t-this.firstLineNumber,n=[...this.lines];return n[i]=r(n[i]),new Vt(this.firstLineNumber,n)}mapLines(t){return new Vt(this.firstLineNumber,this.lines.map((r,i)=>t(r,this.firstLineNumber+i)))}lineAt(t){return this.lines[t-this.firstLineNumber]}prependSymbolAt(t,r){return this.mapLines((i,n)=>n===t?`${r} ${i}`:`  ${i}`)}slice(t,r){let i=this.lines.slice(t-1,r).join(`
`);return new Vt(t,Pv(i).split(`
`))}highlight(){let t=qv(this.toString());return new Vt(this.firstLineNumber,t.split(`
`))}toString(){return this.lines.join(`
`)}},Dv={red:Ht,gray:ua,dim:Kr,bold:je,underline:Ce,highlightSource:e=>e.highlight()},Lv={red:e=>e,gray:e=>e,dim:e=>e,bold:e=>e,underline:e=>e,highlightSource:e=>e};function Uv({message:e,originalMethod:t,isPanic:r,callArguments:i}){return{functionName:`prisma.${t}()`,message:e,isPanic:r??!1,callArguments:i}}function Fv({callsite:e,message:t,originalMethod:r,isPanic:i,callArguments:n},s){let a=Uv({message:t,originalMethod:r,isPanic:i,callArguments:n});if(!e||typeof window<"u"||process.env.NODE_ENV==="production")return a;let o=e.getLocation();if(!o||!o.lineNumber||!o.columnNumber)return a;let l=Math.max(1,o.lineNumber-3),u=Nv.read(o.fileName)?.slice(l,o.lineNumber),c=u?.lineAt(o.lineNumber);if(u&&c){let d=$v(c),f=Mv(c);if(!f)return a;a.functionName=`${f.code})`,a.location=o,i||(u=u.mapLineAt(o.lineNumber,m=>m.slice(0,f.openingBraceIndex))),u=s.highlightSource(u);let p=String(u.lastLineNumber).length;if(a.contextLines=u.mapLines((m,g)=>s.gray(String(g).padStart(p))+" "+m).mapLines(m=>s.dim(m)).prependSymbolAt(o.lineNumber,s.bold(s.red("\u2192"))),n){let m=d+p+1;m+=2,a.callArguments=(0,kv.default)(n,m).slice(m)}}return a}function Mv(e){let t=Object.keys(en).join("|"),r=new RegExp(String.raw`\.(${t})\(`).exec(e);if(r){let i=r.index+r[0].length,n=e.lastIndexOf(" ",r.index)+1;return{code:e.slice(n,i),openingBraceIndex:i}}return null}function $v(e){let t=0;for(let r=0;r<e.length;r++){if(e.charAt(r)!==" ")return t;t++}return t}function jv({functionName:e,location:t,message:r,isPanic:i,contextLines:n,callArguments:s},a){let o=[""],l=t?" in":":";if(i?(o.push(a.red(`Oops, an unknown error occurred! This is ${a.bold("on us")}, you did nothing wrong.`)),o.push(a.red(`It occurred in the ${a.bold(`\`${e}\``)} invocation${l}`))):o.push(a.red(`Invalid ${a.bold(`\`${e}\``)} invocation${l}`)),t&&o.push(a.underline(Vv(t))),n){o.push("");let u=[n.toString()];s&&(u.push(s),u.push(a.dim(")"))),o.push(u.join("")),s&&o.push("")}else o.push(""),s&&o.push(s),o.push("");return o.push(r),o.join(`
`)}function Vv(e){let t=[e.fileName];return e.lineNumber&&t.push(String(e.lineNumber)),e.columnNumber&&t.push(String(e.columnNumber)),t.join(":")}function od(e){let t=e.showColors?Dv:Lv,r;return r=Fv(e,t),jv(r,t)}var Bv=Q(bc());function Gv(e,t,r){let i=ld(e),n=Hv(i),s=Kv(n);s?hd(s,t,r):t.addErrorMessage(()=>"Unknown error")}function ld(e){return e.errors.flatMap(t=>t.kind==="Union"?ld(t):[t])}function Hv(e){let t=new Map,r=[];for(let i of e){if(i.kind!=="InvalidArgumentType"){r.push(i);continue}let n=`${i.selectionPath.join(".")}:${i.argumentPath.join(".")}`,s=t.get(n);s?t.set(n,{...i,argument:{...i.argument,typeNames:Qv(s.argument.typeNames,i.argument.typeNames)}}):t.set(n,i)}return r.push(...t.values()),r}function Qv(e,t){return[...new Set(e.concat(t))]}function Kv(e){return Ix(e,(t,r)=>{let i=Lu(t),n=Lu(r);return i!==n?i-n:Uu(t)-Uu(r)})}function Lu(e){let t=0;return Array.isArray(e.selectionPath)&&(t+=e.selectionPath.length),Array.isArray(e.argumentPath)&&(t+=e.argumentPath.length),t}function Uu(e){switch(e.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var Ze=class{constructor(e,t){this.name=e,this.value=t}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(e){let{colors:{green:t}}=e.context;e.addMarginSymbol(t(this.isRequired?"+":"?")),e.write(t(this.name)),this.isRequired||e.write(t("?")),e.write(t(": ")),typeof this.value=="string"?e.write(t(this.value)):e.write(this.value)}};wb();var ud=class{constructor(e=0,t){this.context=t,this.currentIndent=e}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(e){return typeof e=="string"?this.currentLine+=e:e.write(this),this}writeJoined(e,t,r=(i,n)=>n.write(i)){let i=t.length-1;for(let n=0;n<t.length;n++)r(t[n],this),n!==i&&this.write(e);return this}writeLine(e){return this.write(e).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let e=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,e?.(),this}withIndent(e){return this.indent(),e(this),this.unindent(),this}afterNextNewline(e){return this.afterNextNewLineCallback=e,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(e){return this.marginSymbol=e,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let e=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+e.slice(1):e}};vb();var zv=class{constructor(e){this.value=e}write(e){e.write(this.value)}markAsError(){this.value.markAsError()}},Oi=e=>e,cd={bold:Oi,red:Oi,green:Oi,dim:Oi,enabled:!1},Jv={bold:je,red:Ht,green:$r,dim:Kr,enabled:!0},va={write(e){e.writeLine(",")}},tn=class{constructor(e){this.contents=e}isUnderlined=!1;color=e=>e;underline(){return this.isUnderlined=!0,this}setColor(e){return this.color=e,this}write(e){let t=e.getCurrentLineLength();e.write(this.color(this.contents)),this.isUnderlined&&e.afterNextNewline(()=>{e.write(" ".repeat(t)).writeLine(this.color("~".repeat(this.contents.length)))})}},wa=class{hasError=!1;markAsError(){return this.hasError=!0,this}},dd=class extends wa{items=[];addItem(e){return this.items.push(new zv(e)),this}getField(e){return this.items[e]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(e=>e.value.getPrintWidth()))+2}write(e){if(this.items.length===0){this.writeEmpty(e);return}this.writeWithItems(e)}writeEmpty(e){let t=new tn("[]");this.hasError&&t.setColor(e.context.colors.red).underline(),e.write(t)}writeWithItems(e){let{colors:t}=e.context;e.writeLine("[").withIndent(()=>e.writeJoined(va,this.items).newLine()).write("]"),this.hasError&&e.afterNextNewline(()=>{e.writeLine(t.red("~".repeat(this.getPrintWidth())))})}asObject(){}},fd=class Ni extends wa{fields={};suggestions=[];addField(t){this.fields[t.name]=t}addSuggestion(t){this.suggestions.push(t)}getField(t){return this.fields[t]}getDeepField(t){let[r,...i]=t,n=this.getField(r);if(!n)return;let s=n;for(let a of i){let o;if(s.value instanceof Ni?o=s.value.getField(a):s.value instanceof dd&&(o=s.value.getField(Number(a))),!o)return;s=o}return s}getDeepFieldValue(t){return t.length===0?this:this.getDeepField(t)?.value}hasField(t){return!!this.getField(t)}removeAllFields(){this.fields={}}removeField(t){delete this.fields[t]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(t){return this.getField(t)?.value}getDeepSubSelectionValue(t){let r=this;for(let i of t){if(!(r instanceof Ni))return;let n=r.getSubSelectionValue(i);if(!n)return;r=n}return r}getDeepSelectionParent(t){let r=this.getSelectionParent();if(!r)return;let i=r;for(let n of t){let s=i.value.getFieldValue(n);if(!s||!(s instanceof Ni))return;let a=s.getSelectionParent();if(!a)return;i=a}return i}getSelectionParent(){let t=this.getField("select")?.value.asObject();if(t)return{kind:"select",value:t};let r=this.getField("include")?.value.asObject();if(r)return{kind:"include",value:r}}getSubSelectionValue(t){return this.getSelectionParent()?.value.fields[t].value}getPrintWidth(){let t=Object.values(this.fields);return t.length==0?2:Math.max(...t.map(r=>r.getPrintWidth()))+2}write(t){let r=Object.values(this.fields);if(r.length===0&&this.suggestions.length===0){this.writeEmpty(t);return}this.writeWithContents(t,r)}asObject(){return this}writeEmpty(t){let r=new tn("{}");this.hasError&&r.setColor(t.context.colors.red).underline(),t.write(r)}writeWithContents(t,r){t.writeLine("{").withIndent(()=>{t.writeJoined(va,[...r,...this.suggestions]).newLine()}),t.write("}"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(t.context.colors.red("~".repeat(this.getPrintWidth())))})}},ke=class extends wa{constructor(e){super(),this.text=e}getPrintWidth(){return this.text.length}write(e){let t=new tn(this.text);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t)}asObject(){}},pd=class{fields=[];addField(e,t){return this.fields.push({write(r){let{green:i,dim:n}=r.context.colors;r.write(i(n(`${e}: ${t}`))).addMarginSymbol(i(n("+")))}}),this}write(e){let{colors:{green:t}}=e.context;e.writeLine(t("{")).withIndent(()=>{e.writeJoined(va,this.fields).newLine()}).write(t("}")).addMarginSymbol(t("+"))}};function hd(e,t,r){switch(e.kind){case"MutuallyExclusiveFields":Wv(e,t);break;case"IncludeOnScalar":Yv(e,t);break;case"EmptySelection":Xv(e,t,r);break;case"UnknownSelectionField":rw(e,t);break;case"InvalidSelectionValue":iw(e,t);break;case"UnknownArgument":nw(e,t);break;case"UnknownInputField":sw(e,t);break;case"RequiredArgumentMissing":aw(e,t);break;case"InvalidArgumentType":ow(e,t);break;case"InvalidArgumentValue":lw(e,t);break;case"ValueTooLarge":uw(e,t);break;case"SomeFieldsMissing":cw(e,t);break;case"TooManyFieldsGiven":dw(e,t);break;case"Union":Gv(e,t,r);break;default:throw new Error("not implemented: "+e.kind)}}function Wv(e,t){let r=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();r&&(r.getField(e.firstField)?.markAsError(),r.getField(e.secondField)?.markAsError()),t.addErrorMessage(i=>`Please ${i.bold("either")} use ${i.green(`\`${e.firstField}\``)} or ${i.green(`\`${e.secondField}\``)}, but ${i.red("not both")} at the same time.`)}function Yv(e,t){let[r,i]=lr(e.selectionPath),n=e.outputType,s=t.arguments.getDeepSelectionParent(r)?.value;if(s&&(s.getField(i)?.markAsError(),n))for(let a of n.fields)a.isRelation&&s.addSuggestion(new Ze(a.name,"true"));t.addErrorMessage(a=>{let o=`Invalid scalar field ${a.red(`\`${i}\``)} for ${a.bold("include")} statement`;return n?o+=` on model ${a.bold(n.name)}. ${Yr(a)}`:o+=".",o+=`
Note that ${a.bold("include")} statements only accept relation fields.`,o})}function Xv(e,t,r){let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getField("omit")?.value.asObject();if(n){Zv(e,t,n);return}if(i.hasField("select")){ew(e,t);return}}if(r?.[Ji(e.outputType.name)]){tw(e,t);return}t.addErrorMessage(()=>`Unknown field at "${e.selectionPath.join(".")} selection"`)}function Zv(e,t,r){r.removeAllFields();for(let i of e.outputType.fields)r.addSuggestion(new Ze(i.name,"false"));t.addErrorMessage(i=>`The ${i.red("omit")} statement includes every field of the model ${i.bold(e.outputType.name)}. At least one field must be included in the result`)}function ew(e,t){let r=e.outputType,i=t.arguments.getDeepSelectionParent(e.selectionPath)?.value,n=i?.isEmpty()??!1;i&&(i.removeAllFields(),yd(i,r)),t.addErrorMessage(s=>n?`The ${s.red("`select`")} statement for type ${s.bold(r.name)} must not be empty. ${Yr(s)}`:`The ${s.red("`select`")} statement for type ${s.bold(r.name)} needs ${s.bold("at least one truthy value")}.`)}function tw(e,t){let r=new pd;for(let n of e.outputType.fields)n.isRelation||r.addField(n.name,"false");let i=new Ze("omit",r).makeRequired();if(e.selectionPath.length===0)t.arguments.addSuggestion(i);else{let[n,s]=lr(e.selectionPath),a=t.arguments.getDeepSelectionParent(n)?.value.asObject()?.getField(s);if(a){let o=a?.value.asObject()??new fd;o.addSuggestion(i),a.value=o}}t.addErrorMessage(n=>`The global ${n.red("omit")} configuration excludes every field of the model ${n.bold(e.outputType.name)}. At least one field must be included in the result`)}function rw(e,t){let r=bd(e.selectionPath,t);if(r.parentKind!=="unknown"){r.field.markAsError();let i=r.parent;switch(r.parentKind){case"select":yd(i,e.outputType);break;case"include":fw(i,e.outputType);break;case"omit":pw(i,e.outputType);break}}t.addErrorMessage(i=>{let n=[`Unknown field ${i.red(`\`${r.fieldName}\``)}`];return r.parentKind!=="unknown"&&n.push(`for ${i.bold(r.parentKind)} statement`),n.push(`on model ${i.bold(`\`${e.outputType.name}\``)}.`),n.push(Yr(i)),n.join(" ")})}function iw(e,t){let r=bd(e.selectionPath,t);r.parentKind!=="unknown"&&r.field.value.markAsError(),t.addErrorMessage(i=>`Invalid value for selection field \`${i.red(r.fieldName)}\`: ${e.underlyingError}`)}function nw(e,t){let r=e.argumentPath[0],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&(i.getField(r)?.markAsError(),hw(i,e.arguments)),t.addErrorMessage(n=>md(n,r,e.arguments.map(s=>s.name)))}function sw(e,t){let[r,i]=lr(e.argumentPath),n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){n.getDeepField(e.argumentPath)?.markAsError();let s=n.getDeepFieldValue(r)?.asObject();s&&xd(s,e.inputType)}t.addErrorMessage(s=>md(s,i,e.inputType.fields.map(a=>a.name)))}function md(e,t,r){let i=[`Unknown argument \`${e.red(t)}\`.`],n=gw(t,r);return n&&i.push(`Did you mean \`${e.green(n)}\`?`),r.length>0&&i.push(Yr(e)),i.join(" ")}function aw(e,t){let r;t.addErrorMessage(l=>r?.value instanceof ke&&r.value.text==="null"?`Argument \`${l.green(s)}\` must not be ${l.red("null")}.`:`Argument \`${l.green(s)}\` is missing.`);let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(!i)return;let[n,s]=lr(e.argumentPath),a=new pd,o=i.getDeepFieldValue(n)?.asObject();if(o){if(r=o.getField(s),r&&o.removeField(s),e.inputTypes.length===1&&e.inputTypes[0].kind==="object"){for(let l of e.inputTypes[0].fields)a.addField(l.name,l.typeNames.join(" | "));o.addSuggestion(new Ze(s,a).makeRequired())}else{let l=e.inputTypes.map(gd).join(" | ");o.addSuggestion(new Ze(s,l).makeRequired())}if(e.dependentArgumentPath){i.getDeepField(e.dependentArgumentPath)?.markAsError();let[,l]=lr(e.dependentArgumentPath);t.addErrorMessage(u=>`Argument \`${u.green(s)}\` is required because argument \`${u.green(l)}\` was provided.`)}}}function gd(e){return e.kind==="list"?`${gd(e.elementType)}[]`:e.name}function ow(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=rn("or",e.argument.typeNames.map(a=>n.green(a)));return`Argument \`${n.bold(r)}\`: Invalid value provided. Expected ${s}, provided ${n.red(e.inferredType)}.`})}function lw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=[`Invalid value for argument \`${n.bold(r)}\``];if(e.underlyingError&&s.push(`: ${e.underlyingError}`),s.push("."),e.argument.typeNames.length>0){let a=rn("or",e.argument.typeNames.map(o=>n.green(o)));s.push(` Expected ${a}.`)}return s.join("")})}function uw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n;if(i){let s=i.getDeepField(e.argumentPath)?.value;s?.markAsError(),s instanceof ke&&(n=s.text)}t.addErrorMessage(s=>{let a=["Unable to fit value"];return n&&a.push(s.red(n)),a.push(`into a 64-bit signed integer for field \`${s.bold(r)}\``),a.join(" ")})}function cw(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getDeepFieldValue(e.argumentPath)?.asObject();n&&xd(n,e.inputType)}t.addErrorMessage(n=>{let s=[`Argument \`${n.bold(r)}\` of type ${n.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1?e.constraints.requiredFields?s.push(`${n.green("at least one of")} ${rn("or",e.constraints.requiredFields.map(a=>`\`${n.bold(a)}\``))} arguments.`):s.push(`${n.green("at least one")} argument.`):s.push(`${n.green(`at least ${e.constraints.minFieldCount}`)} arguments.`),s.push(Yr(n)),s.join(" ")})}function dw(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n=[];if(i){let s=i.getDeepFieldValue(e.argumentPath)?.asObject();s&&(s.markAsError(),n=Object.keys(s.getFields()))}t.addErrorMessage(s=>{let a=[`Argument \`${s.bold(r)}\` of type ${s.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1&&e.constraints.maxFieldCount==1?a.push(`${s.green("exactly one")} argument,`):e.constraints.maxFieldCount==1?a.push(`${s.green("at most one")} argument,`):a.push(`${s.green(`at most ${e.constraints.maxFieldCount}`)} arguments,`),a.push(`but you provided ${rn("and",n.map(o=>s.red(o)))}. Please choose`),e.constraints.maxFieldCount===1?a.push("one."):a.push(`${e.constraints.maxFieldCount}.`),a.join(" ")})}function yd(e,t){for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new Ze(r.name,"true"))}function fw(e,t){for(let r of t.fields)r.isRelation&&!e.hasField(r.name)&&e.addSuggestion(new Ze(r.name,"true"))}function pw(e,t){for(let r of t.fields)!e.hasField(r.name)&&!r.isRelation&&e.addSuggestion(new Ze(r.name,"true"))}function hw(e,t){for(let r of t)e.hasField(r.name)||e.addSuggestion(new Ze(r.name,r.typeNames.join(" | ")))}function bd(e,t){let[r,i]=lr(e),n=t.arguments.getDeepSubSelectionValue(r)?.asObject();if(!n)return{parentKind:"unknown",fieldName:i};let s=n.getFieldValue("select")?.asObject(),a=n.getFieldValue("include")?.asObject(),o=n.getFieldValue("omit")?.asObject(),l=s?.getField(i);return s&&l?{parentKind:"select",parent:s,field:l,fieldName:i}:(l=a?.getField(i),a&&l?{parentKind:"include",field:l,parent:a,fieldName:i}:(l=o?.getField(i),o&&l?{parentKind:"omit",field:l,parent:o,fieldName:i}:{parentKind:"unknown",fieldName:i}))}function xd(e,t){if(t.kind==="object")for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new Ze(r.name,r.typeNames.join(" | ")))}function lr(e){let t=[...e],r=t.pop();if(!r)throw new Error("unexpected empty path");return[t,r]}function Yr({green:e,enabled:t}){return"Available options are "+(t?`listed in ${e("green")}`:"marked with ?")+"."}function rn(e,t){if(t.length===1)return t[0];let r=[...t],i=r.pop();return`${r.join(", ")} ${e} ${i}`}var mw=3;function gw(e,t){let r=1/0,i;for(let n of t){let s=(0,Bv.default)(e,n);s>mw||s<r&&(r=s,i=n)}return i}var vd=class{modelName;name;typeName;isList;isEnum;constructor(e,t,r,i,n){this.modelName=e,this.name=t,this.typeName=r,this.isList=i,this.isEnum=n}_toGraphQLInputType(){let e=this.isList?"List":"",t=this.isEnum?"Enum":"";return`${e}${t}${this.typeName}FieldRefInput<${this.modelName}>`}};function Sa(e){return e instanceof vd}var Di=Symbol(),Es=new WeakMap,nn=class{constructor(e){e===Di?Es.set(this,`Prisma.${this._getName()}`):Es.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return Es.get(this)}},Ea=class extends nn{_getNamespace(){return"NullTypes"}},Js=class extends Ea{#e};Aa(Js,"DbNull");var Ws=class extends Ea{#e};Aa(Ws,"JsonNull");var Ys=class extends Ea{#e};Aa(Ys,"AnyNull");var wd={classes:{DbNull:Js,JsonNull:Ws,AnyNull:Ys},instances:{DbNull:new Js(Di),JsonNull:new Ws(Di),AnyNull:new Ys(Di)}};function Aa(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Fu=": ",yw=class{constructor(e,t){this.name=e,this.value=t}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+Fu.length}write(e){let t=new tn(this.name);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t).write(Fu).write(this.value)}},bw=class{arguments;errorMessages=[];constructor(e){this.arguments=e}write(e){e.write(this.arguments)}addErrorMessage(e){this.errorMessages.push(e)}renderAllMessages(e){return this.errorMessages.map(t=>t(e)).join(`
`)}};function ka(e){return new bw(Sd(e))}function Sd(e){let t=new fd;for(let[r,i]of Object.entries(e)){let n=new yw(r,Ed(i));t.addField(n)}return t}function Ed(e){if(typeof e=="string")return new ke(JSON.stringify(e));if(typeof e=="number"||typeof e=="boolean")return new ke(String(e));if(typeof e=="bigint")return new ke(`${e}n`);if(e===null)return new ke("null");if(e===void 0)return new ke("undefined");if(xa(e))return new ke(`new Prisma.Decimal("${e.toFixed()}")`);if(e instanceof Uint8Array)return Buffer.isBuffer(e)?new ke(`Buffer.alloc(${e.byteLength})`):new ke(`new Uint8Array(${e.byteLength})`);if(e instanceof Date){let t=zc(e)?e.toISOString():"Invalid Date";return new ke(`new Date("${t}")`)}return e instanceof nn?new ke(`Prisma.${e._getName()}`):Sa(e)?new ke(`prisma.${Ji(e.modelName)}.$fields.${e.name}`):Array.isArray(e)?xw(e):typeof e=="object"?Sd(e):new ke(Object.prototype.toString.call(e))}function xw(e){let t=new dd;for(let r of e)t.addItem(Ed(r));return t}function Ad(e,t){let r=t==="pretty"?Jv:cd,i=e.renderAllMessages(r),n=new ud(0,{colors:r}).write(e).toString();return{message:i,args:n}}function kd({args:e,errors:t,errorFormat:r,callsite:i,originalMethod:n,clientVersion:s,globalOmit:a}){let o=ka(e);for(let d of t)hd(d,o,a);let{message:l,args:u}=Ad(o,r),c=od({message:l,callsite:i,originalMethod:n,showColors:r==="pretty",callArguments:u});throw new ot(c,{clientVersion:s})}function Xr(e){return e.replace(/^./,t=>t.toLowerCase())}function vw(e,t,r){let i=Xr(r);return!t.result||!(t.result.$allModels||t.result[i])?e:ww({...e,...Mu(t.name,e,t.result.$allModels),...Mu(t.name,e,t.result[i])})}function ww(e){let t=new Ur,r=(i,n)=>t.getOrCreate(i,()=>n.has(i)?[i]:(n.add(i),e[i]?e[i].needs.flatMap(s=>r(s,n)):[i]));return Hc(e,i=>({...i,needs:r(i.name,new Set)}))}function Mu(e,t,r){return r?Hc(r,({needs:i,compute:n},s)=>({name:s,needs:i?Object.keys(i).filter(a=>i[a]):[],compute:Sw(t,s,n)})):{}}function Sw(e,t,r){let i=e?.[t]?.compute;return i?n=>r({...n,[t]:i(n)}):r}function Ew(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(e[i.name])for(let n of i.needs)r[n]=!0;return r}function Aw(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(!e[i.name])for(let n of i.needs)delete r[n];return r}var $u=class{constructor(e,t){this.extension=e,this.previous=t}computedFieldsCache=new Ur;modelExtensionsCache=new Ur;queryCallbacksCache=new Ur;clientExtensions=Gs(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=Gs(()=>{let e=this.previous?.getAllBatchQueryCallbacks()??[],t=this.extension.query?.$__internalBatch;return t?e.concat(t):e});getAllComputedFields(e){return this.computedFieldsCache.getOrCreate(e,()=>vw(this.previous?.getAllComputedFields(e),this.extension,e))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(e){return this.modelExtensionsCache.getOrCreate(e,()=>{let t=Xr(e);return!this.extension.model||!(this.extension.model[t]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(e):{...this.previous?.getAllModelExtensions(e),...this.extension.model.$allModels,...this.extension.model[t]}})}getAllQueryCallbacks(e,t){return this.queryCallbacksCache.getOrCreate(`${e}:${t}`,()=>{let r=this.previous?.getAllQueryCallbacks(e,t)??[],i=[],n=this.extension.query;return!n||!(n[e]||n.$allModels||n[t]||n.$allOperations)?r:(n[e]!==void 0&&(n[e][t]!==void 0&&i.push(n[e][t]),n[e].$allOperations!==void 0&&i.push(n[e].$allOperations)),e!=="$none"&&n.$allModels!==void 0&&(n.$allModels[t]!==void 0&&i.push(n.$allModels[t]),n.$allModels.$allOperations!==void 0&&i.push(n.$allModels.$allOperations)),n[t]!==void 0&&i.push(n[t]),n.$allOperations!==void 0&&i.push(n.$allOperations),r.concat(i))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},Rd=class Li{constructor(t){this.head=t}static empty(){return new Li}static single(t){return new Li(new $u(t))}isEmpty(){return this.head===void 0}append(t){return new Li(new $u(t,this.head))}getAllComputedFields(t){return this.head?.getAllComputedFields(t)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(t){return this.head?.getAllModelExtensions(t)}getAllQueryCallbacks(t,r){return this.head?.getAllQueryCallbacks(t,r)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},Td=class{constructor(e){this.name=e}};function kw(e){return e instanceof Td}function Rw(e){return new Td(e)}var Id=Symbol(),Od=class{constructor(e){if(e!==Id)throw new Error("Skip instance can not be constructed directly")}ifUndefined(e){return e===void 0?_d:e}},_d=new Od(Id);function Qt(e){return e instanceof Od}var Tw={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},qd="explicitly `undefined` values are not allowed";function Cd({modelName:e,action:t,args:r,runtimeDataModel:i,extensions:n=Rd.empty(),callsite:s,clientMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c}){let d=new Lw({runtimeDataModel:i,modelName:e,action:t,rootArgs:r,callsite:s,extensions:n,selectionPath:[],argumentPath:[],originalMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c});return{modelName:e,action:Tw[t],query:Qr(r,d)}}function Qr({select:e,include:t,...r}={},i){let n=r.omit;return delete r.omit,{arguments:Nd(r,i),selection:Iw(e,t,n,i)}}function Iw(e,t,r,i){return e?(t?i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:i.getSelectionPath()}):r&&i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:i.getSelectionPath()}),Cw(e,i)):Ow(i,t,r)}function Ow(e,t,r){let i={};return e.modelOrType&&!e.isRawAction()&&(i.$composites=!0,i.$scalars=!0),t&&_w(i,t,e),qw(i,r,e),i}function _w(e,t,r){for(let[i,n]of Object.entries(t)){if(Qt(n))continue;let s=r.nestSelection(i);if(Ra(n,s),n===!1||n===void 0){e[i]=!1;continue}let a=r.findField(i);if(a&&a.kind!=="object"&&r.throwValidationError({kind:"IncludeOnScalar",selectionPath:r.getSelectionPath().concat(i),outputType:r.getOutputTypeDescription()}),a){e[i]=Qr(n===!0?{}:n,s);continue}if(n===!0){e[i]=!0;continue}e[i]=Qr(n,s)}}function qw(e,t,r){let i=r.getComputedFields(),n={...r.getGlobalOmit(),...t},s=Aw(n,i);for(let[a,o]of Object.entries(s)){if(Qt(o))continue;Ra(o,r.nestSelection(a));let l=r.findField(a);i?.[a]&&!l||(e[a]=!o)}}function Cw(e,t){let r={},i=t.getComputedFields(),n=Ew(e,i);for(let[s,a]of Object.entries(n)){if(Qt(a))continue;let o=t.nestSelection(s);Ra(a,o);let l=t.findField(s);if(!(i?.[s]&&!l)){if(a===!1||a===void 0||Qt(a)){r[s]=!1;continue}if(a===!0){l?.kind==="object"?r[s]=Qr({},o):r[s]=!0;continue}r[s]=Qr(a,o)}}return r}function Pd(e,t){if(e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="bigint")return{$type:"BigInt",value:String(e)};if(ya(e)){if(zc(e))return{$type:"DateTime",value:e.toISOString()};t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(kw(e))return{$type:"Param",value:e.name};if(Sa(e))return{$type:"FieldRef",value:{_ref:e.name,_container:e.modelName}};if(Array.isArray(e))return Pw(e,t);if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{$type:"Bytes",value:Buffer.from(r,i,n).toString("base64")}}if(Nw(e))return e.values;if(xa(e))return{$type:"Decimal",value:e.toFixed()};if(e instanceof nn){if(e!==wd.instances[e._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:e._getName()}}if(Dw(e))return e.toJSON();if(typeof e=="object")return Nd(e,t);t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(e)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function Nd(e,t){if(e.$type)return{$type:"Raw",value:e};let r={};for(let i in e){let n=e[i],s=t.nestArgument(i);Qt(n)||(n!==void 0?r[i]=Pd(n,s):t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidArgumentValue",argumentPath:s.getArgumentPath(),selectionPath:t.getSelectionPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:qd}))}return r}function Pw(e,t){let r=[];for(let i=0;i<e.length;i++){let n=t.nestArgument(String(i)),s=e[i];if(s===void 0||Qt(s)){let a=s===void 0?"undefined":"Prisma.skip";t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:n.getSelectionPath(),argumentPath:n.getArgumentPath(),argument:{name:`${t.getArgumentName()}[${i}]`,typeNames:[]},underlyingError:`Can not use \`${a}\` value within array. Use \`null\` or filter out \`${a}\` values`})}r.push(Pd(s,n))}return r}function Nw(e){return typeof e=="object"&&e!==null&&e.__prismaRawParameters__===!0}function Dw(e){return typeof e=="object"&&e!==null&&typeof e.toJSON=="function"}function Ra(e,t){e===void 0&&t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidSelectionValue",selectionPath:t.getSelectionPath(),underlyingError:qd})}var Lw=class Xs{constructor(t){this.params=t,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(t){kd({errors:[t],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(t=>({name:t.name,typeName:"boolean",isRelation:t.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(t){return this.params.previewFeatures.includes(t)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(t){return this.modelOrType?.fields.find(r=>r.name===t)}nestSelection(t){let r=this.findField(t),i=r?.kind==="object"?r.type:void 0;return new Xs({...this.params,modelName:i,selectionPath:this.params.selectionPath.concat(t)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[Ji(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:ga(this.params.action,"Unknown action")}}nestArgument(t){return new Xs({...this.params,argumentPath:this.params.argumentPath.concat(t)})}};function ju(e){if(!e._hasPreviewFlag("metrics"))throw new ot("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:e._clientVersion})}var Dd=class{_client;constructor(e){this._client=e}prometheus(e){return ju(this._client),this._client._engine.metrics({format:"prometheus",...e})}json(e){return ju(this._client),this._client._engine.metrics({format:"json",...e})}};function Uw(e,t){let r=Gs(()=>Fw(t));Object.defineProperty(e,"dmmf",{get:()=>r.get()})}function Fw(e){return{datamodel:{models:As(e.models),enums:As(e.enums),types:As(e.types)}}}function As(e){return Object.entries(e).map(([t,r])=>({name:t,...r}))}var ks=new WeakMap,Gi="$$PrismaTypedSql",Ld=class{constructor(e,t){ks.set(this,{sql:e,values:t}),Object.defineProperty(this,Gi,{value:Gi})}get sql(){return ks.get(this).sql}get values(){return ks.get(this).values}};function Mw(e){return(...t)=>new Ld(e,t)}function Ud(e){return e!=null&&e[Gi]===Gi}var $w=Q(gc()),jw=require("node:async_hooks"),Vw=require("node:events"),Bw=Q(require("node:fs")),Rs=Q(require("node:path")),It=class Zs{constructor(t,r){if(t.length-1!==r.length)throw t.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${t.length} strings to have ${t.length-1} values`);let i=r.reduce((a,o)=>a+(o instanceof Zs?o.values.length:1),0);this.values=new Array(i),this.strings=new Array(i+1),this.strings[0]=t[0];let n=0,s=0;for(;n<r.length;){let a=r[n++],o=t[n];if(a instanceof Zs){this.strings[s]+=a.strings[0];let l=0;for(;l<a.values.length;)this.values[s++]=a.values[l++],this.strings[s]=a.strings[l];this.strings[s]+=o}else this.values[s++]=a,this.strings[s]=o}}get sql(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`?${this.strings[r++]}`;return i}get statement(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`:${r}${this.strings[r++]}`;return i}get text(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`$${r}${this.strings[r++]}`;return i}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function Gw(e,t=",",r="",i=""){if(e.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new It([r,...Array(e.length-1).fill(t),i],e)}function Fd(e){return new It([e],[])}var Hw=Fd("");function Qw(e,...t){return new It(e,t)}function Md(e){return{getKeys(){return Object.keys(e)},getPropertyValue(t){return e[t]}}}function Ye(e,t){return{getKeys(){return[e]},getPropertyValue(){return t()}}}function Ta(e){let t=new Ur;return{getKeys(){return e.getKeys()},getPropertyValue(r){return t.getOrCreate(r,()=>e.getPropertyValue(r))},getPropertyDescriptor(r){return e.getPropertyDescriptor?.(r)}}}var ea={enumerable:!0,configurable:!0,writable:!0};function $d(e){let t=new Set(e);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>ea,has:(r,i)=>t.has(i),set:(r,i,n)=>t.add(i)&&Reflect.set(r,i,n),ownKeys:()=>[...t]}}var Vu=Symbol.for("nodejs.util.inspect.custom");function ur(e,t){let r=Kw(t),i=new Set,n=new Proxy(e,{get(s,a){if(i.has(a))return s[a];let o=r.get(a);return o?o.getPropertyValue(a):s[a]},has(s,a){if(i.has(a))return!0;let o=r.get(a);return o?o.has?.(a)??!0:Reflect.has(s,a)},ownKeys(s){let a=Bu(Reflect.ownKeys(s),r),o=Bu(Array.from(r.keys()),r);return[...new Set([...a,...o,...i])]},set(s,a,o){return r.get(a)?.getPropertyDescriptor?.(a)?.writable===!1?!1:(i.add(a),Reflect.set(s,a,o))},getOwnPropertyDescriptor(s,a){let o=Reflect.getOwnPropertyDescriptor(s,a);if(o&&!o.configurable)return o;let l=r.get(a);return l?l.getPropertyDescriptor?{...ea,...l?.getPropertyDescriptor(a)}:ea:o},defineProperty(s,a,o){return i.add(a),Reflect.defineProperty(s,a,o)},getPrototypeOf:()=>Object.prototype});return n[Vu]=function(){let s={...this};return delete s[Vu],s},n}function Kw(e){let t=new Map;for(let r of e){let i=r.getKeys();for(let n of i)t.set(n,r)}return t}function Bu(e,t){return e.filter(r=>t.get(r)?.has?.(r)??!0)}function ta(e){return{getKeys(){return e},has(){return!1},getPropertyValue(){}}}function Ia(e,t){return{batch:e,transaction:t?.kind==="batch"?{isolationLevel:t.options.isolationLevel}:void 0}}function zw(e){if(e===void 0)return"";let t=ka(e);return new ud(0,{colors:cd}).write(t).toString()}var Jw="P2037";function Oa({error:e,user_facing_error:t},r,i){return t.error_code?new kt(Ww(t,i),{code:t.error_code,clientVersion:r,meta:t.meta,batchRequestIdx:t.batch_request_idx}):new Oe(e,{clientVersion:r,batchRequestIdx:t.batch_request_idx})}function Ww(e,t){let r=e.message;return(t==="postgresql"||t==="postgres"||t==="mysql")&&e.error_code===Jw&&(r+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),r}var Zr="<unknown>";function Yw(e){var t=e.split(`
`);return t.reduce(function(r,i){var n=eS(i)||rS(i)||sS(i)||uS(i)||oS(i);return n&&r.push(n),r},[])}var Xw=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Zw=/\((\S*)(?::(\d+))(?::(\d+))\)/;function eS(e){var t=Xw.exec(e);if(!t)return null;var r=t[2]&&t[2].indexOf("native")===0,i=t[2]&&t[2].indexOf("eval")===0,n=Zw.exec(t[2]);return i&&n!=null&&(t[2]=n[1],t[3]=n[2],t[4]=n[3]),{file:r?null:t[2],methodName:t[1]||Zr,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var tS=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function rS(e){var t=tS.exec(e);return t?{file:t[2],methodName:t[1]||Zr,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var iS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,nS=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function sS(e){var t=iS.exec(e);if(!t)return null;var r=t[3]&&t[3].indexOf(" > eval")>-1,i=nS.exec(t[3]);return r&&i!=null&&(t[3]=i[1],t[4]=i[2],t[5]=null),{file:t[3],methodName:t[1]||Zr,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var aS=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function oS(e){var t=aS.exec(e);return t?{file:t[3],methodName:t[1]||Zr,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var lS=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function uS(e){var t=lS.exec(e);return t?{file:t[2],methodName:t[1]||Zr,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var cS=class{getLocation(){return null}},dS=class{_error;constructor(){this._error=new Error}getLocation(){let e=this._error.stack;if(!e)return null;let t=Yw(e).find(r=>{if(!r.file)return!1;let i=Ex(r.file);return i!=="<anonymous>"&&!i.includes("@prisma")&&!i.includes("/packages/client/src/runtime/")&&!i.endsWith("/runtime/binary.js")&&!i.endsWith("/runtime/library.js")&&!i.endsWith("/runtime/edge.js")&&!i.endsWith("/runtime/edge-esm.js")&&!i.startsWith("internal/")&&!r.methodName.includes("new ")&&!r.methodName.includes("getCallSite")&&!r.methodName.includes("Proxy.")&&r.methodName.split(".").length<4});return!t||!t.file?null:{fileName:t.file,lineNumber:t.lineNumber,columnNumber:t.column}}};function Fr(e){return e==="minimal"?typeof $EnabledCallSite=="function"&&e!=="minimal"?new $EnabledCallSite:new cS:new dS}var fS={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function Hi(e={}){let t=pS(e);return Object.entries(t).reduce((r,[i,n])=>(fS[i]!==void 0?r.select[i]={select:n}:r[i]=n,r),{select:{}})}function pS(e={}){return typeof e._count=="boolean"?{...e,_count:{_all:e._count}}:e}function ra(e={}){return t=>(typeof e._count=="boolean"&&(t._count=t._count._all),t)}function hS(e,t){let r=ra(e);return t({action:"aggregate",unpacker:r,argsMapper:Hi})(e)}function mS(e={}){let{select:t,...r}=e;return Hi(typeof t=="object"?{...r,_count:t}:{...r,_count:{_all:!0}})}function gS(e={}){return typeof e.select=="object"?t=>ra(e)(t)._count:t=>ra(e)(t)._count._all}function yS(e,t){return t({action:"count",unpacker:gS(e),argsMapper:mS})(e)}function bS(e={}){let t=Hi(e);if(Array.isArray(t.by))for(let r of t.by)typeof r=="string"&&(t.select[r]=!0);else typeof t.by=="string"&&(t.select[t.by]=!0);return t}function xS(e={}){return t=>(typeof e?._count=="boolean"&&t.forEach(r=>{r._count=r._count._all}),t)}function vS(e,t){return t({action:"groupBy",unpacker:xS(e),argsMapper:bS})(e)}function wS(e,t,r){if(t==="aggregate")return i=>hS(i,r);if(t==="count")return i=>yS(i,r);if(t==="groupBy")return i=>vS(i,r)}function SS(e,t){let r=t.fields.filter(n=>!n.relationName),i=Ox(r,"name");return new Proxy({},{get(n,s){if(s in n||typeof s=="symbol")return n[s];let a=i[s];if(a)return new vd(e,s,a.type,a.isList,a.kind==="enum")},...$d(Object.keys(i))})}var jd=e=>Array.isArray(e)?e:e.split("."),Vd=(e,t)=>jd(t).reduce((r,i)=>r&&r[i],e),ES=(e,t,r)=>jd(t).reduceRight((i,n,s,a)=>Object.assign({},Vd(e,a.slice(0,s)),{[n]:i}),r);function AS(e,t){return e===void 0||t===void 0?[]:[...t,"select",e]}function kS(e,t,r){return t===void 0?e??{}:ES(t,r,e||!0)}function Bd(e,t,r,i,n,s){let a=e._runtimeDataModel.models[t].fields.reduce((o,l)=>({...o,[l.name]:l}),{});return o=>{let l=Fr(e._errorFormat),u=AS(i,n),c=kS(o,s,u),d=r({dataPath:u,callsite:l})(c),f=RS(e,t);return new Proxy(d,{get(p,m){if(!f.includes(m))return p[m];let g=[a[m].type,r,m],E=[u,c];return Bd(e,...g,...E)},...$d([...f,...Object.getOwnPropertyNames(d)])})}}function RS(e,t){return e._runtimeDataModel.models[t].fields.filter(r=>r.kind==="object").map(r=>r.name)}var TS=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],IS=["aggregate","count","groupBy"];function Gu(e,t){let r=e._extensions.getAllModelExtensions(t)??{},i=[OS(e,t),qS(e,t),Md(r),Ye("name",()=>t),Ye("$name",()=>t),Ye("$parent",()=>e._appliedParent)];return ur({},i)}function OS(e,t){let r=Xr(t),i=Object.keys(en).concat("count");return{getKeys(){return i},getPropertyValue(n){let s=n,a=o=>l=>{let u=Fr(e._errorFormat);return e._createPrismaPromise(c=>{let d={args:l,dataPath:[],action:s,model:t,clientMethod:`${r}.${n}`,jsModelName:r,transaction:c,callsite:u};return e._request({...d,...o})},{action:s,args:l,model:t})};return TS.includes(s)?Bd(e,t,a):_S(n)?wS(e,n,a):a({})}}}function _S(e){return IS.includes(e)}function qS(e,t){return Ta(Ye("fields",()=>{let r=e._runtimeDataModel.models[t];return SS(t,r)}))}function CS(e){return e.replace(/^./,t=>t.toUpperCase())}var ia=Symbol();function na(e){let t=[PS(e),NS(e),Ye(ia,()=>e),Ye("$parent",()=>e._appliedParent)],r=e._extensions.getAllClientExtensions();return r&&t.push(Md(r)),ur(e,t)}function PS(e){let t=Object.getPrototypeOf(e._originalClient),r=[...new Set(Object.getOwnPropertyNames(t))];return{getKeys(){return r},getPropertyValue(i){return e[i]}}}function NS(e){let t=Object.keys(e._runtimeDataModel.models),r=t.map(Xr),i=[...new Set(t.concat(r))];return Ta({getKeys(){return i},getPropertyValue(n){let s=CS(n);if(e._runtimeDataModel.models[s]!==void 0)return Gu(e,s);if(e._runtimeDataModel.models[n]!==void 0)return Gu(e,n)},getPropertyDescriptor(n){if(!r.includes(n))return{enumerable:!1}}})}function DS(e){return e[ia]?e[ia]:e}function LS(e){if(typeof e=="function")return e(this);if(e.client?.__AccelerateEngine){let r=e.client.__AccelerateEngine;this._originalClient._engine=new r(this._originalClient._accelerateEngineConfig)}let t=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(e)},_appliedParent:{value:this,configurable:!0},$on:{value:void 0}});return na(t)}function US({result:e,modelName:t,select:r,omit:i,extensions:n}){let s=n.getAllComputedFields(t);if(!s)return e;let a=[],o=[];for(let l of Object.values(s)){if(i){if(i[l.name])continue;let u=l.needs.filter(c=>i[c]);u.length>0&&o.push(ta(u))}else if(r){if(!r[l.name])continue;let u=l.needs.filter(c=>!r[c]);u.length>0&&o.push(ta(u))}FS(e,l.needs)&&a.push(MS(l,ur(e,a)))}return a.length>0||o.length>0?ur(e,[...a,...o]):e}function FS(e,t){return t.every(r=>Tx(e,r))}function MS(e,t){return Ta(Ye(e.name,()=>e.compute(t)))}function _a({visitor:e,result:t,args:r,runtimeDataModel:i,modelName:n}){if(Array.isArray(t)){for(let a=0;a<t.length;a++)t[a]=_a({result:t[a],args:r,modelName:n,runtimeDataModel:i,visitor:e});return t}let s=e(t,n,r)??t;return r.include&&Hu({includeOrSelect:r.include,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),r.select&&Hu({includeOrSelect:r.select,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),s}function Hu({includeOrSelect:e,result:t,parentModelName:r,runtimeDataModel:i,visitor:n}){for(let[s,a]of Object.entries(e)){if(!a||t[s]==null||Qt(a))continue;let o=i.models[r].fields.find(u=>u.name===s);if(!o||o.kind!=="object"||!o.relationName)continue;let l=typeof a=="object"?a:{};t[s]=_a({visitor:n,result:t[s],args:l,modelName:o.type,runtimeDataModel:i})}}function $S({result:e,modelName:t,args:r,extensions:i,runtimeDataModel:n,globalOmit:s}){return i.isEmpty()||e==null||typeof e!="object"||!n.models[t]?e:_a({result:e,args:r??{},modelName:t,runtimeDataModel:n,visitor:(a,o,l)=>{let u=Xr(o);return US({result:a,modelName:u,select:l.select,omit:l.select?void 0:{...s?.[u],...l.omit},extensions:i})}})}var jS=["$connect","$disconnect","$on","$transaction","$extends"],VS=jS;function BS(e){if(e instanceof It)return GS(e);if(Ud(e))return HS(e);if(Array.isArray(e)){let r=[e[0]];for(let i=1;i<e.length;i++)r[i]=Mr(e[i]);return r}let t={};for(let r in e)t[r]=Mr(e[r]);return t}function GS(e){return new It(e.strings,e.values)}function HS(e){return new Ld(e.sql,e.values)}function Mr(e){if(typeof e!="object"||e==null||e instanceof nn||Sa(e))return e;if(xa(e))return new Zi(e.toFixed());if(ya(e))return new Date(+e);if(ArrayBuffer.isView(e))return e.slice(0);if(Array.isArray(e)){let t=e.length,r;for(r=Array(t);t--;)r[t]=Mr(e[t]);return r}if(typeof e=="object"){let t={};for(let r in e)r==="__proto__"?Object.defineProperty(t,r,{value:Mr(e[r]),configurable:!0,enumerable:!0,writable:!0}):t[r]=Mr(e[r]);return t}ga(e,"Unknown value")}function Gd(e,t,r,i=0){return e._createPrismaPromise(n=>{let s=t.customDataProxyFetch;return"transaction"in t&&n!==void 0&&(t.transaction?.kind==="batch"&&t.transaction.lock.then(),t.transaction=n),i===r.length?e._executeRequest(t):r[i]({model:t.model,operation:t.model?t.action:t.clientMethod,args:BS(t.args??{}),__internalParams:t,query:(a,o=t)=>{let l=o.customDataProxyFetch;return o.customDataProxyFetch=Qd(s,l),o.args=a,Gd(e,o,r,i+1)}})})}function QS(e,t){let{jsModelName:r,action:i,clientMethod:n}=t,s=r?i:n;if(e._extensions.isEmpty())return e._executeRequest(t);let a=e._extensions.getAllQueryCallbacks(r??"$none",s);return Gd(e,t,a)}function KS(e){return t=>{let r={requests:t},i=t[0].extensions.getAllBatchQueryCallbacks();return i.length?Hd(r,i,0,e):e(r)}}function Hd(e,t,r,i){if(r===t.length)return i(e);let n=e.customDataProxyFetch,s=e.requests[0].transaction;return t[r]({args:{queries:e.requests.map(a=>({model:a.modelName,operation:a.action,args:a.args})),transaction:s?{isolationLevel:s.kind==="batch"?s.isolationLevel:void 0}:void 0},__internalParams:e,query(a,o=e){let l=o.customDataProxyFetch;return o.customDataProxyFetch=Qd(n,l),Hd(o,t,r+1,i)}})}var Qu=e=>e;function Qd(e=Qu,t=Qu){return r=>e(t(r))}var Ku=we("prisma:client"),zu={Vercel:"vercel","Netlify CI":"netlify"};function zS({postinstall:e,ciName:t,clientVersion:r,generator:i}){if(Ku("checkPlatformCaching:postinstall",e),Ku("checkPlatformCaching:ciName",t),e===!0&&!(i?.output&&typeof(i.output.fromEnvVar??i.output.value)=="string")&&t&&t in zu){let n=`Prisma has detected that this project was built on ${t}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${zu[t]}-build`;throw console.error(n),new le(n,r)}}function JS(e,t){return e?e.datasources?e.datasources:e.datasourceUrl?{[t[0]]:{url:e.datasourceUrl}}:{}:{}}var WS=Q(require("node:fs")),Ui=Q(require("node:path"));function Kd(e){let{runtimeBinaryTarget:t}=e;return`Add "${t}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${YS(e)}`}function YS(e){let{generator:t,generatorBinaryTargets:r,runtimeBinaryTarget:i}=e,n={fromEnvVar:null,value:i},s=[...r,n];return fx({...t,binaryTargets:s})}function sn(e){let{runtimeBinaryTarget:t}=e;return`Prisma Client could not locate the Query Engine for runtime "${t}".`}function an(e){let{searchedLocations:t}=e;return`The following locations have been searched:
${[...new Set(t)].map(r=>`  ${r}`).join(`
`)}`}function XS(e){let{runtimeBinaryTarget:t}=e;return`${sn(e)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${t}".
${Kd(e)}

${an(e)}`}function zd(e){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${e}`}function Jd(e){let{errorStack:t}=e;return t?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function ZS(e){let{queryEngineName:t}=e;return`${sn(e)}${Jd(e)}

This is likely caused by a bundler that has not copied "${t}" next to the resulting bundle.
Ensure that "${t}" has been copied next to the bundle or in "${e.expectedLocation}".

${zd("engine-not-found-bundler-investigation")}

${an(e)}`}function eE(e){let{runtimeBinaryTarget:t,generatorBinaryTargets:r}=e,i=r.find(n=>n.native);return`${sn(e)}

This happened because Prisma Client was generated for "${i?.value??"unknown"}", but the actual deployment required "${t}".
${Kd(e)}

${an(e)}`}function tE(e){let{queryEngineName:t}=e;return`${sn(e)}${Jd(e)}

This is likely caused by tooling that has not copied "${t}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${t}" has been copied to "${e.expectedLocation}".

${zd("engine-not-found-tooling-investigation")}

${an(e)}`}var rE=we("prisma:client:engines:resolveEnginePath"),iE=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function nE(e,t){let r={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[e]??t.prismaPath;if(r!==void 0)return r;let{enginePath:i,searchedLocations:n}=await sE(e,t);if(rE("enginePath",i),i!==void 0&&e==="binary"&&sx(i),i!==void 0)return t.prismaPath=i;let s=await da(),a=t.generator?.binaryTargets??[],o=a.some(f=>f.native),l=!a.some(f=>f.value===s),u=__filename.match(iE())===null,c={searchedLocations:n,generatorBinaryTargets:a,generator:t.generator,runtimeBinaryTarget:s,queryEngineName:Wd(e,s),expectedLocation:Ui.default.relative(process.cwd(),t.dirname),errorStack:new Error().stack},d;throw o&&l?d=eE(c):l?d=XS(c):u?d=ZS(c):d=tE(c),new le(d,t.clientVersion)}async function sE(e,t){let r=await da(),i=[],n=[t.dirname,Ui.default.resolve(__dirname,".."),t.generator?.output?.value??__dirname,Ui.default.resolve(__dirname,"../../../.prisma/client"),"/tmp/prisma-engines",t.cwd];__filename.includes("resolveEnginePath")&&n.push(nx());for(let s of n){let a=Wd(e,r),o=Ui.default.join(s,a);if(i.push(s),WS.default.existsSync(o))return{enginePath:o,searchedLocations:i}}return{enginePath:void 0,searchedLocations:i}}function Wd(e,t){return e==="library"?Yb(t,"fs"):`query-engine-${t}${t==="windows"?".exe":""}`}function aE(e){return e?e.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,t=>`${t[0]}5`):""}function oE(e){return e.split(`
`).map(t=>t.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var lE=Q(xb());function uE({title:e,user:t="prisma",repo:r="prisma",template:i="bug_report.yml",body:n}){return(0,lE.default)({user:t,repo:r,template:i,title:e,body:n})}function cE({version:e,binaryTarget:t,title:r,description:i,engineVersion:n,database:s,query:a}){let o=Qb(6e3-(a?.length??0)),l=oE(js(o)),u=i?`# Description
\`\`\`
${i}
\`\`\``:"",c=js(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${t?.padEnd(19)}|
| Prisma Client   | ${e?.padEnd(19)}|
| Query Engine    | ${n?.padEnd(19)}|
| Database        | ${s?.padEnd(19)}|

${u}

## Logs
\`\`\`
${l}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${a?aE(a):""}
\`\`\`
`),d=uE({title:r,body:c});return`${r}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Ce(d)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function dE(e,t){throw new Error(t)}function fE(e){return e!==null&&typeof e=="object"&&typeof e.$type=="string"}function pE(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function Qi(e){return e===null?e:Array.isArray(e)?e.map(Qi):typeof e=="object"?fE(e)?hE(e):e.constructor!==null&&e.constructor.name!=="Object"?e:pE(e,Qi):e}function hE({$type:e,value:t}){switch(e){case"BigInt":return BigInt(t);case"Bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"DateTime":return new Date(t);case"Decimal":return new zt(t);case"Json":return JSON.parse(t);default:dE(t,"Unknown tagged value")}}var mE="6.19.0",gE=()=>globalThis.process?.release?.name==="node",yE=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,bE=()=>!!globalThis.Deno,xE=()=>typeof globalThis.Netlify=="object",vE=()=>typeof globalThis.EdgeRuntime=="object",wE=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function SE(){return[[xE,"netlify"],[vE,"edge-light"],[wE,"workerd"],[bE,"deno"],[yE,"bun"],[gE,"node"]].flatMap(e=>e[0]()?[e[1]]:[]).at(0)??""}var EE={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function Yd(){let e=SE();return{id:e,prettyName:EE[e]||e,isEdge:["workerd","deno","netlify","edge-light"].includes(e)}}function qa({inlineDatasources:e,overrideDatasources:t,env:r,clientVersion:i}){let n,s=Object.keys(e)[0],a=e[s]?.url,o=t[s]?.url;if(s===void 0?n=void 0:o?n=o:a?.value?n=a.value:a?.fromEnvVar&&(n=r[a.fromEnvVar]),a?.fromEnvVar!==void 0&&n===void 0)throw new le(`error: Environment variable not found: ${a.fromEnvVar}.`,i);if(n===void 0)throw new le("error: Missing URL environment variable, value, or override.",i);return n}var AE=class extends Error{clientVersion;cause;constructor(e,t){super(e),this.clientVersion=t.clientVersion,this.cause=t.cause}get[Symbol.toStringTag](){return this.name}},cr=class extends AE{isRetryable;constructor(e,t){super(e,t),this.isRetryable=t.isRetryable??!0}};function ge(e,t){return{...e,isRetryable:t}}var Fi=class extends cr{name="InvalidDatasourceError";code="P6001";constructor(e,t){super(e,ge(t,!1))}};ae(Fi,"InvalidDatasourceError");function kE(e){let t={clientVersion:e.clientVersion},r=Object.keys(e.inlineDatasources)[0],i=qa({inlineDatasources:e.inlineDatasources,overrideDatasources:e.overrideDatasources,clientVersion:e.clientVersion,env:{...e.env,...typeof process<"u"?process.env:{}}}),n;try{n=new URL(i)}catch{throw new Fi(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\``,t)}let{protocol:s,searchParams:a}=n;if(s!=="prisma:"&&s!==Fc)throw new Fi(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\` or \`prisma+postgres://\``,t);let o=a.get("api_key");if(o===null||o.length<1)throw new Fi(`Error validating datasource \`${r}\`: the URL must contain a valid API key`,t);let l=cx(n)?"http:":"https:";process.env.TEST_CLIENT_ENGINE_REMOTE_EXECUTOR&&n.searchParams.has("use_http")&&(l="http:");let u=new URL(n.href.replace(s,l));return{apiKey:o,url:u}}var RE=Q(la()),TE=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:e,tracingHelper:t,logLevel:r,logQueries:i,engineHash:n}){this.apiKey=e,this.tracingHelper=t,this.logLevel=r,this.logQueries=i,this.engineHash=n}build({traceparent:e,transactionId:t}={}){let r={Accept:"application/json",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","Prisma-Engine-Hash":this.engineHash,"Prisma-Engine-Version":RE.enginesVersion};this.tracingHelper.isEnabled()&&(r.traceparent=e??this.tracingHelper.getTraceParent()),t&&(r["X-Transaction-Id"]=t);let i=this.#e();return i.length>0&&(r["X-Capture-Telemetry"]=i.join(", ")),r}#e(){let e=[];return this.tracingHelper.isEnabled()&&e.push("tracing"),this.logLevel&&e.push(this.logLevel),this.logQueries&&e.push("query"),e}};function IE(e){return e[0]*1e3+e[1]/1e6}function Ju(e){return new Date(IE(e))}var sa=class extends cr{name="ForcedRetryError";code="P5001";constructor(e){super("This request must be retried",ge(e,!0))}};ae(sa,"ForcedRetryError");var Ca=class extends cr{name="NotImplementedYetError";code="P5004";constructor(e,t){super(e,ge(t,!1))}};ae(Ca,"NotImplementedYetError");var De=class extends cr{response;constructor(e,t){super(e,t),this.response=t.response;let r=this.response.headers.get("prisma-request-id");if(r){let i=`(The request id was: ${r})`;this.message=this.message+" "+i}}},Pa=class extends De{name="SchemaMissingError";code="P5005";constructor(e){super("Schema needs to be uploaded",ge(e,!0))}};ae(Pa,"SchemaMissingError");var Xd="This request could not be understood by the server",Zd=class extends De{name="BadRequestError";code="P5000";constructor(e,t,r){super(t||Xd,ge(e,!1)),r&&(this.code=r)}};ae(Zd,"BadRequestError");var ef=class extends De{name="HealthcheckTimeoutError";code="P5013";logs;constructor(e,t){super("Engine not started: healthcheck timeout",ge(e,!0)),this.logs=t}};ae(ef,"HealthcheckTimeoutError");var tf=class extends De{name="EngineStartupError";code="P5014";logs;constructor(e,t,r){super(t,ge(e,!0)),this.logs=r}};ae(tf,"EngineStartupError");var rf=class extends De{name="EngineVersionNotSupportedError";code="P5012";constructor(e){super("Engine version is not supported",ge(e,!1))}};ae(rf,"EngineVersionNotSupportedError");var nf="Request timed out",sf=class extends De{name="GatewayTimeoutError";code="P5009";constructor(e,t=nf){super(t,ge(e,!1))}};ae(sf,"GatewayTimeoutError");var OE="Interactive transaction error",af=class extends De{name="InteractiveTransactionError";code="P5015";constructor(e,t=OE){super(t,ge(e,!1))}};ae(af,"InteractiveTransactionError");var _E="Request parameters are invalid",of=class extends De{name="InvalidRequestError";code="P5011";constructor(e,t=_E){super(t,ge(e,!1))}};ae(of,"InvalidRequestError");var lf="Requested resource does not exist",uf=class extends De{name="NotFoundError";code="P5003";constructor(e,t=lf){super(t,ge(e,!1))}};ae(uf,"NotFoundError");var cf="Unknown server error",aa=class extends De{name="ServerError";code="P5006";logs;constructor(e,t,r){super(t||cf,ge(e,!0)),this.logs=r}};ae(aa,"ServerError");var df="Unauthorized, check your connection string",ff=class extends De{name="UnauthorizedError";code="P5007";constructor(e,t=df){super(t,ge(e,!1))}};ae(ff,"UnauthorizedError");var pf="Usage exceeded, retry again later",hf=class extends De{name="UsageExceededError";code="P5008";constructor(e,t=pf){super(t,ge(e,!0))}};ae(hf,"UsageExceededError");async function qE(e){let t;try{t=await e.text()}catch{return{type:"EmptyError"}}try{let r=JSON.parse(t);if(typeof r=="string")switch(r){case"InternalDataProxyError":return{type:"DataProxyError",body:r};default:return{type:"UnknownTextError",body:r}}if(typeof r=="object"&&r!==null){if("is_panic"in r&&"message"in r&&"error_code"in r)return{type:"QueryEngineError",body:r};if("EngineNotStarted"in r||"InteractiveTransactionMisrouted"in r||"InvalidRequestError"in r){let i=Object.values(r)[0].reason;return typeof i=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(i)?{type:"UnknownJsonError",body:r}:{type:"DataProxyError",body:r}}}return{type:"UnknownJsonError",body:r}}catch{return t===""?{type:"EmptyError"}:{type:"UnknownTextError",body:t}}}async function _i(e,t){if(e.ok)return;let r={clientVersion:t,response:e},i=await qE(e);if(i.type==="QueryEngineError")throw new kt(i.body.message,{code:i.body.error_code,clientVersion:t});if(i.type==="DataProxyError"){if(i.body==="InternalDataProxyError")throw new aa(r,"Internal Data Proxy error");if("EngineNotStarted"in i.body){if(i.body.EngineNotStarted.reason==="SchemaMissing")return new Pa(r);if(i.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new rf(r);if("EngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,logs:s}=i.body.EngineNotStarted.reason.EngineStartupError;throw new tf(r,n,s)}if("KnownEngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,error_code:s}=i.body.EngineNotStarted.reason.KnownEngineStartupError;throw new le(n,t,s)}if("HealthcheckTimeout"in i.body.EngineNotStarted.reason){let{logs:n}=i.body.EngineNotStarted.reason.HealthcheckTimeout;throw new ef(r,n)}}if("InteractiveTransactionMisrouted"in i.body){let n={IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"};throw new af(r,n[i.body.InteractiveTransactionMisrouted.reason])}if("InvalidRequestError"in i.body)throw new of(r,i.body.InvalidRequestError.reason)}if(e.status===401||e.status===403)throw new ff(r,rr(df,i));if(e.status===404)return new uf(r,rr(lf,i));if(e.status===429)throw new hf(r,rr(pf,i));if(e.status===504)throw new sf(r,rr(nf,i));if(e.status>=500)throw new aa(r,rr(cf,i));if(e.status>=400)throw new Zd(r,rr(Xd,i))}function rr(e,t){return t.type==="EmptyError"?e:`${e}: ${JSON.stringify(t)}`}function CE(e){let t=Math.pow(2,e)*50,r=Math.ceil(Math.random()*t)-Math.ceil(t/2),i=t+r;return new Promise(n=>setTimeout(()=>n(i),i))}var st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function PE(e){let t=new TextEncoder().encode(e),r="",i=t.byteLength,n=i%3,s=i-n,a,o,l,u,c;for(let d=0;d<s;d=d+3)c=t[d]<<16|t[d+1]<<8|t[d+2],a=(c&16515072)>>18,o=(c&258048)>>12,l=(c&4032)>>6,u=c&63,r+=st[a]+st[o]+st[l]+st[u];return n==1?(c=t[s],a=(c&252)>>2,o=(c&3)<<4,r+=st[a]+st[o]+"=="):n==2&&(c=t[s]<<8|t[s+1],a=(c&64512)>>10,o=(c&1008)>>4,l=(c&15)<<2,r+=st[a]+st[o]+st[l]+"="),r}function NE(e){if(e.generator?.previewFeatures.some(t=>t.toLowerCase().includes("metrics")))throw new le("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",e.clientVersion)}var DE={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},mf=class extends cr{name="RequestError";code="P5010";constructor(e,t){super(`Cannot fetch data from service:
${e}`,ge(t,!0))}};ae(mf,"RequestError");async function Pr(e,t,r=i=>i){let{clientVersion:i,...n}=t,s=r(fetch);try{return await s(e,n)}catch(a){let o=a.message??"Unknown error";throw new mf(o,{clientVersion:i,cause:a})}}var LE=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,gf=we("prisma:client:dataproxyEngine");async function UE(e,t){let r=DE["@prisma/engines-version"],i=t.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(e.includes("accelerate")&&i!=="0.0.0"&&i!=="in-memory")return i;let[n,s]=i?.split("-")??[];if(s===void 0&&LE.test(n))return n;if(s!==void 0||i==="0.0.0"||i==="in-memory"){let[a]=r.split("-")??[],[o,l,u]=a.split("."),c=ME(`<=${o}.${l}.${u}`),d=await Pr(c,{clientVersion:i});if(!d.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${d.status} ${d.statusText}, response body: ${await d.text()||"<empty body>"}`);let f=await d.text();gf("length of body fetched from unpkg.com",f.length);let p;try{p=JSON.parse(f)}catch(m){throw console.error("JSON.parse error: body fetched from unpkg.com: ",f),m}return p.version}throw new Ca("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:i})}async function FE(e,t){let r=await UE(e,t);return gf("version",r),r}function ME(e){return encodeURI(`https://unpkg.com/prisma@${e}/package.json`)}var Wu=3,_r=we("prisma:client:dataproxyEngine"),$E=class{name="DataProxyEngine";inlineSchema;inlineSchemaHash;inlineDatasources;config;logEmitter;env;clientVersion;engineHash;tracingHelper;remoteClientVersion;host;headerBuilder;startPromise;protocol;constructor(e){NE(e),this.config=e,this.env=e.env,this.inlineSchema=PE(e.inlineSchema),this.inlineDatasources=e.inlineDatasources,this.inlineSchemaHash=e.inlineSchemaHash,this.clientVersion=e.clientVersion,this.engineHash=e.engineVersion,this.logEmitter=e.logEmitter,this.tracingHelper=e.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let{apiKey:e,url:t}=this.getURLAndAPIKey();this.host=t.host,this.protocol=t.protocol,this.headerBuilder=new TE({apiKey:e,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel??"error",logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await FE(this.host,this.config),_r("host",this.host),_r("protocol",this.protocol)})(),await this.startPromise}async stop(){}propagateResponseExtensions(e){e?.logs?.length&&e.logs.forEach(t=>{switch(t.level){case"debug":case"trace":_r(t);break;case"error":case"warn":case"info":{this.logEmitter.emit(t.level,{timestamp:Ju(t.timestamp),message:t.attributes.message??"",target:t.target??"BinaryEngine"});break}case"query":{this.logEmitter.emit("query",{query:t.attributes.query??"",timestamp:Ju(t.timestamp),duration:t.attributes.duration_ms??0,params:t.attributes.params??"",target:t.target??"BinaryEngine"});break}default:t.level}}),e?.traces?.length&&this.tracingHelper.dispatchEngineSpans(e.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(e){return await this.start(),`${this.protocol}//${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${e}`}async uploadSchema(){let e={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(e,async()=>{let t=await Pr(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});t.ok||_r("schema response status",t.status);let r=await _i(t,this.clientVersion);if(r)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${r.message}`,timestamp:new Date,target:""}),r;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(e,{traceparent:t,interactiveTransaction:r,customDataProxyFetch:i}){return this.requestInternal({body:e,traceparent:t,interactiveTransaction:r,customDataProxyFetch:i})}async requestBatch(e,{traceparent:t,transaction:r,customDataProxyFetch:i}){let n=r?.kind==="itx"?r.options:void 0,s=Ia(e,r);return(await this.requestInternal({body:s,customDataProxyFetch:i,interactiveTransaction:n,traceparent:t})).map(a=>(a.extensions&&this.propagateResponseExtensions(a.extensions),"errors"in a?this.convertProtocolErrorsToClientError(a.errors):a))}requestInternal({body:e,traceparent:t,customDataProxyFetch:r,interactiveTransaction:i}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:n})=>{let s=i?`${i.payload.endpoint}/graphql`:await this.url("graphql");n(s);let a=await Pr(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t,transactionId:i?.id}),body:JSON.stringify(e),clientVersion:this.clientVersion},r);a.ok||_r("graphql response status",a.status),await this.handleError(await _i(a,this.clientVersion));let o=await a.json();if(o.extensions&&this.propagateResponseExtensions(o.extensions),"errors"in o)throw this.convertProtocolErrorsToClientError(o.errors);return"batchResult"in o?o.batchResult:o}})}async transaction(e,t,r){let i={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${i[e]} transaction`,callback:async({logHttpCall:n})=>{if(e==="start"){let s=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel}),a=await this.url("transaction/start");n(a);let o=await Pr(a,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),body:s,clientVersion:this.clientVersion});await this.handleError(await _i(o,this.clientVersion));let l=await o.json(),{extensions:u}=l;u&&this.propagateResponseExtensions(u);let c=l.id,d=l["data-proxy"].endpoint;return{id:c,payload:{endpoint:d}}}else{let s=`${r.payload.endpoint}/${e}`;n(s);let a=await Pr(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),clientVersion:this.clientVersion});await this.handleError(await _i(a,this.clientVersion));let o=await a.json(),{extensions:l}=o;l&&this.propagateResponseExtensions(l);return}}})}getURLAndAPIKey(){return kE({clientVersion:this.clientVersion,env:this.env,inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources})}metrics(){throw new Ca("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(e){for(let t=0;;t++){let r=i=>{this.logEmitter.emit("info",{message:`Calling ${i} (n=${t})`,timestamp:new Date,target:""})};try{return await e.callback({logHttpCall:r})}catch(i){if(!(i instanceof cr)||!i.isRetryable)throw i;if(t>=Wu)throw i instanceof sa?i.cause:i;this.logEmitter.emit("warn",{message:`Attempt ${t+1}/${Wu} failed for ${e.actionGerund}: ${i.message??"(unknown)"}`,timestamp:new Date,target:""});let n=await CE(t);this.logEmitter.emit("warn",{message:`Retrying after ${n}ms`,timestamp:new Date,target:""})}}}async handleError(e){if(e instanceof Pa)throw await this.uploadSchema(),new sa({clientVersion:this.clientVersion,cause:e});if(e)throw e}convertProtocolErrorsToClientError(e){return e.length===1?Oa(e[0],this.config.clientVersion,this.config.activeProvider):new Oe(JSON.stringify(e),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function jE(e){if(e?.kind==="itx")return e.options.id}var Yu=Q(require("node:os")),VE=Q(require("node:path")),Ts=Symbol("PrismaLibraryEngineCache");function BE(){let e=globalThis;return e[Ts]===void 0&&(e[Ts]={}),e[Ts]}function GE(e){let t=BE();if(t[e]!==void 0)return t[e];let r=VE.default.toNamespacedPath(e),i={exports:{}},n=0;return process.platform!=="win32"&&(n=Yu.default.constants.dlopen.RTLD_LAZY|Yu.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(i,r,n),t[e]=i.exports,i.exports}var HE={async loadLibrary(e){let t=await y1(),r=await nE("library",e);try{return e.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>GE(r))}catch(i){let n=ax({e:i,platformInfo:t,id:r});throw new le(n,e.clientVersion)}}},Is,QE={async loadLibrary(e){let{clientVersion:t,adapter:r,engineWasm:i}=e;if(r===void 0)throw new le(`The \`adapter\` option for \`PrismaClient\` is required in this context (${Yd().prettyName})`,t);if(i===void 0)throw new le("WASM engine was unexpectedly `undefined`",t);Is===void 0&&(Is=(async()=>{let s=await i.getRuntime(),a=await i.getQueryEngineWasmModule();if(a==null)throw new le("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",t);let o={"./query_engine_bg.js":s},l=new WebAssembly.Instance(a,o),u=l.exports.__wbindgen_start;return s.__wbg_set_wasm(l.exports),u(),s.QueryEngine})());let n=await Is;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:n}}},KE="P2036",He=we("prisma:client:libraryEngine");function zE(e){return e.item_type==="query"&&"query"in e}function JE(e){return"level"in e?e.level==="error"&&e.message==="PANIC":!1}var Xu=[...Wb,"native"],WE=0xffffffffffffffffn,Os=1n;function YE(){let e=Os++;return Os>WE&&(Os=1n),e}var Zu=class{name="LibraryEngine";engine;libraryInstantiationPromise;libraryStartingPromise;libraryStoppingPromise;libraryStarted;executingQueryPromise;config;QueryEngineConstructor;libraryLoader;library;logEmitter;libQueryEnginePath;binaryTarget;datasourceOverrides;datamodel;logQueries;logLevel;lastQuery;loggerRustPanic;tracingHelper;adapterPromise;versionInfo;constructor(e,t){this.libraryLoader=t??HE,e.engineWasm!==void 0&&(this.libraryLoader=t??QE),this.config=e,this.libraryStarted=!1,this.logQueries=e.logQueries??!1,this.logLevel=e.logLevel??"error",this.logEmitter=e.logEmitter,this.datamodel=e.inlineSchema,this.tracingHelper=e.tracingHelper,e.enableDebugLogs&&(this.logLevel="debug");let r=Object.keys(e.overrideDatasources)[0],i=e.overrideDatasources[r]?.url;r!==void 0&&i!==void 0&&(this.datasourceOverrides={[r]:i}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(e){return{applyPendingMigrations:e.applyPendingMigrations?.bind(e),commitTransaction:this.withRequestId(e.commitTransaction.bind(e)),connect:this.withRequestId(e.connect.bind(e)),disconnect:this.withRequestId(e.disconnect.bind(e)),metrics:e.metrics?.bind(e),query:this.withRequestId(e.query.bind(e)),rollbackTransaction:this.withRequestId(e.rollbackTransaction.bind(e)),sdlSchema:e.sdlSchema?.bind(e),startTransaction:this.withRequestId(e.startTransaction.bind(e)),trace:e.trace.bind(e),free:e.free?.bind(e)}}withRequestId(e){return async(...t)=>{let r=YE().toString();try{return await e(...t,r)}finally{if(this.tracingHelper.isEnabled()){let i=await this.engine?.trace(r);if(i){let n=JSON.parse(i);this.tracingHelper.dispatchEngineSpans(n.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(e,t,r){await this.start();let i=await this.adapterPromise,n=JSON.stringify(t),s;if(e==="start"){let o=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel});s=await this.engine?.startTransaction(o,n)}else e==="commit"?s=await this.engine?.commitTransaction(r.id,n):e==="rollback"&&(s=await this.engine?.rollbackTransaction(r.id,n));let a=this.parseEngineResponse(s);if(XE(a)){let o=this.getExternalAdapterError(a,i?.errorRegistry);throw o?o.error:new kt(a.message,{code:a.error_code,clientVersion:this.config.clientVersion,meta:a.meta})}else if(typeof a.message=="string")throw new Oe(a.message,{clientVersion:this.config.clientVersion});return a}async instantiateLibrary(){if(He("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;Jb(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let e=await this.tracingHelper.runInChildSpan("detect_platform",()=>da());if(!Xu.includes(e))throw new le(`Unknown ${Ht("PRISMA_QUERY_ENGINE_LIBRARY")} ${Ht(je(e))}. Possible binaryTargets: ${$r(Xu.join(", "))} or a path to the query engine library.
You may have to run ${$r("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return e}}parseEngineResponse(e){if(!e)throw new Oe("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(e)}catch{throw new Oe("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let e=new WeakRef(this);this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Tu));let t=await this.adapterPromise;t&&He("Using driver adapter: %O",t),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},r=>{e.deref()?.logger(r)},t))}catch(e){let t=e,r=this.parseInitError(t.message);throw typeof r=="string"?t:new le(r.message,this.config.clientVersion,r.error_code)}}}logger(e){let t=this.parseEngineResponse(e);t&&(t.level=t?.level.toLowerCase()??"unknown",zE(t)?this.logEmitter.emit("query",{timestamp:new Date,query:t.query,params:t.params,duration:Number(t.duration_ms),target:t.module_path}):JE(t)?this.loggerRustPanic=new Et(_s(this,`${t.message}: ${t.reason} in ${t.file}:${t.line}:${t.column}`),this.config.clientVersion):this.logEmitter.emit(t.level,{timestamp:new Date,message:t.message,target:t.module_path}))}parseInitError(e){try{return JSON.parse(e)}catch{}return e}parseRequestError(e){try{return JSON.parse(e)}catch{}return e}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(this.libraryInstantiationPromise||(this.libraryInstantiationPromise=this.instantiateLibrary()),await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return He(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let e=async()=>{He("library starting");try{let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(t)),this.libraryStarted=!0,this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Tu)),await this.adapterPromise,He("library started")}catch(t){let r=this.parseInitError(t.message);throw typeof r=="string"?t:new le(r.message,this.config.clientVersion,r.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",e),this.libraryStartingPromise}async stop(){if(await this.libraryInstantiationPromise,await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return He("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted){await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0;return}let e=async()=>{await new Promise(r=>setImmediate(r)),He("library stopping");let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(t)),this.engine?.free&&this.engine.free(),this.engine=void 0,this.libraryStarted=!1,this.libraryStoppingPromise=void 0,this.libraryInstantiationPromise=void 0,await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0,He("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",e),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(e){return this.library?.debugPanic(e)}async request(e,{traceparent:t,interactiveTransaction:r}){He(`sending request, this.libraryStarted: ${this.libraryStarted}`);let i=JSON.stringify({traceparent:t}),n=JSON.stringify(e);try{await this.start();let s=await this.adapterPromise;this.executingQueryPromise=this.engine?.query(n,i,r?.id),this.lastQuery=n;let a=this.parseEngineResponse(await this.executingQueryPromise);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],s?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:a}}catch(s){if(s instanceof le)throw s;if(s.code==="GenericFailure"&&s.message?.startsWith("PANIC:"))throw new Et(_s(this,s.message),this.config.clientVersion);let a=this.parseRequestError(s.message);throw typeof a=="string"?s:new Oe(`${a.message}
${a.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(e,{transaction:t,traceparent:r}){He("requestBatch");let i=Ia(e,t);await this.start();let n=await this.adapterPromise;this.lastQuery=JSON.stringify(i),this.executingQueryPromise=this.engine?.query(this.lastQuery,JSON.stringify({traceparent:r}),jE(t));let s=await this.executingQueryPromise,a=this.parseEngineResponse(s);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],n?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});let{batchResult:o,errors:l}=a;if(Array.isArray(o))return o.map(u=>u.errors&&u.errors.length>0?this.loggerRustPanic??this.buildQueryError(u.errors[0],n?.errorRegistry):{data:u});throw l&&l.length===1?new Error(l[0].error):new Error(JSON.stringify(a))}buildQueryError(e,t){if(e.user_facing_error.is_panic)return new Et(_s(this,e.user_facing_error.message),this.config.clientVersion);let r=this.getExternalAdapterError(e.user_facing_error,t);return r?r.error:Oa(e,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(e,t){if(e.error_code===KE&&t){let r=e.meta?.id;_u(typeof r=="number","Malformed external JS error received from the engine");let i=t.consumeError(r);return _u(i,"External error with reported id was not registered"),i}}async metrics(e){await this.start();let t=await this.engine.metrics(JSON.stringify(e));return e.format==="prometheus"?t:this.parseEngineResponse(t)}};function XE(e){return typeof e=="object"&&e!==null&&e.error_code!==void 0}function _s(e,t){return cE({binaryTarget:e.binaryTarget,title:t,version:e.config.clientVersion,engineVersion:e.versionInfo?.commit,database:e.config.activeProvider,query:e.lastQuery})}function ZE({url:e,adapter:t,copyEngine:r,targetBuildType:i}){let n=[],s=[],a=g=>{n.push({_tag:"warning",value:g})},o=g=>{let E=g.join(`
`);s.push({_tag:"error",value:E})},l=!!e?.startsWith("prisma://"),u=Mc(e),c=!!t,d=l||u;!c&&r&&d&&i!=="client"&&i!=="wasm-compiler-edge"&&a(["recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"]);let f=d||!r;c&&(f||i==="edge")&&(i==="edge"?o(["Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint.","Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."]):d?o(["You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate.","Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."]):r||o(["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."]));let p={accelerate:f,ppg:u,driverAdapters:c};function m(g){return g.length>0}return m(s)?{ok:!1,diagnostics:{warnings:n,errors:s},isUsing:p}:{ok:!0,diagnostics:{warnings:n},isUsing:p}}function eA({copyEngine:e=!0},t){let r;try{r=qa({inlineDatasources:t.inlineDatasources,overrideDatasources:t.overrideDatasources,env:{...t.env,...process.env},clientVersion:t.clientVersion})}catch{}let{ok:i,isUsing:n,diagnostics:s}=ZE({url:r,adapter:t.adapter,copyEngine:e,targetBuildType:"library"});for(let d of s.warnings)Qc(...d.value);if(!i){let d=s.errors[0];throw new ot(d.value,{clientVersion:t.clientVersion})}let a=Ms(t.generator),o=a==="library",l=a==="binary",u=a==="client",c=(n.accelerate||n.ppg)&&!n.driverAdapters;return n.accelerate?new $E(t):(n.driverAdapters,o?new Zu(t):(n.accelerate,new Zu(t)))}function tA({generator:e}){return e?.previewFeatures??[]}var rA=e=>({command:e}),iA=e=>e.strings.reduce((t,r,i)=>`${t}@P${i}${r}`);function qr(e){try{return ec(e,"fast")}catch{return ec(e,"slow")}}function ec(e,t){return JSON.stringify(e.map(r=>yf(r,t)))}function yf(e,t){if(Array.isArray(e))return e.map(r=>yf(r,t));if(typeof e=="bigint")return{prisma__type:"bigint",prisma__value:e.toString()};if(ya(e))return{prisma__type:"date",prisma__value:e.toJSON()};if(Zi.isDecimal(e))return{prisma__type:"decimal",prisma__value:e.toJSON()};if(Buffer.isBuffer(e))return{prisma__type:"bytes",prisma__value:e.toString("base64")};if(nA(e))return{prisma__type:"bytes",prisma__value:Buffer.from(e).toString("base64")};if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{prisma__type:"bytes",prisma__value:Buffer.from(r,i,n).toString("base64")}}return typeof e=="object"&&t==="slow"?bf(e):e}function nA(e){return e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?!0:typeof e=="object"&&e!==null?e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer":!1}function bf(e){if(typeof e!="object"||e===null)return e;if(typeof e.toJSON=="function")return e.toJSON();if(Array.isArray(e))return e.map(tc);let t={};for(let r of Object.keys(e))t[r]=tc(e[r]);return t}function tc(e){return typeof e=="bigint"?e.toString():bf(e)}var sA=/^(\s*alter\s)/i,rc=we("prisma:client");function ic(e,t,r,i){if(!(e!=="postgresql"&&e!=="cockroachdb")&&r.length>0&&sA.exec(t))throw new Error(`Running ALTER using ${i} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var nc=({clientMethod:e,activeProvider:t})=>r=>{let i="",n;if(Ud(r))i=r.sql,n={values:qr(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[s,...a]=r;i=s,n={values:qr(a||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{i=r.sql,n={values:qr(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{i=r.text,n={values:qr(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{i=iA(r),n={values:qr(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return n?.values?rc(`prisma.${e}(${i}, ${n.values})`):rc(`prisma.${e}(${i})`),{query:i,parameters:n}},aA={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new It(t,r)}},oA={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function sc(e){return function(t,r){let i,n=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=ac(t(s)):ac(t(s))}catch(a){return Promise.reject(a)}};return{get spec(){return r},then(s,a){return n().then(s,a)},catch(s){return n().catch(s)},finally(s){return n().finally(s)},requestTransaction(s){let a=n(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function ac(e){return typeof e.then=="function"?e:Promise.resolve(e)}var lA=X1.split(".")[0],uA={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},cA=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(e){return this.getGlobalTracingHelper().getTraceParent(e)}dispatchEngineSpans(e){return this.getGlobalTracingHelper().dispatchEngineSpans(e)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(e,t){return this.getGlobalTracingHelper().runInChildSpan(e,t)}getGlobalTracingHelper(){let e=globalThis[`V${lA}_PRISMA_INSTRUMENTATION`],t=globalThis.PRISMA_INSTRUMENTATION;return e?.helper??t?.helper??uA}};function dA(){return new cA}function fA(e,t=()=>{}){let r,i=new Promise(n=>r=n);return{then(n){return--e===0&&r(t()),n?.(i)}}}function pA(e){return typeof e=="string"?e:e.reduce((t,r)=>{let i=typeof r=="string"?r:r.level;return i==="query"?t:t&&(r==="info"||t==="info")?"info":i},void 0)}function xf(e){return typeof e.batchRequestIdx=="number"}function hA(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(oa(e.query.arguments)),t.push(oa(e.query.selection)),t.join("")}function oa(e){return`(${Object.keys(e).sort().map(t=>{let r=e[t];return typeof r=="object"&&r!==null?`(${t} ${oa(r)})`:t}).join(" ")})`}var mA={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function oc(e){return mA[e]}var gA=class{constructor(e){this.options=e,this.batches={}}batches;tickActive=!1;request(e){let t=this.options.batchBy(e);return t?(this.batches[t]||(this.batches[t]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((r,i)=>{this.batches[t].push({request:e,resolve:r,reject:i})})):this.options.singleLoader(e)}dispatchBatches(){for(let e in this.batches){let t=this.batches[e];delete this.batches[e],t.length===1?this.options.singleLoader(t[0].request).then(r=>{r instanceof Error?t[0].reject(r):t[0].resolve(r)}).catch(r=>{t[0].reject(r)}):(t.sort((r,i)=>this.options.batchOrder(r.request,i.request)),this.options.batchLoader(t.map(r=>r.request)).then(r=>{if(r instanceof Error)for(let i=0;i<t.length;i++)t[i].reject(r);else for(let i=0;i<t.length;i++){let n=r[i];n instanceof Error?t[i].reject(n):t[i].resolve(n)}}).catch(r=>{for(let i=0;i<t.length;i++)t[i].reject(r)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function Bt(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"decimal":return new Zi(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Bt("bigint",r));case"bytes-array":return t.map(r=>Bt("bytes",r));case"decimal-array":return t.map(r=>Bt("decimal",r));case"datetime-array":return t.map(r=>Bt("datetime",r));case"date-array":return t.map(r=>Bt("date",r));case"time-array":return t.map(r=>Bt("time",r));default:return t}}function vf(e){let t=[],r=yA(e);for(let i=0;i<e.rows.length;i++){let n=e.rows[i],s={...r};for(let a=0;a<n.length;a++)s[e.columns[a]]=Bt(e.types[a],n[a]);t.push(s)}return t}function yA(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var bA=we("prisma:client:request_handler"),xA=class{client;dataloader;logEmitter;constructor(e,t){this.logEmitter=t,this.client=e,this.dataloader=new gA({batchLoader:KS(async({requests:r,customDataProxyFetch:i})=>{let{transaction:n,otelParentCtx:s}=r[0],a=r.map(u=>u.protocolQuery),o=this.client._tracingHelper.getTraceParent(s),l=r.some(u=>oc(u.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:o,transaction:vA(n),containsWrite:l,customDataProxyFetch:i})).map((u,c)=>{if(u instanceof Error)return u;try{return this.mapQueryEngineResult(r[c],u)}catch(d){return d}})}),singleLoader:async r=>{let i=r.transaction?.kind==="itx"?wf(r.transaction):void 0,n=await this.client._engine.request(r.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:oc(r.protocolQuery.action),customDataProxyFetch:r.customDataProxyFetch});return this.mapQueryEngineResult(r,n)},batchBy:r=>r.transaction?.id?`transaction-${r.transaction.id}`:hA(r.protocolQuery),batchOrder(r,i){return r.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?r.transaction.index-i.transaction.index:0}})}async request(e){try{return await this.dataloader.request(e)}catch(t){let{clientMethod:r,callsite:i,transaction:n,args:s,modelName:a}=e;this.handleAndLogRequestError({error:t,clientMethod:r,callsite:i,transaction:n,args:s,modelName:a,globalOmit:e.globalOmit})}}mapQueryEngineResult({dataPath:e,unpacker:t},r){let i=r?.data,n=this.unpack(i,e,t);return process.env.PRISMA_CLIENT_GET_TIME?{data:n}:n}handleAndLogRequestError(e){try{this.handleRequestError(e)}catch(t){throw this.logEmitter&&this.logEmitter.emit("error",{message:t.message,target:e.clientMethod,timestamp:new Date}),t}}handleRequestError({error:e,clientMethod:t,callsite:r,transaction:i,args:n,modelName:s,globalOmit:a}){if(bA(e),wA(e,i))throw e;if(e instanceof kt&&SA(e)){let l=Sf(e.meta);kd({args:n,errors:[l],callsite:r,errorFormat:this.client._errorFormat,originalMethod:t,clientVersion:this.client._clientVersion,globalOmit:a})}let o=e.message;if(r&&(o=od({callsite:r,originalMethod:t,isPanic:e.isPanic,showColors:this.client._errorFormat==="pretty",message:o})),o=this.sanitizeMessage(o),e.code){let l=s?{modelName:s,...e.meta}:e.meta;throw new kt(o,{code:e.code,clientVersion:this.client._clientVersion,meta:l,batchRequestIdx:e.batchRequestIdx})}else{if(e.isPanic)throw new Et(o,this.client._clientVersion);if(e instanceof Oe)throw new Oe(o,{clientVersion:this.client._clientVersion,batchRequestIdx:e.batchRequestIdx});if(e instanceof le)throw new le(o,this.client._clientVersion);if(e instanceof Et)throw new Et(o,this.client._clientVersion)}throw e.clientVersion=this.client._clientVersion,e}sanitizeMessage(e){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?js(e):e}unpack(e,t,r){if(!e||(e.data&&(e=e.data),!e))return e;let i=Object.keys(e)[0],n=Object.values(e)[0],s=t.filter(l=>l!=="select"&&l!=="include"),a=Vd(n,s),o=i==="queryRaw"?vf(a):Qi(a);return r?r(o):o}get[Symbol.toStringTag](){return"RequestHandler"}};function vA(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:wf(e)};ga(e,"Unknown transaction kind")}}function wf(e){return{id:e.id,payload:e.payload}}function wA(e,t){return xf(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function SA(e){return e.code==="P2009"||e.code==="P2012"}function Sf(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(Sf)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var EA=mE,AA=Q(bc()),Z=class extends Error{constructor(e){super(e+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};ae(Z,"PrismaClientConstructorValidationError");var lc=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],uc=["pretty","colorless","minimal"],cc=["info","query","warn","error"],kA={datasources:(e,{datasourceNames:t})=>{if(e){if(typeof e!="object"||Array.isArray(e))throw new Z(`Invalid value ${JSON.stringify(e)} for "datasources" provided to PrismaClient constructor`);for(let[r,i]of Object.entries(e)){if(!t.includes(r)){let n=ir(r,t)||` Available datasources: ${t.join(", ")}`;throw new Z(`Unknown datasource ${r} provided to PrismaClient constructor.${n}`)}if(typeof i!="object"||Array.isArray(i))throw new Z(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(i&&typeof i=="object")for(let[n,s]of Object.entries(i)){if(n!=="url")throw new Z(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof s!="string")throw new Z(`Invalid value ${JSON.stringify(s)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(e,t)=>{if(!e&&Ms(t.generator)==="client")throw new Z('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(e!==null){if(e===void 0)throw new Z('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(Ms(t.generator)==="binary")throw new Z('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')}},datasourceUrl:e=>{if(typeof e<"u"&&typeof e!="string")throw new Z(`Invalid value ${JSON.stringify(e)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:e=>{if(e){if(typeof e!="string")throw new Z(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!uc.includes(e)){let t=ir(e,uc);throw new Z(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new Z(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!cc.includes(r)){let i=ir(r,cc);throw new Z(`Invalid log level "${r}" provided to PrismaClient constructor.${i}`)}}for(let r of e){t(r);let i={level:t,emit:n=>{let s=["stdout","event"];if(!s.includes(n)){let a=ir(n,s);throw new Z(`Invalid value ${JSON.stringify(n)} for "emit" in logLevel provided to PrismaClient constructor.${a}`)}}};if(r&&typeof r=="object")for(let[n,s]of Object.entries(r))if(i[n])i[n](s);else throw new Z(`Invalid property ${n} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new Z(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new Z(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new Z('"omit" option is expected to be an object.');if(e===null)throw new Z('"omit" option can not be `null`');let r=[];for(let[i,n]of Object.entries(e)){let s=IA(i,t.runtimeDataModel);if(!s){r.push({kind:"UnknownModel",modelKey:i});continue}for(let[a,o]of Object.entries(n)){let l=s.fields.find(u=>u.name===a);if(!l){r.push({kind:"UnknownField",modelKey:i,fieldName:a});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:i,fieldName:a});continue}typeof o!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:i,fieldName:a})}}if(r.length>0)throw new Z(OA(e,r))},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new Z(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let i=ir(r,t);throw new Z(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${i}`)}}};function RA(e,t){for(let[r,i]of Object.entries(e)){if(!lc.includes(r)){let n=ir(r,lc);throw new Z(`Unknown property ${r} provided to PrismaClient constructor.${n}`)}kA[r](i,t)}if(e.datasourceUrl&&e.datasources)throw new Z('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function ir(e,t){if(t.length===0||typeof e!="string")return"";let r=TA(e,t);return r?` Did you mean "${r}"?`:""}function TA(e,t){if(t.length===0)return null;let r=t.map(n=>({value:n,distance:(0,AA.default)(e,n)}));r.sort((n,s)=>n.distance<s.distance?-1:1);let i=r[0];return i.distance<3?i.value:null}function IA(e,t){return dc(t.models,e)??dc(t.types,e)}function dc(e,t){let r=Object.keys(e).find(i=>Ji(i)===t);if(r)return e[r]}function OA(e,t){let r=ka(e);for(let s of t)switch(s.kind){case"UnknownModel":r.arguments.getField(s.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${s.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${s.modelKey}" does not have a field named "${s.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:i,args:n}=Ad(r,"colorless");return`Error validating "omit" option:

${n}

${i}`}function _A(e){return e.length===0?Promise.resolve([]):new Promise((t,r)=>{let i=new Array(e.length),n=null,s=!1,a=0,o=()=>{s||(a++,a===e.length&&(s=!0,n?r(n):t(i)))},l=u=>{s||(s=!0,r(u))};for(let u=0;u<e.length;u++)e[u].then(c=>{i[u]=c,o()},c=>{if(!xf(c)){l(c);return}c.batchRequestIdx===u?l(c):(n||(n=c),o())})})}var gt=we("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var qA={requestArgsToMiddlewareArgs:e=>e,middlewareArgsToRequestArgs:e=>e},CA=Symbol.for("prisma.client.transaction.id"),PA={id:0,nextId(){return++this.id}};function NA(e){class t{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=sc();constructor(i){e=i?.__internal?.configOverride?.(e)??e,zS(e),i&&RA(i,e);let n=new Vw.EventEmitter().on("error",()=>{});this._extensions=Rd.empty(),this._previewFeatures=tA(e),this._clientVersion=e.clientVersion??EA,this._activeProvider=e.activeProvider,this._globalOmit=i?.omit,this._tracingHelper=dA();let s=e.relativeEnvPaths&&{rootEnvPath:e.relativeEnvPaths.rootEnvPath&&Rs.default.resolve(e.dirname,e.relativeEnvPaths.rootEnvPath),schemaEnvPath:e.relativeEnvPaths.schemaEnvPath&&Rs.default.resolve(e.dirname,e.relativeEnvPaths.schemaEnvPath)},a;if(i?.adapter){a=i.adapter;let l=e.activeProvider==="postgresql"||e.activeProvider==="cockroachdb"?"postgres":e.activeProvider;if(a.provider!==l)throw new le(`The Driver Adapter \`${a.adapterName}\`, based on \`${a.provider}\`, is not compatible with the provider \`${l}\` specified in the Prisma schema.`,this._clientVersion);if(i.datasources||i.datasourceUrl!==void 0)throw new le("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let o=!a&&s&&Bc(s,{conflictCheck:"none"})||e.injectableEdgeEnv?.();try{let l=i??{},u=l.__internal??{},c=u.debug===!0;c&&we.enable("prisma:client");let d=Rs.default.resolve(e.dirname,e.relativePath);Bw.default.existsSync(d)||(d=e.dirname),gt("dirname",e.dirname),gt("relativePath",e.relativePath),gt("cwd",d);let f=u.engine||{};if(l.errorFormat?this._errorFormat=l.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=e.runtimeDataModel,this._engineConfig={cwd:d,dirname:e.dirname,enableDebugLogs:c,allowTriggerPanic:f.allowTriggerPanic,prismaPath:f.binaryPath??void 0,engineEndpoint:f.endpoint,generator:e.generator,showColors:this._errorFormat==="pretty",logLevel:l.log&&pA(l.log),logQueries:l.log&&!!(typeof l.log=="string"?l.log==="query":l.log.find(p=>typeof p=="string"?p==="query":p.level==="query")),env:o?.parsed??{},flags:[],engineWasm:e.engineWasm,compilerWasm:e.compilerWasm,clientVersion:e.clientVersion,engineVersion:e.engineVersion,previewFeatures:this._previewFeatures,activeProvider:e.activeProvider,inlineSchema:e.inlineSchema,overrideDatasources:JS(l,e.datasourceNames),inlineDatasources:e.inlineDatasources,inlineSchemaHash:e.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:l.transactionOptions?.maxWait??2e3,timeout:l.transactionOptions?.timeout??5e3,isolationLevel:l.transactionOptions?.isolationLevel},logEmitter:n,isBundled:e.isBundled,adapter:a},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:qa,getBatchRequestPayload:Ia,prismaGraphQLToJSError:Oa,PrismaClientUnknownRequestError:Oe,PrismaClientInitializationError:le,PrismaClientKnownRequestError:kt,debug:we("prisma:client:accelerateEngine"),engineVersion:$w.version,clientVersion:e.clientVersion}},gt("clientVersion",e.clientVersion),this._engine=eA(e,this._engineConfig),this._requestHandler=new xA(this,n),l.log)for(let p of l.log){let m=typeof p=="string"?p:p.emit==="stdout"?p.level:null;m&&this.$on(m,g=>{$s.log(`${$s.tags[m]??""}`,g.message||g.query)})}}catch(l){throw l.clientVersion=this._clientVersion,l}return this._appliedParent=na(this)}get[Symbol.toStringTag](){return"PrismaClient"}$on(i,n){return i==="beforeExit"?this._engine.onBeforeExit(n):i&&this._engineConfig.logEmitter.on(i,n),this}$connect(){try{return this._engine.start()}catch(i){throw i.clientVersion=this._clientVersion,i}}async $disconnect(){try{await this._engine.stop()}catch(i){throw i.clientVersion=this._clientVersion,i}finally{Kb()}}$executeRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"executeRaw",args:s,transaction:i,clientMethod:n,argsMapper:nc({clientMethod:n,activeProvider:o}),callsite:Fr(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$executeRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0){let[a,o]=fc(i,n);return ic(this._activeProvider,a.text,a.values,Array.isArray(i)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(s,"$executeRaw",a,o)}throw new ot("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(i,...n){return this._createPrismaPromise(s=>(ic(this._activeProvider,i,n,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(s,"$executeRawUnsafe",[i,...n])))}$runCommandRaw(i){if(e.activeProvider!=="mongodb")throw new ot(`The ${e.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(n=>this._request({args:i,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:rA,callsite:Fr(this._errorFormat),transaction:n}))}async $queryRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"queryRaw",args:s,transaction:i,clientMethod:n,argsMapper:nc({clientMethod:n,activeProvider:o}),callsite:Fr(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$queryRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0)return this.$queryRawInternal(s,"$queryRaw",...fc(i,n));throw new ot("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(i){return this._createPrismaPromise(n=>{if(!this._hasPreviewFlag("typedSql"))throw new ot("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(n,"$queryRawTyped",i)})}$queryRawUnsafe(i,...n){return this._createPrismaPromise(s=>this.$queryRawInternal(s,"$queryRawUnsafe",[i,...n]))}_transactionWithArray({promises:i,options:n}){let s=PA.nextId(),a=fA(i.length),o=i.map((l,u)=>{if(l?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let c=n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,d={kind:"batch",id:s,index:u,isolationLevel:c,lock:a};return l.requestTransaction?.(d)??l});return _A(o)}async _transactionWithCallback({callback:i,options:n}){let s={traceparent:this._tracingHelper.getTraceParent()},a={maxWait:n?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:n?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},o=await this._engine.transaction("start",s,a),l;try{let u={kind:"itx",...o};l=await i(this._createItxClient(u)),await this._engine.transaction("commit",s,o)}catch(u){throw await this._engine.transaction("rollback",s,o).catch(()=>{}),u}return l}_createItxClient(i){return ur(na(ur(DS(this),[Ye("_appliedParent",()=>this._appliedParent._createItxClient(i)),Ye("_createPrismaPromise",()=>sc(i)),Ye(CA,()=>i.id)])),[ta(VS)])}$transaction(i,n){let s;typeof i=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?s=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:s=()=>this._transactionWithCallback({callback:i,options:n}):s=()=>this._transactionWithArray({promises:i,options:n});let a={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(a,s)}_request(i){i.otelParentCtx=this._tracingHelper.getActiveContext();let n=i.middlewareArgsMapper??qA,s={args:n.requestArgsToMiddlewareArgs(i.args),dataPath:i.dataPath,runInTransaction:!!i.transaction,action:i.action,model:i.model},a={operation:{name:"operation",attributes:{method:s.action,model:s.model,name:s.model?`${s.model}.${s.action}`:s.action}}},o=async l=>{let{runInTransaction:u,args:c,...d}=l,f={...i,...d};c&&(f.args=n.middlewareArgsToRequestArgs(c)),i.transaction!==void 0&&u===!1&&delete f.transaction;let p=await QS(this,f);return f.model?$S({result:p,modelName:f.model,args:f.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):p};return this._tracingHelper.runInChildSpan(a.operation,()=>new jw.AsyncResource("prisma-client-request").runInAsyncScope(()=>o(s)))}async _executeRequest({args:i,clientMethod:n,dataPath:s,callsite:a,action:o,model:l,argsMapper:u,transaction:c,unpacker:d,otelParentCtx:f,customDataProxyFetch:p}){try{i=u?u(i):i;let m={name:"serialize"},g=this._tracingHelper.runInChildSpan(m,()=>Cd({modelName:l,runtimeDataModel:this._runtimeDataModel,action:o,args:i,clientMethod:n,callsite:a,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return we.enabled("prisma:client")&&(gt("Prisma Client call:"),gt(`prisma.${n}(${zw(i)})`),gt("Generated request:"),gt(JSON.stringify(g,null,2)+`
`)),c?.kind==="batch"&&await c.lock,this._requestHandler.request({protocolQuery:g,modelName:l,action:o,clientMethod:n,dataPath:s,callsite:a,args:i,extensions:this._extensions,transaction:c,unpacker:d,otelParentCtx:f,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:p})}catch(m){throw m.clientVersion=this._clientVersion,m}}$metrics=new Dd(this);_hasPreviewFlag(i){return!!this._engineConfig.previewFeatures?.includes(i)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}$extends=LS}return t}function fc(e,t){return DA(e)?[new It(e,t),aA]:[e,oA]}function DA(e){return Array.isArray(e)&&Array.isArray(e.raw)}var LA=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function UA(e){return new Proxy(e,{get(t,r){if(r in t)return t[r];if(!LA.has(r))throw new TypeError(`Invalid enum value: ${String(r)}`)}})}function FA(e){Bc(e,{conflictCheck:"warn"})}});var Rf=h(L=>{Object.defineProperty(L,"__esModule",{value:!0});var{PrismaClientKnownRequestError:MA,PrismaClientUnknownRequestError:$A,PrismaClientRustPanicError:jA,PrismaClientInitializationError:VA,PrismaClientValidationError:BA,getPrismaClient:GA,sqltag:HA,empty:QA,join:KA,raw:zA,skip:rN,Decimal:JA,Debug:iN,objectEnumValues:dr,makeStrictEnum:WA,Extensions:kf,warnOnce:nN,defineDmmfProperty:YA,Public:XA,getRuntime:sN,createParam:aN}=Na(),W={};L.Prisma=W;L.$Enums={};W.prismaVersion={client:"6.19.0",engine:"2ba551f319ab1df4bc874a89965d8b3641056773"};W.PrismaClientKnownRequestError=MA;W.PrismaClientUnknownRequestError=$A;W.PrismaClientRustPanicError=jA;W.PrismaClientInitializationError=VA;W.PrismaClientValidationError=BA;W.Decimal=JA;W.sql=HA;W.empty=QA;W.join=KA;W.raw=zA;W.validator=XA.validator;W.getExtensionContext=kf.getExtensionContext;W.defineExtension=kf.defineExtension;W.DbNull=dr.instances.DbNull;W.JsonNull=dr.instances.JsonNull;W.AnyNull=dr.instances.AnyNull;W.NullTypes={DbNull:dr.classes.DbNull,JsonNull:dr.classes.JsonNull,AnyNull:dr.classes.AnyNull};var ct=require("path");L.Prisma.TransactionIsolationLevel=WA({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});L.Prisma.UserScalarFieldEnum={id:"id",username:"username",email:"email",normalizedEmail:"normalizedEmail",password:"password",displayName:"displayName",bio:"bio",avatar:"avatar",name:"name",role:"role",emailVerified:"emailVerified",emailVerifiedAt:"emailVerifiedAt",twoFactorEnabled:"twoFactorEnabled",twoFactorSecret:"twoFactorSecret",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.ScriptScalarFieldEnum={id:"id",title:"title",summary:"summary",authorId:"authorId",createdAt:"createdAt"};L.Prisma.AuditionScalarFieldEnum={id:"id",title:"title",summary:"summary",hostId:"hostId",createdAt:"createdAt"};L.Prisma.PostScalarFieldEnum={id:"id",content:"content",media:"media",authorId:"authorId",createdAt:"createdAt"};L.Prisma.ReelScalarFieldEnum={id:"id",videoUrl:"videoUrl",thumbnail:"thumbnail",caption:"caption",authorId:"authorId",createdAt:"createdAt"};L.Prisma.CommentScalarFieldEnum={id:"id",text:"text",reelId:"reelId",authorId:"authorId",createdAt:"createdAt"};L.Prisma.LikeScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};L.Prisma.BookmarkScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};L.Prisma.ConversationScalarFieldEnum={id:"id",title:"title",lastMessage:"lastMessage",lastMessageAt:"lastMessageAt",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.ConversationParticipantScalarFieldEnum={id:"id",conversationId:"conversationId",userId:"userId",joinedAt:"joinedAt"};L.Prisma.MessageScalarFieldEnum={id:"id",text:"text",conversationId:"conversationId",senderId:"senderId",createdAt:"createdAt"};L.Prisma.NotificationScalarFieldEnum={id:"id",type:"type",message:"message",recipientId:"recipientId",triggererId:"triggererId",isRead:"isRead",metadata:"metadata",createdAt:"createdAt"};L.Prisma.ConnectionRequestScalarFieldEnum={id:"id",senderId:"senderId",receiverId:"receiverId",status:"status",message:"message",createdAt:"createdAt"};L.Prisma.ProfileScalarFieldEnum={id:"id",userId:"userId",vanityUrl:"vanityUrl",headline:"headline",bio:"bio",roles:"roles",location:"location",privacy:"privacy",tags:"tags",socialLinks:"socialLinks",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.MediaScalarFieldEnum={id:"id",profileId:"profileId",type:"type",s3Key:"s3Key",posterS3Key:"posterS3Key",title:"title",description:"description",duration:"duration",width:"width",height:"height",fileSize:"fileSize",privacy:"privacy",processedStatus:"processedStatus",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.CreditScalarFieldEnum={id:"id",profileId:"profileId",title:"title",role:"role",company:"company",year:"year",description:"description",orderIndex:"orderIndex",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.UserSettingsScalarFieldEnum={id:"id",userId:"userId",notifications:"notifications",accountSecurity:"accountSecurity",privacy:"privacy",billing:"billing",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.ReelRequestScalarFieldEnum={id:"id",mediaId:"mediaId",requesterId:"requesterId",ownerId:"ownerId",status:"status",message:"message",response:"response",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.EmailVerificationTokenScalarFieldEnum={id:"id",userId:"userId",token:"token",expiresAt:"expiresAt",createdAt:"createdAt"};L.Prisma.RefreshTokenScalarFieldEnum={id:"id",userId:"userId",jti:"jti",expiresAt:"expiresAt",invalidatedAt:"invalidatedAt",createdAt:"createdAt",lastUsedAt:"lastUsedAt"};L.Prisma.PRIntelligenceScalarFieldEnum={id:"id",prNumber:"prNumber",changedFilesCount:"changedFilesCount",sensitivePathsCount:"sensitivePathsCount",riskScore:"riskScore",metadata:"metadata",createdAt:"createdAt"};L.Prisma.TestRunScalarFieldEnum={id:"id",suite:"suite",testName:"testName",status:"status",durationMs:"durationMs",runAt:"runAt",metadata:"metadata"};L.Prisma.ModerationReportScalarFieldEnum={id:"id",reporterId:"reporterId",targetType:"targetType",targetId:"targetId",category:"category",description:"description",evidenceUrls:"evidenceUrls",status:"status",severity:"severity",createdAt:"createdAt",updatedAt:"updatedAt"};L.Prisma.ModerationActionScalarFieldEnum={id:"id",reportId:"reportId",action:"action",reason:"reason",actorId:"actorId",createdAt:"createdAt"};L.Prisma.AnalyticsEventScalarFieldEnum={id:"id",event:"event",anonId:"anonId",userId:"userId",sessionId:"sessionId",properties:"properties",createdAt:"createdAt"};L.Prisma.SortOrder={asc:"asc",desc:"desc"};L.Prisma.NullableJsonNullValueInput={DbNull:W.DbNull,JsonNull:W.JsonNull};L.Prisma.JsonNullValueInput={JsonNull:W.JsonNull};L.Prisma.QueryMode={default:"default",insensitive:"insensitive"};L.Prisma.NullsOrder={first:"first",last:"last"};L.Prisma.JsonNullValueFilter={DbNull:W.DbNull,JsonNull:W.JsonNull,AnyNull:W.AnyNull};L.Prisma.ModelName={User:"User",Script:"Script",Audition:"Audition",Post:"Post",Reel:"Reel",Comment:"Comment",Like:"Like",Bookmark:"Bookmark",Conversation:"Conversation",ConversationParticipant:"ConversationParticipant",Message:"Message",Notification:"Notification",ConnectionRequest:"ConnectionRequest",Profile:"Profile",Media:"Media",Credit:"Credit",UserSettings:"UserSettings",ReelRequest:"ReelRequest",EmailVerificationToken:"EmailVerificationToken",RefreshToken:"RefreshToken",PRIntelligence:"PRIntelligence",TestRun:"TestRun",ModerationReport:"ModerationReport",ModerationAction:"ModerationAction",AnalyticsEvent:"AnalyticsEvent"};var Te={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\node_modules\\@prisma\\client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"rhel-openssl-3.0.x"}],previewFeatures:[],sourceFilePath:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\prisma\\schema.prisma"},relativeEnvPaths:{rootEnvPath:null},relativePath:"../../../prisma",clientVersion:"6.19.0",engineVersion:"2ba551f319ab1df4bc874a89965d8b3641056773",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(uuid())
  username         String    @unique
  email            String    @unique
  normalizedEmail  String?   @unique // Lowercase normalized email for case-insensitive lookups
  password         String // hashed password
  displayName      String
  bio              String?
  avatar           String?
  name             String?
  role             String    @default("artist") // 'artist' | 'observer'
  emailVerified    Boolean   @default(false)
  emailVerifiedAt  DateTime?
  twoFactorEnabled Boolean   @default(false)
  twoFactorSecret  String? // Encrypted or hashed TOTP secret
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  scripts              Script[]
  auditions            Audition[]
  posts                Post[]
  reels                Reel[]
  comments             Comment[]
  likes                Like[]
  bookmarks            Bookmark[]
  sentRequests         ConnectionRequest[]       @relation("sender")
  receivedRequests     ConnectionRequest[]       @relation("receiver")
  sentMessages         Message[]                 @relation("sender")
  conversations        ConversationParticipant[]
  notifications        Notification[]            @relation("recipient")
  triggeredNotifs      Notification[]            @relation("triggerer")
  profile              Profile?
  settings             UserSettings?
  sentReelRequests     ReelRequest[]             @relation("requester")
  receivedReelRequests ReelRequest[]             @relation("owner")
  verificationTokens   EmailVerificationToken[]
  refreshTokens        RefreshToken[]

  @@map("users")
}

model Script {
  id        String   @id @default(cuid())
  title     String
  summary   String
  authorId  String
  author    User     @relation(fields: [authorId], references: [id])
  createdAt DateTime @default(now())
}

model Audition {
  id        String   @id @default(cuid())
  title     String
  summary   String
  hostId    String
  host      User     @relation(fields: [hostId], references: [id])
  createdAt DateTime @default(now())
}

model Post {
  id        String   @id @default(uuid())
  content   String   @db.Text
  media     String[]
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([authorId])
  @@map("posts")
}

model Reel {
  id        String   @id @default(uuid())
  videoUrl  String
  thumbnail String?
  caption   String?  @db.Text
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  comments  Comment[]
  likes     Like[]
  bookmarks Bookmark[]

  @@index([authorId])
  @@index([createdAt])
  @@map("reels")
}

model Comment {
  id        String   @id @default(uuid())
  text      String   @db.Text
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([reelId])
  @@index([authorId])
  @@map("comments")
}

model Like {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("likes")
}

model Bookmark {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("bookmarks")
}

model Conversation {
  id            String    @id @default(uuid())
  title         String?
  lastMessage   String?   @db.Text
  lastMessageAt DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  participants ConversationParticipant[]
  messages     Message[]

  @@map("conversations")
}

model ConversationParticipant {
  id             String       @id @default(uuid())
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  userId         String
  user           User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  joinedAt       DateTime     @default(now())

  @@unique([conversationId, userId])
  @@index([userId])
  @@map("conversation_participants")
}

model Message {
  id             String       @id @default(uuid())
  text           String       @db.Text
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  senderId       String
  sender         User         @relation("sender", fields: [senderId], references: [id], onDelete: Cascade)
  createdAt      DateTime     @default(now())

  @@index([conversationId])
  @@index([senderId])
  @@map("messages")
}

model Notification {
  id          String   @id @default(uuid())
  type        String // 'like', 'comment', 'follow', 'message'
  message     String   @db.Text
  recipientId String
  recipient   User     @relation("recipient", fields: [recipientId], references: [id], onDelete: Cascade)
  triggererId String?
  triggerer   User?    @relation("triggerer", fields: [triggererId], references: [id], onDelete: SetNull)
  isRead      Boolean  @default(false)
  metadata    Json? // Additional data like reelId, commentId, etc.
  createdAt   DateTime @default(now())

  @@index([recipientId, isRead])
  @@index([createdAt])
  @@map("notifications")
}

model ConnectionRequest {
  id         String   @id @default(uuid())
  senderId   String
  sender     User     @relation("sender", fields: [senderId], references: [id])
  receiverId String
  receiver   User     @relation("receiver", fields: [receiverId], references: [id])
  status     String   @default("pending")
  message    String?
  createdAt  DateTime @default(now())

  @@unique([senderId, receiverId])
  @@map("connection_requests")
}

model Profile {
  id          String   @id @default(uuid())
  userId      String   @unique
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  vanityUrl   String   @unique
  headline    String?
  bio         String?  @db.Text
  roles       String[] // ["Actor", "Director", "Writer"]
  location    Json? // { city: "Los Angeles", state: "CA", country: "USA" }
  privacy     Json     @default("{}") // { visibility: "public|network|private", showEmail: false, showPhone: false }
  tags        String[] // searchable tags
  socialLinks Json? // { website: "", instagram: "", imdb: "" }
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  media   Media[]
  credits Credit[]

  @@index([vanityUrl])
  @@index([roles])
  @@map("profiles")
}

model Media {
  id              String   @id @default(uuid())
  profileId       String
  profile         Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  type            String // "image" | "video" | "pdf"
  s3Key           String // S3 object key
  posterS3Key     String? // For videos - thumbnail/poster frame
  title           String?
  description     String?  @db.Text
  duration        Int? // For videos in seconds
  width           Int?
  height          Int?
  fileSize        Int? // In bytes
  privacy         String   @default("public") // "public" | "on-request" | "private"
  processedStatus String   @default("pending") // "pending" | "processing" | "complete" | "failed"
  metadata        Json? // Additional metadata like tags, derivatives, etc.
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  reelRequests ReelRequest[]

  @@index([profileId])
  @@index([type])
  @@index([privacy])
  @@index([processedStatus])
  @@map("media")
}

model Credit {
  id          String   @id @default(uuid())
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  title       String // Project/show title
  role        String // Character or position
  company     String? // Production company
  year        Int?
  description String?  @db.Text
  orderIndex  Int      @default(0) // For custom ordering
  metadata    Json? // Additional fields like genre, awards, etc.
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([profileId])
  @@index([year])
  @@map("credits")
}

model UserSettings {
  id              String   @id @default(uuid())
  userId          String   @unique
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  notifications   Json     @default("{}") // { email: true, push: true, reelRequests: true, messages: true }
  accountSecurity Json     @default("{}") // { twoFactorEnabled: false, loginNotifications: true }
  privacy         Json     @default("{}") // { showActivity: true, allowMessagesFrom: "everyone" }
  billing         Json? // Reference to billing info (not stored directly for PCI compliance)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("user_settings")
}

model ReelRequest {
  id          String   @id @default(uuid())
  mediaId     String
  media       Media    @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  requesterId String
  requester   User     @relation("requester", fields: [requesterId], references: [id], onDelete: Cascade)
  ownerId     String
  owner       User     @relation("owner", fields: [ownerId], references: [id], onDelete: Cascade)
  status      String   @default("pending") // "pending" | "approved" | "denied"
  message     String?  @db.Text
  response    String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([mediaId, requesterId])
  @@index([mediaId])
  @@index([requesterId])
  @@index([ownerId, status])
  @@map("reel_requests")
}

model EmailVerificationToken {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@index([userId])
  @@index([token])
  @@map("email_verification_tokens")
}

model RefreshToken {
  id            String    @id @default(uuid())
  userId        String
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  jti           String    @unique // JWT ID for tracking
  expiresAt     DateTime
  invalidatedAt DateTime? // When token was invalidated (logout)
  createdAt     DateTime  @default(now())
  lastUsedAt    DateTime  @default(now())

  @@index([userId])
  @@index([jti])
  @@index([userId, invalidatedAt])
  @@map("refresh_tokens")
}

model PRIntelligence {
  id                  String   @id @default(uuid())
  prNumber            Int
  changedFilesCount   Int
  sensitivePathsCount Int
  riskScore           Float
  metadata            Json? // Additional PR metadata
  createdAt           DateTime @default(now())

  @@index([prNumber])
  @@index([riskScore])
  @@map("pr_intelligence")
}

model TestRun {
  id         String   @id @default(uuid())
  suite      String
  testName   String
  status     String // "passed" | "failed" | "skipped"
  durationMs Int
  runAt      DateTime @default(now())
  metadata   Json? // Additional test metadata

  @@index([suite, testName])
  @@index([runAt])
  @@index([status])
  @@map("test_runs")
}

model ModerationReport {
  id           String   @id @default(cuid())
  reporterId   String
  targetType   String // "user" | "profile" | "post" | "comment" | "link"
  targetId     String
  category     String // from REPORT_CATEGORY_ALLOWLIST
  description  String?  @db.Text
  evidenceUrls String[] @default([])
  status       String   @default("open") // "open" | "reviewed" | "actioned" | "dismissed"
  severity     Int      @default(0) // 0=info,1=low,2=med,3=high
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  actions ModerationAction[]

  @@index([reporterId])
  @@index([targetType, targetId])
  @@index([status])
  @@index([category])
  @@index([severity])
  @@index([createdAt])
  @@map("moderation_reports")
}

model ModerationAction {
  id        String   @id @default(cuid())
  reportId  String
  action    String // "allow" | "remove" | "ban" | "warn"
  reason    String?  @db.Text
  actorId   String // admin userId
  createdAt DateTime @default(now())

  report ModerationReport @relation(fields: [reportId], references: [id], onDelete: Cascade)

  @@index([reportId])
  @@index([actorId])
  @@index([createdAt])
  @@map("moderation_actions")
}

model AnalyticsEvent {
  id         String   @id @default(cuid())
  event      String
  anonId     String? // random UUID per browser (cookie); no userId unless strictly needed
  userId     String? // optional: only if user is logged in AND consented (flag controlled)
  sessionId  String? // generated client-side ephemeral (no personal data)
  properties Json?
  createdAt  DateTime @default(now())

  @@index([event])
  @@index([createdAt])
  @@map("analytics_events")
}
`,inlineSchemaHash:"7e2e2a26a1c41eb103ff9d68413a3e4434415fea613cb1fa8dc67b1314b1865b",copyEngine:!0},Af=require("fs");Te.dirname=__dirname;if(!Af.existsSync(ct.join(__dirname,"schema.prisma"))){let e=["node_modules/.prisma/client",".prisma/client"],t=e.find(r=>Af.existsSync(ct.join(process.cwd(),r,"schema.prisma")))??e[0];Te.dirname=ct.join(process.cwd(),t),Te.isBundled=!0}Te.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":"users","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"username","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"normalizedEmail","kind":"scalar","isList":false,"isRequired":false,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"displayName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"avatar","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"artist","isGenerated":false,"isUpdatedAt":false},{"name":"emailVerified","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"emailVerifiedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorEnabled","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorSecret","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"scripts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Script","nativeType":null,"relationName":"ScriptToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"auditions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Audition","nativeType":null,"relationName":"AuditionToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"posts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Post","nativeType":null,"relationName":"PostToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"reels","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"ReelToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"receiver","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentMessages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"conversations","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"recipient","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"triggeredNotifs","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"triggerer","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"ProfileToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"settings","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"UserSettings","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"requester","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"owner","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"verificationTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"EmailVerificationToken","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"refreshTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"RefreshToken","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Script":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ScriptToUser","relationFromFields":["authorId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Audition":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"hostId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"host","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"AuditionToUser","relationFromFields":["hostId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Post":{"dbName":"posts","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"content","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"PostToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Reel":{"dbName":"reels","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"videoUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"thumbnail","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"caption","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ReelToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Comment":{"dbName":"comments","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"CommentToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"CommentToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Like":{"dbName":"likes","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"LikeToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"LikeToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Bookmark":{"dbName":"bookmarks","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Conversation":{"dbName":"conversations","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessage","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessageAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"participants","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"messages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConversationParticipant":{"dbName":"conversation_participants","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"joinedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["conversationId","userId"]],"uniqueIndexes":[{"name":null,"fields":["conversationId","userId"]}],"isGenerated":false},"Message":{"dbName":"messages","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Notification":{"dbName":"notifications","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"recipientId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"recipient","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"recipient","relationFromFields":["recipientId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"triggererId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"triggerer","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"triggerer","relationFromFields":["triggererId"],"relationToFields":["id"],"relationOnDelete":"SetNull","isGenerated":false,"isUpdatedAt":false},{"name":"isRead","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConnectionRequest":{"dbName":"connection_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"receiverId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"receiver","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"receiver","relationFromFields":["receiverId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["senderId","receiverId"]],"uniqueIndexes":[{"name":null,"fields":["senderId","receiverId"]}],"isGenerated":false},"Profile":{"dbName":"profiles","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ProfileToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"vanityUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"headline","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"roles","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"location","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"tags","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"socialLinks","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"media","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"credits","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Credit","nativeType":null,"relationName":"CreditToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Media":{"dbName":"media","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"MediaToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"s3Key","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"posterS3Key","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"duration","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"width","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"height","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"fileSize","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"public","isGenerated":false,"isUpdatedAt":false},{"name":"processedStatus","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"reelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Credit":{"dbName":"credits","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"CreditToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"company","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"year","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"orderIndex","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"UserSettings":{"dbName":"user_settings","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"accountSecurity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"billing","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ReelRequest":{"dbName":"reel_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"mediaId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":["mediaId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"requesterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"requester","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"requester","relationFromFields":["requesterId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"ownerId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"owner","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"owner","relationFromFields":["ownerId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"response","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[["mediaId","requesterId"]],"uniqueIndexes":[{"name":null,"fields":["mediaId","requesterId"]}],"isGenerated":false},"EmailVerificationToken":{"dbName":"email_verification_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"token","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"RefreshToken":{"dbName":"refresh_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"jti","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"invalidatedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"lastUsedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"PRIntelligence":{"dbName":"pr_intelligence","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"prNumber","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"changedFilesCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sensitivePathsCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"riskScore","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"TestRun":{"dbName":"test_runs","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"suite","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"testName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"durationMs","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"runAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationReport":{"dbName":"moderation_reports","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reporterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetType","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"category","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"evidenceUrls","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":[],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"open","isGenerated":false,"isUpdatedAt":false},{"name":"severity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"actions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationAction","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationAction":{"dbName":"moderation_actions","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reportId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"action","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reason","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"actorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"report","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationReport","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":["reportId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"AnalyticsEvent":{"dbName":"analytics_events","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"event","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"anonId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sessionId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"properties","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{},"types":{}}');YA(L.Prisma,Te.runtimeDataModel);Te.engineWasm=void 0;Te.compilerWasm=void 0;var{warnEnvConflicts:ZA}=Na();ZA({rootEnvPath:Te.relativeEnvPaths.rootEnvPath&&ct.resolve(Te.dirname,Te.relativeEnvPaths.rootEnvPath),schemaEnvPath:Te.relativeEnvPaths.schemaEnvPath&&ct.resolve(Te.dirname,Te.relativeEnvPaths.schemaEnvPath)});var ek=GA(Te);L.PrismaClient=ek;Object.assign(L,W);ct.join(__dirname,"libquery_engine-rhel-openssl-3.0.x.so.node");ct.join(process.cwd(),"node_modules/.prisma/client/libquery_engine-rhel-openssl-3.0.x.so.node");ct.join(__dirname,"schema.prisma");ct.join(process.cwd(),"node_modules/.prisma/client/schema.prisma")});var If=h((lN,Tf)=>{Tf.exports={...Rf()}});var _f=h((uN,Of)=>{Of.exports={...If()}});var Df=h(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});function nk(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Nf=nk(require("crypto")),sk=(e,t,r)=>Nf.createHmac(e,Buffer.from(t,"hex")).update(Buffer.from(r,"hex")).digest().toString("hex"),ak=(e,t)=>Nf.randomBytes(e).toString(t);on.createDigest=sk;on.createRandomBytes=ak});var Uf=h(La=>{"use strict";var ok="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Lf=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function lk(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1}La.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t=0,r=0,i=0,n=0,s=new Buffer(lk(e)*8);t<e.length;){var a=e[t];i>3?(n=a&255>>i,i=(i+5)%8,n=n<<i|(t+1<e.length?e[t+1]:0)>>8-i,t++):(n=a>>8-(i+5)&31,i=(i+5)%8,i===0&&t++),s[r]=ok.charCodeAt(n),r++}for(t=r;t<s.length;t++)s[t]=61;return s};La.decode=function(e){var t=0,r=0,i,n=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var s=new Buffer(Math.ceil(e.length*5/8)),a=0;a<e.length&&e[a]!==61;a++){var o=e[a]-48;if(o<Lf.length)r=Lf[o],t<=3?(t=(t+5)%8,t===0?(i|=r,s[n]=i,n++,i=0):i|=255&r<<8-t):(t=(t+5)%8,i|=255&r>>>t,s[n]=i,n++,i=255&r<<8-t);else throw new Error("Invalid input - it is not base32 encoded string")}return s.slice(0,n)}});var Mf=h(Ua=>{var Ff=Uf();Ua.encode=Ff.encode;Ua.decode=Ff.decode});var jf=h(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});function uk(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var $f=uk(Mf()),ck=(e,t)=>$f.decode(e).toString(t),dk=(e,t)=>$f.encode(Buffer.from(e,t).toString("ascii")).toString().replace(/=/g,"");ln.keyDecoder=ck;ln.keyEncoder=dk});var up=h(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});function hn(e){return Object.keys(e).map(t=>e[t])}(function(e){e.SHA1="sha1",e.SHA256="sha256",e.SHA512="sha512"})(w.HashAlgorithms||(w.HashAlgorithms={}));var cn=hn(w.HashAlgorithms);(function(e){e.ASCII="ascii",e.BASE64="base64",e.HEX="hex",e.LATIN1="latin1",e.UTF8="utf8"})(w.KeyEncodings||(w.KeyEncodings={}));var Fa=hn(w.KeyEncodings);(function(e){e.HOTP="hotp",e.TOTP="totp"})(w.Strategy||(w.Strategy={}));var Ma=hn(w.Strategy),mn=()=>{throw new Error("Please provide an options.createDigest implementation.")};function Va(e){return/^(\d+)$/.test(e)}function Ba(e,t,r){return e.length>=t?e:`${Array(t+1).join(r)}${e}`.slice(-1*t)}function Ga(e){let t=`otpauth://${e.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,r=[];if(Ma.indexOf(e.type)<0)throw new Error(`Expecting options.type to be one of ${Ma.join(", ")}. Received ${e.type}.`);if(e.type==="hotp"){if(e.counter==null||typeof e.counter!="number")throw new Error('Expecting options.counter to be a number when options.type is "hotp".');r.push(`&counter=${e.counter}`)}return e.type==="totp"&&e.step&&r.push(`&period=${e.step}`),e.digits&&r.push(`&digits=${e.digits}`),e.algorithm&&r.push(`&algorithm=${e.algorithm.toUpperCase()}`),e.issuer&&r.push(`&issuer=${encodeURIComponent(e.issuer)}`),t.replace("{labelPrefix}",encodeURIComponent(e.issuer||e.accountName)).replace("{accountName}",encodeURIComponent(e.accountName)).replace("{secret}",e.secret).replace("{query}",r.join(""))}var dn=class e{constructor(t={}){this._defaultOptions=Object.freeze({...t}),this._options=Object.freeze({})}create(t={}){return new e(t)}clone(t={}){let r=this.create({...this._defaultOptions,...t});return r.options=this._options,r}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(t){this._options=Object.freeze({...this._options,...t})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}};function Ha(e){if(typeof e.createDigest!="function")throw new Error("Expecting options.createDigest to be a function.");if(typeof e.createHmacKey!="function")throw new Error("Expecting options.createHmacKey to be a function.");if(typeof e.digits!="number")throw new Error("Expecting options.digits to be a number.");if(!e.algorithm||cn.indexOf(e.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${cn.join(", ")}. Received ${e.algorithm}.`);if(!e.encoding||Fa.indexOf(e.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${Fa.join(", ")}. Received ${e.encoding}.`)}var Bf=(e,t,r)=>Buffer.from(t,r).toString("hex");function Gf(){return{algorithm:w.HashAlgorithms.SHA1,createHmacKey:Bf,createDigest:mn,digits:6,encoding:w.KeyEncodings.ASCII}}function Hf(e){let t={...Gf(),...e};return Ha(t),Object.freeze(t)}function Qf(e){let t=e.toString(16);return Ba(t,16,"0")}function Kf(e,t){let r=Buffer.from(e,"hex"),i=r[r.length-1]&15,s=((r[i]&127)<<24|(r[i+1]&255)<<16|(r[i+2]&255)<<8|r[i+3]&255)%Math.pow(10,t);return Ba(String(s),t,"0")}function fk(e,t,r){let i=Qf(t),n=r.createHmacKey(r.algorithm,e,r.encoding);return r.createDigest(r.algorithm,n,i)}function gn(e,t,r){let i=r.digest||fk(e,t,r);return Kf(i,r.digits)}function zf(e,t,r,i){if(!Va(e))return!1;let n=gn(t,r,i);return e===n}function Jf(e,t,r,i,n){return Ga({algorithm:n.algorithm,digits:n.digits,type:w.Strategy.HOTP,accountName:e,counter:i,issuer:t,secret:r})}var fn=class e extends dn{create(t={}){return new e(t)}allOptions(){return Hf(this.options)}generate(t,r){return gn(t,r,this.allOptions())}check(t,r,i){return zf(t,r,i,this.allOptions())}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret,t.counter)}keyuri(t,r,i,n){return Jf(t,r,i,n,this.allOptions())}};function Wf(e){if(typeof e=="number")return[Math.abs(e),Math.abs(e)];if(Array.isArray(e)){let[t,r]=e;if(typeof t=="number"&&typeof r=="number")return[Math.abs(t),Math.abs(r)]}throw new Error("Expecting options.window to be an number or [number, number].")}function Qa(e){if(Ha(e),Wf(e.window),typeof e.epoch!="number")throw new Error("Expecting options.epoch to be a number.");if(typeof e.step!="number")throw new Error("Expecting options.step to be a number.")}var un=(e,t,r)=>{let i=e.length,n=Buffer.from(e,t).toString("hex");if(i<r){let s=new Array(r-i+1).join(n);return Buffer.from(s,"hex").slice(0,r).toString("hex")}return n},Ka=(e,t,r)=>{switch(e){case w.HashAlgorithms.SHA1:return un(t,r,20);case w.HashAlgorithms.SHA256:return un(t,r,32);case w.HashAlgorithms.SHA512:return un(t,r,64);default:throw new Error(`Expecting algorithm to be one of ${cn.join(", ")}. Received ${e}.`)}};function Yf(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:mn,createHmacKey:Ka,digits:6,encoding:w.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function Xf(e){let t={...Yf(),...e};return Qa(t),Object.freeze(t)}function Zf(e,t){return Math.floor(e/t/1e3)}function yn(e,t){let r=Zf(t.epoch,t.step);return gn(e,r,t)}function Vf(e,t,r,i){let n=[];if(i===0)return n;for(let s=1;s<=i;s++){let a=t*s*r;n.push(e+a)}return n}function ep(e,t,r){let i=Wf(r),n=t*1e3;return{current:e,past:Vf(e,-1,n,i[0]),future:Vf(e,1,n,i[1])}}function za(e,t,r){if(!Va(e))return!1;let i=yn(t,r);return e===i}function $a(e,t,r,i){let n=null;return e.some((s,a)=>za(t,r,{...i,epoch:s})?(n=a+1,!0):!1),n}function Ja(e,t,r){if(za(e,t,r))return 0;let i=ep(r.epoch,r.step,r.window),n=$a(i.past,e,t,r);return n!==null?n*-1:$a(i.future,e,t,r)}function Wa(e,t){return Math.floor(e/1e3)%t}function tp(e,t){return t-Wa(e,t)}function rp(e,t,r,i){return Ga({algorithm:i.algorithm,digits:i.digits,step:i.step,type:w.Strategy.TOTP,accountName:e,issuer:t,secret:r})}var pn=class e extends fn{create(t={}){return new e(t)}allOptions(){return Xf(this.options)}generate(t){return yn(t,this.allOptions())}checkDelta(t,r){return Ja(t,r,this.allOptions())}check(t,r){return typeof this.checkDelta(t,r)=="number"}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret)}timeRemaining(){let t=this.allOptions();return tp(t.epoch,t.step)}timeUsed(){let t=this.allOptions();return Wa(t.epoch,t.step)}keyuri(t,r,i){return rp(t,r,i,this.allOptions())}};function ip(e){if(Qa(e),typeof e.keyDecoder!="function")throw new Error("Expecting options.keyDecoder to be a function.");if(e.keyEncoder&&typeof e.keyEncoder!="function")throw new Error("Expecting options.keyEncoder to be a function.")}function np(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:mn,createHmacKey:Ka,digits:6,encoding:w.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function sp(e){let t={...np(),...e};return ip(t),Object.freeze(t)}function Ya(e,t){return t.keyEncoder(e,t.encoding)}function bn(e,t){return t.keyDecoder(e,t.encoding)}function ap(e,t){let r=t.createRandomBytes(e,t.encoding);return Ya(r,t)}function op(e,t){return yn(bn(e,t),t)}function lp(e,t,r){return Ja(e,bn(t,r),r)}var ja=class e extends pn{create(t={}){return new e(t)}allOptions(){return sp(this.options)}generate(t){return op(t,this.allOptions())}checkDelta(t,r){return lp(t,r,this.allOptions())}encode(t){return Ya(t,this.allOptions())}decode(t){return bn(t,this.allOptions())}generateSecret(t=10){return ap(t,this.allOptions())}};w.Authenticator=ja;w.HASH_ALGORITHMS=cn;w.HOTP=fn;w.KEY_ENCODINGS=Fa;w.OTP=dn;w.STRATEGY=Ma;w.TOTP=pn;w.authenticatorCheckWithWindow=lp;w.authenticatorDecoder=bn;w.authenticatorDefaultOptions=np;w.authenticatorEncoder=Ya;w.authenticatorGenerateSecret=ap;w.authenticatorOptionValidator=ip;w.authenticatorOptions=sp;w.authenticatorToken=op;w.createDigestPlaceholder=mn;w.hotpCheck=zf;w.hotpCounter=Qf;w.hotpCreateHmacKey=Bf;w.hotpDefaultOptions=Gf;w.hotpDigestToToken=Kf;w.hotpKeyuri=Jf;w.hotpOptions=Hf;w.hotpOptionsValidator=Ha;w.hotpToken=gn;w.isTokenValid=Va;w.keyuri=Ga;w.objectValues=hn;w.padStart=Ba;w.totpCheck=za;w.totpCheckByEpoch=$a;w.totpCheckWithWindow=Ja;w.totpCounter=Zf;w.totpCreateHmacKey=Ka;w.totpDefaultOptions=Yf;w.totpEpochAvailable=ep;w.totpKeyuri=rp;w.totpOptions=Xf;w.totpOptionsValidator=Qa;w.totpPadSecret=un;w.totpTimeRemaining=tp;w.totpTimeUsed=Wa;w.totpToken=yn});var dp=h(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var xn=Df(),cp=jf(),Xa=up(),pk=new Xa.HOTP({createDigest:xn.createDigest}),hk=new Xa.TOTP({createDigest:xn.createDigest}),mk=new Xa.Authenticator({createDigest:xn.createDigest,createRandomBytes:xn.createRandomBytes,keyDecoder:cp.keyDecoder,keyEncoder:cp.keyEncoder});ei.authenticator=mk;ei.hotp=pk;ei.totp=hk});var pp=h(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var fp=dp();Object.keys(fp).forEach(function(e){e!=="default"&&Object.defineProperty(Za,e,{enumerable:!0,get:function(){return fp[e]}})})});var mp=h((EN,vk)=>{vk.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var fr=h(_e=>{"use strict";var wk=_e&&_e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.getKeyIndexes=_e.hasFlag=_e.exists=_e.list=void 0;var vn=wk(mp());_e.list=Object.keys(vn.default);var ro={};_e.list.forEach(e=>{ro[e]=vn.default[e].flags.reduce(function(t,r){return t[r]=!0,t},{})});function Sk(e){return!!vn.default[e]}_e.exists=Sk;function Ek(e,t){if(!ro[e])throw new Error("Unknown command "+e);return!!ro[e][t]}_e.hasFlag=Ek;function Ak(e,t,r){let i=vn.default[e];if(!i)throw new Error("Unknown command "+e);if(!Array.isArray(t))throw new Error("Expect args to be an array");let n=[],s=!!(r&&r.parseExternalKey),a=(l,u)=>{let c=[],d=Number(l[u]);for(let f=0;f<d;f++)c.push(f+u+1);return c},o=(l,u,c)=>{for(let d=u;d<l.length-1;d+=1)if(String(l[d]).toLowerCase()===c.toLowerCase())return d+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":n.push(0,...a(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":n.push(...a(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{n.push(...a(t,0));break}case"georadius":{n.push(0);let l=o(t,5,"STORE");l&&n.push(l);let u=o(t,5,"STOREDIST");u&&n.push(u);break}case"georadiusbymember":{n.push(0);let l=o(t,4,"STORE");l&&n.push(l);let u=o(t,4,"STOREDIST");u&&n.push(u);break}case"sort":case"sort_ro":n.push(0);for(let l=1;l<t.length-1;l++){let u=t[l];if(typeof u!="string")continue;let c=u.toUpperCase();c==="GET"?(l+=1,u=t[l],u!=="#"&&(s?n.push([l,gp(u)]):n.push(l))):c==="BY"?(l+=1,s?n.push([l,gp(t[l])]):n.push(l)):c==="STORE"&&(l+=1,n.push(l))}break;case"migrate":if(t[2]==="")for(let l=5;l<t.length-1;l++){let u=t[l];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let c=l+1;c<t.length;c++)n.push(c);break}}else n.push(2);break;case"xreadgroup":case"xread":for(let l=e==="xread"?0:3;l<t.length-1;l++)if(String(t[l]).toUpperCase()==="STREAMS"){for(let u=l+1;u<=l+(t.length-1-l)/2;u++)n.push(u);break}break;default:if(i.step>0){let l=i.keyStart-1,u=i.keyStop>0?i.keyStop:t.length+i.keyStop+1;for(let c=l;c<u;c+=i.step)n.push(c)}break}return n}_e.getKeyIndexes=Ak;function gp(e){typeof e!="string"&&(e=String(e));let t=e.indexOf("->");return t===-1?e.length:t}});var yp=h(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.tryCatch=Ot.errorObj=void 0;Ot.errorObj={e:{}};var io;function kk(e,t){try{let r=io;return io=null,r.apply(this,arguments)}catch(r){return Ot.errorObj.e=r,Ot.errorObj}}function Rk(e){return io=e,kk}Ot.tryCatch=Rk});var _t=h(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});var pr=yp();function bp(e){setTimeout(function(){throw e},0)}function Tk(e,t,r){return typeof t=="function"&&e.then(i=>{let n;r!==void 0&&Object(r).spread&&Array.isArray(i)?n=pr.tryCatch(t).apply(void 0,[null].concat(i)):n=i===void 0?pr.tryCatch(t)(null):pr.tryCatch(t)(null,i),n===pr.errorObj&&bp(n.e)},i=>{if(!i){let s=new Error(i+"");Object.assign(s,{cause:i}),i=s}let n=pr.tryCatch(t)(i);n===pr.errorObj&&bp(n.e)}),e}no.default=Tk});var wp=h((TN,vp)=>{"use strict";var xp=require("assert"),ti=require("util");function hr(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ti.inherits(hr,Error);Object.defineProperty(hr.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function so(e,t,r){xp(t),xp.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=r,this.buffer=t}ti.inherits(so,hr);Object.defineProperty(so.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function ao(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}ti.inherits(ao,hr);Object.defineProperty(ao.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function wn(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ti.inherits(wn,hr);Object.defineProperty(wn.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function oo(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ti.inherits(oo,wn);Object.defineProperty(oo.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});vp.exports={RedisError:hr,ParserError:so,ReplyError:ao,AbortError:wn,InterruptError:oo}});var Ap=h((IN,Ep)=>{"use strict";var Sp=require("assert"),mr=class extends Error{get name(){return this.constructor.name}},lo=class extends mr{constructor(t,r,i){Sp(r),Sp.strictEqual(typeof i,"number");let n=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=n,this.offset=i,this.buffer=r}get name(){return this.constructor.name}},uo=class extends mr{constructor(t){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=r}get name(){return this.constructor.name}},Sn=class extends mr{get name(){return this.constructor.name}},co=class extends Sn{get name(){return this.constructor.name}};Ep.exports={RedisError:mr,ParserError:lo,ReplyError:uo,AbortError:Sn,InterruptError:co}});var Jt=h((ON,kp)=>{"use strict";var Ik=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?wp():Ap();kp.exports=Ik});var ri=h((_N,fo)=>{var Rp=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],Ok=function(t){for(var r,i=0,n=0,s=[],a=t.length;i<a;i++)r=t.charCodeAt(i),r<128?s[n++]=r:r<2048?(s[n++]=r>>6|192,s[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),s[n++]=r>>18|240,s[n++]=r>>12&63|128,s[n++]=r>>6&63|128,s[n++]=r&63|128):(s[n++]=r>>12|224,s[n++]=r>>6&63|128,s[n++]=r&63|128);return s},Tp=fo.exports=function(t){for(var r,i=0,n=-1,s=0,a=0,o=typeof t=="string"?Ok(t):t,l=o.length;i<l;){if(r=o[i++],n===-1)r===123&&(n=i);else if(r!==125)a=Rp[(r^a>>8)&255]^a<<8;else if(i-1!==n)return a&16383;s=Rp[(r^s>>8)&255]^s<<8}return s&16383};fo.exports.generateMulti=function(t){for(var r=1,i=t.length,n=Tp(t[0]);r<i;)if(Tp(t[r++])!==n)return-1;return n}});var Dp=h((qN,Np)=>{var Op=9007199254740991,_k="[object Arguments]",qk="[object Function]",Ck="[object GeneratorFunction]",Pk=/^(?:0|[1-9]\d*)$/;function _p(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Nk(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var ii=Object.prototype,ni=ii.hasOwnProperty,qp=ii.toString,Dk=ii.propertyIsEnumerable,Ip=Math.max;function Lk(e,t){var r=Qk(e)||Hk(e)?Nk(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||ni.call(e,s))&&!(n&&(s=="length"||Pp(s,i)))&&r.push(s);return r}function Uk(e,t,r,i){return e===void 0||po(e,ii[r])&&!ni.call(i,r)?t:e}function Fk(e,t,r){var i=e[t];(!(ni.call(e,t)&&po(i,r))||r===void 0&&!(t in e))&&(e[t]=r)}function Mk(e){if(!mo(e))return Gk(e);var t=Bk(e),r=[];for(var i in e)i=="constructor"&&(t||!ni.call(e,i))||r.push(i);return r}function Cp(e,t){return t=Ip(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,n=Ip(r.length-t,0),s=Array(n);++i<n;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=s,_p(e,this,a)}}function $k(e,t,r,i){r||(r={});for(var n=-1,s=t.length;++n<s;){var a=t[n],o=i?i(r[a],e[a],a,r,e):void 0;Fk(r,a,o===void 0?e[a]:o)}return r}function jk(e){return Cp(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&Vk(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}function Pp(e,t){return t=t??Op,!!t&&(typeof e=="number"||Pk.test(e))&&e>-1&&e%1==0&&e<t}function Vk(e,t,r){if(!mo(r))return!1;var i=typeof t;return(i=="number"?ho(r)&&Pp(t,r.length):i=="string"&&t in r)?po(r[t],e):!1}function Bk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ii;return e===r}function Gk(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function po(e,t){return e===t||e!==e&&t!==t}function Hk(e){return Kk(e)&&ni.call(e,"callee")&&(!Dk.call(e,"callee")||qp.call(e)==_k)}var Qk=Array.isArray;function ho(e){return e!=null&&Jk(e.length)&&!zk(e)}function Kk(e){return Wk(e)&&ho(e)}function zk(e){var t=mo(e)?qp.call(e):"";return t==qk||t==Ck}function Jk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Op}function mo(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Wk(e){return!!e&&typeof e=="object"}var Yk=jk(function(e,t,r,i){$k(t,Zk(t),e,i)}),Xk=Cp(function(e){return e.push(void 0,Uk),_p(Yk,void 0,e)});function Zk(e){return ho(e)?Lk(e,!0):Mk(e)}Np.exports=Xk});var Fp=h((CN,Up)=>{var eR=9007199254740991,tR="[object Arguments]",rR="[object Function]",iR="[object GeneratorFunction]",go=Object.prototype,nR=go.hasOwnProperty,Lp=go.toString,sR=go.propertyIsEnumerable;function aR(e){return lR(e)&&nR.call(e,"callee")&&(!sR.call(e,"callee")||Lp.call(e)==tR)}function oR(e){return e!=null&&cR(e.length)&&!uR(e)}function lR(e){return fR(e)&&oR(e)}function uR(e){var t=dR(e)?Lp.call(e):"";return t==rR||t==iR}function cR(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=eR}function dR(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fR(e){return!!e&&typeof e=="object"}Up.exports=aR});var En=h(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.isArguments=qt.defaults=qt.noop=void 0;var pR=Dp();qt.defaults=pR;var hR=Fp();qt.isArguments=hR;function mR(){}qt.noop=mR});var yo=h((NN,Mp)=>{var gr=1e3,yr=gr*60,br=yr*60,Wt=br*24,gR=Wt*7,yR=Wt*365.25;Mp.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return bR(e);if(r==="number"&&isFinite(e))return t.long?vR(e):xR(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function bR(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*yR;case"weeks":case"week":case"w":return r*gR;case"days":case"day":case"d":return r*Wt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*br;case"minutes":case"minute":case"mins":case"min":case"m":return r*yr;case"seconds":case"second":case"secs":case"sec":case"s":return r*gr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function xR(e){var t=Math.abs(e);return t>=Wt?Math.round(e/Wt)+"d":t>=br?Math.round(e/br)+"h":t>=yr?Math.round(e/yr)+"m":t>=gr?Math.round(e/gr)+"s":e+"ms"}function vR(e){var t=Math.abs(e);return t>=Wt?An(e,t,Wt,"day"):t>=br?An(e,t,br,"hour"):t>=yr?An(e,t,yr,"minute"):t>=gr?An(e,t,gr,"second"):e+" ms"}function An(e,t,r,i){var n=t>=r*1.5;return Math.round(e/r)+" "+i+(n?"s":"")}});var bo=h((DN,$p)=>{function wR(e){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=n,r.enabled=o,r.humanize=yo(),r.destroy=u,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(c){let d,f=null,p,m;function g(...E){if(!g.enabled)return;let I=g,C=Number(new Date),S=C-(d||C);I.diff=S,I.prev=d,I.curr=C,d=C,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let O=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(A,b)=>{if(A==="%%")return"%";O++;let R=r.formatters[b];if(typeof R=="function"){let q=E[O];A=R.call(I,q),E.splice(O,1),O--}return A}),r.formatArgs.call(I,E),(I.log||r.log).apply(I,E)}return g.namespace=c,g.useColors=r.useColors(),g.color=r.selectColor(c),g.extend=i,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(c)),m),set:E=>{f=E}}),typeof r.init=="function"&&r.init(g),g}function i(c,d){let f=r(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let f of d)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function s(c,d){let f=0,p=0,m=-1,g=0;for(;f<c.length;)if(p<d.length&&(d[p]===c[f]||d[p]==="*"))d[p]==="*"?(m=p,g=f,p++):(f++,p++);else if(m!==-1)p=m+1,g++,f=g;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}function a(){let c=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),c}function o(c){for(let d of r.skips)if(s(c,d))return!1;for(let d of r.names)if(s(c,d))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}$p.exports=wR});var jp=h((Ie,kn)=>{Ie.formatArgs=ER;Ie.save=AR;Ie.load=kR;Ie.useColors=SR;Ie.storage=RR();Ie.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ie.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function SR(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ER(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+kn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),e.splice(i,0,t)}Ie.log=console.debug||console.log||(()=>{});function AR(e){try{e?Ie.storage.setItem("debug",e):Ie.storage.removeItem("debug")}catch{}}function kR(){let e;try{e=Ie.storage.getItem("debug")||Ie.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function RR(){try{return localStorage}catch{}}kn.exports=bo()(Ie);var{formatters:TR}=kn.exports;TR.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Bp=h((LN,Vp)=>{"use strict";Vp.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}});var Qp=h((UN,Hp)=>{"use strict";var IR=require("os"),Gp=require("tty"),Le=Bp(),{env:ce}=process,Rn;Le("no-color")||Le("no-colors")||Le("color=false")||Le("color=never")?Rn=0:(Le("color")||Le("colors")||Le("color=true")||Le("color=always"))&&(Rn=1);function OR(){if("FORCE_COLOR"in ce)return ce.FORCE_COLOR==="true"?1:ce.FORCE_COLOR==="false"?0:ce.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ce.FORCE_COLOR,10),3)}function _R(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function qR(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let i=OR();i!==void 0&&(Rn=i);let n=r?Rn:i;if(n===0)return 0;if(r){if(Le("color=16m")||Le("color=full")||Le("color=truecolor"))return 3;if(Le("color=256"))return 2}if(e&&!t&&n===void 0)return 0;let s=n||0;if(ce.TERM==="dumb")return s;if(process.platform==="win32"){let a=IR.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in ce)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in ce)||ce.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ce)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ce.TEAMCITY_VERSION)?1:0;if(ce.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ce){let a=Number.parseInt((ce.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ce.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ce.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ce.TERM)||"COLORTERM"in ce?1:s}function xo(e,t={}){let r=qR(e,{streamIsTTY:e&&e.isTTY,...t});return _R(r)}Hp.exports={supportsColor:xo,stdout:xo({isTTY:Gp.isatty(1)}),stderr:xo({isTTY:Gp.isatty(2)})}});var zp=h((de,In)=>{var CR=require("tty"),Tn=require("util");de.init=MR;de.log=LR;de.formatArgs=NR;de.save=UR;de.load=FR;de.useColors=PR;de.destroy=Tn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");de.colors=[6,2,3,4,5,1];try{let e=Qp();e&&(e.stderr||e).level>=2&&(de.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}de.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});function PR(){return"colors"in de.inspectOpts?!!de.inspectOpts.colors:CR.isatty(process.stderr.fd)}function NR(e){let{namespace:t,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(n+"m+"+In.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=DR()+t+" "+e[0]}function DR(){return de.inspectOpts.hideDate?"":new Date().toISOString()+" "}function LR(...e){return process.stderr.write(Tn.formatWithOptions(de.inspectOpts,...e)+`
`)}function UR(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function FR(){return process.env.DEBUG}function MR(e){e.inspectOpts={};let t=Object.keys(de.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=de.inspectOpts[t[r]]}In.exports=bo()(de);var{formatters:Kp}=In.exports;Kp.o=function(e){return this.inspectOpts.colors=this.useColors,Tn.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Kp.O=function(e){return this.inspectOpts.colors=this.useColors,Tn.inspect(e,this.inspectOpts)}});var Jp=h((FN,vo)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vo.exports=jp():vo.exports=zp()});var Xp=h(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.genRedactedString=pt.getStringValue=pt.MAX_ARGUMENT_LENGTH=void 0;var $R=Jp(),wo=200;pt.MAX_ARGUMENT_LENGTH=wo;var jR="ioredis";function Wp(e){if(e!==null)switch(typeof e){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch{return}case"string":return e}}pt.getStringValue=Wp;function Yp(e,t){let{length:r}=e;return r<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+r+'">'}pt.genRedactedString=Yp;function VR(e){let t=(0,$R.default)(`${jR}:${e}`);function r(...i){if(t.enabled){for(let n=1;n<i.length;n++){let s=Wp(i[n]);typeof s=="string"&&s.length>wo&&(i[n]=Yp(s,wo))}return t.apply(null,i)}}return Object.defineProperties(r,{namespace:{get(){return t.namespace}},enabled:{get(){return t.enabled}},destroy:{get(){return t.destroy}},log:{get(){return t.log},set(i){t.log=i}}}),r}pt.default=VR});var eh=h(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var Zp=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,BR={RedisCloudFixed:{ca:Zp},RedisCloudFlexible:{ca:Zp}};So.default=BR});var pe=h(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.noop=U.defaults=U.Debug=U.getPackageMeta=U.zipMap=U.CONNECTION_CLOSED_ERROR_MSG=U.shuffle=U.sample=U.resolveTLSProfile=U.parseURL=U.optimizeErrorStack=U.toArg=U.convertMapToArray=U.convertObjectToArray=U.timeout=U.packObject=U.isInt=U.wrapMultiResult=U.convertBufferToString=void 0;var GR=require("fs"),HR=require("path"),th=require("url"),Eo=En();Object.defineProperty(U,"defaults",{enumerable:!0,get:function(){return Eo.defaults}});Object.defineProperty(U,"noop",{enumerable:!0,get:function(){return Eo.noop}});var QR=Xp();U.Debug=QR.default;var KR=eh();function rh(e,t){if(e instanceof Buffer)return e.toString(t);if(Array.isArray(e)){let r=e.length,i=Array(r);for(let n=0;n<r;++n)i[n]=e[n]instanceof Buffer&&t==="utf8"?e[n].toString():rh(e[n],t);return i}return e}U.convertBufferToString=rh;function zR(e){if(!e)return null;let t=[],r=e.length;for(let i=0;i<r;++i){let n=e[i];n instanceof Error?t.push([n]):t.push([null,n])}return t}U.wrapMultiResult=zR;function ih(e){let t=parseFloat(e);return!isNaN(e)&&(t|0)===t}U.isInt=ih;function JR(e){let t={},r=e.length;for(let i=1;i<r;i+=2)t[e[i-1]]=e[i];return t}U.packObject=JR;function WR(e,t){let r=null,i=function(){r&&(clearTimeout(r),r=null,e.apply(this,arguments))};return r=setTimeout(i,t,new Error("timeout")),i}U.timeout=WR;function YR(e){let t=[],r=Object.keys(e);for(let i=0,n=r.length;i<n;i++)t.push(r[i],e[r[i]]);return t}U.convertObjectToArray=YR;function XR(e){let t=[],r=0;return e.forEach(function(i,n){t[r]=n,t[r+1]=i,r+=2}),t}U.convertMapToArray=XR;function ZR(e){return e===null||typeof e>"u"?"":String(e)}U.toArg=ZR;function eT(e,t,r){let i=t.split(`
`),n="",s;for(s=1;s<i.length&&i[s].indexOf(r)!==-1;++s);for(let a=s;a<i.length;++a)n+=`
`+i[a];if(e.stack){let a=e.stack.indexOf(`
`);e.stack=e.stack.slice(0,a)+n}return e}U.optimizeErrorStack=eT;function tT(e){if(ih(e))return{port:e};let t=(0,th.parse)(e,!0,!0);!t.slashes&&e[0]!=="/"&&(e="//"+e,t=(0,th.parse)(e,!0,!0));let r=t.query||{},i={};if(t.auth){let n=t.auth.indexOf(":");i.username=n===-1?t.auth:t.auth.slice(0,n),i.password=n===-1?"":t.auth.slice(n+1)}if(t.pathname&&(t.protocol==="redis:"||t.protocol==="rediss:"?t.pathname.length>1&&(i.db=t.pathname.slice(1)):i.path=t.pathname),t.host&&(i.host=t.hostname),t.port&&(i.port=t.port),typeof r.family=="string"){let n=Number.parseInt(r.family,10);Number.isNaN(n)||(i.family=n)}return(0,Eo.defaults)(i,r),i}U.parseURL=tT;function rT(e){let t=e?.tls;typeof t=="string"&&(t={profile:t});let r=KR.default[t?.profile];return r&&(t=Object.assign({},r,t),delete t.profile,e=Object.assign({},e,{tls:t})),e}U.resolveTLSProfile=rT;function iT(e,t=0){let r=e.length;return t>=r?null:e[t+Math.floor(Math.random()*(r-t))]}U.sample=iT;function nT(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e}U.shuffle=nT;U.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function sT(e,t){let r=new Map;return e.forEach((i,n)=>{r.set(i,t[n])}),r}U.zipMap=sT;var xr=null;async function aT(){if(xr)return xr;try{let e=(0,HR.resolve)(__dirname,"..","..","package.json"),t=await GR.promises.readFile(e,"utf8");return xr={version:JSON.parse(t).version},xr}catch{return xr={version:"error-fetching-version"},xr}}U.getPackageMeta=aT});var ht=h(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var nh=fr(),oT=ri(),lT=_t(),Yt=pe(),et=class e{constructor(t,r=[],i={},n){if(this.name=t,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=i.replyEncoding,this.errorStack=i.errorStack,this.args=r.flat(),this.callback=n,this.initPromise(),i.keyPrefix){let s=i.keyPrefix instanceof Buffer,a=s?i.keyPrefix:null;this._iterateKeys(o=>o instanceof Buffer?(a===null&&(a=Buffer.from(i.keyPrefix)),Buffer.concat([a,o])):s?Buffer.concat([i.keyPrefix,Buffer.from(String(o))]):i.keyPrefix+o)}i.readOnly&&(this.isReadOnly=!0)}static checkFlag(t,r){return!!this.getFlagMap()[t][r]}static setArgumentTransformer(t,r){this._transformer.argument[t]=r}static setReplyTransformer(t,r){this._transformer.reply[t]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(e.FLAGS).reduce((t,r)=>(t[r]={},e.FLAGS[r].forEach(i=>{t[r][i]=!0}),t),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let t=this.getKeys()[0];this.slot=t==null?null:oT(t)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(t){let r,i="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let n=new Ao;n.push(i);for(let s=0;s<this.args.length;++s){let a=this.args[s];a instanceof Buffer?a.length===0?n.push(`$0\r
\r
`):(n.push("$"+a.length+`\r
`),n.push(a),n.push(`\r
`)):n.push("$"+Buffer.byteLength(a)+`\r
`+a+`\r
`)}r=n.toBuffer()}else{r=i;for(let n=0;n<this.args.length;++n){let s=this.args[n];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let t=0;t<this.args.length;++t){let r=this.args[t];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[t]=(0,Yt.toArg)(r))}}transformReply(t){this.replyEncoding&&(t=(0,Yt.convertBufferToString)(t,this.replyEncoding));let r=e._transformer.reply[this.name];return r&&(t=r(t)),t}setTimeout(t){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},t))}initPromise(){let t=new Promise((r,i)=>{if(!this.transformed){this.transformed=!0;let n=e._transformer.argument[this.name];n&&(this.args=n(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=n=>{i((0,Yt.optimizeErrorStack)(n,this.errorStack.stack,__dirname))}:this.reject=i});this.promise=(0,lT.default)(t,this.callback)}_iterateKeys(t=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,nh.exists)(this.name))){let r=(0,nh.getKeyIndexes)(this.name,this.args);for(let i of r)this.args[i]=t(this.args[i]),this.keys.push(this.args[i])}return this.keys}_convertValue(t){return r=>{try{let i=this._commandTimeoutTimer;i&&(clearTimeout(i),delete this._commandTimeoutTimer),t(this.transformReply(r)),this.isResolved=!0}catch(i){this.reject(i)}return this.promise}}};ko.default=et;et.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};et._transformer={argument:{},reply:{}};var sh=function(e){if(e.length===1){if(e[0]instanceof Map)return(0,Yt.convertMapToArray)(e[0]);if(typeof e[0]=="object"&&e[0]!==null)return(0,Yt.convertObjectToArray)(e[0])}return e},ah=function(e){if(e.length===2){if(e[1]instanceof Map)return[e[0]].concat((0,Yt.convertMapToArray)(e[1]));if(typeof e[1]=="object"&&e[1]!==null)return[e[0]].concat((0,Yt.convertObjectToArray)(e[1]))}return e};et.setArgumentTransformer("mset",sh);et.setArgumentTransformer("msetnx",sh);et.setArgumentTransformer("hset",ah);et.setArgumentTransformer("hmset",ah);et.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];i in t?Object.defineProperty(t,i,{value:n,configurable:!0,enumerable:!0,writable:!0}):t[i]=n}return t}return e});var Ao=class{constructor(){this.length=0,this.items=[]}push(t){this.length+=Buffer.byteLength(t),this.items.push(t)}toBuffer(){let t=Buffer.allocUnsafe(this.length),r=0;for(let i of this.items){let n=Buffer.byteLength(i);Buffer.isBuffer(i)?i.copy(t,r):t.write(i,r,n),r+=n}return t}}});var oh=h(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var uT=Jt(),On=class extends uT.RedisError{constructor(t,r){super(t),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Ro.default=On;On.defaultMessage="Failed to refresh slots cache."});var _n=h(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var cT=require("stream"),To=class extends cT.Readable{constructor(t){super(t),this.opt=t,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let t=[this._redisCursor];this.opt.key&&t.unshift(this.opt.key),this.opt.match&&t.push("MATCH",this.opt.match),this.opt.type&&t.push("TYPE",this.opt.type),this.opt.count&&t.push("COUNT",String(this.opt.count)),this.opt.noValues&&t.push("NOVALUES"),this.opt.redis[this.opt.command](t,(r,i)=>{if(r){this.emit("error",r);return}this._redisCursor=i[0]instanceof Buffer?i[0].toString():i[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(i[1])})}close(){this._redisDrained=!0}};Io.default=To});var ph=h(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.executeWithAutoPipelining=oe.getFirstValueInFlattenedArray=oe.shouldUseAutoPipelining=oe.notAllowedAutoPipelineCommands=oe.kCallbacks=oe.kExec=void 0;var uh=En(),dT=ri(),lh=_t();oe.kExec=Symbol("exec");oe.kCallbacks=Symbol("callbacks");oe.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function ch(e,t){if(e._runningAutoPipelines.has(t)||!e._autoPipelines.has(t))return;e._runningAutoPipelines.add(t);let r=e._autoPipelines.get(t);e._autoPipelines.delete(t);let i=r[oe.kCallbacks];r[oe.kCallbacks]=null,r.exec(function(n,s){if(e._runningAutoPipelines.delete(t),n)for(let a=0;a<i.length;a++)process.nextTick(i[a],n);else for(let a=0;a<i.length;a++)process.nextTick(i[a],...s[a]);e._autoPipelines.has(t)&&ch(e,t)})}function fT(e,t,r){return t&&e.options.enableAutoPipelining&&!e.isPipeline&&!oe.notAllowedAutoPipelineCommands.includes(r)&&!e.options.autoPipeliningIgnoredCommands.includes(r)}oe.shouldUseAutoPipelining=fT;function dh(e){for(let t=0;t<e.length;t++){let r=e[t];if(typeof r=="string")return r;if(Array.isArray(r)||(0,uh.isArguments)(r)){if(r.length===0)continue;return r[0]}let i=[r].flat();if(i.length>0)return i[0]}}oe.getFirstValueInFlattenedArray=dh;function fh(e,t,r,i,n){if(e.isCluster&&!e.slots.length)return e.status==="wait"&&e.connect().catch(uh.noop),(0,lh.default)(new Promise(function(u,c){e.delayUntilReady(d=>{if(d){c(d);return}fh(e,t,r,i,null).then(u,c)})}),n);let s=e.options.keyPrefix||"",a=e.isCluster?e.slots[dT(`${s}${dh(i)}`)].join(","):"main";if(!e._autoPipelines.has(a)){let u=e.pipeline();u[oe.kExec]=!1,u[oe.kCallbacks]=[],e._autoPipelines.set(a,u)}let o=e._autoPipelines.get(a);o[oe.kExec]||(o[oe.kExec]=!0,setImmediate(ch,e,a));let l=new Promise(function(u,c){o[oe.kCallbacks].push(function(d,f){if(d){c(d);return}u(f)}),t==="call"&&i.unshift(r),o[t](...i)});return(0,lh.default)(l,n)}oe.executeWithAutoPipelining=fh});var hh=h(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var pT=require("crypto"),hT=ht(),mT=_t(),Oo=class{constructor(t,r=null,i="",n=!1){this.lua=t,this.numberOfKeys=r,this.keyPrefix=i,this.readOnly=n,this.sha=(0,pT.createHash)("sha1").update(t).digest("hex");let s=this.sha,a=new WeakSet;this.Command=class extends hT.default{toWritable(l){let u=this.reject;return this.reject=c=>{c.message.indexOf("NOSCRIPT")!==-1&&a.delete(l),u.call(this,c)},a.has(l)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(a.add(l),this.name="eval",this.args[0]=t),super.toWritable(l)}}}execute(t,r,i,n){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(i.keyPrefix=this.keyPrefix),this.readOnly&&(i.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],i);return s.promise=s.promise.catch(a=>{if(a.message.indexOf("NOSCRIPT")===-1)throw a;let o=new this.Command("evalsha",[this.sha,...r],i);return(t.isPipeline?t.redis:t).sendCommand(o)}),(0,mT.default)(s.promise,n),t.sendCommand(s)}};_o.default=Oo});var Cn=h(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var gT=fr(),qn=ph(),yT=ht(),bT=hh(),mt=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return qo.slice(0)}createBuiltinCommand(t){return{string:Ct(null,t,"utf8"),buffer:Ct(null,t,null)}}addBuiltinCommand(t){this.addedBuiltinSet.add(t),this[t]=Ct(t,t,"utf8"),this[t+"Buffer"]=Ct(t+"Buffer",t,null)}defineCommand(t,r){let i=new bT.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[t]=i,this[t]=mh(t,t,i,"utf8"),this[t+"Buffer"]=mh(t+"Buffer",t,i,null)}sendCommand(t,r,i){throw new Error('"sendCommand" is not implemented')}},qo=gT.list.filter(e=>e!=="monitor");qo.push("sentinel");qo.forEach(function(e){mt.prototype[e]=Ct(e,e,"utf8"),mt.prototype[e+"Buffer"]=Ct(e+"Buffer",e,null)});mt.prototype.call=Ct("call","utf8");mt.prototype.callBuffer=Ct("callBuffer",null);mt.prototype.send_command=mt.prototype.call;function Ct(e,t,r){return typeof r>"u"&&(r=t,t=null),function(...i){let n=t||i.shift(),s=i[i.length-1];typeof s=="function"?i.pop():s=void 0;let a={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,qn.shouldUseAutoPipelining)(this,e,n)?(0,qn.executeWithAutoPipelining)(this,e,n,i,s):this.sendCommand(new yT.default(n,i,a,s))}}function mh(e,t,r,i){return function(...n){let s=typeof n[n.length-1]=="function"?n.pop():void 0,a={replyEncoding:i};return this.options.showFriendlyErrorStack&&(a.errorStack=new Error),(0,qn.shouldUseAutoPipelining)(this,e,t)?(0,qn.executeWithAutoPipelining)(this,e,t,n,s):r.execute(this,n,a,s)}}Co.default=mt});var Do=h(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var Po=ri(),gh=fr(),yh=_t(),xT=require("util"),vT=ht(),wT=pe(),ST=Cn();function ET(e,t){let r=Po(t[0]),i=e._groupsBySlot[r];for(let n=1;n<t.length;n++)if(e._groupsBySlot[Po(t[n])]!==i)return-1;return r}var Pt=class extends ST.default{constructor(t){super(),this.redis=t,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=t.options,Object.keys(t.scriptsSet).forEach(i=>{let n=t.scriptsSet[i];this._shaToScript[n.sha]=n,this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),t.addedBuiltinSet.forEach(i=>{this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(t,r){if(this._queue[r].name==="exec"&&Array.isArray(t[1])){let n=t[1].length;for(let s=0;s<n;s++){if(t[1][s]instanceof Error)continue;let a=this._queue[r-(n-s)];try{t[1][s]=a.transformReply(t[1][s])}catch(o){t[1][s]=o}}}if(this._result[r]=t,--this.replyPending)return;if(this.isCluster){let n=!0,s;for(let a=0;a<this._result.length;++a){let o=this._result[a][0],l=this._queue[a];if(o){if(l.name==="exec"&&o.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:o.name,message:o.message};else if(s.name!==o.name||s.message!==o.message){n=!1;break}}else if(!l.inTransaction&&!((0,gh.exists)(l.name)&&(0,gh.hasFlag)(l.name,"readonly"))){n=!1;break}}if(s&&n){let a=this,o=s.message.split(" "),l=this._queue,u=!1;this._queue=[];for(let p=0;p<l.length;++p){if(o[0]==="ASK"&&!u&&l[p].name!=="asking"&&(!l[p-1]||l[p-1].name!=="asking")){let m=new vT.default("asking");m.ignore=!0,this.sendCommand(m)}l[p].initPromise(),this.sendCommand(l[p]),u=l[p].inTransaction}let c=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){a.exec()},f=this.redis;if(f.handleError(s,this.leftRedirections,{moved:function(p,m){a.preferKey=m,f.slots[o[1]]=[m],f._groupsBySlot[o[1]]=f._groupsIds[f.slots[o[1]].join(";")],f.refreshSlotsCache(),a.exec()},ask:function(p,m){a.preferKey=m,a.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{c=!1},defaults:()=>{c=!1}}),c)return}}let i=0;for(let n=0;n<this._queue.length-i;++n)this._queue[n+i].ignore&&(i+=1),this._result[n]=this._result[n+i];this.resolve(this._result.slice(0,this._result.length-i))}sendCommand(t){this._transactions>0&&(t.inTransaction=!0);let r=this._queue.length;return t.pipelineIndex=r,t.promise.then(i=>{this.fillResult([null,i],r)}).catch(i=>{this.fillResult([i],r)}),this._queue.push(t),this}addBatch(t){let r,i,n;for(let s=0;s<t.length;++s)r=t[s],i=r[0],n=r.slice(1),this[i].apply(this,n);return this}};No.default=Pt;var AT=Pt.prototype.multi;Pt.prototype.multi=function(){return this._transactions+=1,AT.apply(this,arguments)};var bh=Pt.prototype.execBuffer;Pt.prototype.execBuffer=(0,xT.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),bh.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");Pt.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(wT.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,yh.default)(this.promise,e)),this.redis.delayUntilReady(n=>{if(n){this.reject(n);return}this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,bh.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,yh.default)(this.promise,e)),this._queue.length||this.resolve([]);let t;if(this.isCluster){let n=[];for(let s=0;s<this._queue.length;s++){let a=this._queue[s].getKeys();if(a.length&&n.push(a[0]),a.length&&Po.generateMulti(a)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(n.length){if(t=ET(this.redis,n),t<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=Math.random()*16384|0}let r=this;return i(),this.promise;function i(){let n=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:t,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let a="",o,l={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(u){typeof u!="string"?(o||(o=[]),a&&(o.push(Buffer.from(a,"utf8")),a=""),o.push(u)):a+=u,--n||(o?(a&&o.push(Buffer.from(a,"utf8")),l.destination.redis.stream.write(Buffer.concat(o))):l.destination.redis.stream.write(a),n=r._queue.length,a="",o=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],l,s);return r.promise}}});var Fo=h(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.addTransactionSupport=void 0;var Lo=pe(),Uo=_t(),xh=Do();function kT(e){e.pipeline=function(i){let n=new xh.default(this);return Array.isArray(i)&&n.addBatch(i),n};let{multi:t}=e;e.multi=function(i,n){if(typeof n>"u"&&!Array.isArray(i)&&(n=i,i=null),n&&n.pipeline===!1)return t.call(this);let s=new xh.default(this);s.multi(),Array.isArray(i)&&s.addBatch(i);let a=s.exec;s.exec=function(l){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Lo.noop),(0,Uo.default)(new Promise((c,d)=>{this.redis.delayUntilReady(f=>{if(f){d(f);return}this.exec(s).then(c,d)})}),l);if(this._transactions>0&&a.call(s),this.nodeifiedPromise)return a.call(s);let u=a.call(s);return(0,Uo.default)(u.then(function(c){let d=c[c.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let f=0;f<c.length-1;++f)c[f][0]&&d[0].previousErrors.push(c[f][0]);throw d[0]}return(0,Lo.wrapMultiResult)(d[1])}),l)};let{execBuffer:o}=s;return s.execBuffer=function(l){return this._transactions>0&&o.call(s),s.exec(l)},s};let{exec:r}=e;e.exec=function(i){return(0,Uo.default)(r.call(this).then(function(n){return Array.isArray(n)&&(n=(0,Lo.wrapMultiResult)(n)),n}),i)}}Pn.addTransactionSupport=kT});var $o=h(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});function RT(e,t){Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})}Mo.default=RT});var wh=h(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.DEFAULT_CLUSTER_OPTIONS=void 0;var vh=require("dns");Nn.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+e*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:vh.resolveSrv,dnsLookup:vh.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var si=h(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.getConnectionName=ye.weightSrvRecords=ye.groupSrvRecords=ye.getUniqueHostnamesFromOptions=ye.normalizeNodeOptions=ye.nodeKeyToRedisOptions=ye.getNodeKey=void 0;var Sh=pe(),TT=require("net");function IT(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port}ye.getNodeKey=IT;function OT(e){let t=e.lastIndexOf(":");if(t===-1)throw new Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}}ye.nodeKeyToRedisOptions=OT;function _T(e){return e.map(t=>{let r={};if(typeof t=="object")Object.assign(r,t);else if(typeof t=="string")Object.assign(r,(0,Sh.parseURL)(t));else if(typeof t=="number")r.port=t;else throw new Error("Invalid argument "+t);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,Sh.resolveTLSProfile)(r)})}ye.normalizeNodeOptions=_T;function qT(e){let t={};return e.forEach(r=>{t[r.host]=!0}),Object.keys(t).filter(r=>!(0,TT.isIP)(r))}ye.getUniqueHostnamesFromOptions=qT;function CT(e){let t={};for(let r of e)t.hasOwnProperty(r.priority)?(t[r.priority].totalWeight+=r.weight,t[r.priority].records.push(r)):t[r.priority]={totalWeight:r.weight,records:[r]};return t}ye.groupSrvRecords=CT;function PT(e){if(e.records.length===1)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),r=0;for(let[i,n]of e.records.entries())if(r+=1+n.weight,r>t)return e.totalWeight-=n.weight,e.records.splice(i,1),n}ye.weightSrvRecords=PT;function NT(e,t){let r=`ioredis-cluster(${e})`;return t?`${r}:${t}`:r}ye.getConnectionName=NT});var Go=h(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});var Eh=si(),jo=pe(),DT=Nt(),tt=(0,jo.Debug)("cluster:subscriber"),Vo=class{constructor(t,r,i=!1){this.connectionPool=t,this.emitter=r,this.isSharded=i,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){tt("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}tt("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,s)=>{!this.started||!this.subscriber||(0,Eh.getNodeKey)(this.subscriber.options)===s&&(tt("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(tt("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(t){return this.isSharded&&(this.slotRange=t),this.slotRange}start(){this.started=!0,this.selectSubscriber(),tt("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let t=this.lastActiveSubscriber;t&&(t.off("end",this.onSubscriberEnd),t.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,jo.sample)(this.connectionPool.getNodes());if(!r){tt("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:i}=r;tt("selected a subscriber %s:%s",i.host,i.port);let n="subscriber";this.isSharded&&(n="ssubscriber"),this.subscriber=new DT.default({port:i.port,host:i.host,username:i.username,password:i.password,enableReadyCheck:!0,connectionName:(0,Eh.getConnectionName)(n,i.connectionName),lazyConnect:!0,tls:i.tls,retryStrategy:null}),this.subscriber.on("error",jo.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(t){let a=t.condition||t.prevCondition;a&&a.subscriber&&(s.subscribe=a.subscriber.channels("subscribe"),s.psubscribe=a.subscriber.channels("psubscribe"),s.ssubscribe=a.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let a=0;for(let o of["subscribe","psubscribe","ssubscribe"]){let l=s[o];if(l.length!=0)if(tt("%s %d channels",o,l.length),o==="ssubscribe")for(let u of l)a+=1,this.subscriber[o](u).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{tt("failed to ssubscribe to channel: %s",u)});else a+=1,this.subscriber[o](l).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{tt("failed to %s %d channels",o,l.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let a of["message","messageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)});for(let a of["pmessage","pmessageBuffer"])this.subscriber.on(a,(o,l,u)=>{this.emitter.emit(a,o,l,u)});if(this.isSharded==!0)for(let a of["smessage","smessageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)})}};Bo.default=Vo});var zo=h(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});var LT=require("events"),Dn=pe(),Ho=si(),UT=Nt(),ai=(0,Dn.Debug)("cluster:connectionPool"),Qo=class extends LT.EventEmitter{constructor(t){super(),this.redisOptions=t,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(t="all"){let r=this.nodes[t];return Object.keys(r).map(i=>r[i])}getInstanceByKey(t){return this.nodes.all[t]}getSampleInstance(t){let r=Object.keys(this.nodes[t]),i=(0,Dn.sample)(r);return this.nodes[t][i]}addMasterNode(t){let r=(0,Ho.getNodeKey)(t.options),i=this.createRedisFromOptions(t,t.options.readOnly);return t.options.readOnly?!1:(this.nodes.all[r]=i,this.nodes.master[r]=i,!0)}createRedisFromOptions(t,r){return new UT.default((0,Dn.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},t,this.redisOptions,{lazyConnect:!0}))}findOrCreate(t,r=!1){let i=(0,Ho.getNodeKey)(t);r=!!r,this.specifiedOptions[i]?Object.assign(t,this.specifiedOptions[i]):this.specifiedOptions[i]=t;let n;return this.nodes.all[i]?(n=this.nodes.all[i],n.options.readOnly!==r&&(n.options.readOnly=r,ai("Change role of %s to %s",i,r?"slave":"master"),n[r?"readonly":"readwrite"]().catch(Dn.noop),r?(delete this.nodes.master[i],this.nodes.slave[i]=n):(delete this.nodes.slave[i],this.nodes.master[i]=n))):(ai("Connecting to %s as %s",i,r?"slave":"master"),n=this.createRedisFromOptions(t,r),this.nodes.all[i]=n,this.nodes[r?"slave":"master"][i]=n,n.once("end",()=>{this.removeNode(i),this.emit("-node",n,i),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",n,i),n.on("error",function(s){this.emit("nodeError",s,i)})),n}reset(t){ai("Reset with %O",t);let r={};t.forEach(i=>{let n=(0,Ho.getNodeKey)(i);i.readOnly&&r[n]||(r[n]=i)}),Object.keys(this.nodes.all).forEach(i=>{r[i]||(ai("Disconnect %s because the node does not hold any slot",i),this.nodes.all[i].disconnect(),this.removeNode(i))}),Object.keys(r).forEach(i=>{let n=r[i];this.findOrCreate(n,n.readOnly)})}removeNode(t){let{nodes:r}=this;r.all[t]&&(ai("Remove %s from the pool",t),delete r.all[t]),delete r.master[t],delete r.slave[t]}};Ko.default=Qo});var Ln=h((r6,Ah)=>{"use strict";function ne(e,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}ne.prototype.peekAt=function(t){var r=t;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};ne.prototype.get=function(t){return this.peekAt(t)};ne.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ne.prototype.peekFront=function(){return this.peek()};ne.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ne.prototype,"length",{get:function(){return this.size()}});ne.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ne.prototype.unshift=function(t){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ne.prototype.shift=function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ne.prototype.push=function(t){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ne.prototype.pop=function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),i}};ne.prototype.removeOne=function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(t<i/2){for(a=t;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-t;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};ne.prototype.remove=function(t,r){var i=t,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var l;for(n=new Array(r),l=0;l<r;l++)n[l]=this._list[this._head+i+l&this._capacityMask];if(i=this._head+i&this._capacityMask,t+r===a){for(this._tail=this._tail-r+o&this._capacityMask,l=r;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(t===0){for(this._head=this._head+r+o&this._capacityMask,l=r-1;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+t+r+o&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;t<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,l=a-(r+t);l>0;l--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};ne.prototype.splice=function(t,r){var i=t;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,l=arguments.length,u=this._list.length,c=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);l>c;)this.unshift(arguments[--l]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var d=a.length;for(s=0;s<d;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-d+u&this._capacityMask);c<l;)this.push(arguments[c++]);for(s=0;s<d;s++)this.push(a[s])}return o}else return this.remove(i,r)}};ne.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};ne.prototype.isEmpty=function(){return this._head===this._tail};ne.prototype.toArray=function(){return this._copyArray(!1)};ne.prototype._fromArray=function(t){var r=t.length,i=this._nextPowerOf2(r);this._list=new Array(i),this._capacityMask=i-1,this._tail=r;for(var n=0;n<r;n++)this._list[n]=t[n]};ne.prototype._copyArray=function(t,r){var i=this._list,n=i.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=new Array(r),o=0,l;if(t||this._head>this._tail){for(l=this._head;l<n;l++)a[o++]=i[l];for(l=0;l<this._tail;l++)a[o++]=i[l]}else for(l=this._head;l<this._tail;l++)a[o++]=i[l];return a};ne.prototype._growArray=function(){if(this._head!=0){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};ne.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};ne.prototype._nextPowerOf2=function(t){var r=Math.log(t)/Math.log(2),i=1<<r+1;return Math.max(i,4)};Ah.exports=ne});var kh=h(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var FT=pe(),MT=Ln(),$T=(0,FT.Debug)("delayqueue"),Jo=class{constructor(){this.queues={},this.timeouts={}}push(t,r,i){let n=i.callback||process.nextTick;this.queues[t]||(this.queues[t]=new MT),this.queues[t].push(r),this.timeouts[t]||(this.timeouts[t]=setTimeout(()=>{n(()=>{this.timeouts[t]=null,this.execute(t)})},i.timeout))}execute(t){let r=this.queues[t];if(!r)return;let{length:i}=r;if(i)for($T("send %d commands in %s queue",i,t),this.queues[t]=null;r.length>0;)r.shift()()}};Wo.default=Jo});var Ih=h(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var jT=pe(),VT=Go(),BT=zo(),Rh=si(),Un=ri(),Th=(0,jT.Debug)("cluster:subscriberGroup"),Yo=class{constructor(t,r){this.cluster=t,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,t.on("+node",i=>{this._addSubscriber(i)}),t.on("-node",i=>{this._removeSubscriber(i)}),t.on("refresh",()=>{this._refreshSlots(t)}),t.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(t){let r=this.clusterSlots[t][0];return this.shardedSubscribers.get(r)}addChannels(t){let r=Un(t[0]);t.forEach(n=>{if(Un(n)!=r)return-1});let i=this.channels.get(r);return i?this.channels.set(r,i.concat(t)):this.channels.set(r,t),[...this.channels.values()].flatMap(n=>n).length}removeChannels(t){let r=Un(t[0]);t.forEach(n=>{if(Un(n)!=r)return-1});let i=this.channels.get(r);if(i){let n=i.filter(s=>!t.includes(s));this.channels.set(r,n)}return[...this.channels.values()].flatMap(n=>n).length}stop(){for(let t of this.shardedSubscribers.values())t.stop()}start(){for(let t of this.shardedSubscribers.values())t.isStarted()||t.start()}_addSubscriber(t){let r=new BT.default(t.options);if(r.addMasterNode(t)){let i=new VT.default(r,this.cluster,!0),n=(0,Rh.getNodeKey)(t.options);return this.shardedSubscribers.set(n,i),i.start(),this._resubscribe(),this.cluster.emit("+subscriber"),i}return null}_removeSubscriber(t){let r=(0,Rh.getNodeKey)(t.options),i=this.shardedSubscribers.get(r);return i&&(i.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(t){if(this._slotsAreEqual(t.slots))Th("Nothing to refresh because the new cluster map is equal to the previous one.");else{Th("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<t.slots.length;r++){let i=t.slots[r][0];this.subscriberToSlotsIndex.has(i)||this.subscriberToSlotsIndex.set(i,[]),this.subscriberToSlotsIndex.get(i).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(t.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((t,r)=>{let i=this.subscriberToSlotsIndex.get(r);i&&(t.associateSlotRange(i),i.forEach(n=>{let s=t.getInstance(),a=this.channels.get(n);a&&a.length>0&&s&&(s.ssubscribe(a),s.on("ready",()=>{s.ssubscribe(a)}))}))})}_slotsAreEqual(t){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(t)}};Xo.default=Yo});var tl=h(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var Oh=fr(),Nh=require("events"),oi=Jt(),_h=_t(),qh=ht(),Zo=oh(),GT=Nt(),HT=_n(),QT=Fo(),qe=pe(),KT=$o(),zT=Cn(),JT=wh(),WT=Go(),YT=zo(),XT=kh(),vr=si(),Ch=Ln(),ZT=Ih(),se=(0,qe.Debug)("cluster"),Ph=new WeakSet,li=class e extends zT.default{constructor(t,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new XT.default,this.offlineQueue=new Ch,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,Nh.EventEmitter.call(this),this.startupNodes=t,this.options=(0,qe.defaults)({},r,JT.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new ZT.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new YT.default(this.options.redisOptions),this.connectionPool.on("-node",(i,n)=>{this.emit("-node",i)}),this.connectionPool.on("+node",i=>{this.emit("+node",i)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(i,n)=>{this.emit("node error",i,n)}),this.subscriber=new WT.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,n])=>{this.defineCommand(i,n)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(i=>{se("connecting failed: %s",i)})}connect(){return new Promise((t,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let i=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(n=>{if(this.connectionEpoch!==i){se("discard connecting after resolving startup nodes because epoch not match: %d != %d",i,this.connectionEpoch),r(new oi.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){se("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new oi.RedisError("Connection is aborted"));return}this.connectionPool.reset(n);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),t()},a,o=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",a),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((l,u)=>{l||u?(se("Ready check failed (%s). Reconnecting...",l||u),this.status==="connect"&&this.disconnect(!0)):s()}):s()};a=()=>{let l=new Error("None of startup nodes is available");this.removeListener("refresh",o),this.invokeReadyDelayedCallbacks(l),r(l)},this.once("refresh",o),this.once("close",a),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(l=>{l&&l.message===Zo.default.defaultMessage&&(GT.default.prototype.silentEmit.call(this,"error",l),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(n=>{this.setStatus("close"),this.handleCloseEvent(n),this.invokeReadyDelayedCallbacks(n),r(n)})})}disconnect(t=!1){let r=this.status;this.setStatus("disconnecting"),t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,se("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(t){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let i=(0,_h.default)(Promise.resolve("OK"),t);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),i}return(0,_h.default)(Promise.all(this.nodes().map(i=>i.quit().catch(n=>{if(n.message===qe.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw n}))).then(()=>"OK"),t)}duplicate(t=[],r={}){let i=t.length>0?t:this.startupNodes.slice(0),n=Object.assign({},this.options,r);return new e(i,n)}nodes(t="all"){if(t!=="all"&&t!=="master"&&t!=="slave")throw new Error('Invalid role "'+t+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(t)}delayUntilReady(t){this._readyDelayedCallbacks.push(t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}refreshSlotsCache(t){if(t&&this._refreshSlotsCacheCallbacks.push(t),this.isRefreshing)return;this.isRefreshing=!0;let r=this,i=o=>{this.isRefreshing=!1;for(let l of this._refreshSlotsCacheCallbacks)l(o);this._refreshSlotsCacheCallbacks=[]},n=(0,qe.shuffle)(this.connectionPool.getNodes()),s=null;function a(o){if(o===n.length){let c=new Zo.default(Zo.default.defaultMessage,s);return i(c)}let l=n[o],u=`${l.options.host}:${l.options.port}`;se("getting slot cache from %s",u),r.getInfoFromNode(l,function(c){switch(r.status){case"close":case"end":return i(new Error("Cluster is disconnected."));case"disconnecting":return i(new Error("Cluster is disconnecting."))}c?(r.emit("node error",c,u),s=c,a(o+1)):(r.emit("refresh"),i())})}a(0)}sendCommand(t,r,i){if(this.status==="wait"&&this.connect().catch(qe.noop),this.status==="end")return t.reject(new Error(qe.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let n=this.options.scaleReads;n!=="master"&&(t.isReadOnly||(0,Oh.exists)(t.name)&&(0,Oh.hasFlag)(t.name,"readonly")||(n="master"));let s=i?i.slot:t.getSlot(),a={},o=this;if(!i&&!Ph.has(t)){Ph.add(t);let u=t.reject;t.reject=function(c){let d=l.bind(null,!0);o.handleError(c,a,{moved:function(f,p){se("command %s is moved to %s",t.name,p),s=Number(f),o.slots[f]?o.slots[f][0]=p:o.slots[f]=[p],o._groupsBySlot[f]=o._groupsIds[o.slots[f].join(";")],o.connectionPool.findOrCreate(o.natMapper(p)),l(),se("refreshing slot caches... (triggered by MOVED error)"),o.refreshSlotsCache()},ask:function(f,p){se("command %s is required to ask %s:%s",t.name,p);let m=o.natMapper(p);o.connectionPool.findOrCreate(m),l(!1,`${m.host}:${m.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(f){u.call(t,f)},defaults:function(){u.call(t,c)}})}}l();function l(u,c){if(o.status==="end"){t.reject(new oi.AbortError("Cluster is ended."));return}let d;if(o.status==="ready"||t.name==="cluster"){if(i&&i.redis)d=i.redis;else if(qh.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||qh.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(o.options.shardedSubscribers==!0&&(t.name=="ssubscribe"||t.name=="sunsubscribe")){let f=o.shardedSubscribers.getResponsibleSubscriber(s),p=-1;t.name=="ssubscribe"&&(p=o.shardedSubscribers.addChannels(t.getKeys())),t.name=="sunsubscribe"&&(p=o.shardedSubscribers.removeChannels(t.getKeys())),p!==-1?d=f.getInstance():t.reject(new oi.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else d=o.subscriber.getInstance();if(!d){t.reject(new oi.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof s=="number"&&o.slots[s]){let f=o.slots[s];if(typeof n=="function"){let p=f.map(function(m){return o.connectionPool.getInstanceByKey(m)});d=n(p,t),Array.isArray(d)&&(d=(0,qe.sample)(d)),d||(d=p[0])}else{let p;n==="all"?p=(0,qe.sample)(f):n==="slave"&&f.length>1?p=(0,qe.sample)(f,1):p=f[0],d=o.connectionPool.getInstanceByKey(p)}}c&&(d=o.connectionPool.getInstanceByKey(c),d.asking())}d||(d=(typeof n=="function"?null:o.connectionPool.getSampleInstance(n))||o.connectionPool.getSampleInstance("all"))}i&&!i.redis&&(i.redis=d)}d?d.sendCommand(t,r):o.options.enableOfflineQueue?o.offlineQueue.push({command:t,stream:r,node:i}):t.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return t.promise}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}handleError(t,r,i){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){i.maxRedirections(new Error("Too many Cluster redirections. Last error: "+t));return}let n=t.message.split(" ");if(n[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",i.moved.bind(null,n[1],n[2]),{timeout:s}):i.moved(n[1],n[2])}else n[0]==="ASK"?i.ask(n[1],n[2]):n[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",i.tryagain,{timeout:this.options.retryDelayOnTryAgain}):n[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",i.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):t.message===qe.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",i.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):i.defaults()}resetOfflineQueue(){this.offlineQueue=new Ch}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let t=()=>{this.slotsTimer=setTimeout(()=>{se('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{t()})},this.options.slotsRefreshInterval)};t()}setStatus(t){se("status: %s -> %s",this.status||"[empty]",t),this.status=t,process.nextTick(()=>{this.emit(t)})}handleCloseEvent(t){t&&se("closed because %s",t);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,t)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,se("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(i){se("Got error %s when reconnecting. Ignoring...",i)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(t){let r;for(;r=this.offlineQueue.shift();)r.command.reject(t)}executeOfflineCommands(){if(this.offlineQueue.length){se("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=t.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(t){let r=typeof t=="string"?t:`${t.host}:${t.port}`,i=null;return this.options.natMap&&typeof this.options.natMap=="function"?i=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(i=this.options.natMap[r]),i?(se("NAT mapping %s -> %O",r,i),Object.assign({},i)):typeof t=="string"?(0,vr.nodeKeyToRedisOptions)(t):t}getInfoFromNode(t,r){if(!t)return r(new Error("Node is disconnected"));let i=t.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,vr.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});i.on("error",qe.noop),i.cluster("SLOTS",(0,qe.timeout)((n,s)=>{if(i.disconnect(),n)return se("error encountered running CLUSTER.SLOTS: %s",n),r(n);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){se("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let a=[];se("cluster slots result count: %d",s.length);for(let l=0;l<s.length;++l){let u=s[l],c=u[0],d=u[1],f=[];for(let p=2;p<u.length;p++){if(!u[p][0])continue;let m=this.natMapper({host:u[p][0],port:u[p][1]});m.readOnly=p!==2,a.push(m),f.push(m.host+":"+m.port)}se("cluster slots result [%d]: slots %d~%d served by %s",l,c,d,f);for(let p=c;p<=d;p++)this.slots[p]=f}this._groupsIds=Object.create(null);let o=0;for(let l=0;l<16384;l++){let u=(this.slots[l]||[]).join(";");if(!u.length){this._groupsBySlot[l]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++o),this._groupsBySlot[l]=this._groupsIds[u]}this.connectionPool.reset(a),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(t){for(let r of this._readyDelayedCallbacks)process.nextTick(r,t);this._readyDelayedCallbacks=[]}readyCheck(t){this.cluster("INFO",(r,i)=>{if(r)return t(r);if(typeof i!="string")return t();let n,s=i.split(`\r
`);for(let a=0;a<s.length;++a){let o=s[a].split(":");if(o[0]==="cluster_state"){n=o[1];break}}n==="fail"?(se("cluster state not ok (%s)",n),t(null,n)):t()})}resolveSrv(t){return new Promise((r,i)=>{this.options.resolveSrv(t,(n,s)=>{if(n)return i(n);let a=this,o=(0,vr.groupSrvRecords)(s),l=Object.keys(o).sort((c,d)=>parseInt(c)-parseInt(d));function u(c){if(!l.length)return i(c);let d=l[0],f=o[d],p=(0,vr.weightSrvRecords)(f);f.records.length||l.shift(),a.dnsLookup(p.name).then(m=>r({host:m,port:p.port}),u)}u()})})}dnsLookup(t){return new Promise((r,i)=>{this.options.dnsLookup(t,(n,s)=>{n?(se("failed to resolve hostname %s to IP: %s",t,n.message),i(n)):(se("resolved hostname %s to IP %s",t,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let t=(0,vr.normalizeNodeOptions)(this.startupNodes),r=(0,vr.getUniqueHostnamesFromOptions)(t);if(r.length===0)return t;let i=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),n=(0,qe.zipMap)(r,i);return t.map(s=>{let a=n.get(s.host);return a?this.options.useSRVRecords?Object.assign({},s,a):Object.assign({},s,{host:a}):s})}createScanStream(t,{key:r,options:i={}}){return new HT.default({objectMode:!0,key:r,redis:this,command:t,...i})}};(0,KT.default)(li,Nh.EventEmitter);(0,QT.addTransactionSupport)(li.prototype);el.default=li});var Fn=h(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var eI=pe(),tI=(0,eI.Debug)("AbstractConnector"),rl=class{constructor(t){this.connecting=!1,this.disconnectTimeout=t}check(t){return!0}disconnect(){if(this.connecting=!1,this.stream){let t=this.stream,r=setTimeout(()=>{tI("stream %s:%s still open, destroying it",t.remoteAddress,t.remotePort),t.destroy()},this.disconnectTimeout);t.on("close",()=>clearTimeout(r)),t.end()}}};il.default=rl});var Dh=h(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var rI=require("net"),iI=require("tls"),nI=pe(),sI=Fn(),nl=class extends sI.default{constructor(t){super(t.disconnectTimeout),this.options=t}connect(t){let{options:r}=this;this.connecting=!0;let i;return"path"in r&&r.path?i={path:r.path}:(i={},"port"in r&&r.port!=null&&(i.port=r.port),"host"in r&&r.host!=null&&(i.host=r.host),"family"in r&&r.family!=null&&(i.family=r.family)),r.tls&&Object.assign(i,r.tls),new Promise((n,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(nI.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,iI.connect)(i):this.stream=(0,rI.createConnection)(i)}catch(a){s(a);return}this.stream.once("error",a=>{this.firstError=a}),n(this.stream)})})}};sl.default=nl});var Lh=h(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});function aI(e,t){return(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379)}var al=class{constructor(t){this.cursor=0,this.sentinels=t.slice(0)}next(){let t=this.cursor>=this.sentinels.length;return{done:t,value:t?void 0:this.sentinels[this.cursor++]}}reset(t){t&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(t){for(let r=0;r<this.sentinels.length;r++)if(aI(t,this.sentinels[r]))return!1;return this.sentinels.push(t),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};ol.default=al});var Fh=h(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.FailoverDetector=void 0;var oI=pe(),ll=(0,oI.Debug)("FailoverDetector"),Uh="+switch-master",ul=class{constructor(t,r){this.isDisconnected=!1,this.connector=t,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let t of this.sentinels)t.client.disconnect()}async subscribe(){ll("Starting FailoverDetector");let t=[];for(let r of this.sentinels){let i=r.client.subscribe(Uh).catch(n=>{ll("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,n.message)});t.push(i),r.client.on("message",n=>{!this.isDisconnected&&n===Uh&&this.disconnect()})}await Promise.all(t)}disconnect(){this.isDisconnected=!0,ll("Failover detected, disconnecting"),this.connector.disconnect()}};Mn.FailoverDetector=ul});var $n=h(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.SentinelIterator=void 0;var lI=require("net"),ui=pe(),uI=require("tls"),Mh=Lh();ci.SentinelIterator=Mh.default;var cI=Fn(),dI=Nt(),fI=Fh(),wr=(0,ui.Debug)("SentinelConnector"),cl=class extends cI.default{constructor(t){if(super(t.disconnectTimeout),this.options=t,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new Mh.default(this.options.sentinels)}check(t){let r=!t.role||this.options.role===t.role;return r||(wr("role invalid, expected %s, but got %s",this.options.role,t.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(t){this.connecting=!0,this.retryAttempts=0;let r,i=async()=>{let n=this.sentinelIterator.next();if(n.done){this.sentinelIterator.reset(!1);let l=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof l!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${l}ms.`;r&&(u+=` Last error: ${r.message}`),wr(u);let c=new Error(u);if(typeof l=="number")return t("error",c),await new Promise(d=>setTimeout(d,l)),i();throw c}let s=null,a=null;try{s=await this.resolve(n.value)}catch(l){a=l}if(!this.connecting)throw new Error(ui.CONNECTION_CLOSED_ERROR_MSG);let o=n.value.host+":"+n.value.port;if(s)return wr("resolved: %s:%s from sentinel %s",s.host,s.port,o),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,uI.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,lI.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",l=>{this.firstError=l}),this.stream;{let l=a?"failed to connect to sentinel "+o+" because "+a.message:"connected to sentinel "+o+" successfully, but got an invalid reply: "+s;return wr(l),t("sentinelError",new Error(l)),a&&(r=a),i()}};return i()}async updateSentinels(t){if(!this.options.updateSentinels)return;let r=await t.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(ui.packObject).forEach(i=>{if((i.flags?i.flags.split(","):[]).indexOf("disconnected")===-1&&i.ip&&i.port){let s=this.sentinelNatResolve($h(i));this.sentinelIterator.add(s)&&wr("adding sentinel %s:%s",s.host,s.port)}}),wr("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(t){let r=await t.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(t),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(t){let r=await t.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let i=r.map(ui.packObject).filter(n=>n.flags&&!n.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(pI(i,this.options.preferredSlaves))}sentinelNatResolve(t){if(!t||!this.options.natMap)return t;let r=`${t.host}:${t.port}`,i=t;return typeof this.options.natMap=="function"?i=this.options.natMap(r)||t:typeof this.options.natMap=="object"&&(i=this.options.natMap[r]||t),i}connectToSentinel(t,r){return new dI.default({port:t.port||26379,host:t.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:t.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(t){let r=this.connectToSentinel(t);r.on("error",hI);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var t;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:i,value:n}=this.sentinelIterator.next();if(i)break;let s=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var a;(a=this.emitter)===null||a===void 0||a.emit("sentinelReconnecting")}),r.push({address:n,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new fI.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(t=this.emitter)===null||t===void 0||t.emit("failoverSubscribed")}};ci.default=cl;function pI(e,t){if(e.length===0)return null;let r;if(typeof t=="function")r=t(e);else if(t!==null&&typeof t=="object"){let i=Array.isArray(t)?t:[t];i.sort((n,s)=>(n.prio||(n.prio=1),s.prio||(s.prio=1),n.prio<s.prio?-1:n.prio>s.prio?1:0));for(let n=0;n<i.length;n++){for(let s=0;s<e.length;s++){let a=e[s];if(a.ip===i[n].ip&&a.port===i[n].port){r=a;break}}if(r)break}}return r||(r=(0,ui.sample)(e)),$h(r)}function $h(e){return{host:e.ip,port:Number(e.port)}}function hI(){}});var jh=h(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.SentinelConnector=Sr.StandaloneConnector=void 0;var mI=Dh();Sr.StandaloneConnector=mI.default;var gI=$n();Sr.SentinelConnector=gI.default});var Vh=h(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var yI=Jt(),dl=class extends yI.AbortError{constructor(t){let r=`Reached the max retries per request limit (which is ${t}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};fl.default=dl});var Bh=h(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.MaxRetriesPerRequestError=void 0;var bI=Vh();jn.MaxRetriesPerRequestError=bI.default});var Wh=h((h6,Jh)=>{"use strict";var bl=require("buffer").Buffer,xI=require("string_decoder").StringDecoder,pl=new xI,Gh=Jt(),vI=Gh.ReplyError,wI=Gh.ParserError,Be=bl.allocUnsafe(32*1024),Se=0,Vn=null,di=0,hl=0;function SI(e){let t=e.buffer.length-1;var r=e.offset,i=0,n=1;for(e.buffer[r]===45&&(n=-1,r++);r<t;){let s=e.buffer[r++];if(s===13)return e.offset=r+1,n*i;i=i*10+(s-48)}}function EI(e){let t=e.buffer.length-1;var r=e.offset,i=0,n="";for(e.buffer[r]===45&&(n+="-",r++);r<t;){var s=e.buffer[r++];if(s===13)return e.offset=r+1,i!==0&&(n+=i),n;i>429496728?(n+=i*10+(s-48),i=0):s===48&&i===0?n+=0:i=i*10+(s-48)}}function Hh(e){let t=e.offset,r=e.buffer,i=r.length-1;for(var n=t;n<i;)if(r[n++]===13)return e.offset=n+1,e.optionReturnBuffers===!0?e.buffer.slice(t,n-1):e.buffer.toString("utf8",t,n-1)}function Qh(e){let t=e.buffer.length-1;for(var r=e.offset,i=0;r<t;){let n=e.buffer[r++];if(n===13)return e.offset=r+1,i;i=i*10+(n-48)}}function AI(e){return e.optionStringNumbers===!0?EI(e):SI(e)}function kI(e){let t=Qh(e);if(t===void 0)return;if(t<0)return null;let r=e.offset+t;if(r+2>e.buffer.length){e.bigStrSize=r+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return e.offset=r+2,e.optionReturnBuffers===!0?e.buffer.slice(i,r):e.buffer.toString("utf8",i,r)}function RI(e){var t=Hh(e);if(t!==void 0)return e.optionReturnBuffers===!0&&(t=t.toString()),new vI(t)}function TI(e,t){let r=new wI("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(r)}function II(e){let t=Qh(e);if(t===void 0)return;if(t<0)return null;let r=new Array(t);return Kh(e,r,0)}function ml(e,t,r){e.arrayCache.push(t),e.arrayPos.push(r)}function gl(e){let t=e.arrayCache.pop();var r=e.arrayPos.pop();if(e.arrayCache.length){let i=gl(e);if(i===void 0){ml(e,t,r);return}t[r++]=i}return Kh(e,t,r)}function Kh(e,t,r){let i=e.buffer.length;for(;r<t.length;){let n=e.offset;if(e.offset>=i){ml(e,t,r);return}let s=zh(e,e.buffer[e.offset++]);if(s===void 0){e.arrayCache.length||e.bufferCache.length||(e.offset=n),ml(e,t,r);return}t[r]=s,r++}return t}function zh(e,t){switch(t){case 36:return kI(e);case 43:return Hh(e);case 42:return II(e);case 58:return AI(e);case 45:return RI(e);default:return TI(e,t)}}function OI(){if(Be.length>50*1024)if(di===1||hl>di*2){let e=Math.floor(Be.length/10),t=e<Se?Se:e;Se=0,Be=Be.slice(t,Be.length)}else hl++,di--;else clearInterval(Vn),di=0,hl=0,Vn=null}function _I(e){if(Be.length<e+Se){let t=e>78643200?2:3;Se>1024*1024*111&&(Se=1024*1024*50),Be=bl.allocUnsafe(e*t+Se),Se=0,di++,Vn===null&&(Vn=setInterval(OI,50))}}function qI(e){let t=e.bufferCache,r=e.offset;var i=t.length,n=e.bigStrSize-e.totalChunkSize;if(e.offset=n,n<=2){if(i===2)return t[0].toString("utf8",r,t[0].length+n-2);i--,n=t[t.length-2].length+n}for(var s=pl.write(t[0].slice(r)),a=1;a<i-1;a++)s+=pl.write(t[a]);return s+=pl.end(t[a].slice(0,n-2)),s}function CI(e){let t=e.bufferCache,r=e.offset,i=e.bigStrSize-r-2;var n=t.length,s=e.bigStrSize-e.totalChunkSize;if(e.offset=s,s<=2){if(n===2)return t[0].slice(r,t[0].length+s-2);n--,s=t[t.length-2].length+s}_I(i);let a=Se;t[0].copy(Be,a,r,t[0].length),Se+=t[0].length-r;for(var o=1;o<n-1;o++)t[o].copy(Be,Se),Se+=t[o].length;return t[o].copy(Be,Se,0,s-2),Se+=s-2,Be.slice(a,Se)}var yl=class{constructor(t){if(!t)throw new TypeError("Options are mandatory.");if(typeof t.returnError!="function"||typeof t.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!t.returnBuffers),this.setStringNumbers(!!t.stringNumbers),this.returnError=t.returnError,this.returnFatalError=t.returnFatalError||t.returnError,this.returnReply=t.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(t){if(typeof t!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=t}setStringNumbers(t){if(typeof t!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=t}execute(t){if(this.buffer===null)this.buffer=t,this.offset=0;else if(this.bigStrSize===0){let i=this.buffer.length,n=i-this.offset,s=bl.allocUnsafe(n+t.length);if(this.buffer.copy(s,0,this.offset,i),t.copy(s,n,0,t.length),this.buffer=s,this.offset=0,this.arrayCache.length){let a=gl(this);if(a===void 0)return;this.returnReply(a)}}else if(this.totalChunkSize+t.length>=this.bigStrSize){this.bufferCache.push(t);var r=this.optionReturnBuffers?CI(this):qI(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=t,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=gl(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(t),this.totalChunkSize+=t.length;return}for(;this.offset<this.buffer.length;){let i=this.offset,n=this.buffer[this.offset++],s=zh(this,n);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=i);return}n===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};Jh.exports=yl});var Xh=h((m6,Yh)=>{"use strict";Yh.exports=Wh()});var Zh=h(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});var vl=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(t,r){this.set[xl(t)][r]=!0}del(t,r){delete this.set[xl(t)][r]}channels(t){return Object.keys(this.set[xl(t)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};wl.default=vl;function xl(e){return e==="unsubscribe"?"subscribe":e==="punsubscribe"?"psubscribe":e==="sunsubscribe"?"ssubscribe":e}});var im=h(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var em=ht(),PI=pe(),NI=Xh(),DI=Zh(),LI=(0,PI.Debug)("dataHandler"),Sl=class{constructor(t,r){this.redis=t;let i=new NI({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:n=>{this.returnError(n)},returnFatalError:n=>{this.returnFatalError(n)},returnReply:n=>{this.returnReply(n)}});t.stream.prependListener("data",n=>{i.execute(n)}),t.stream.resume()}returnFatalError(t){t.message+=". Please report this.",this.redis.recoverFromFatalError(t,t,{offlineQueue:!1})}returnError(t){let r=this.shiftCommand(t);if(r){if(t.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&t.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(t,r)}}returnReply(t){if(this.handleMonitorReply(t)||this.handleSubscriberReply(t))return;let r=this.shiftCommand(t);r&&(em.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new DI.default,this.redis.condition.subscriber.add(r.command.name,t[1].toString()),tm(r.command,t[2])||this.redis.commandQueue.unshift(r)):em.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?rm(r.command,t[2])||this.redis.commandQueue.unshift(r):r.command.resolve(t))}handleSubscriberReply(t){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(t)?t[0].toString():null;switch(LI('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("messageBuffer",t[1],t[2]);break;case"pmessage":{let i=t[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",i,t[2].toString(),t[3].toString()),this.redis.emit("pmessageBuffer",i,t[2],t[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("smessageBuffer",t[1],t[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let i=t[1].toString();this.redis.condition.subscriber.add(r,i);let n=this.shiftCommand(t);if(!n)return;tm(n.command,t[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let i=t[1]?t[1].toString():null;i&&this.redis.condition.subscriber.del(r,i);let n=t[2];Number(n)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(t);if(!s)return;rm(s.command,n)||this.redis.commandQueue.unshift(s);break}default:{let i=this.shiftCommand(t);if(!i)return;i.command.resolve(t)}}return!0}handleMonitorReply(t){if(this.redis.status!=="monitoring")return!1;let r=t.toString();if(r==="OK")return!1;let i=r.indexOf(" "),n=r.slice(0,i),s=r.indexOf('"'),a=r.slice(s+1,-1).split('" "').map(l=>l.replace(/\\"/g,'"')),o=r.slice(i+2,s-2).split(" ");return this.redis.emit("monitor",n,a,o[1],o[0]),!0}shiftCommand(t){let r=this.redis.commandQueue.shift();if(!r){let i="Command queue state error. If you can reproduce this, please report it.",n=new Error(i+(t instanceof Error?` Last error: ${t.message}`:` Last reply: ${t.toString()}`));return this.redis.emit("error",n),null}return r}};El.default=Sl;var Dt=new WeakMap;function tm(e,t){let r=Dt.has(e)?Dt.get(e):e.args.length;return r-=1,r<=0?(e.resolve(t),Dt.delete(e),!0):(Dt.set(e,r),!1)}function rm(e,t){let r=Dt.has(e)?Dt.get(e):e.args.length;return r===0?Number(t)===0?(Dt.delete(e),e.resolve(t),!0):!1:(r-=1,r<=0?(e.resolve(t),!0):(Dt.set(e,r),!1))}});var nm=h(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.readyHandler=Ue.errorHandler=Ue.closeHandler=Ue.connectHandler=void 0;var UI=Jt(),FI=ht(),MI=Bh(),rt=pe(),$I=im(),he=(0,rt.Debug)("connection");function jI(e){return function(){var t;e.setStatus("connect"),e.resetCommandQueue();let r=!1,{connectionEpoch:i}=e;e.condition.auth&&e.auth(e.condition.auth,function(s){i===e.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,e.recoverFromFatalError(s,s)))}),e.condition.select&&e.select(e.condition.select).catch(s=>{e.silentEmit("error",s)}),new $I.default(e,{stringNumbers:e.options.stringNumbers});let n=[];e.options.connectionName&&(he("set the connection name [%s]",e.options.connectionName),n.push(e.client("setname",e.options.connectionName).catch(rt.noop))),e.options.disableClientInfo||(he("set the client info"),n.push((0,rt.getPackageMeta)().then(s=>e.client("SETINFO","LIB-VER",s.version).catch(rt.noop)).catch(rt.noop)),n.push(e.client("SETINFO","LIB-NAME",!((t=e.options)===null||t===void 0)&&t.clientInfoTag?`ioredis(${e.options.clientInfoTag})`:"ioredis").catch(rt.noop))),Promise.all(n).catch(rt.noop).finally(()=>{e.options.enableReadyCheck||Ue.readyHandler(e)(),e.options.enableReadyCheck&&e._readyCheck(function(s,a){i===e.connectionEpoch&&(s?r||e.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):e.connector.check(a)?Ue.readyHandler(e)():e.disconnect(!0))})})}}Ue.connectHandler=jI;function Al(e){let t=new UI.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}function VI(e){var t;let r=0;for(let i=0;i<e.length;){let n=(t=e.peekAt(i))===null||t===void 0?void 0:t.command,s=n.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){e.remove(i,1),n.reject(Al(n));continue}i++}}function BI(e){var t;for(let r=0;r<e.length;){let i=(t=e.peekAt(r))===null||t===void 0?void 0:t.command;if(i.name==="multi")break;if(i.name==="exec"){e.remove(r,1),i.reject(Al(i));break}i.inTransaction?(e.remove(r,1),i.reject(Al(i))):r++}}function GI(e){return function(){let r=e.status;if(e.setStatus("close"),e.commandQueue.length&&VI(e.commandQueue),e.offlineQueue.length&&BI(e.offlineQueue),r==="ready"&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,he("skip reconnecting since the connection is manually closed."),t();if(typeof e.options.retryStrategy!="function")return he("skip reconnecting because `retryStrategy` is not a function"),t();let i=e.options.retryStrategy(++e.retryAttempts);if(typeof i!="number")return he("skip reconnecting because `retryStrategy` doesn't return a number"),t();he("reconnect in %sms",i),e.setStatus("reconnecting",i),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(rt.noop)},i);let{maxRetriesPerRequest:n}=e.options;typeof n=="number"&&(n<0?he("maxRetriesPerRequest is negative, ignoring..."):e.retryAttempts%(n+1)===0&&(he("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new MI.MaxRetriesPerRequestError(n))))};function t(){e.setStatus("end"),e.flushQueue(new Error(rt.CONNECTION_CLOSED_ERROR_MSG))}}Ue.closeHandler=GI;function HI(e){return function(t){he("error: %s",t),e.silentEmit("error",t)}}Ue.errorHandler=HI;function QI(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),i=>e.emit("error",i));let{sendCommand:r}=e;e.sendCommand=function(i){return FI.default.checkFlag("VALID_IN_MONITOR_MODE",i.name)?r.call(e,i):(i.reject(new Error("Connection is in monitoring mode, can't process commands.")),i.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.readOnly&&(he("set the connection to readonly mode"),e.readonly().catch(rt.noop)),e.prevCondition){let r=e.prevCondition;if(e.prevCondition=null,r.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(he("connect to db [%d]",t),e.select(t));let i=r.subscriber.channels("subscribe");i.length&&(he("subscribe %d channels",i.length),e.subscribe(i));let n=r.subscriber.channels("psubscribe");n.length&&(he("psubscribe %d channels",n.length),e.psubscribe(n));let s=r.subscriber.channels("ssubscribe");if(s.length){he("ssubscribe %s",s.length);for(let a of s)e.ssubscribe(a)}}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(he("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let r=e.prevCommandQueue.shift();r.select!==e.condition.select&&r.command.name!=="select"&&e.select(r.select),e.sendCommand(r.command,r.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){he("send %d commands in offline queue",e.offlineQueue.length);let r=e.offlineQueue;for(e.resetOfflineQueue();r.length>0;){let i=r.shift();i.select!==e.condition.select&&i.command.name!=="select"&&e.select(i.select),e.sendCommand(i.command,i.stream)}}e.condition.select!==t&&(he("connect to db [%d]",t),e.select(t))}}Ue.readyHandler=QI});var sm=h(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.DEFAULT_REDIS_OPTIONS=void 0;Bn.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(e*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(e*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var Nt=h(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var am=fr(),lm=require("events"),kl=_t(),KI=tl(),fi=ht(),zI=jh(),JI=$n(),Lt=nm(),WI=sm(),YI=_n(),XI=Fo(),Xt=pe(),ZI=$o(),e2=Cn(),Ut=En(),om=Ln(),Ft=(0,Xt.Debug)("redis"),Mt=class e extends e2.default{constructor(t,r,i){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(t,r,i),lm.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let n=new JI.default(this.options);n.emitter=this,this.connector=n}else this.connector=new zI.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Ut.noop)}static createClient(...t){return new e(...t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}connect(t){let r=new Promise((i,n)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){n(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let a=this;(0,kl.default)(this.connector.connect(function(o,l){a.silentEmit(o,l)}),function(o,l){if(o){a.flushQueue(o),a.silentEmit("error",o),n(o),a.setStatus("end");return}let u=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(u="connect"),a.stream=l,s.noDelay&&l.setNoDelay(!0),typeof s.keepAlive=="number"&&(l.connecting?l.once(u,()=>{l.setKeepAlive(!0,s.keepAlive)}):l.setKeepAlive(!0,s.keepAlive)),l.connecting){if(l.once(u,Lt.connectHandler(a)),s.connectTimeout){let f=!1;l.setTimeout(s.connectTimeout,function(){if(f)return;l.setTimeout(0),l.destroy();let p=new Error("connect ETIMEDOUT");p.errorno="ETIMEDOUT",p.code="ETIMEDOUT",p.syscall="connect",Lt.errorHandler(a)(p)}),l.once(u,function(){f=!0,l.setTimeout(0)})}}else if(l.destroyed){let f=a.connector.firstError;f&&process.nextTick(()=>{Lt.errorHandler(a)(f)}),process.nextTick(Lt.closeHandler(a))}else process.nextTick(Lt.connectHandler(a));l.destroyed||(l.once("error",Lt.errorHandler(a)),l.once("close",Lt.closeHandler(a)));let c=function(){a.removeListener("close",d),i()};var d=function(){a.removeListener("ready",c),n(new Error(Xt.CONNECTION_CLOSED_ERROR_MSG))};a.once("ready",c),a.once("close",d)})});return(0,kl.default)(r,t)}disconnect(t=!1){t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Lt.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(t){return new e({...this.options,...t})}get mode(){var t;return this.options.monitor?"monitor":!((t=this.condition)===null||t===void 0)&&t.subscriber?"subscriber":"normal"}monitor(t){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,kl.default)(new Promise(function(i,n){r.once("error",n),r.once("monitoring",function(){i(r)})}),t)}sendCommand(t,r){var i,n;if(this.status==="wait"&&this.connect().catch(Ut.noop),this.status==="end")return t.reject(new Error(Xt.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if(!((i=this.condition)===null||i===void 0)&&i.subscriber&&!fi.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;typeof this.options.commandTimeout=="number"&&t.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!r&&this.status==="connect"&&(0,am.exists)(t.name)&&((0,am.hasFlag)(t.name,"loading")||fi.default.checkFlag("HANDSHAKE_COMMANDS",t.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)Ft.enabled&&Ft("write command[%s]: %d -> %s(%o)",this._getDescription(),(n=this.condition)===null||n===void 0?void 0:n.select,t.name,t.args),r?"isPipeline"in r&&r.isPipeline?r.write(t.toWritable(r.destination.redis.stream)):r.write(t.toWritable(r)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:r,select:this.condition.select}),fi.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if(t.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;Ft.enabled&&Ft("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:r,select:this.condition.select})}if(t.name==="select"&&(0,Xt.isInt)(t.args[0])){let a=parseInt(t.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),Ft("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(t){return this.createScanStream("scan",{options:t})}scanBufferStream(t){return this.createScanStream("scanBuffer",{options:t})}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}silentEmit(t,r){let i;if(!(t==="error"&&(i=r,this.status==="end"||this.manuallyClosing&&i instanceof Error&&(i.message===Xt.CONNECTION_CLOSED_ERROR_MSG||i.syscall==="connect"||i.syscall==="read"))))return this.listeners(t).length>0?this.emit.apply(this,arguments):(i&&i instanceof Error&&console.error("[ioredis] Unhandled error event:",i.stack),!1)}recoverFromFatalError(t,r,i){this.flushQueue(r,i),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(t,r){var i;let n=!1;switch(this.options.reconnectOnError&&!fi.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(n=this.options.reconnectOnError(t)),n){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(t);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((i=this.condition)===null||i===void 0?void 0:i.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(t)}}_getDescription(){let t;return"path"in this.options&&this.options.path?t=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?t=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?t=this.options.host+":"+this.options.port:t="",this.options.connectionName&&(t+=` (${this.options.connectionName})`),t}resetCommandQueue(){this.commandQueue=new om}resetOfflineQueue(){this.offlineQueue=new om}parseOptions(...t){let r={},i=!1;for(let n=0;n<t.length;++n){let s=t[n];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,Ut.defaults)(r,s);else if(typeof s=="string")(0,Ut.defaults)(r,(0,Xt.parseURL)(s)),s.startsWith("rediss://")&&(i=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}i&&(0,Ut.defaults)(r,{tls:!0}),(0,Ut.defaults)(r,e.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,Xt.resolveTLSProfile)(r)}setStatus(t,r){Ft.enabled&&Ft("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",t),this.status=t,process.nextTick(this.emit.bind(this,t,r))}createScanStream(t,{key:r,options:i={}}){return new YI.default({objectMode:!0,key:r,redis:this,command:t,...i})}flushQueue(t,r){r=(0,Ut.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let i;if(r.offlineQueue)for(;i=this.offlineQueue.shift();)i.command.reject(t);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");i=this.commandQueue.shift();)i.command.reject(t)}_readyCheck(t){let r=this;this.info(function(i,n){if(i)return i.message&&i.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${i.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),t(null,{})):t(i);if(typeof n!="string")return t(null,n);let s={},a=n.split(`\r
`);for(let o=0;o<a.length;++o){let[l,...u]=a[o].split(":"),c=u.join(":");c&&(s[l]=c)}if(!s.loading||s.loading==="0")t(null,s);else{let o=(s.loading_eta_seconds||1)*1e3,l=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<o?r.options.maxLoadingRetryTime:o;Ft("Redis server still loading, trying again in "+l+"ms"),setTimeout(function(){r._readyCheck(t)},l)}}).catch(Ut.noop)}};Mt.Cluster=KI.default;Mt.Command=fi.default;Mt.defaultOptions=WI.DEFAULT_REDIS_OPTIONS;(0,ZI.default)(Mt,lm.EventEmitter);(0,XI.addTransactionSupport)(Mt.prototype);Rl.default=Mt});var dm=h((Y,cm)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.print=Y.ReplyError=Y.SentinelIterator=Y.SentinelConnector=Y.AbstractConnector=Y.Pipeline=Y.ScanStream=Y.Command=Y.Cluster=Y.Redis=Y.default=void 0;Y=cm.exports=Nt().default;var t2=Nt();Object.defineProperty(Y,"default",{enumerable:!0,get:function(){return t2.default}});var r2=Nt();Object.defineProperty(Y,"Redis",{enumerable:!0,get:function(){return r2.default}});var i2=tl();Object.defineProperty(Y,"Cluster",{enumerable:!0,get:function(){return i2.default}});var n2=ht();Object.defineProperty(Y,"Command",{enumerable:!0,get:function(){return n2.default}});var s2=_n();Object.defineProperty(Y,"ScanStream",{enumerable:!0,get:function(){return s2.default}});var a2=Do();Object.defineProperty(Y,"Pipeline",{enumerable:!0,get:function(){return a2.default}});var o2=Fn();Object.defineProperty(Y,"AbstractConnector",{enumerable:!0,get:function(){return o2.default}});var um=$n();Object.defineProperty(Y,"SentinelConnector",{enumerable:!0,get:function(){return um.default}});Object.defineProperty(Y,"SentinelIterator",{enumerable:!0,get:function(){return um.SentinelIterator}});Y.ReplyError=Jt().ReplyError;Object.defineProperty(Y,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function l2(e,t){console.log(e?"Error: "+e:"Reply: "+t)}Y.print=l2});var Er=h((Tl,pm)=>{var Gn=require("buffer"),it=Gn.Buffer;function fm(e,t){for(var r in e)t[r]=e[r]}it.from&&it.alloc&&it.allocUnsafe&&it.allocUnsafeSlow?pm.exports=Gn:(fm(Gn,Tl),Tl.Buffer=Zt);function Zt(e,t,r){return it(e,t,r)}Zt.prototype=Object.create(it.prototype);fm(it,Zt);Zt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return it(e,t,r)};Zt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=it(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};Zt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return it(e)};Zt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Gn.SlowBuffer(e)}});var Il=h((T6,hm)=>{var Hn=Er().Buffer,c2=require("stream"),d2=require("util");function Qn(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Hn.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Hn.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}d2.inherits(Qn,c2);Qn.prototype.write=function(t){this.buffer=Hn.concat([this.buffer,Hn.from(t)]),this.emit("data",t)};Qn.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};hm.exports=Qn});var gm=h((I6,mm)=>{"use strict";function Ol(e){var t=(e/8|0)+(e%8===0?0:1);return t}var f2={ES256:Ol(256),ES384:Ol(384),ES512:Ol(521)};function p2(e){var t=f2[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}mm.exports=p2});var Em=h((O6,Sm)=>{"use strict";var Kn=Er().Buffer,bm=gm(),zn=128,xm=0,h2=32,m2=16,g2=2,vm=m2|h2|xm<<6,Jn=g2|xm<<6;function y2(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wm(e){if(Kn.isBuffer(e))return e;if(typeof e=="string")return Kn.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function b2(e,t){e=wm(e);var r=bm(t),i=r+1,n=e.length,s=0;if(e[s++]!==vm)throw new Error('Could not find expected "seq"');var a=e[s++];if(a===(zn|1)&&(a=e[s++]),n-s<a)throw new Error('"seq" specified length of "'+a+'", only "'+(n-s)+'" remaining');if(e[s++]!==Jn)throw new Error('Could not find expected "int" for "r"');var o=e[s++];if(n-s-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(n-s-2)+'" available');if(i<o)throw new Error('"r" specified length of "'+o+'", max of "'+i+'" is acceptable');var l=s;if(s+=o,e[s++]!==Jn)throw new Error('Could not find expected "int" for "s"');var u=e[s++];if(n-s!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(n-s)+'"');if(i<u)throw new Error('"s" specified length of "'+u+'", max of "'+i+'" is acceptable');var c=s;if(s+=u,s!==n)throw new Error('Expected to consume entire buffer, but "'+(n-s)+'" bytes remain');var d=r-o,f=r-u,p=Kn.allocUnsafe(d+o+f+u);for(s=0;s<d;++s)p[s]=0;e.copy(p,s,l+Math.max(-d,0),l+o),s=r;for(var m=s;s<m+f;++s)p[s]=0;return e.copy(p,s,c+Math.max(-f,0),c+u),p=p.toString("base64"),p=y2(p),p}function ym(e,t,r){for(var i=0;t+i<r&&e[t+i]===0;)++i;var n=e[t+i]>=zn;return n&&--i,i}function x2(e,t){e=wm(e);var r=bm(t),i=e.length;if(i!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+i+'"');var n=ym(e,0,r),s=ym(e,r,e.length),a=r-n,o=r-s,l=2+a+1+1+o,u=l<zn,c=Kn.allocUnsafe((u?2:3)+l),d=0;return c[d++]=vm,u?c[d++]=l:(c[d++]=zn|1,c[d++]=l&255),c[d++]=Jn,c[d++]=a,n<0?(c[d++]=0,d+=e.copy(c,d,0,r)):d+=e.copy(c,d,n,r),c[d++]=Jn,c[d++]=o,s<0?(c[d++]=0,e.copy(c,d,r)):e.copy(c,d,r+s),c}Sm.exports={derToJose:b2,joseToDer:x2}});var km=h((_6,Am)=>{"use strict";var pi=require("buffer").Buffer,_l=require("buffer").SlowBuffer;Am.exports=Wn;function Wn(e,t){if(!pi.isBuffer(e)||!pi.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}Wn.install=function(){pi.prototype.equal=_l.prototype.equal=function(t){return Wn(this,t)}};var v2=pi.prototype.equal,w2=_l.prototype.equal;Wn.restore=function(){pi.prototype.equal=v2,_l.prototype.equal=w2}});var Nl=h((q6,Nm)=>{var kr=Er().Buffer,Fe=require("crypto"),Tm=Em(),Rm=require("util"),S2=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,hi="secret must be a string or buffer",Ar="key must be a string or a buffer",E2="key must be a string, a buffer or an object",Cl=typeof Fe.createPublicKey=="function";Cl&&(Ar+=" or a KeyObject",hi+="or a KeyObject");function Im(e){if(!kr.isBuffer(e)&&typeof e!="string"&&(!Cl||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw Ge(Ar)}function Om(e){if(!kr.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw Ge(E2)}function A2(e){if(!kr.isBuffer(e)){if(typeof e=="string")return e;if(!Cl||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw Ge(hi)}}function Pl(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _m(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function Ge(e){var t=[].slice.call(arguments,1),r=Rm.format.bind(Rm,e).apply(null,t);return new TypeError(r)}function k2(e){return kr.isBuffer(e)||typeof e=="string"}function mi(e){return k2(e)||(e=JSON.stringify(e)),e}function qm(e){return function(r,i){A2(i),r=mi(r);var n=Fe.createHmac("sha"+e,i),s=(n.update(r),n.digest("base64"));return Pl(s)}}var ql,R2="timingSafeEqual"in Fe?function(t,r){return t.byteLength!==r.byteLength?!1:Fe.timingSafeEqual(t,r)}:function(t,r){return ql||(ql=km()),ql(t,r)};function T2(e){return function(r,i,n){var s=qm(e)(r,n);return R2(kr.from(i),kr.from(s))}}function Cm(e){return function(r,i){Om(i),r=mi(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign(i,"base64"));return Pl(s)}}function Pm(e){return function(r,i,n){Im(n),r=mi(r),i=_m(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify(n,i,"base64")}}function I2(e){return function(r,i){Om(i),r=mi(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign({key:i,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Pl(s)}}function O2(e){return function(r,i,n){Im(n),r=mi(r),i=_m(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify({key:n,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},i,"base64")}}function _2(e){var t=Cm(e);return function(){var i=t.apply(null,arguments);return i=Tm.derToJose(i,"ES"+e),i}}function q2(e){var t=Pm(e);return function(i,n,s){n=Tm.joseToDer(n,"ES"+e).toString("base64");var a=t(i,n,s);return a}}function C2(){return function(){return""}}function P2(){return function(t,r){return r===""}}Nm.exports=function(t){var r={hs:qm,rs:Cm,ps:I2,es:_2,none:C2},i={hs:T2,rs:Pm,ps:O2,es:q2,none:P2},n=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw Ge(S2,t);var s=(n[1]||n[3]).toLowerCase(),a=n[2];return{sign:r[s](a),verify:i[s](a)}}});var Dl=h((C6,Dm)=>{var N2=require("buffer").Buffer;Dm.exports=function(t){return typeof t=="string"?t:typeof t=="number"||N2.isBuffer(t)?t.toString():JSON.stringify(t)}});var jm=h((P6,$m)=>{var D2=Er().Buffer,Lm=Il(),L2=Nl(),U2=require("stream"),Um=Dl(),Ll=require("util");function Fm(e,t){return D2.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function F2(e,t,r){r=r||"utf8";var i=Fm(Um(e),"binary"),n=Fm(Um(t),r);return Ll.format("%s.%s",i,n)}function Mm(e){var t=e.header,r=e.payload,i=e.secret||e.privateKey,n=e.encoding,s=L2(t.alg),a=F2(t,r,n),o=s.sign(a,i);return Ll.format("%s.%s",a,o)}function Yn(e){var t=e.secret||e.privateKey||e.key,r=new Lm(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Lm(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Ll.inherits(Yn,U2);Yn.prototype.sign=function(){try{var t=Mm({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Yn.sign=Mm;$m.exports=Yn});var Ym=h((N6,Wm)=>{var Bm=Er().Buffer,Vm=Il(),M2=Nl(),$2=require("stream"),Gm=Dl(),j2=require("util"),V2=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function B2(e){return Object.prototype.toString.call(e)==="[object Object]"}function G2(e){if(B2(e))return e;try{return JSON.parse(e)}catch{return}}function Hm(e){var t=e.split(".",1)[0];return G2(Bm.from(t,"base64").toString("binary"))}function H2(e){return e.split(".",2).join(".")}function Qm(e){return e.split(".")[2]}function Q2(e,t){t=t||"utf8";var r=e.split(".")[1];return Bm.from(r,"base64").toString(t)}function Km(e){return V2.test(e)&&!!Hm(e)}function zm(e,t,r){if(!t){var i=new Error("Missing algorithm parameter for jws.verify");throw i.code="MISSING_ALGORITHM",i}e=Gm(e);var n=Qm(e),s=H2(e),a=M2(t);return a.verify(s,n,r)}function Jm(e,t){if(t=t||{},e=Gm(e),!Km(e))return null;var r=Hm(e);if(!r)return null;var i=Q2(e);return(r.typ==="JWT"||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:Qm(e)}}function Rr(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new Vm(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new Vm(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}j2.inherits(Rr,$2);Rr.prototype.verify=function(){try{var t=zm(this.signature.buffer,this.algorithm,this.key.buffer),r=Jm(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(i){this.readable=!1,this.emit("error",i),this.emit("close")}};Rr.decode=Jm;Rr.isValid=Km;Rr.verify=zm;Wm.exports=Rr});var Zn=h($t=>{var Xm=jm(),Xn=Ym(),K2=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];$t.ALGORITHMS=K2;$t.sign=Xm.sign;$t.verify=Xn.verify;$t.decode=Xn.decode;$t.isValid=Xn.isValid;$t.createSign=function(t){return new Xm(t)};$t.createVerify=function(t){return new Xn(t)}});var Ul=h((L6,Zm)=>{var z2=Zn();Zm.exports=function(e,t){t=t||{};var r=z2.decode(e,t);if(!r)return null;var i=r.payload;if(typeof i=="string")try{var n=JSON.parse(i);n!==null&&typeof n=="object"&&(i=n)}catch{}return t.complete===!0?{header:r.header,payload:i,signature:r.signature}:i}});var gi=h((U6,e0)=>{var es=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};es.prototype=Object.create(Error.prototype);es.prototype.constructor=es;e0.exports=es});var Fl=h((F6,r0)=>{var t0=gi(),ts=function(e,t){t0.call(this,e),this.name="NotBeforeError",this.date=t};ts.prototype=Object.create(t0.prototype);ts.prototype.constructor=ts;r0.exports=ts});var Ml=h((M6,n0)=>{var i0=gi(),rs=function(e,t){i0.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};rs.prototype=Object.create(i0.prototype);rs.prototype.constructor=rs;n0.exports=rs});var $l=h(($6,s0)=>{var J2=yo();s0.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if(typeof e=="string"){var i=J2(e);return typeof i>"u"?void 0:Math.floor(r+i/1e3)}else return typeof e=="number"?r+e:void 0}});var yi=h((j6,a0)=>{"use strict";var W2="2.0.0",Y2=Number.MAX_SAFE_INTEGER||9007199254740991,X2=16,Z2=250,eO=["major","premajor","minor","preminor","patch","prepatch","prerelease"];a0.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:X2,MAX_SAFE_BUILD_LENGTH:Z2,MAX_SAFE_INTEGER:Y2,RELEASE_TYPES:eO,SEMVER_SPEC_VERSION:W2,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var bi=h((V6,o0)=>{"use strict";var tO=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};o0.exports=tO});var Tr=h((nt,l0)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:jl,MAX_SAFE_BUILD_LENGTH:rO,MAX_LENGTH:iO}=yi(),nO=bi();nt=l0.exports={};var sO=nt.re=[],aO=nt.safeRe=[],x=nt.src=[],oO=nt.safeSrc=[],v=nt.t={},lO=0,Vl="[a-zA-Z0-9-]",uO=[["\\s",1],["\\d",iO],[Vl,rO]],cO=e=>{for(let[t,r]of uO)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},P=(e,t,r)=>{let i=cO(t),n=lO++;nO(e,n,t),v[e]=n,x[n]=t,oO[n]=i,sO[n]=new RegExp(t,r?"g":void 0),aO[n]=new RegExp(i,r?"g":void 0)};P("NUMERICIDENTIFIER","0|[1-9]\\d*");P("NUMERICIDENTIFIERLOOSE","\\d+");P("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Vl}*`);P("MAINVERSION",`(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})`);P("MAINVERSIONLOOSE",`(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})`);P("PRERELEASEIDENTIFIER",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIER]})`);P("PRERELEASEIDENTIFIERLOOSE",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIERLOOSE]})`);P("PRERELEASE",`(?:-(${x[v.PRERELEASEIDENTIFIER]}(?:\\.${x[v.PRERELEASEIDENTIFIER]})*))`);P("PRERELEASELOOSE",`(?:-?(${x[v.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${x[v.PRERELEASEIDENTIFIERLOOSE]})*))`);P("BUILDIDENTIFIER",`${Vl}+`);P("BUILD",`(?:\\+(${x[v.BUILDIDENTIFIER]}(?:\\.${x[v.BUILDIDENTIFIER]})*))`);P("FULLPLAIN",`v?${x[v.MAINVERSION]}${x[v.PRERELEASE]}?${x[v.BUILD]}?`);P("FULL",`^${x[v.FULLPLAIN]}$`);P("LOOSEPLAIN",`[v=\\s]*${x[v.MAINVERSIONLOOSE]}${x[v.PRERELEASELOOSE]}?${x[v.BUILD]}?`);P("LOOSE",`^${x[v.LOOSEPLAIN]}$`);P("GTLT","((?:<|>)?=?)");P("XRANGEIDENTIFIERLOOSE",`${x[v.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);P("XRANGEIDENTIFIER",`${x[v.NUMERICIDENTIFIER]}|x|X|\\*`);P("XRANGEPLAIN",`[v=\\s]*(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:${x[v.PRERELEASE]})?${x[v.BUILD]}?)?)?`);P("XRANGEPLAINLOOSE",`[v=\\s]*(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:${x[v.PRERELEASELOOSE]})?${x[v.BUILD]}?)?)?`);P("XRANGE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAIN]}$`);P("XRANGELOOSE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAINLOOSE]}$`);P("COERCEPLAIN",`(^|[^\\d])(\\d{1,${jl}})(?:\\.(\\d{1,${jl}}))?(?:\\.(\\d{1,${jl}}))?`);P("COERCE",`${x[v.COERCEPLAIN]}(?:$|[^\\d])`);P("COERCEFULL",x[v.COERCEPLAIN]+`(?:${x[v.PRERELEASE]})?(?:${x[v.BUILD]})?(?:$|[^\\d])`);P("COERCERTL",x[v.COERCE],!0);P("COERCERTLFULL",x[v.COERCEFULL],!0);P("LONETILDE","(?:~>?)");P("TILDETRIM",`(\\s*)${x[v.LONETILDE]}\\s+`,!0);nt.tildeTrimReplace="$1~";P("TILDE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAIN]}$`);P("TILDELOOSE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAINLOOSE]}$`);P("LONECARET","(?:\\^)");P("CARETTRIM",`(\\s*)${x[v.LONECARET]}\\s+`,!0);nt.caretTrimReplace="$1^";P("CARET",`^${x[v.LONECARET]}${x[v.XRANGEPLAIN]}$`);P("CARETLOOSE",`^${x[v.LONECARET]}${x[v.XRANGEPLAINLOOSE]}$`);P("COMPARATORLOOSE",`^${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]})$|^$`);P("COMPARATOR",`^${x[v.GTLT]}\\s*(${x[v.FULLPLAIN]})$|^$`);P("COMPARATORTRIM",`(\\s*)${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]}|${x[v.XRANGEPLAIN]})`,!0);nt.comparatorTrimReplace="$1$2$3";P("HYPHENRANGE",`^\\s*(${x[v.XRANGEPLAIN]})\\s+-\\s+(${x[v.XRANGEPLAIN]})\\s*$`);P("HYPHENRANGELOOSE",`^\\s*(${x[v.XRANGEPLAINLOOSE]})\\s+-\\s+(${x[v.XRANGEPLAINLOOSE]})\\s*$`);P("STAR","(<|>)?=?\\s*\\*");P("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");P("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var is=h((B6,u0)=>{"use strict";var dO=Object.freeze({loose:!0}),fO=Object.freeze({}),pO=e=>e?typeof e!="object"?dO:e:fO;u0.exports=pO});var Bl=h((G6,f0)=>{"use strict";var c0=/^[0-9]+$/,d0=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=c0.test(e),i=c0.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},hO=(e,t)=>d0(t,e);f0.exports={compareIdentifiers:d0,rcompareIdentifiers:hO}});var be=h((H6,h0)=>{"use strict";var ns=bi(),{MAX_LENGTH:p0,MAX_SAFE_INTEGER:ss}=yi(),{safeRe:as,t:os}=Tr(),mO=is(),{compareIdentifiers:Gl}=Bl(),Hl=class e{constructor(t,r){if(r=mO(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>p0)throw new TypeError(`version is longer than ${p0} characters`);ns("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?as[os.LOOSE]:as[os.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ss||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ss||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ss||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<ss)return s}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ns("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=t.prerelease[r];if(ns("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return Gl(i,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let i=this.build[r],n=t.build[r];if(ns("build compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return Gl(i,n)}while(++r)}inc(t,r,i){if(t.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let n=`-${r}`.match(this.options.loose?as[os.PRERELEASELOOSE]:as[os.PRERELEASE]);if(!n||n[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let s=[r,n];i===!1&&(s=[r]),Gl(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};h0.exports=Hl});var er=h((Q6,g0)=>{"use strict";var m0=be(),gO=(e,t,r=!1)=>{if(e instanceof m0)return e;try{return new m0(e,t)}catch(i){if(!r)return null;throw i}};g0.exports=gO});var b0=h((K6,y0)=>{"use strict";var yO=er(),bO=(e,t)=>{let r=yO(e,t);return r?r.version:null};y0.exports=bO});var v0=h((z6,x0)=>{"use strict";var xO=er(),vO=(e,t)=>{let r=xO(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};x0.exports=vO});var E0=h((J6,S0)=>{"use strict";var w0=be(),wO=(e,t,r,i,n)=>{typeof r=="string"&&(n=i,i=r,r=void 0);try{return new w0(e instanceof w0?e.version:e,r).inc(t,i,n).version}catch{return null}};S0.exports=wO});var R0=h((W6,k0)=>{"use strict";var A0=er(),SO=(e,t)=>{let r=A0(e,null,!0),i=A0(t,null,!0),n=r.compare(i);if(n===0)return null;let s=n>0,a=s?r:i,o=s?i:r,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}let c=l?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"};k0.exports=SO});var I0=h((Y6,T0)=>{"use strict";var EO=be(),AO=(e,t)=>new EO(e,t).major;T0.exports=AO});var _0=h((X6,O0)=>{"use strict";var kO=be(),RO=(e,t)=>new kO(e,t).minor;O0.exports=RO});var C0=h((Z6,q0)=>{"use strict";var TO=be(),IO=(e,t)=>new TO(e,t).patch;q0.exports=IO});var N0=h((eD,P0)=>{"use strict";var OO=er(),_O=(e,t)=>{let r=OO(e,t);return r&&r.prerelease.length?r.prerelease:null};P0.exports=_O});var Me=h((tD,L0)=>{"use strict";var D0=be(),qO=(e,t,r)=>new D0(e,r).compare(new D0(t,r));L0.exports=qO});var F0=h((rD,U0)=>{"use strict";var CO=Me(),PO=(e,t,r)=>CO(t,e,r);U0.exports=PO});var $0=h((iD,M0)=>{"use strict";var NO=Me(),DO=(e,t)=>NO(e,t,!0);M0.exports=DO});var ls=h((nD,V0)=>{"use strict";var j0=be(),LO=(e,t,r)=>{let i=new j0(e,r),n=new j0(t,r);return i.compare(n)||i.compareBuild(n)};V0.exports=LO});var G0=h((sD,B0)=>{"use strict";var UO=ls(),FO=(e,t)=>e.sort((r,i)=>UO(r,i,t));B0.exports=FO});var Q0=h((aD,H0)=>{"use strict";var MO=ls(),$O=(e,t)=>e.sort((r,i)=>MO(i,r,t));H0.exports=$O});var xi=h((oD,K0)=>{"use strict";var jO=Me(),VO=(e,t,r)=>jO(e,t,r)>0;K0.exports=VO});var us=h((lD,z0)=>{"use strict";var BO=Me(),GO=(e,t,r)=>BO(e,t,r)<0;z0.exports=GO});var Ql=h((uD,J0)=>{"use strict";var HO=Me(),QO=(e,t,r)=>HO(e,t,r)===0;J0.exports=QO});var Kl=h((cD,W0)=>{"use strict";var KO=Me(),zO=(e,t,r)=>KO(e,t,r)!==0;W0.exports=zO});var cs=h((dD,Y0)=>{"use strict";var JO=Me(),WO=(e,t,r)=>JO(e,t,r)>=0;Y0.exports=WO});var ds=h((fD,X0)=>{"use strict";var YO=Me(),XO=(e,t,r)=>YO(e,t,r)<=0;X0.exports=XO});var zl=h((pD,Z0)=>{"use strict";var ZO=Ql(),e_=Kl(),t_=xi(),r_=cs(),i_=us(),n_=ds(),s_=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return ZO(e,r,i);case"!=":return e_(e,r,i);case">":return t_(e,r,i);case">=":return r_(e,r,i);case"<":return i_(e,r,i);case"<=":return n_(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}};Z0.exports=s_});var tg=h((hD,eg)=>{"use strict";var a_=be(),o_=er(),{safeRe:fs,t:ps}=Tr(),l_=(e,t)=>{if(e instanceof a_)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?fs[ps.COERCEFULL]:fs[ps.COERCE]);else{let l=t.includePrerelease?fs[ps.COERCERTLFULL]:fs[ps.COERCERTL],u;for(;(u=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],n=r[3]||"0",s=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",o=t.includePrerelease&&r[6]?`+${r[6]}`:"";return o_(`${i}.${n}.${s}${a}${o}`,t)};eg.exports=l_});var ig=h((mD,rg)=>{"use strict";var Jl=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(t,r)}return this}};rg.exports=Jl});var $e=h((gD,og)=>{"use strict";var u_=/\s+/g,Wl=class e{constructor(t,r){if(r=d_(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof Yl)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(u_," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(n=>!sg(n[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&b_(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let i=((this.options.includePrerelease&&g_)|(this.options.loose&&y_))+":"+t,n=ng.get(i);if(n)return n;let s=this.options.loose,a=s?Ee[xe.HYPHENRANGELOOSE]:Ee[xe.HYPHENRANGE];t=t.replace(a,I_(this.options.includePrerelease)),te("hyphen replace",t),t=t.replace(Ee[xe.COMPARATORTRIM],p_),te("comparator trim",t),t=t.replace(Ee[xe.TILDETRIM],h_),te("tilde trim",t),t=t.replace(Ee[xe.CARETTRIM],m_),te("caret trim",t);let o=t.split(" ").map(d=>x_(d,this.options)).join(" ").split(/\s+/).map(d=>T_(d,this.options));s&&(o=o.filter(d=>(te("loose invalid filter",d,this.options),!!d.match(Ee[xe.COMPARATORLOOSE])))),te("range list",o);let l=new Map,u=o.map(d=>new Yl(d,this.options));for(let d of u){if(sg(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return ng.set(i,c),c}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(i=>ag(i,r)&&t.set.some(n=>ag(n,r)&&i.every(s=>n.every(a=>s.intersects(a,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new f_(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(O_(this.set[r],t,this.options))return!0;return!1}};og.exports=Wl;var c_=ig(),ng=new c_,d_=is(),Yl=vi(),te=bi(),f_=be(),{safeRe:Ee,t:xe,comparatorTrimReplace:p_,tildeTrimReplace:h_,caretTrimReplace:m_}=Tr(),{FLAG_INCLUDE_PRERELEASE:g_,FLAG_LOOSE:y_}=yi(),sg=e=>e.value==="<0.0.0-0",b_=e=>e.value==="",ag=(e,t)=>{let r=!0,i=e.slice(),n=i.pop();for(;r&&i.length;)r=i.every(s=>n.intersects(s,t)),n=i.pop();return r},x_=(e,t)=>(e=e.replace(Ee[xe.BUILD],""),te("comp",e,t),e=S_(e,t),te("caret",e),e=v_(e,t),te("tildes",e),e=A_(e,t),te("xrange",e),e=R_(e,t),te("stars",e),e),Ae=e=>!e||e.toLowerCase()==="x"||e==="*",v_=(e,t)=>e.trim().split(/\s+/).map(r=>w_(r,t)).join(" "),w_=(e,t)=>{let r=t.loose?Ee[xe.TILDELOOSE]:Ee[xe.TILDE];return e.replace(r,(i,n,s,a,o)=>{te("tilde",e,i,n,s,a,o);let l;return Ae(n)?l="":Ae(s)?l=`>=${n}.0.0 <${+n+1}.0.0-0`:Ae(a)?l=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?(te("replaceTilde pr",o),l=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`):l=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,te("tilde return",l),l})},S_=(e,t)=>e.trim().split(/\s+/).map(r=>E_(r,t)).join(" "),E_=(e,t)=>{te("caret",e,t);let r=t.loose?Ee[xe.CARETLOOSE]:Ee[xe.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(n,s,a,o,l)=>{te("caret",e,n,s,a,o,l);let u;return Ae(s)?u="":Ae(a)?u=`>=${s}.0.0${i} <${+s+1}.0.0-0`:Ae(o)?s==="0"?u=`>=${s}.${a}.0${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${i} <${+s+1}.0.0-0`:l?(te("replaceCaret pr",l),s==="0"?a==="0"?u=`>=${s}.${a}.${o}-${l} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o}-${l} <${+s+1}.0.0-0`):(te("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${o}${i} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o} <${+s+1}.0.0-0`),te("caret return",u),u})},A_=(e,t)=>(te("replaceXRanges",e,t),e.split(/\s+/).map(r=>k_(r,t)).join(" ")),k_=(e,t)=>{e=e.trim();let r=t.loose?Ee[xe.XRANGELOOSE]:Ee[xe.XRANGE];return e.replace(r,(i,n,s,a,o,l)=>{te("xRange",e,i,n,s,a,o,l);let u=Ae(s),c=u||Ae(a),d=c||Ae(o),f=d;return n==="="&&f&&(n=""),l=t.includePrerelease?"-0":"",u?n===">"||n==="<"?i="<0.0.0-0":i="*":n&&f?(c&&(a=0),o=0,n===">"?(n=">=",c?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",c?s=+s+1:a=+a+1),n==="<"&&(l="-0"),i=`${n+s}.${a}.${o}${l}`):c?i=`>=${s}.0.0${l} <${+s+1}.0.0-0`:d&&(i=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),te("xRange return",i),i})},R_=(e,t)=>(te("replaceStars",e,t),e.trim().replace(Ee[xe.STAR],"")),T_=(e,t)=>(te("replaceGTE0",e,t),e.trim().replace(Ee[t.includePrerelease?xe.GTE0PRE:xe.GTE0],"")),I_=e=>(t,r,i,n,s,a,o,l,u,c,d,f)=>(Ae(i)?r="":Ae(n)?r=`>=${i}.0.0${e?"-0":""}`:Ae(s)?r=`>=${i}.${n}.0${e?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Ae(u)?l="":Ae(c)?l=`<${+u+1}.0.0-0`:Ae(d)?l=`<${u}.${+c+1}.0-0`:f?l=`<=${u}.${c}.${d}-${f}`:e?l=`<${u}.${c}.${+d+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),O_=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(te(e[i].semver),e[i].semver!==Yl.ANY&&e[i].semver.prerelease.length>0){let n=e[i].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}});var vi=h((yD,pg)=>{"use strict";var wi=Symbol("SemVer ANY"),eu=class e{static get ANY(){return wi}constructor(t,r){if(r=lg(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),Zl("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===wi?this.value="":this.value=this.operator+this.semver.version,Zl("comp",this)}parse(t){let r=this.options.loose?ug[cg.COMPARATORLOOSE]:ug[cg.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new dg(i[2],this.options.loose):this.semver=wi}toString(){return this.value}test(t){if(Zl("Comparator.test",t,this.options.loose),this.semver===wi||t===wi)return!0;if(typeof t=="string")try{t=new dg(t,this.options)}catch{return!1}return Xl(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new fg(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new fg(this.value,r).test(t.semver):(r=lg(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||Xl(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||Xl(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};pg.exports=eu;var lg=is(),{safeRe:ug,t:cg}=Tr(),Xl=zl(),Zl=bi(),dg=be(),fg=$e()});var Si=h((bD,hg)=>{"use strict";var __=$e(),q_=(e,t,r)=>{try{t=new __(t,r)}catch{return!1}return t.test(e)};hg.exports=q_});var gg=h((xD,mg)=>{"use strict";var C_=$e(),P_=(e,t)=>new C_(e,t).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));mg.exports=P_});var bg=h((vD,yg)=>{"use strict";var N_=be(),D_=$e(),L_=(e,t,r)=>{let i=null,n=null,s=null;try{s=new D_(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===-1)&&(i=a,n=new N_(i,r))}),i};yg.exports=L_});var vg=h((wD,xg)=>{"use strict";var U_=be(),F_=$e(),M_=(e,t,r)=>{let i=null,n=null,s=null;try{s=new F_(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===1)&&(i=a,n=new U_(i,r))}),i};xg.exports=M_});var Eg=h((SD,Sg)=>{"use strict";var tu=be(),$_=$e(),wg=xi(),j_=(e,t)=>{e=new $_(e,t);let r=new tu("0.0.0");if(e.test(r)||(r=new tu("0.0.0-0"),e.test(r)))return r;r=null;for(let i=0;i<e.set.length;++i){let n=e.set[i],s=null;n.forEach(a=>{let o=new tu(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||wg(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||wg(r,s))&&(r=s)}return r&&e.test(r)?r:null};Sg.exports=j_});var kg=h((ED,Ag)=>{"use strict";var V_=$e(),B_=(e,t)=>{try{return new V_(e,t).range||"*"}catch{return null}};Ag.exports=B_});var hs=h((AD,Og)=>{"use strict";var G_=be(),Ig=vi(),{ANY:H_}=Ig,Q_=$e(),K_=Si(),Rg=xi(),Tg=us(),z_=ds(),J_=cs(),W_=(e,t,r,i)=>{e=new G_(e,i),t=new Q_(t,i);let n,s,a,o,l;switch(r){case">":n=Rg,s=z_,a=Tg,o=">",l=">=";break;case"<":n=Tg,s=J_,a=Rg,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(K_(e,t,i))return!1;for(let u=0;u<t.set.length;++u){let c=t.set[u],d=null,f=null;if(c.forEach(p=>{p.semver===H_&&(p=new Ig(">=0.0.0")),d=d||p,f=f||p,n(p.semver,d.semver,i)?d=p:a(p.semver,f.semver,i)&&(f=p)}),d.operator===o||d.operator===l||(!f.operator||f.operator===o)&&s(e,f.semver))return!1;if(f.operator===l&&a(e,f.semver))return!1}return!0};Og.exports=W_});var qg=h((kD,_g)=>{"use strict";var Y_=hs(),X_=(e,t,r)=>Y_(e,t,">",r);_g.exports=X_});var Pg=h((RD,Cg)=>{"use strict";var Z_=hs(),eq=(e,t,r)=>Z_(e,t,"<",r);Cg.exports=eq});var Lg=h((TD,Dg)=>{"use strict";var Ng=$e(),tq=(e,t,r)=>(e=new Ng(e,r),t=new Ng(t,r),e.intersects(t,r));Dg.exports=tq});var Fg=h((ID,Ug)=>{"use strict";var rq=Si(),iq=Me();Ug.exports=(e,t,r)=>{let i=[],n=null,s=null,a=e.sort((c,d)=>iq(c,d,r));for(let c of a)rq(c,t,r)?(s=c,n||(n=c)):(s&&i.push([n,s]),s=null,n=null);n&&i.push([n,null]);let o=[];for(let[c,d]of i)c===d?o.push(c):!d&&c===a[0]?o.push("*"):d?c===a[0]?o.push(`<=${d}`):o.push(`${c} - ${d}`):o.push(`>=${c}`);let l=o.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return l.length<u.length?l:t}});var Gg=h((OD,Bg)=>{"use strict";var Mg=$e(),iu=vi(),{ANY:ru}=iu,Ei=Si(),nu=Me(),nq=(e,t,r={})=>{if(e===t)return!0;e=new Mg(e,r),t=new Mg(t,r);let i=!1;e:for(let n of e.set){for(let s of t.set){let a=aq(n,s,r);if(i=i||a!==null,a)continue e}if(i)return!1}return!0},sq=[new iu(">=0.0.0-0")],$g=[new iu(">=0.0.0")],aq=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===ru){if(t.length===1&&t[0].semver===ru)return!0;r.includePrerelease?e=sq:e=$g}if(t.length===1&&t[0].semver===ru){if(r.includePrerelease)return!0;t=$g}let i=new Set,n,s;for(let p of e)p.operator===">"||p.operator===">="?n=jg(n,p,r):p.operator==="<"||p.operator==="<="?s=Vg(s,p,r):i.add(p.semver);if(i.size>1)return null;let a;if(n&&s){if(a=nu(n.semver,s.semver,r),a>0)return null;if(a===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let p of i){if(n&&!Ei(p,String(n),r)||s&&!Ei(p,String(s),r))return null;for(let m of t)if(!Ei(p,String(m),r))return!1;return!0}let o,l,u,c,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of t){if(c=c||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",n){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(o=jg(n,p,r),o===p&&o!==n)return!1}else if(n.operator===">="&&!Ei(n.semver,String(p),r))return!1}if(s){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(l=Vg(s,p,r),l===p&&l!==s)return!1}else if(s.operator==="<="&&!Ei(s.semver,String(p),r))return!1}if(!p.operator&&(s||n)&&a!==0)return!1}return!(n&&u&&!s&&a!==0||s&&c&&!n&&a!==0||f||d)},jg=(e,t,r)=>{if(!e)return t;let i=nu(e.semver,t.semver,r);return i>0?e:i<0||t.operator===">"&&e.operator===">="?t:e},Vg=(e,t,r)=>{if(!e)return t;let i=nu(e.semver,t.semver,r);return i<0?e:i>0||t.operator==="<"&&e.operator==="<="?t:e};Bg.exports=nq});var ms=h((_D,Kg)=>{"use strict";var su=Tr(),Hg=yi(),oq=be(),Qg=Bl(),lq=er(),uq=b0(),cq=v0(),dq=E0(),fq=R0(),pq=I0(),hq=_0(),mq=C0(),gq=N0(),yq=Me(),bq=F0(),xq=$0(),vq=ls(),wq=G0(),Sq=Q0(),Eq=xi(),Aq=us(),kq=Ql(),Rq=Kl(),Tq=cs(),Iq=ds(),Oq=zl(),_q=tg(),qq=vi(),Cq=$e(),Pq=Si(),Nq=gg(),Dq=bg(),Lq=vg(),Uq=Eg(),Fq=kg(),Mq=hs(),$q=qg(),jq=Pg(),Vq=Lg(),Bq=Fg(),Gq=Gg();Kg.exports={parse:lq,valid:uq,clean:cq,inc:dq,diff:fq,major:pq,minor:hq,patch:mq,prerelease:gq,compare:yq,rcompare:bq,compareLoose:xq,compareBuild:vq,sort:wq,rsort:Sq,gt:Eq,lt:Aq,eq:kq,neq:Rq,gte:Tq,lte:Iq,cmp:Oq,coerce:_q,Comparator:qq,Range:Cq,satisfies:Pq,toComparators:Nq,maxSatisfying:Dq,minSatisfying:Lq,minVersion:Uq,validRange:Fq,outside:Mq,gtr:$q,ltr:jq,intersects:Vq,simplifyRange:Bq,subset:Gq,SemVer:oq,re:su.re,src:su.src,tokens:su.t,SEMVER_SPEC_VERSION:Hg.SEMVER_SPEC_VERSION,RELEASE_TYPES:Hg.RELEASE_TYPES,compareIdentifiers:Qg.compareIdentifiers,rcompareIdentifiers:Qg.rcompareIdentifiers}});var Jg=h((qD,zg)=>{var Hq=ms();zg.exports=Hq.satisfies(process.version,">=15.7.0")});var Yg=h((CD,Wg)=>{var Qq=ms();Wg.exports=Qq.satisfies(process.version,">=16.9.0")});var au=h((PD,Xg)=>{var Kq=Jg(),zq=Yg(),Jq={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},Wq={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Xg.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let i=Jq[r];if(!i)throw new Error(`Unknown key type "${r}".`);if(!i.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${i.join(", ")}.`);if(Kq)switch(r){case"ec":let n=t.asymmetricKeyDetails.namedCurve,s=Wq[e];if(n!==s)throw new Error(`"alg" parameter "${e}" requires curve "${s}".`);break;case"rsa-pss":if(zq){let a=parseInt(e.slice(-3),10),{hashAlgorithm:o,mgf1HashAlgorithm:l,saltLength:u}=t.asymmetricKeyDetails;if(o!==`sha${a}`||l!==o)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var ou=h((ND,Zg)=>{var Yq=ms();Zg.exports=Yq.satisfies(process.version,"^6.12.0 || >=8.0.0")});var ry=h((DD,ty)=>{var X=gi(),Xq=Fl(),ey=Ml(),Zq=Ul(),eC=$l(),tC=au(),rC=ou(),iC=Zn(),{KeyObject:nC,createSecretKey:sC,createPublicKey:aC}=require("crypto"),lu=["RS256","RS384","RS512"],oC=["ES256","ES384","ES512"],uu=["RS256","RS384","RS512"],lC=["HS256","HS384","HS512"];rC&&(lu.splice(lu.length,0,"PS256","PS384","PS512"),uu.splice(uu.length,0,"PS256","PS384","PS512"));ty.exports=function(e,t,r,i){typeof r=="function"&&!i&&(i=r,r={}),r||(r={}),r=Object.assign({},r);let n;if(i?n=i:n=function(c,d){if(c)throw c;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return n(new X("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return n(new X("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return n(new X("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return n(new X("jwt must be provided"));if(typeof e!="string")return n(new X("jwt must be a string"));let a=e.split(".");if(a.length!==3)return n(new X("jwt malformed"));let o;try{o=Zq(e,{complete:!0})}catch(c){return n(c)}if(!o)return n(new X("invalid token"));let l=o.header,u;if(typeof t=="function"){if(!i)return n(new X("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(c,d){return d(null,t)};return u(l,function(c,d){if(c)return n(new X("error in secret or public key callback: "+c.message));let f=a[2].trim()!=="";if(!f&&d)return n(new X("jwt signature is required"));if(f&&!d)return n(new X("secret or public key must be provided"));if(!f&&!r.algorithms)return n(new X('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof nC))try{d=aC(d)}catch{try{d=sC(typeof d=="string"?Buffer.from(d):d)}catch{return n(new X("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=lC:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=uu:d.asymmetricKeyType==="ec"?r.algorithms=oC:r.algorithms=lu),r.algorithms.indexOf(o.header.alg)===-1)return n(new X("invalid algorithm"));if(l.alg.startsWith("HS")&&d.type!=="secret")return n(new X(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&d.type!=="public")return n(new X(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{tC(l.alg,d)}catch(g){return n(g)}let p;try{p=iC.verify(e,o.header.alg,d)}catch(g){return n(g)}if(!p)return n(new X("invalid signature"));let m=o.payload;if(typeof m.nbf<"u"&&!r.ignoreNotBefore){if(typeof m.nbf!="number")return n(new X("invalid nbf value"));if(m.nbf>s+(r.clockTolerance||0))return n(new Xq("jwt not active",new Date(m.nbf*1e3)))}if(typeof m.exp<"u"&&!r.ignoreExpiration){if(typeof m.exp!="number")return n(new X("invalid exp value"));if(s>=m.exp+(r.clockTolerance||0))return n(new ey("jwt expired",new Date(m.exp*1e3)))}if(r.audience){let g=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(m.aud)?m.aud:[m.aud]).some(function(C){return g.some(function(S){return S instanceof RegExp?S.test(C):S===C})}))return n(new X("jwt audience invalid. expected: "+g.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&m.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(m.iss)===-1))return n(new X("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&m.sub!==r.subject)return n(new X("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&m.jti!==r.jwtid)return n(new X("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&m.nonce!==r.nonce)return n(new X("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof m.iat!="number")return n(new X("iat required when maxAge is specified"));let g=eC(r.maxAge,m.iat);if(typeof g>"u")return n(new X('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=g+(r.clockTolerance||0))return n(new ey("maxAge exceeded",new Date(g*1e3)))}if(r.complete===!0){let g=o.signature;return n(null,{header:l,payload:m,signature:g})}return n(null,m)})}});var ly=h((LD,oy)=>{var iy=1/0,sy=9007199254740991,uC=17976931348623157e292,ny=NaN,cC="[object Arguments]",dC="[object Function]",fC="[object GeneratorFunction]",pC="[object String]",hC="[object Symbol]",mC=/^\s+|\s+$/g,gC=/^[-+]0x[0-9a-f]+$/i,yC=/^0b[01]+$/i,bC=/^0o[0-7]+$/i,xC=/^(?:0|[1-9]\d*)$/,vC=parseInt;function wC(e,t){for(var r=-1,i=e?e.length:0,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function SC(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function EC(e,t,r){if(t!==t)return SC(e,AC,r);for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}function AC(e){return e!==e}function kC(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function RC(e,t){return wC(t,function(r){return e[r]})}function TC(e,t){return function(r){return e(t(r))}}var gs=Object.prototype,du=gs.hasOwnProperty,ys=gs.toString,IC=gs.propertyIsEnumerable,OC=TC(Object.keys,Object),_C=Math.max;function qC(e,t){var r=ay(e)||LC(e)?kC(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||du.call(e,s))&&!(n&&(s=="length"||PC(s,i)))&&r.push(s);return r}function CC(e){if(!NC(e))return OC(e);var t=[];for(var r in Object(e))du.call(e,r)&&r!="constructor"&&t.push(r);return t}function PC(e,t){return t=t??sy,!!t&&(typeof e=="number"||xC.test(e))&&e>-1&&e%1==0&&e<t}function NC(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||gs;return e===r}function DC(e,t,r,i){e=fu(e)?e:QC(e),r=r&&!i?BC(r):0;var n=e.length;return r<0&&(r=_C(n+r,0)),$C(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&EC(e,t,r)>-1}function LC(e){return UC(e)&&du.call(e,"callee")&&(!IC.call(e,"callee")||ys.call(e)==cC)}var ay=Array.isArray;function fu(e){return e!=null&&MC(e.length)&&!FC(e)}function UC(e){return pu(e)&&fu(e)}function FC(e){var t=cu(e)?ys.call(e):"";return t==dC||t==fC}function MC(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sy}function cu(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function pu(e){return!!e&&typeof e=="object"}function $C(e){return typeof e=="string"||!ay(e)&&pu(e)&&ys.call(e)==pC}function jC(e){return typeof e=="symbol"||pu(e)&&ys.call(e)==hC}function VC(e){if(!e)return e===0?e:0;if(e=GC(e),e===iy||e===-iy){var t=e<0?-1:1;return t*uC}return e===e?e:0}function BC(e){var t=VC(e),r=t%1;return t===t?r?t-r:t:0}function GC(e){if(typeof e=="number")return e;if(jC(e))return ny;if(cu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=cu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(mC,"");var r=yC.test(e);return r||bC.test(e)?vC(e.slice(2),r?2:8):gC.test(e)?ny:+e}function HC(e){return fu(e)?qC(e):CC(e)}function QC(e){return e?RC(e,HC(e)):[]}oy.exports=DC});var cy=h((UD,uy)=>{var KC="[object Boolean]",zC=Object.prototype,JC=zC.toString;function WC(e){return e===!0||e===!1||YC(e)&&JC.call(e)==KC}function YC(e){return!!e&&typeof e=="object"}uy.exports=WC});var my=h((FD,hy)=>{var dy=1/0,XC=17976931348623157e292,fy=NaN,ZC="[object Symbol]",e3=/^\s+|\s+$/g,t3=/^[-+]0x[0-9a-f]+$/i,r3=/^0b[01]+$/i,i3=/^0o[0-7]+$/i,n3=parseInt,s3=Object.prototype,a3=s3.toString;function o3(e){return typeof e=="number"&&e==d3(e)}function py(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function l3(e){return!!e&&typeof e=="object"}function u3(e){return typeof e=="symbol"||l3(e)&&a3.call(e)==ZC}function c3(e){if(!e)return e===0?e:0;if(e=f3(e),e===dy||e===-dy){var t=e<0?-1:1;return t*XC}return e===e?e:0}function d3(e){var t=c3(e),r=t%1;return t===t?r?t-r:t:0}function f3(e){if(typeof e=="number")return e;if(u3(e))return fy;if(py(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=py(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(e3,"");var r=r3.test(e);return r||i3.test(e)?n3(e.slice(2),r?2:8):t3.test(e)?fy:+e}hy.exports=o3});var yy=h((MD,gy)=>{var p3="[object Number]",h3=Object.prototype,m3=h3.toString;function g3(e){return!!e&&typeof e=="object"}function y3(e){return typeof e=="number"||g3(e)&&m3.call(e)==p3}gy.exports=y3});var wy=h(($D,vy)=>{var b3="[object Object]";function x3(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function v3(e,t){return function(r){return e(t(r))}}var w3=Function.prototype,by=Object.prototype,xy=w3.toString,S3=by.hasOwnProperty,E3=xy.call(Object),A3=by.toString,k3=v3(Object.getPrototypeOf,Object);function R3(e){return!!e&&typeof e=="object"}function T3(e){if(!R3(e)||A3.call(e)!=b3||x3(e))return!1;var t=k3(e);if(t===null)return!0;var r=S3.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&xy.call(r)==E3}vy.exports=T3});var Ey=h((jD,Sy)=>{var I3="[object String]",O3=Object.prototype,_3=O3.toString,q3=Array.isArray;function C3(e){return!!e&&typeof e=="object"}function P3(e){return typeof e=="string"||!q3(e)&&C3(e)&&_3.call(e)==I3}Sy.exports=P3});var Iy=h((VD,Ty)=>{var N3="Expected a function",Ay=1/0,D3=17976931348623157e292,ky=NaN,L3="[object Symbol]",U3=/^\s+|\s+$/g,F3=/^[-+]0x[0-9a-f]+$/i,M3=/^0b[01]+$/i,$3=/^0o[0-7]+$/i,j3=parseInt,V3=Object.prototype,B3=V3.toString;function G3(e,t){var r;if(typeof t!="function")throw new TypeError(N3);return e=J3(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}function H3(e){return G3(2,e)}function Ry(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Q3(e){return!!e&&typeof e=="object"}function K3(e){return typeof e=="symbol"||Q3(e)&&B3.call(e)==L3}function z3(e){if(!e)return e===0?e:0;if(e=W3(e),e===Ay||e===-Ay){var t=e<0?-1:1;return t*D3}return e===e?e:0}function J3(e){var t=z3(e),r=t%1;return t===t?r?t-r:t:0}function W3(e){if(typeof e=="number")return e;if(K3(e))return ky;if(Ry(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ry(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(U3,"");var r=M3.test(e);return r||$3.test(e)?j3(e.slice(2),r?2:8):F3.test(e)?ky:+e}Ty.exports=H3});var Uy=h((BD,Ly)=>{var Oy=$l(),Y3=ou(),X3=au(),_y=Zn(),Z3=ly(),bs=cy(),qy=my(),hu=yy(),Py=wy(),jt=Ey(),eP=Iy(),{KeyObject:tP,createSecretKey:rP,createPrivateKey:iP}=require("crypto"),Ny=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];Y3&&Ny.splice(3,0,"PS256","PS384","PS512");var nP={expiresIn:{isValid:function(e){return qy(e)||jt(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return qy(e)||jt(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return jt(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:Z3.bind(null,Ny),message:'"algorithm" must be a valid string enum value'},header:{isValid:Py,message:'"header" must be an object'},encoding:{isValid:jt,message:'"encoding" must be a string'},issuer:{isValid:jt,message:'"issuer" must be a string'},subject:{isValid:jt,message:'"subject" must be a string'},jwtid:{isValid:jt,message:'"jwtid" must be a string'},noTimestamp:{isValid:bs,message:'"noTimestamp" must be a boolean'},keyid:{isValid:jt,message:'"keyid" must be a string'},mutatePayload:{isValid:bs,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:bs,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:bs,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},sP={iat:{isValid:hu,message:'"iat" should be a number of seconds'},exp:{isValid:hu,message:'"exp" should be a number of seconds'},nbf:{isValid:hu,message:'"nbf" should be a number of seconds'}};function Dy(e,t,r,i){if(!Py(r))throw new Error('Expected "'+i+'" to be a plain object.');Object.keys(r).forEach(function(n){let s=e[n];if(!s){if(!t)throw new Error('"'+n+'" is not allowed in "'+i+'"');return}if(!s.isValid(r[n]))throw new Error(s.message)})}function aP(e){return Dy(nP,!1,e,"options")}function oP(e){return Dy(sP,!0,e,"payload")}var Cy={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},lP=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Ly.exports=function(e,t,r,i){typeof r=="function"?(i=r,r={}):r=r||{};let n=typeof e=="object"&&!Buffer.isBuffer(e),s=Object.assign({alg:r.algorithm||"HS256",typ:n?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(i)return i(u);throw u}if(!t&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(t!=null&&!(t instanceof tP))try{t=iP(t)}catch{try{t=rP(typeof t=="string"?Buffer.from(t):t)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&t.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(t.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&t.asymmetricKeyDetails!==void 0&&t.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof e>"u")return a(new Error("payload is required"));if(n){try{oP(e)}catch(u){return a(u)}r.mutatePayload||(e=Object.assign({},e))}else{let u=lP.filter(function(c){return typeof r[c]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{aP(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{X3(s.alg,t)}catch(u){return a(u)}let o=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:n&&(e.iat=o),typeof r.notBefore<"u"){try{e.nbf=Oy(r.notBefore,o)}catch(u){return a(u)}if(typeof e.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof e=="object"){try{e.exp=Oy(r.expiresIn,o)}catch(u){return a(u)}if(typeof e.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Cy).forEach(function(u){let c=Cy[u];if(typeof r[u]<"u"){if(typeof e[c]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+c+'" property.'));e[c]=r[u]}});let l=r.encoding||"utf8";if(typeof i=="function")i=i&&eP(i),_y.createSign({header:s,privateKey:t,payload:e,encoding:l}).once("error",i).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));i(null,u)});else{let u=_y.sign({header:s,payload:e,secret:t,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return u}}});var My=h((GD,Fy)=>{Fy.exports={decode:Ul(),verify:ry(),sign:Uy(),JsonWebTokenError:gi(),NotBeforeError:Fl(),TokenExpiredError:Ml()}});var kP={};sb(kP,{createProfile:()=>SP,deleteProfile:()=>AP,getProfileById:()=>wP,getProfileByVanity:()=>vP,updateProfile:()=>EP});module.exports=ab(kP);var qf=tr(_f(),1),Da;function dt(){return Da||(Da=new qf.PrismaClient),Da}var tk=process.env.FRONTEND_URL||"http://localhost:5173",rk=process.env.NODE_ENV||"development",Cf=rk==="production",ik=()=>{let e=[tk];return Cf&&e.push("https://dkmxy676d3vgc.cloudfront.net"),Cf||e.push("http://localhost:3000","http://localhost:5173"),e},Pf=e=>{let t=ik(),r=e?.headers?.origin||e?.headers?.Origin||"";return{"Access-Control-Allow-Origin":t.includes(r)?r:t[0],"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,X-CSRF-Token","Access-Control-Max-Age":"86400"}};function ft(e,t=200,r={}){let i=Pf(r.event);return delete r.event,{statusCode:t,headers:{"content-type":"application/json",...i,"x-content-type-options":"nosniff","referrer-policy":"strict-origin-when-cross-origin","permissions-policy":"camera=(), microphone=(), geolocation=()","strict-transport-security":"max-age=63072000; includeSubDomains; preload",...r},body:JSON.stringify(e)}}function $(e,t=400,r={}){return ft({error:e},t,r)}var fN=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;var pN="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");var dP=tr(pp(),1);var eo=tr(require("crypto"),1),gk=process.env.CSRF_ENABLED==="true";var hp=e=>eo.default.createHash("sha256").update(e).digest("hex");var yk=e=>{if(!e)return null;let t={};return e.split(";").forEach(r=>{let[i,...n]=r.split("=");i&&n.length>0&&(t[i.trim()]=n.join("=").trim())}),t["XSRF-TOKEN"]||null},bk=e=>e["x-csrf-token"]||e["X-CSRF-Token"]||null,xk=(e,t)=>{if(!e||!t)return!1;let r=hp(e),i=hp(t);return eo.default.timingSafeEqual(Buffer.from(r),Buffer.from(i))},to=e=>{if(!gk)return null;let t=(e.requestContext?.http?.method||e.httpMethod||"GET").toUpperCase();if(!["POST","PUT","PATCH","DELETE"].includes(t))return null;let i=e.headers?.cookie||e.headers?.Cookie||"",n=yk(i),s=bk(e.headers||{});return xk(n,s)?null:{statusCode:403,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify({error:"CSRF token validation failed",message:"Invalid or missing CSRF token"})}};var u2=tr(dm(),1);var w6={auth:{maxRequests:10,windowMs:9e5,message:"Too many authentication attempts. Please try again later."},emailVerification:{maxRequests:5,windowMs:36e5,message:"Too many verification email requests. Please try again later."},reports:{maxRequests:parseInt(process.env.REPORTS_MAX_PER_HOUR||"5",10),windowMs:36e5,message:"Too many reports submitted. Please try again later."},write:{maxRequests:100,windowMs:36e5,message:"Too many write requests. Please try again later."},read:{maxRequests:1e3,windowMs:36e5,message:"Too many read requests. Please try again later."}};var $y=tr(My(),1);var uP=process.env.JWT_SECRET||"dev-secret-key-change-in-production";var HD=process.env.COOKIE_DOMAIN||void 0,QD=process.env.NODE_ENV||"development";var jy=e=>{try{return $y.default.verify(e,uP)}catch{return null}},Vy=(e,t="access")=>{let r=t==="access"?"access_token":"refresh_token",i=cP(e.headers?.cookie||e.headers?.Cookie||"");if(i[r])return i[r];if(t==="access"){let n=e.headers?.authorization||e.headers?.Authorization;if(n&&n.startsWith("Bearer "))return n.substring(7)}return null},cP=e=>{let t={};return e&&e.split(";").forEach(r=>{let[i,...n]=r.split("=");i&&n.length>0&&(t[i.trim()]=n.join("=").trim())}),t};var mu=e=>{let t=Vy(e,"access");if(!t)return null;let r=jy(t);return!r||r.type!=="access"?null:r.userId||null};function Ir(e){try{return mu(e)||null}catch{return null}}async function gu(e){if(!e)return $("Unauthorized - No valid token provided",401);let r=await dt().user.findUnique({where:{id:e},select:{emailVerified:!0}});return r?r.emailVerified?null:$("Email verification required. Please verify your email address to access this resource.",403):$("User not found",404)}var Gy=tr(require("fs"),1);var fP=["damn","hell","crap","shit","fuck","bitch","bastard","ass","asshole","dick","cock","pussy","slut","whore","nigger","nigga","fag","faggot","retard","cunt"];function pP(){let e=process.env.PROFANITY_LIST_PATH;if(e)try{return Gy.default.readFileSync(e,"utf-8").split(`
`).map(r=>r.trim()).filter(Boolean)}catch(t){console.warn("[Moderation] Failed to load custom profanity list, using default:",t)}return fP}function By(e){return!e||typeof e!="string"?"":e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function hP(e){if(!e||typeof e!="string")return{hasProfanity:!1,matches:[]};let t=By(e),r=pP(),i=[];for(let n of r){let s=By(n);new RegExp(`\\b${s}\\b`,"gi").test(t)&&i.push(n)}return{hasProfanity:i.length>0,matches:i}}function mP(){let e=process.env.URL_ALLOWED_DOMAINS||"imdb.com,youtube.com,vimeo.com,linkedin.com,github.com",t=process.env.URL_BLOCKED_DOMAINS||"";return{allowed:e.split(",").map(r=>r.trim()).filter(Boolean),blocked:t.split(",").map(r=>r.trim()).filter(Boolean)}}function gP(){return(process.env.URL_ALLOWED_PROTOCOLS||"http:https:mailto:").split(":").filter(Boolean).map(t=>t+":")}function yP(e){if(!e||typeof e!="string")return{isSafe:!1,issues:["URL is required"]};let t=[],r;try{r=new URL(e)}catch{return{isSafe:!1,issues:["Invalid URL format"]}}let i=gP();i.includes(r.protocol)||t.push(`Protocol '${r.protocol}' not allowed. Allowed: ${i.join(", ")}`),["javascript:","data:","file:","vbscript:"].includes(r.protocol)&&t.push(`Dangerous protocol '${r.protocol}' detected`);let s=e.toLowerCase();if((s.includes("javascript:")||s.includes("data:text/html"))&&t.push("URL contains inline JavaScript pattern"),r.protocol==="http:"||r.protocol==="https:"){let{allowed:a,blocked:o}=mP(),l=r.hostname.toLowerCase();for(let c of o)(l===c||l.endsWith("."+c))&&t.push(`Domain '${l}' is blocked`);process.env.MODERATION_STRICT_MODE==="true"&&(a.some(d=>l===d||l.endsWith("."+d))||t.push(`Domain '${l}' not in allowed list (strict mode)`));let u=[".xyz",".top",".click",".loan",".work",".gq",".ml",".ga",".cf",".tk"];for(let c of u)l.endsWith(c)&&t.push(`Suspicious TLD detected: ${c}`)}return{isSafe:t.length===0,issues:t}}function xs(e,t="text"){if(!e||typeof e!="string")return{ok:!0,issues:[],normalizedText:""};let r=[],i=hP(e);i.hasProfanity&&r.push({field:t,reason:`Contains profane language: ${i.matches.join(", ")}`});let n=e.trim();return{ok:r.length===0,issues:r,normalizedText:n}}function Hy(e,t="url"){let r=yP(e),i=r.issues.map(n=>({field:t,reason:n}));return{ok:r.isSafe,issues:i}}function Qy(e){if(!e||typeof e!="object")return{ok:!0,issues:[],normalizedPayload:{}};let t=[],r={...e};if(e.displayName){let i=xs(e.displayName,"displayName");t.push(...i.issues),i.normalizedText&&(r.displayName=i.normalizedText)}if(e.headline){let i=xs(e.headline,"headline");t.push(...i.issues),i.normalizedText&&(r.headline=i.normalizedText)}if(e.bio){let i=xs(e.bio,"bio");t.push(...i.issues),i.normalizedText&&(r.bio=i.normalizedText)}if(e.socialLinks&&typeof e.socialLinks=="object"){for(let[i,n]of Object.entries(e.socialLinks))if(n&&typeof n=="string"){let s=Hy(n,`socialLinks.${i}`);t.push(...s.issues)}}return{ok:t.length===0,issues:t,normalizedPayload:r}}function Ky(e){if(!e||typeof e!="object")return{ok:!0,issues:[]};let t=[];if(e.label){let r=xs(e.label,"label");t.push(...r.issues)}if(e.url){let r=Hy(e.url,"url");t.push(...r.issues)}return{ok:t.length===0,issues:t}}function yu(e){return{code:"MODERATION_BLOCKED",message:"Content blocked by moderation rules",fields:e.map(t=>({name:t.field,reason:t.reason}))}}function bu(){return process.env.MODERATION_ENABLED==="true"}function xu(){return process.env.PROFANITY_ACTION||"block"}function zy(e){return{spam:1,abuse:3,unsafe_link:2,profanity:1,privacy:2,other:0}[e]||0}function vu(e){return!e||e.length===0?"other":e.some(i=>i.reason.toLowerCase().includes("url")||i.reason.toLowerCase().includes("protocol")||i.reason.toLowerCase().includes("domain"))?"unsafe_link":e.some(i=>i.reason.toLowerCase().includes("profane"))?"profanity":"other"}function vs(e){if(!e||typeof e!="string")return"[redacted]";if(e.length<=10)return"*".repeat(e.length);let t=e.substring(0,6),r=e.substring(e.length-4),i="*".repeat(Math.max(0,e.length-10));return`${t}${i}${r}`}var Jy={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},Wy=["website","imdb","showreel","other"],Yy=20,Xy=40,Zy=2048;function bP(e){let t={};if(!e||typeof e!="object")return{valid:!1,errors:{_form:"Invalid link object"}};if(!e.label||typeof e.label!="string"||e.label.trim()===""?t.label="Label is required":(e.label.length<1||e.label.length>Xy)&&(t.label=`Label must be 1-${Xy} characters`),!e.url||typeof e.url!="string"||e.url.trim()==="")t.url="URL is required";else if(e.url.length>Zy)t.url=`URL must be ${Zy} characters or less`;else try{let r=new URL(e.url);r.protocol!=="http:"&&r.protocol!=="https:"&&(t.url="URL must use http:// or https:// protocol")}catch{t.url="Invalid URL format"}return!e.type||typeof e.type!="string"?t.type="Type is required":Wy.includes(e.type)||(t.type=`Type must be one of: ${Wy.join(", ")}`),{valid:Object.keys(t).length===0,errors:t}}function xP(e){if(!Array.isArray(e))return{valid:!1,message:"Links must be an array"};if(e.length>Yy)return{valid:!1,message:`Maximum of ${Yy} links allowed (received ${e.length})`};for(let t=0;t<e.length;t++){let r=bP(e[t]);if(!r.valid)return{valid:!1,message:`Link ${t+1} validation failed: ${JSON.stringify(r.errors)}`}}return{valid:!0}}var vP=async e=>{try{let{vanityUrl:t}=e.pathParameters||{};if(!t)return $("vanityUrl is required",400);let r=Ir(e),n=await dt().profile.findUnique({where:{vanityUrl:t},include:{user:{select:{id:!0,username:!0,displayName:!0,avatar:!0,createdAt:!0}},links:{orderBy:{position:"asc"},select:{id:!0,label:!0,url:!0,type:!0}},media:{where:{OR:[{privacy:"public"},...r?[{privacy:"on-request"}]:[]]},select:{id:!0,type:!0,title:!0,description:!0,posterS3Key:!0,privacy:!0,duration:!0,width:!0,height:!0,processedStatus:!0,createdAt:!0},orderBy:{createdAt:"desc"}},credits:{orderBy:[{year:"desc"},{orderIndex:"asc"}]},_count:{select:{media:!0,credits:!0}}}});if(!n)return $("Profile not found",404);let s=n.privacy||{},a=r===n.userId,o={id:n.id,vanityUrl:n.vanityUrl,headline:n.headline,bio:n.bio,roles:n.roles,location:n.location,tags:n.tags,socialLinks:n.socialLinks,user:n.user,media:n.media,credits:n.credits,counts:n._count,createdAt:n.createdAt,updatedAt:n.updatedAt};return!a&&s.visibility==="private"?$("This profile is private",403):ft(o)}catch(t){return console.error("Get profile error:",t),$("Server error: "+t.message,500)}},wP=async e=>{try{let{id:t}=e.pathParameters||{};if(!t)return $("id is required",400);let r=Ir(e);if(!r)return $("Unauthorized",401);let n=await dt().profile.findUnique({where:{id:t},include:{user:{select:{id:!0,username:!0,displayName:!0,email:!0,avatar:!0,createdAt:!0}},links:{orderBy:{position:"asc"},select:{id:!0,label:!0,url:!0,type:!0,position:!0}},media:{orderBy:{createdAt:"desc"}},credits:{orderBy:[{year:"desc"},{orderIndex:"asc"}]},_count:{select:{media:!0,credits:!0}}}});return n?n.userId!==r?$("Forbidden - not profile owner",403):ft(n):$("Profile not found",404)}catch(t){return console.error("Get profile by ID error:",t),$("Server error: "+t.message,500)}},SP=async e=>{try{let t=to(e);if(t)return t;let r=Ir(e);if(!r)return $("Unauthorized",401);let i=await gu(r);if(i)return i;let n=JSON.parse(e.body||"{}"),{vanityUrl:s,headline:a,bio:o,roles:l,location:u,tags:c,socialLinks:d}=n;if(!s)return $("vanityUrl is required",400);if(!/^[a-zA-Z0-9_-]+$/.test(s))return $("vanityUrl must contain only letters, numbers, hyphens, and underscores",400);let f=dt();if(await f.profile.findUnique({where:{userId:r}}))return $("User already has a profile",400);if(await f.profile.findUnique({where:{vanityUrl:s}}))return $("Vanity URL is already taken",400);let g=await f.profile.create({data:{userId:r,vanityUrl:s,headline:a||"",bio:o||"",roles:l||[],location:u||{},tags:c||[],socialLinks:d||{},privacy:{visibility:"public",showEmail:!1,showPhone:!1}},include:{user:{select:{id:!0,username:!0,displayName:!0,avatar:!0}}}});return ft(g,201)}catch(t){return console.error("Create profile error:",t),$("Server error: "+t.message,500)}},EP=async e=>{try{let t=to(e);if(t)return t;let{id:r}=e.pathParameters||{};if(!r)return $("id is required",400);let i=Ir(e);if(!i)return $("Unauthorized",401);let n=await gu(i);if(n)return n;let s=JSON.parse(e.body||"{}"),{vanityUrl:a,headline:o,title:l,bio:u,roles:c,location:d,tags:f,socialLinks:p,privacy:m,links:g}=s;if(bu()){let S=Qy({headline:o,bio:u,socialLinks:p});if(!S.ok)if(xu()==="block"){console.log("[Moderation] Profile update blocked:",{userId:vs(i),issues:S.issues});try{let K=vu(S.issues),A=zy(K);await E.moderationReport.create({data:{reporterId:i,targetType:"profile",targetId:r,category:K,description:`Automatic report: ${S.issues.map(b=>b.reason).join(", ")}`,status:"open",severity:A}})}catch(K){console.error("[Moderation] Failed to create auto-report:",K)}return ft(yu(S.issues),422,Jy)}else{console.log("[Moderation] Profile update warning:",{userId:vs(i),issues:S.issues});try{let K=vu(S.issues);await E.moderationReport.create({data:{reporterId:i,targetType:"profile",targetId:r,category:K,description:`Warning: ${S.issues.map(A=>A.reason).join(", ")}`,status:"open",severity:1}})}catch(K){console.error("[Moderation] Failed to create warning report:",K)}}}let E=dt(),I=await E.profile.findUnique({where:{id:r},include:{links:!0}});if(!I)return $("Profile not found",404);if(I.userId!==i)return $("Forbidden - not profile owner",403);if(a&&a!==I.vanityUrl){if(!/^[a-zA-Z0-9_-]+$/.test(a))return $("vanityUrl must contain only letters, numbers, hyphens, and underscores",400);if(await E.profile.findUnique({where:{vanityUrl:a}}))return $("Vanity URL is already taken",409)}if(g!==void 0){let S=xP(g);if(!S.valid)return $(S.message,400);if(bu())for(let O=0;O<g.length;O++){let K=Ky(g[O]);if(!K.ok&&xu()==="block")return console.log("[Moderation] Link blocked:",{userId:vs(i),linkIndex:O,issues:K.issues}),ft({...yu(K.issues),message:`Link ${O+1} blocked by moderation rules`},422,Jy)}}let C=await E.$transaction(async S=>{let O={};a!==void 0&&(O.vanityUrl=a),o!==void 0&&(O.headline=o),l!==void 0&&(O.title=l),u!==void 0&&(O.bio=u),c!==void 0&&(O.roles=c),d!==void 0&&(O.location=d),f!==void 0&&(O.tags=f),p!==void 0&&(O.socialLinks=p),m!==void 0&&(O.privacy=m);let K=await S.profile.update({where:{id:r},data:O});return g!==void 0&&(await S.profileLink.deleteMany({where:{profileId:r}}),g.length>0&&await S.profileLink.createMany({data:g.map((A,b)=>({profileId:r,userId:i,label:A.label.trim(),url:A.url.trim(),type:A.type,position:b}))})),S.profile.findUnique({where:{id:r},include:{user:{select:{id:!0,username:!0,displayName:!0,avatar:!0}},links:{orderBy:{position:"asc"},select:{id:!0,label:!0,url:!0,type:!0,position:!0}},_count:{select:{media:!0,credits:!0}}}})});return ft(C)}catch(t){return console.error("Update profile error:",t),$("Server error: "+t.message,500)}},AP=async e=>{try{let{id:t}=e.pathParameters||{};if(!t)return $("id is required",400);let r=Ir(e);if(!r)return $("Unauthorized",401);let i=dt(),n=await i.profile.findUnique({where:{id:t}});return n?n.userId!==r?$("Forbidden - not profile owner",403):(await i.profile.delete({where:{id:t}}),ft({message:"Profile deleted successfully"})):$("Profile not found",404)}catch(t){return console.error("Delete profile error:",t),$("Server error: "+t.message,500)}};0&&(module.exports={createProfile,deleteProfile,getProfileById,getProfileByVanity,updateProfile});
/*! Bundled license information:

@prisma/client/runtime/library.js:
  (*! Bundled license information:
  
  decimal.js/decimal.mjs:
    (*!
     *  decimal.js v10.5.0
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     *)
  *)

@otplib/plugin-crypto/index.js:
  (**
   * @otplib/plugin-crypto
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/plugin-thirty-two/index.js:
  (**
   * @otplib/plugin-thirty-two
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/core/index.js:
  (**
   * @otplib/core
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/preset-default/index.js:
  (**
   * @otplib/preset-default
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

otplib/index.js:
  (**
   * otplib
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
