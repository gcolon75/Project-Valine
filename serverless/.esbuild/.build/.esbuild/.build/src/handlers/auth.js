var Ib=Object.create;var Di=Object.defineProperty;var Ob=Object.getOwnPropertyDescriptor;var _b=Object.getOwnPropertyNames;var qb=Object.getPrototypeOf,Cb=Object.prototype.hasOwnProperty;var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Pb=(e,t)=>{for(var r in t)Di(e,r,{get:t[r],enumerable:!0})},Fu=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of _b(t))!Cb.call(e,n)&&n!==r&&Di(e,n,{get:()=>t[n],enumerable:!(i=Ob(t,n))||i.enumerable});return e};var Gt=(e,t,r)=>(r=e!=null?Ib(qb(e)):{},Fu(t||!e||!e.__esModule?Di(r,"default",{value:e,enumerable:!0}):r,e)),Nb=e=>Fu(Di({},"__esModule",{value:!0}),e);var Ka=m((BP,jf)=>{"use strict";var Db=Object.create,sn=Object.defineProperty,Ub=Object.getOwnPropertyDescriptor,Lb=Object.getOwnPropertyNames,Fb=Object.getPrototypeOf,Mb=Object.prototype.hasOwnProperty,_c=(e,t)=>()=>(e&&(t=e(e=0)),t),Pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wt=(e,t)=>{for(var r in t)sn(e,r,{get:t[r],enumerable:!0})},qc=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Lb(t))!Mb.call(e,n)&&n!==r&&sn(e,n,{get:()=>t[n],enumerable:!(i=Ub(t,n))||i.enumerable});return e},Q=(e,t,r)=>(r=e!=null?Db(Fb(e)):{},qc(t||!e||!e.__esModule?sn(r,"default",{value:e,enumerable:!0}):r,e)),jb=e=>qc(sn({},"__esModule",{value:!0}),e),Cc=Pe((e,t)=>{"use strict";t.exports=(r,i=process.argv)=>{let n=r.startsWith("-")?"":r.length===1?"-":"--",s=i.indexOf(n+r),a=i.indexOf("--");return s!==-1&&(a===-1||s<a)}}),$b=Pe((e,t)=>{"use strict";var r=require("node:os"),i=require("node:tty"),n=Cc(),{env:s}=process,a;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in s&&(s.FORCE_COLOR==="true"?a=1:s.FORCE_COLOR==="false"?a=0:a=s.FORCE_COLOR.length===0?1:Math.min(parseInt(s.FORCE_COLOR,10),3));function o(c){return c===0?!1:{level:c,hasBasic:!0,has256:c>=2,has16m:c>=3}}function l(c,d){if(a===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(c&&!d&&a===void 0)return 0;let f=a||0;if(s.TERM==="dumb")return f;if(process.platform==="win32"){let p=r.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in s)||s.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){let p=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:f}function u(c){let d=l(c,c&&c.isTTY);return o(d)}t.exports={supportsColor:u,stdout:o(l(!0,i.isatty(1))),stderr:o(l(!0,i.isatty(2)))}}),Vb=Pe((e,t)=>{"use strict";var r=$b(),i=Cc();function n(a){if(/^\d{3,4}$/.test(a)){let l=/(\d{1,2})(\d{2})/.exec(a)||[];return{major:0,minor:parseInt(l[1],10),patch:parseInt(l[2],10)}}let o=(a||"").split(".").map(l=>parseInt(l,10));return{major:o[0],minor:o[1],patch:o[2]}}function s(a){let{CI:o,FORCE_HYPERLINK:l,NETLIFY:u,TEAMCITY_VERSION:c,TERM_PROGRAM:d,TERM_PROGRAM_VERSION:f,VTE_VERSION:p,TERM:g}=process.env;if(l)return!(l.length>0&&parseInt(l,10)===0);if(i("no-hyperlink")||i("no-hyperlinks")||i("hyperlink=false")||i("hyperlink=never"))return!1;if(i("hyperlink=true")||i("hyperlink=always")||u)return!0;if(!r.supportsColor(a)||a&&!a.isTTY)return!1;if("WT_SESSION"in process.env)return!0;if(process.platform==="win32"||o||c)return!1;if(d){let h=n(f||"");switch(d){case"iTerm.app":return h.major===3?h.minor>=1:h.major>3;case"WezTerm":return h.major>=20200620;case"vscode":return h.major>1||h.major===1&&h.minor>=72;case"ghostty":return!0}}if(p){if(p==="0.50.0")return!1;let h=n(p);return h.major>0||h.minor>=50}switch(g){case"alacritty":return!0}return!1}t.exports={supportsHyperlink:s,stdout:s(process.stdout),stderr:s(process.stderr)}}),Bb=Pe((e,t)=>{t.exports={name:"@prisma/internals",version:"6.19.0",description:"This package is intended for Prisma's internal use",main:"dist/index.js",types:"dist/index.d.ts",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/internals"},homepage:"https://www.prisma.io",author:"Tim Suchanek <suchanek@prisma.io>",bugs:"https://github.com/prisma/prisma/issues",license:"Apache-2.0",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",test:"dotenv -e ../../.db.env -- jest --silent",prepublishOnly:"pnpm run build"},files:["README.md","dist","!**/libquery_engine*","!dist/get-generators/engines/*","scripts"],devDependencies:{"@babel/helper-validator-identifier":"7.25.9","@opentelemetry/api":"1.9.0","@swc/core":"1.11.5","@swc/jest":"0.2.37","@types/babel__helper-validator-identifier":"7.15.2","@types/jest":"29.5.14","@types/node":"18.19.76","@types/resolve":"1.20.6",archiver:"6.0.2","checkpoint-client":"1.1.33","cli-truncate":"4.0.0",dotenv:"16.5.0",empathic:"2.0.0","escape-string-regexp":"5.0.0",execa:"8.0.1","fast-glob":"3.3.3","find-up":"7.0.0","fp-ts":"2.16.9","fs-extra":"11.3.0","global-directory":"4.0.0",globby:"11.1.0","identifier-regex":"1.0.0","indent-string":"4.0.0","is-windows":"1.0.2","is-wsl":"3.1.0",jest:"29.7.0","jest-junit":"16.0.0",kleur:"4.1.5","mock-stdin":"1.0.0","new-github-issue-url":"0.2.1","node-fetch":"3.3.2","npm-packlist":"5.1.3",open:"7.4.2","p-map":"4.0.0",resolve:"1.22.10","string-width":"7.2.0","strip-indent":"4.0.0","temp-dir":"2.0.0",tempy:"1.0.1","terminal-link":"4.0.0",tmp:"0.2.3","ts-pattern":"5.6.2","ts-toolbelt":"9.6.0",typescript:"5.4.5",yarn:"1.22.22"},dependencies:{"@prisma/config":"workspace:*","@prisma/debug":"workspace:*","@prisma/dmmf":"workspace:*","@prisma/driver-adapter-utils":"workspace:*","@prisma/engines":"workspace:*","@prisma/fetch-engine":"workspace:*","@prisma/generator":"workspace:*","@prisma/generator-helper":"workspace:*","@prisma/get-platform":"workspace:*","@prisma/prisma-schema-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-engine-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-files-loader":"workspace:*",arg:"5.0.2",prompts:"2.4.2"},peerDependencies:{typescript:">=5.1.0"},peerDependenciesMeta:{typescript:{optional:!0}},sideEffects:!1}}),Pc=Pe((e,t)=>{t.exports={name:"@prisma/engines-version",version:"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"2ba551f319ab1df4bc874a89965d8b3641056773"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),wa=Pe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enginesVersion=void 0,e.enginesVersion=Pc().prisma.enginesVersion}),Gb=Pe((e,t)=>{"use strict";t.exports=r=>{let i=r.match(/^[ \t]*(?=\S)/gm);return i?i.reduce((n,s)=>Math.min(n,s.length),1/0):0}}),Nc=Pe((e,t)=>{"use strict";t.exports=(r,i=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof i!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof i}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(i===0)return r;let s=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(s,n.indent.repeat(i))}}),Hb=Pe((e,t)=>{t.exports={name:"dotenv",version:"16.5.0",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),Qb=Pe((e,t)=>{"use strict";var r=require("node:fs"),i=require("node:path"),n=require("node:os"),s=require("node:crypto"),a=Hb(),o=a.version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function u(b){let A={},O=b.toString();O=O.replace(/\r\n?/mg,`
`);let B;for(;(B=l.exec(O))!=null;){let M=B[1],D=B[2]||"";D=D.trim();let j=D[0];D=D.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),j==='"'&&(D=D.replace(/\\n/g,`
`),D=D.replace(/\\r/g,"\r")),A[M]=D}return A}function c(b){let A=h(b),O=T.configDotenv({path:A});if(!O.parsed){let j=new Error(`MISSING_DATA: Cannot parse ${A} for an unknown reason`);throw j.code="MISSING_DATA",j}let B=p(b).split(","),M=B.length,D;for(let j=0;j<M;j++)try{let te=B[j].trim(),H=g(O,te);D=T.decrypt(H.ciphertext,H.key);break}catch(te){if(j+1>=M)throw te}return T.parse(D)}function d(b){console.log(`[dotenv@${o}][WARN] ${b}`)}function f(b){console.log(`[dotenv@${o}][DEBUG] ${b}`)}function p(b){return b&&b.DOTENV_KEY&&b.DOTENV_KEY.length>0?b.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function g(b,A){let O;try{O=new URL(A)}catch(te){if(te.code==="ERR_INVALID_URL"){let H=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw H.code="INVALID_DOTENV_KEY",H}throw te}let B=O.password;if(!B){let te=new Error("INVALID_DOTENV_KEY: Missing key part");throw te.code="INVALID_DOTENV_KEY",te}let M=O.searchParams.get("environment");if(!M){let te=new Error("INVALID_DOTENV_KEY: Missing environment part");throw te.code="INVALID_DOTENV_KEY",te}let D=`DOTENV_VAULT_${M.toUpperCase()}`,j=b.parsed[D];if(!j){let te=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${D} in your .env.vault file.`);throw te.code="NOT_FOUND_DOTENV_ENVIRONMENT",te}return{ciphertext:j,key:B}}function h(b){let A=null;if(b&&b.path&&b.path.length>0)if(Array.isArray(b.path))for(let O of b.path)r.existsSync(O)&&(A=O.endsWith(".vault")?O:`${O}.vault`);else A=b.path.endsWith(".vault")?b.path:`${b.path}.vault`;else A=i.resolve(process.cwd(),".env.vault");return r.existsSync(A)?A:null}function E(b){return b[0]==="~"?i.join(n.homedir(),b.slice(1)):b}function _(b){b&&b.debug&&f("Loading env from encrypted .env.vault");let A=T._parseVault(b),O=process.env;return b&&b.processEnv!=null&&(O=b.processEnv),T.populate(O,A,b),{parsed:A}}function C(b){let A=i.resolve(process.cwd(),".env"),O="utf8",B=!!(b&&b.debug);b&&b.encoding?O=b.encoding:B&&f("No encoding is specified. UTF-8 is used by default");let M=[A];if(b&&b.path)if(!Array.isArray(b.path))M=[E(b.path)];else{M=[];for(let H of b.path)M.push(E(H))}let D,j={};for(let H of M)try{let F=T.parse(r.readFileSync(H,{encoding:O}));T.populate(j,F,b)}catch(F){B&&f(`Failed to load ${H} ${F.message}`),D=F}let te=process.env;return b&&b.processEnv!=null&&(te=b.processEnv),T.populate(te,j,b),D?{parsed:j,error:D}:{parsed:j}}function N(b){if(p(b).length===0)return T.configDotenv(b);let A=h(b);return A?T._configVault(b):(d(`You set DOTENV_KEY but you are missing a .env.vault file at ${A}. Did you forget to build it?`),T.configDotenv(b))}function G(b,A){let O=Buffer.from(A.slice(-64),"hex"),B=Buffer.from(b,"base64"),M=B.subarray(0,12),D=B.subarray(-16);B=B.subarray(12,-16);try{let j=s.createDecipheriv("aes-256-gcm",O,M);return j.setAuthTag(D),`${j.update(B)}${j.final()}`}catch(j){let te=j instanceof RangeError,H=j.message==="Invalid key length",F=j.message==="Unsupported state or unable to authenticate data";if(te||H){let Ur=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Ur.code="INVALID_DOTENV_KEY",Ur}else if(F){let Ur=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Ur.code="DECRYPTION_FAILED",Ur}else throw j}}function Ae(b,A,O={}){let B=!!(O&&O.debug),M=!!(O&&O.override);if(typeof A!="object"){let D=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw D.code="OBJECT_REQUIRED",D}for(let D of Object.keys(A))Object.prototype.hasOwnProperty.call(b,D)?(M===!0&&(b[D]=A[D]),B&&f(M===!0?`"${D}" is already defined and WAS overwritten`:`"${D}" is already defined and was NOT overwritten`)):b[D]=A[D]}var T={configDotenv:C,_configVault:_,_parseVault:c,config:N,decrypt:G,parse:u,populate:Ae};t.exports.configDotenv=T.configDotenv,t.exports._configVault=T._configVault,t.exports._parseVault=T._parseVault,t.exports.config=T.config,t.exports.decrypt=T.decrypt,t.exports.parse=T.parse,t.exports.populate=T.populate,t.exports=T}),Kb=Pe((e,t)=>{"use strict";t.exports=(r={})=>{let i;if(r.repoUrl)i=r.repoUrl;else if(r.user&&r.repo)i=`https://github.com/${r.user}/${r.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let n=new URL(`${i}/issues/new`),s=["body","title","labels","template","milestone","assignee","projects"];for(let a of s){let o=r[a];if(o!==void 0){if(a==="labels"||a==="projects"){if(!Array.isArray(o))throw new TypeError(`The \`${a}\` option should be an array`);o=o.join(",")}n.searchParams.set(a,o)}}return n.toString()},t.exports.default=t.exports}),Dc=Pe((e,t)=>{"use strict";t.exports=(function(){function r(i,n,s,a,o){return i<n||s<n?i>s?s+1:i+1:a===o?n:n+1}return function(i,n){if(i===n)return 0;if(i.length>n.length){var s=i;i=n,n=s}for(var a=i.length,o=n.length;a>0&&i.charCodeAt(a-1)===n.charCodeAt(o-1);)a--,o--;for(var l=0;l<a&&i.charCodeAt(l)===n.charCodeAt(l);)l++;if(a-=l,o-=l,a===0||o<3)return o;var u=0,c,d,f,p,g,h,E,_,C,N,G,Ae,T=[];for(c=0;c<a;c++)T.push(c+1),T.push(i.charCodeAt(l+c));for(var b=T.length-1;u<o-3;)for(C=n.charCodeAt(l+(d=u)),N=n.charCodeAt(l+(f=u+1)),G=n.charCodeAt(l+(p=u+2)),Ae=n.charCodeAt(l+(g=u+3)),h=u+=4,c=0;c<b;c+=2)E=T[c],_=T[c+1],d=r(E,d,f,C,_),f=r(d,f,p,N,_),p=r(f,p,g,G,_),h=r(p,g,h,Ae,_),T[c]=h,g=p,p=f,f=d,d=E;for(;u<o;)for(C=n.charCodeAt(l+(d=u)),h=++u,c=0;c<b;c+=2)E=T[c],T[c]=h=r(E,d,h,C,T[c+1]),d=E;return h}})()}),zb=_c(()=>{"use strict"}),Jb=_c(()=>{"use strict"}),Uc={};Wt(Uc,{DMMF:()=>Ed,Debug:()=>ve,Decimal:()=>dn,Extensions:()=>Lc,MetricsClient:()=>Xd,PrismaClientInitializationError:()=>oe,PrismaClientKnownRequestError:()=>kt,PrismaClientRustPanicError:()=>At,PrismaClientUnknownRequestError:()=>Oe,PrismaClientValidationError:()=>ut,Public:()=>Fc,Sql:()=>Ot,createParam:()=>eS,defineDmmfProperty:()=>dS,deserializeJsonResponse:()=>nn,deserializeRawResult:()=>Lf,dmmfToRuntimeDataModel:()=>nv,empty:()=>xS,getPrismaClient:()=>lR,getRuntime:()=>mf,join:()=>bS,makeStrictEnum:()=>dR,makeTypedQueryFactory:()=>pS,objectEnumValues:()=>Fd,raw:()=>tf,serializeJsonQuery:()=>Jd,skip:()=>Kd,sqltag:()=>vS,warnEnvConflicts:()=>fR,warnOnce:()=>ud});jf.exports=jb(Uc);var Lc={};Wt(Lc,{defineExtension:()=>Wb,getExtensionContext:()=>Yb});function Wb(e){return typeof e=="function"?e:t=>t.$extends(e)}function Yb(e){return e}var Fc={};Wt(Fc,{validator:()=>Xb});function Xb(...e){return t=>t}var Gs={};Wt(Gs,{$:()=>Bc,bgBlack:()=>l1,bgBlue:()=>f1,bgCyan:()=>h1,bgGreen:()=>c1,bgMagenta:()=>p1,bgRed:()=>u1,bgWhite:()=>m1,bgYellow:()=>d1,black:()=>n1,blue:()=>$r,bold:()=>$e,cyan:()=>Kt,dim:()=>ei,gray:()=>Sa,green:()=>Kr,grey:()=>o1,hidden:()=>r1,inverse:()=>t1,italic:()=>e1,magenta:()=>s1,red:()=>zt,reset:()=>Zb,strikethrough:()=>i1,underline:()=>Ce,white:()=>a1,yellow:()=>ti});var Hs,Mc,jc,$c,Vc=!0;typeof process<"u"&&({FORCE_COLOR:Hs,NODE_DISABLE_COLORS:Mc,NO_COLOR:jc,TERM:$c}=process.env||{},Vc=process.stdout&&process.stdout.isTTY);var Bc={enabled:!Mc&&jc==null&&$c!=="dumb"&&(Hs!=null&&Hs!=="0"||Vc)};function z(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),i=`\x1B[${e}m`,n=`\x1B[${t}m`;return function(s){return!Bc.enabled||s==null?s:i+(~(""+s).indexOf(n)?s.replace(r,n+i):s)+n}}var Zb=z(0,0),$e=z(1,22),ei=z(2,22),e1=z(3,23),Ce=z(4,24),t1=z(7,27),r1=z(8,28),i1=z(9,29),n1=z(30,39),zt=z(31,39),Kr=z(32,39),ti=z(33,39),$r=z(34,39),s1=z(35,39),Kt=z(36,39),a1=z(37,39),Sa=z(90,39),o1=z(90,39),l1=z(40,49),u1=z(41,49),c1=z(42,49),d1=z(43,49),f1=z(44,49),p1=z(45,49),h1=z(46,49),m1=z(47,49),g1=100,Mu=["green","yellow","blue","magenta","cyan","red"],Vr=[],ju=Date.now(),y1=0,Qs=typeof process<"u"?process.env:{};globalThis.DEBUG??=Qs.DEBUG??"";globalThis.DEBUG_COLORS??=Qs.DEBUG_COLORS?Qs.DEBUG_COLORS==="true":!0;var Br={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(n=>n.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(n=>n===""||n[0]==="-"?!1:e.match(RegExp(n.split("*").join(".*")+"$"))),i=t.some(n=>n===""||n[0]!=="-"?!1:e.match(RegExp(n.slice(1).split("*").join(".*")+"$")));return r&&!i},log:(...e)=>{let[t,r,...i]=e;(console.warn??console.log)(`${t} ${r}`,...i)},formatters:{}};function b1(e){let t={color:Mu[y1++%Mu.length],enabled:Br.enabled(e),namespace:e,log:Br.log,extend:()=>{}},r=(...i)=>{let{enabled:n,namespace:s,color:a,log:o}=t;if(i.length!==0&&Vr.push([s,...i]),Vr.length>g1&&Vr.shift(),Br.enabled(s)||n){let l=i.map(c=>typeof c=="string"?c:x1(c)),u=`+${Date.now()-ju}ms`;ju=Date.now(),globalThis.DEBUG_COLORS?o(Gs[a]($e(s)),...l,Gs[a](u)):o(s,...l,u)}};return new Proxy(r,{get:(i,n)=>t[n],set:(i,n,s)=>t[n]=s})}var ve=new Proxy(b1,{get:(e,t)=>Br[t],set:(e,t,r)=>Br[t]=r});function x1(e,t=2){let r=new Set;return JSON.stringify(e,(i,n)=>{if(typeof n=="object"&&n!==null){if(r.has(n))return"[Circular *]";r.add(n)}else if(typeof n=="bigint")return n.toString();return n},t)}function v1(e=7500){let t=Vr.map(([r,...i])=>`${r} ${i.map(n=>typeof n=="string"?n:JSON.stringify(n)).join(" ")}`).join(`
`);return t.length<e?t:t.slice(-e)}function w1(){Vr.length=0}var Ea=ve,S1=Q(require("node:fs"));function E1(){let e=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(e&&S1.default.existsSync(e))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var A1=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],Ui="libquery_engine";function R1(e,t){let r=t==="url";return e.includes("windows")?r?"query_engine.dll.node":`query_engine-${e}.dll.node`:e.includes("darwin")?r?`${Ui}.dylib.node`:`${Ui}-${e}.dylib.node`:r?`${Ui}.so.node`:`${Ui}-${e}.so.node`}var k1=Q(require("node:child_process")),Gc=Q(require("node:fs/promises")),Ks=Q(require("node:os")),dt=Symbol.for("@ts-pattern/matcher"),T1=Symbol.for("@ts-pattern/isVariadic"),Wi="@ts-pattern/anonymous-select-key",zs=e=>!!(e&&typeof e=="object"),Vi=e=>e&&!!e[dt],Ye=(e,t,r)=>{if(Vi(e)){let i=e[dt](),{matched:n,selections:s}=i.match(t);return n&&s&&Object.keys(s).forEach(a=>r(a,s[a])),n}if(zs(e)){if(!zs(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let i=[],n=[],s=[];for(let a of e.keys()){let o=e[a];Vi(o)&&o[T1]?s.push(o):s.length?n.push(o):i.push(o)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<i.length+n.length)return!1;let a=t.slice(0,i.length),o=n.length===0?[]:t.slice(-n.length),l=t.slice(i.length,n.length===0?1/0:-n.length);return i.every((u,c)=>Ye(u,a[c],r))&&n.every((u,c)=>Ye(u,o[c],r))&&(s.length===0||Ye(s[0],l,r))}return e.length===t.length&&e.every((a,o)=>Ye(a,t[o],r))}return Reflect.ownKeys(e).every(i=>{let n=e[i];return(i in t||Vi(s=n)&&s[dt]().matcherType==="optional")&&Ye(n,t[i],r);var s})}return Object.is(t,e)},Rt=e=>{var t,r,i;return zs(e)?Vi(e)?(t=(r=(i=e[dt]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(e)?zr(e,Rt):zr(Object.values(e),Rt):[]},zr=(e,t)=>e.reduce((r,i)=>r.concat(t(i)),[]);function Ne(e){return Object.assign(e,{optional:()=>I1(e),and:t=>re(e,t),or:t=>O1(e,t),select:t=>t===void 0?$u(e):$u(t,e)})}function I1(e){return Ne({[dt]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return t===void 0?(Rt(e).forEach(n=>i(n,void 0)),{matched:!0,selections:r}):{matched:Ye(e,t,i),selections:r}},getSelectionKeys:()=>Rt(e),matcherType:"optional"})})}function re(...e){return Ne({[dt]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return{matched:e.every(n=>Ye(n,t,i)),selections:r}},getSelectionKeys:()=>zr(e,Rt),matcherType:"and"})})}function O1(...e){return Ne({[dt]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return zr(e,Rt).forEach(n=>i(n,void 0)),{matched:e.some(n=>Ye(n,t,i)),selections:r}},getSelectionKeys:()=>zr(e,Rt),matcherType:"or"})})}function $(e){return{[dt]:()=>({match:t=>({matched:!!e(t)})})}}function $u(...e){let t=typeof e[0]=="string"?e[0]:void 0,r=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return Ne({[dt]:()=>({match:i=>{let n={[t??Wi]:i};return{matched:r===void 0||Ye(r,i,(s,a)=>{n[s]=a}),selections:n}},getSelectionKeys:()=>[t??Wi].concat(r===void 0?[]:Rt(r))})})}function ze(e){return typeof e=="number"}function bt(e){return typeof e=="string"}function xt(e){return typeof e=="bigint"}var bP=Ne($(function(e){return!0})),vt=e=>Object.assign(Ne(e),{startsWith:t=>{return vt(re(e,(r=t,$(i=>bt(i)&&i.startsWith(r)))));var r},endsWith:t=>{return vt(re(e,(r=t,$(i=>bt(i)&&i.endsWith(r)))));var r},minLength:t=>vt(re(e,(r=>$(i=>bt(i)&&i.length>=r))(t))),length:t=>vt(re(e,(r=>$(i=>bt(i)&&i.length===r))(t))),maxLength:t=>vt(re(e,(r=>$(i=>bt(i)&&i.length<=r))(t))),includes:t=>{return vt(re(e,(r=t,$(i=>bt(i)&&i.includes(r)))));var r},regex:t=>{return vt(re(e,(r=t,$(i=>bt(i)&&!!i.match(r)))));var r}}),xP=vt($(bt)),Je=e=>Object.assign(Ne(e),{between:(t,r)=>Je(re(e,((i,n)=>$(s=>ze(s)&&i<=s&&n>=s))(t,r))),lt:t=>Je(re(e,(r=>$(i=>ze(i)&&i<r))(t))),gt:t=>Je(re(e,(r=>$(i=>ze(i)&&i>r))(t))),lte:t=>Je(re(e,(r=>$(i=>ze(i)&&i<=r))(t))),gte:t=>Je(re(e,(r=>$(i=>ze(i)&&i>=r))(t))),int:()=>Je(re(e,$(t=>ze(t)&&Number.isInteger(t)))),finite:()=>Je(re(e,$(t=>ze(t)&&Number.isFinite(t)))),positive:()=>Je(re(e,$(t=>ze(t)&&t>0))),negative:()=>Je(re(e,$(t=>ze(t)&&t<0)))}),vP=Je($(ze)),wt=e=>Object.assign(Ne(e),{between:(t,r)=>wt(re(e,((i,n)=>$(s=>xt(s)&&i<=s&&n>=s))(t,r))),lt:t=>wt(re(e,(r=>$(i=>xt(i)&&i<r))(t))),gt:t=>wt(re(e,(r=>$(i=>xt(i)&&i>r))(t))),lte:t=>wt(re(e,(r=>$(i=>xt(i)&&i<=r))(t))),gte:t=>wt(re(e,(r=>$(i=>xt(i)&&i>=r))(t))),positive:()=>wt(re(e,$(t=>xt(t)&&t>0))),negative:()=>wt(re(e,$(t=>xt(t)&&t<0)))}),wP=wt($(xt)),SP=Ne($(function(e){return typeof e=="boolean"})),EP=Ne($(function(e){return typeof e=="symbol"})),AP=Ne($(function(e){return e==null})),RP=Ne($(function(e){return e!=null})),_1=class extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch{t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}},Js={matched:!1,value:void 0};function an(e){return new q1(e,Js)}var q1=class Ws{constructor(t,r){this.input=void 0,this.state=void 0,this.input=t,this.state=r}with(...t){if(this.state.matched)return this;let r=t[t.length-1],i=[t[0]],n;t.length===3&&typeof t[1]=="function"?n=t[1]:t.length>2&&i.push(...t.slice(1,t.length-1));let s=!1,a={},o=(u,c)=>{s=!0,a[u]=c},l=!i.some(u=>Ye(u,this.input,o))||n&&!n(this.input)?Js:{matched:!0,value:r(s?Wi in a?a[Wi]:a:this.input,this.input)};return new Ws(this.input,l)}when(t,r){if(this.state.matched)return this;let i=!!t(this.input);return new Ws(this.input,i?{matched:!0,value:r(this.input,this.input)}:Js)}otherwise(t){return this.state.matched?this.state.value:t(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new _1(this.input)}run(){return this.exhaustive()}returnType(){return this}},C1=require("node:util"),P1={warn:ti("prisma:warn")},N1={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Ns(e,...t){N1.warn()&&console.warn(`${P1.warn} ${e}`,...t)}var D1=(0,C1.promisify)(k1.default.exec),xe=Ea("prisma:get-platform"),U1=["1.0.x","1.1.x","3.0.x"];async function L1(){let e=Ks.default.platform(),t=process.arch;if(e==="freebsd"){let a=await Yi("freebsd-version");if(a&&a.trim().length>0){let o=/^(\d+)\.?/.exec(a);if(o)return{platform:"freebsd",targetDistro:`freebsd${o[1]}`,arch:t}}}if(e!=="linux")return{platform:e,arch:t};let r=await M1(),i=await z1(),n=$1({arch:t,archFromUname:i,familyDistro:r.familyDistro}),{libssl:s}=await V1(n);return{platform:"linux",libssl:s,arch:t,archFromUname:i,...r}}function F1(e){let t=/^ID="?([^"\n]*)"?$/im,r=/^ID_LIKE="?([^"\n]*)"?$/im,i=t.exec(e),n=i&&i[1]&&i[1].toLowerCase()||"",s=r.exec(e),a=s&&s[1]&&s[1].toLowerCase()||"",o=an({id:n,idLike:a}).with({id:"alpine"},({id:l})=>({targetDistro:"musl",familyDistro:l,originalDistro:l})).with({id:"raspbian"},({id:l})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:l})).with({id:"nixos"},({id:l})=>({targetDistro:"nixos",originalDistro:l,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).when(({idLike:l})=>l.includes("debian")||l.includes("ubuntu"),({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).when(({idLike:l})=>n==="arch"||l.includes("arch"),({id:l})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:l})).when(({idLike:l})=>l.includes("centos")||l.includes("fedora")||l.includes("rhel")||l.includes("suse"),({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).otherwise(({id:l})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:l}));return xe(`Found distro info:
${JSON.stringify(o,null,2)}`),o}async function M1(){let e="/etc/os-release";try{let t=await Gc.default.readFile(e,{encoding:"utf-8"});return F1(t)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function j1(e){let t=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(e);if(t){let r=`${t[1]}.x`;return Hc(r)}}function Vu(e){let t=/libssl\.so\.(\d)(\.\d)?/.exec(e);if(t){let r=`${t[1]}${t[2]??".0"}.x`;return Hc(r)}}function Hc(e){let t=(()=>{if(Kc(e))return e;let r=e.split(".");return r[1]="0",r.join(".")})();if(U1.includes(t))return t}function $1(e){return an(e).with({familyDistro:"musl"},()=>(xe('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:t})=>(xe('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${t}-linux-gnu`,`/lib/${t}-linux-gnu`])).with({familyDistro:"rhel"},()=>(xe('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:t,arch:r,archFromUname:i})=>(xe(`Don't know any platform-specific paths for "${t}" on ${r} (${i})`),[]))}async function V1(e){let t='grep -v "libssl.so.0"',r=await Bu(e);if(r){xe(`Found libssl.so file using platform-specific paths: ${r}`);let s=Vu(r);if(xe(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"libssl-specific-path"}}xe('Falling back to "ldconfig" and other generic paths');let i=await Yi(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${t}`);if(i||(i=await Bu(["/lib64","/usr/lib64","/lib","/usr/lib"])),i){xe(`Found libssl.so file using "ldconfig" or other generic paths: ${i}`);let s=Vu(i);if(xe(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"ldconfig"}}let n=await Yi("openssl version -v");if(n){xe(`Found openssl binary with version: ${n}`);let s=j1(n);if(xe(`The parsed openssl version is: ${s}`),s)return{libssl:s,strategy:"openssl-binary"}}return xe("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function Bu(e){for(let t of e){let r=await B1(t);if(r)return r}}async function B1(e){try{return(await Gc.default.readdir(e)).find(t=>t.startsWith("libssl.so.")&&!t.startsWith("libssl.so.0"))}catch(t){if(t.code==="ENOENT")return;throw t}}async function Aa(){let{binaryTarget:e}=await Qc();return e}function G1(e){return e.binaryTarget!==void 0}async function H1(){let{memoized:e,...t}=await Qc();return t}var Li={};async function Qc(){if(G1(Li))return Promise.resolve({...Li,memoized:!0});let e=await L1(),t=Q1(e);return Li={...e,binaryTarget:t},{...Li,memoized:!1}}function Q1(e){let{platform:t,arch:r,archFromUname:i,libssl:n,targetDistro:s,familyDistro:a,originalDistro:o}=e;t==="linux"&&!["x64","arm64"].includes(r)&&Ns(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${r}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${i}".`);let l="1.1.x";if(t==="linux"&&n===void 0){let c=an({familyDistro:a}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");Ns(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${l}".
${c}`)}let u="debian";if(t==="linux"&&s===void 0&&xe(`Distro is "${o}". Falling back to Prisma engines built for "${u}".`),t==="darwin"&&r==="arm64")return"darwin-arm64";if(t==="darwin")return"darwin";if(t==="win32")return"windows";if(t==="freebsd")return s;if(t==="openbsd")return"openbsd";if(t==="netbsd")return"netbsd";if(t==="linux"&&s==="nixos")return"linux-nixos";if(t==="linux"&&r==="arm64")return`${s==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${n||l}`;if(t==="linux"&&r==="arm")return`linux-arm-openssl-${n||l}`;if(t==="linux"&&s==="musl"){let c="linux-musl";return!n||Kc(n)?c:`${c}-openssl-${n}`}return t==="linux"&&s&&n?`${s}-openssl-${n}`:(t!=="linux"&&Ns(`Prisma detected unknown OS "${t}" and may not work as expected. Defaulting to "linux".`),n?`${u}-openssl-${n}`:s?`${s}-openssl-${l}`:`${u}-openssl-${l}`)}async function K1(e){try{return await e()}catch{return}}function Yi(e){return K1(async()=>{let t=await D1(e);return xe(`Command "${e}" successfully returned "${t.stdout}"`),t.stdout})}async function z1(){return typeof Ks.default.machine=="function"?Ks.default.machine():(await Yi("uname -m"))?.trim()}function Kc(e){return e.startsWith("1.")}var zc={};Wt(zc,{beep:()=>vx,clearScreen:()=>gx,clearTerminal:()=>yx,cursorBackward:()=>tx,cursorDown:()=>Z1,cursorForward:()=>ex,cursorGetPosition:()=>nx,cursorHide:()=>ox,cursorLeft:()=>Yc,cursorMove:()=>X1,cursorNextLine:()=>sx,cursorPrevLine:()=>ax,cursorRestorePosition:()=>ix,cursorSavePosition:()=>rx,cursorShow:()=>lx,cursorTo:()=>Y1,cursorUp:()=>Wc,enterAlternativeScreen:()=>bx,eraseDown:()=>fx,eraseEndLine:()=>cx,eraseLine:()=>Xc,eraseLines:()=>ux,eraseScreen:()=>Ys,eraseStartLine:()=>dx,eraseUp:()=>px,exitAlternativeScreen:()=>xx,iTerm:()=>Ex,image:()=>Sx,link:()=>wx,scrollDown:()=>mx,scrollUp:()=>hx});var Ra=Q(require("node:process"),1),ka=globalThis.window?.document!==void 0,kP=globalThis.process?.versions?.node!==void 0,TP=globalThis.process?.versions?.bun!==void 0,IP=globalThis.Deno?.version?.deno!==void 0,OP=globalThis.process?.versions?.electron!==void 0,_P=globalThis.navigator?.userAgent?.includes("jsdom")===!0,qP=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,CP=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,PP=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,NP=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,ri=globalThis.navigator?.userAgentData?.platform,DP=ri==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",UP=ri==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",LP=ri==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",FP=ri==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),MP=ri==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android",V="\x1B[",Jr="\x1B]",lr="\x07",Mr=";",Jc=!ka&&Ra.default.env.TERM_PROGRAM==="Apple_Terminal",J1=!ka&&Ra.default.platform==="win32",W1=ka?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:Ra.default.cwd,Y1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?V+(e+1)+"G":V+(t+1)+Mr+(e+1)+"H"},X1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=V+-e+"D":e>0&&(r+=V+e+"C"),t<0?r+=V+-t+"A":t>0&&(r+=V+t+"B"),r},Wc=(e=1)=>V+e+"A",Z1=(e=1)=>V+e+"B",ex=(e=1)=>V+e+"C",tx=(e=1)=>V+e+"D",Yc=V+"G",rx=Jc?"\x1B7":V+"s",ix=Jc?"\x1B8":V+"u",nx=V+"6n",sx=V+"E",ax=V+"F",ox=V+"?25l",lx=V+"?25h",ux=e=>{let t="";for(let r=0;r<e;r++)t+=Xc+(r<e-1?Wc():"");return e&&(t+=Yc),t},cx=V+"K",dx=V+"1K",Xc=V+"2K",fx=V+"J",px=V+"1J",Ys=V+"2J",hx=V+"S",mx=V+"T",gx="\x1Bc",yx=J1?`${Ys}${V}0f`:`${Ys}${V}3J${V}H`,bx=V+"?1049h",xx=V+"?1049l",vx=lr,wx=(e,t)=>[Jr,"8",Mr,Mr,t,lr,e,Jr,"8",Mr,Mr,lr].join(""),Sx=(e,t={})=>{let r=`${Jr}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+lr},Ex={setCwd:(e=W1())=>`${Jr}50;CurrentDir=${e}${lr}`,annotation(e,t={}){let r=`${Jr}1337;`,i=t.x!==void 0,n=t.y!==void 0;if((i||n)&&!(i&&n&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(i?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+lr}},Ta=Q(Vb(),1);function Wr(e,t,{target:r="stdout",...i}={}){return Ta.default[r]?zc.link(e,t):i.fallback===!1?e:typeof i.fallback=="function"?i.fallback(e,t):`${e} (\u200B${t}\u200B)`}Wr.isSupported=Ta.default.stdout;Wr.stderr=(e,t,r={})=>Wr(e,t,{target:"stderr",...r});Wr.stderr.isSupported=Ta.default.stderr;function Ax(e){return Wr(e,e,{fallback:Ce})}var Rx=Bb(),kx=Rx.version;function Xs(e){return Tx()||(e?.config.engineType==="library"?"library":e?.config.engineType==="binary"?"binary":e?.config.engineType==="client"?"client":Ix())}function Tx(){let e=process.env.PRISMA_CLIENT_ENGINE_TYPE;return e==="library"?"library":e==="binary"?"binary":e==="client"?"client":void 0}function Ix(){return"library"}function Zc(e){return e.name==="DriverAdapterError"&&typeof e.cause=="object"}function Ia(e){return{ok:!0,value:e,map(t){return Ia(t(e))},flatMap(t){return t(e)}}}function ur(e){return{ok:!1,error:e,map(){return ur(e)},flatMap(){return ur(e)}}}var ed=ve("driver-adapter-utils"),Ox=class{registeredErrors=[];consumeError(e){return this.registeredErrors[e]}registerNewError(e){let t=0;for(;this.registeredErrors[t]!==void 0;)t++;return this.registeredErrors[t]={error:e},t}},Gu=(e,t=new Ox)=>{let r={adapterName:e.adapterName,errorRegistry:t,queryRaw:lt(t,e.queryRaw.bind(e)),executeRaw:lt(t,e.executeRaw.bind(e)),executeScript:lt(t,e.executeScript.bind(e)),dispose:lt(t,e.dispose.bind(e)),provider:e.provider,startTransaction:async(...i)=>(await lt(t,e.startTransaction.bind(e))(...i)).map(n=>_x(t,n))};return e.getConnectionInfo&&(r.getConnectionInfo=qx(t,e.getConnectionInfo.bind(e))),r},_x=(e,t)=>({adapterName:t.adapterName,provider:t.provider,options:t.options,queryRaw:lt(e,t.queryRaw.bind(t)),executeRaw:lt(e,t.executeRaw.bind(t)),commit:lt(e,t.commit.bind(t)),rollback:lt(e,t.rollback.bind(t))});function lt(e,t){return async(...r)=>{try{return Ia(await t(...r))}catch(i){if(ed("[error@wrapAsync]",i),Zc(i))return ur(i.cause);let n=e.registerNewError(i);return ur({kind:"GenericJs",id:n})}}}function qx(e,t){return(...r)=>{try{return Ia(t(...r))}catch(i){if(ed("[error@wrapSync]",i),Zc(i))return ur(i.cause);let n=e.registerNewError(i);return ur({kind:"GenericJs",id:n})}}}var jP=Q(wa()),Z=Q(require("node:path")),$P=Q(wa()),VP=ve("prisma:engines");function Cx(){return Z.default.join(__dirname,"../")}Z.default.join(__dirname,"../query-engine-darwin");Z.default.join(__dirname,"../query-engine-darwin-arm64");Z.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");Z.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");Z.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");Z.default.join(__dirname,"../query-engine-linux-static-x64");Z.default.join(__dirname,"../query-engine-linux-static-arm64");Z.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");Z.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");Z.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");Z.default.join(__dirname,"../libquery_engine-darwin.dylib.node");Z.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");Z.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");Z.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");Z.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");Z.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");Z.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");Z.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");Z.default.join(__dirname,"../libquery_engine-linux-musl.so.node");Z.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");Z.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");Z.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");Z.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");Z.default.join(__dirname,"../query_engine-windows.dll.node");var Hu=Q(require("node:fs")),Qu=Ea("chmodPlusX");function Px(e){if(process.platform==="win32")return;let t=Hu.default.statSync(e),r=t.mode|64|8|1;if(t.mode===r){Qu(`Execution permissions of ${e} are fine`);return}let i=r.toString(8).slice(-3);Qu(`Have to call chmodPlusX on ${e}`),Hu.default.chmodSync(e,i)}function Nx(e){let t=e.e,r=o=>`Prisma cannot find the required \`${o}\` system library in your system`,i=t.message.includes("cannot open shared object file"),n=`Please refer to the documentation about Prisma's system requirements: ${Ax("https://pris.ly/d/system-requirements")}`,s=`Unable to require(\`${ei(e.id)}\`).`,a=an({message:t.message,code:t.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:o})=>i&&o.includes("libz"),()=>`${r("libz")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libgcc_s"),()=>`${r("libgcc_s")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libssl"),()=>{let o=e.platformInfo.libssl?`openssl-${e.platformInfo.libssl}`:"openssl";return`${r("libssl")}. Please install ${o} and try again.`}).when(({message:o})=>o.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${n}`).when(({message:o})=>e.platformInfo.platform==="linux"&&o.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${e.platformInfo.originalDistro} on (${e.platformInfo.archFromUname}) which uses the \`${e.platformInfo.binaryTarget}\` binaryTarget by default. ${n}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${n}`);return`${s}
${a}

Details: ${t.message}`}var Dx=Q(Gb(),1);function Ux(e){let t=(0,Dx.default)(e);if(t===0)return e;let r=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(r,"")}var Lx="prisma+postgres",td=`${Lx}:`;function rd(e){return e?.toString().startsWith(`${td}//`)??!1}function Fx(e){if(!rd(e))return!1;let{host:t}=new URL(e);return t.includes("localhost")||t.includes("127.0.0.1")||t.includes("[::1]")}var Mx=Q(Nc());function jx(e){return String(new $x(e))}var $x=class{constructor(e){this.config=e}toString(){let{config:e}=this,t=e.provider.fromEnvVar?`env("${e.provider.fromEnvVar}")`:e.provider.value,r=JSON.parse(JSON.stringify({provider:t,binaryTargets:Vx(e.binaryTargets)}));return`generator ${e.name} {
${(0,Mx.default)(Bx(r),2)}
}`}};function Vx(e){let t;if(e.length>0){let r=e.find(i=>i.fromEnvVar!==null);r?t=`env("${r.fromEnvVar}")`:t=e.map(i=>i.native?"native":i.value)}else t=void 0;return t}function Bx(e){let t=Object.keys(e).reduce((r,i)=>Math.max(r,i.length),0);return Object.entries(e).map(([r,i])=>`${r.padEnd(t)} = ${Gx(i)}`).join(`
`)}function Gx(e){return JSON.parse(JSON.stringify(e,(t,r)=>Array.isArray(r)?`[${r.map(i=>JSON.stringify(i)).join(", ")}]`:JSON.stringify(r)))}var Zs={};Wt(Zs,{error:()=>Kx,info:()=>Qx,log:()=>Hx,query:()=>zx,should:()=>id,tags:()=>ii,warn:()=>nd});var ii={error:zt("prisma:error"),warn:ti("prisma:warn"),info:Kt("prisma:info"),query:$r("prisma:query")},id={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Hx(...e){console.log(...e)}function nd(e,...t){id.warn()&&console.warn(`${ii.warn} ${e}`,...t)}function Qx(e,...t){console.info(`${ii.info} ${e}`,...t)}function Kx(e,...t){console.error(`${ii.error} ${e}`,...t)}function zx(e,...t){console.log(`${ii.query} ${e}`,...t)}function Ku(e,t){if(!e)throw new Error(`${t}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function Oa(e,t){throw new Error(t)}function Jx({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var Wx=Jx();function ea(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Wx,"")}var Fi=Q(require("node:path"));function Yx(e){return Fi.default.sep===Fi.default.posix.sep?e:e.split(Fi.default.sep).join(Fi.default.posix.sep)}var sd=Q(Qb()),ta=Q(require("node:fs")),Yr=Q(require("node:path"));function Xx(e){let t=e.ignoreProcessEnv?{}:process.env,r=i=>i.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(n,s){let a=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(s);if(!a)return n;let o=a[1],l,u;if(o==="\\")u=a[0],l=u.replace("\\$","$");else{let c=a[2];u=a[0].substring(o.length),l=Object.hasOwnProperty.call(t,c)?t[c]:e.parsed[c]||"",l=r(l)}return n.replace(u,l)},i)??i;for(let i in e.parsed){let n=Object.hasOwnProperty.call(t,i)?t[i]:e.parsed[i];e.parsed[i]=r(n)}for(let i in e.parsed)t[i]=e.parsed[i];return e}var ra=Ea("prisma:tryLoadEnv");function ad({rootEnvPath:e,schemaEnvPath:t},r={conflictCheck:"none"}){let i=zu(e);r.conflictCheck!=="none"&&Zx(i,t,r.conflictCheck);let n=null;return od(i?.path,t)||(n=zu(t)),!i&&!n&&ra("No Environment variables loaded"),n?.dotenvResult.error?console.error(zt($e("Schema Env Error: "))+n.dotenvResult.error):{message:[i?.message,n?.message].filter(Boolean).join(`
`),parsed:{...i?.dotenvResult?.parsed,...n?.dotenvResult?.parsed}}}function Zx(e,t,r){let i=e?.dotenvResult.parsed,n=!od(e?.path,t);if(i&&t&&n&&ta.default.existsSync(t)){let s=sd.default.parse(ta.default.readFileSync(t)),a=[];for(let o in s)i[o]===s[o]&&a.push(o);if(a.length>0){let o=Yr.default.relative(process.cwd(),e.path),l=Yr.default.relative(process.cwd(),t);if(r==="error"){let u=`There is a conflict between env var${a.length>1?"s":""} in ${Ce(o)} and ${Ce(l)}
Conflicting env vars:
${a.map(c=>`  ${$e(c)}`).join(`
`)}

We suggest to move the contents of ${Ce(l)} to ${Ce(o)} to consolidate your env vars.
`;throw new Error(u)}else if(r==="warn"){let u=`Conflict for env var${a.length>1?"s":""} ${a.map(c=>$e(c)).join(", ")} in ${Ce(o)} and ${Ce(l)}
Env vars from ${Ce(l)} overwrite the ones from ${Ce(o)}
      `;console.warn(`${ti("warn(prisma)")} ${u}`)}}}}function zu(e){if(ev(e)){ra(`Environment variables loaded from ${e}`);let t=sd.default.config({path:e,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:Xx(t),message:ei(`Environment variables loaded from ${Yr.default.relative(process.cwd(),e)}`),path:e}}else ra(`Environment variables not found at ${e}`);return null}function od(e,t){return e&&t&&Yr.default.resolve(e)===Yr.default.resolve(t)}function ev(e){return!!(e&&ta.default.existsSync(e))}function tv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ld(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function rv(e,t){if(e.length===0)return;let r=e[0];for(let i=1;i<e.length;i++)t(r,e[i])<0&&(r=e[i]);return r}function se(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Ju=new Set,ud=(e,t,...r)=>{Ju.has(e)||(Ju.add(e),nd(t,...r))},oe=class cd extends Error{clientVersion;errorCode;retryable;constructor(t,r,i){super(t),this.name="PrismaClientInitializationError",this.clientVersion=r,this.errorCode=i,Error.captureStackTrace(cd)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};se(oe,"PrismaClientInitializationError");var kt=class extends Error{code;meta;clientVersion;batchRequestIdx;constructor(e,{code:t,clientVersion:r,meta:i,batchRequestIdx:n}){super(e),this.name="PrismaClientKnownRequestError",this.code=t,this.clientVersion=r,this.meta=i,Object.defineProperty(this,"batchRequestIdx",{value:n,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};se(kt,"PrismaClientKnownRequestError");var At=class extends Error{clientVersion;constructor(e,t){super(e),this.name="PrismaClientRustPanicError",this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};se(At,"PrismaClientRustPanicError");var Oe=class extends Error{clientVersion;batchRequestIdx;constructor(e,{clientVersion:t,batchRequestIdx:r}){super(e),this.name="PrismaClientUnknownRequestError",this.clientVersion=t,Object.defineProperty(this,"batchRequestIdx",{value:r,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};se(Oe,"PrismaClientUnknownRequestError");var ut=class extends Error{name="PrismaClientValidationError";clientVersion;constructor(e,{clientVersion:t}){super(e),this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};se(ut,"PrismaClientValidationError");var Gr=class{_map=new Map;get(e){return this._map.get(e)?.value}set(e,t){this._map.set(e,{value:t})}getOrCreate(e,t){let r=this._map.get(e);if(r)return r.value;let i=t();return this.set(e,i),i}};function on(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function iv(e,t){let r={};for(let i of e){let n=i[t];r[n]=i}return r}function ia(e){let t;return{get(){return t||(t={value:e()}),t.value}}}function nv(e){return{models:Ds(e.models),enums:Ds(e.enums),types:Ds(e.types)}}function Ds(e){let t={};for(let{name:r,...i}of e)t[r]=i;return t}function _a(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function dd(e){return e.toString()!=="Invalid Date"}var or=9e15,It=1e9,na="0123456789abcdef",Xi="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Zi="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",sa={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-or,maxE:or,crypto:!1},fd,ct,I=!0,ln="[DecimalError] ",Tt=ln+"Invalid argument: ",pd=ln+"Precision limit exceeded",hd=ln+"crypto unavailable",md="[object Decimal]",he=Math.floor,le=Math.pow,sv=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,av=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ov=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,gd=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ve=1e7,R=7,lv=9007199254740991,uv=Xi.length-1,aa=Zi.length-1,y={toStringTag:md};y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),S(e)};y.ceil=function(){return S(new this.constructor(this),this.e+1,2)};y.clampedTo=y.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Tt+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};y.comparedTo=y.cmp=function(e){var t,r,i,n,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(i=a.length,n=o.length,t=0,r=i<n?i:n;t<r;++t)if(a[t]!==o[t])return a[t]>o[t]^l<0?1:-1;return i===n?0:i>n^l<0?1:-1};y.cosine=y.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+R,i.rounding=1,r=cv(i,wd(i,r)),i.precision=e,i.rounding=t,S(ct==2||ct==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};y.cubeRoot=y.cbrt=function(){var e,t,r,i,n,s,a,o,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(I=!1,s=c.s*le(c.s*c,1/3),!s||Math.abs(s)==1/0?(r=de(c.d),e=c.e,(s=(e-r.length+1)%3)&&(r+=s==1||s==-2?"0":"00"),s=le(r,1/3),e=he((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new d(r),i.s=c.s):i=new d(s.toString()),a=(e=d.precision)+3;;)if(o=i,l=o.times(o).times(o),u=l.plus(c),i=K(u.plus(c).times(o),u.plus(l),a+2,1),de(o.d).slice(0,a)===(r=de(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!n&&r=="4999"){if(!n&&(S(o,e+1,0),o.times(o).times(o).eq(c))){i=o;break}a+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(S(i,e+1,1),t=!i.times(i).times(i).eq(c));break}return I=!0,S(i,e,d.rounding,t)};y.decimalPlaces=y.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-he(this.e/R))*R,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};y.dividedBy=y.div=function(e){return K(this,new this.constructor(e))};y.dividedToIntegerBy=y.divToInt=function(e){var t=this,r=t.constructor;return S(K(t,new r(e),0,1,1),r.precision,r.rounding)};y.equals=y.eq=function(e){return this.cmp(e)===0};y.floor=function(){return S(new this.constructor(this),this.e+1,3)};y.greaterThan=y.gt=function(e){return this.cmp(e)>0};y.greaterThanOrEqualTo=y.gte=function(e){var t=this.cmp(e);return t==1||t===0};y.hyperbolicCosine=y.cosh=function(){var e,t,r,i,n,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;r=a.precision,i=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,n=s.d.length,n<32?(e=Math.ceil(n/3),t=(1/cn(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=cr(a,1,s.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return S(s,a.precision=r,a.rounding=i,!0)};y.hyperbolicSine=y.sinh=function(){var e,t,r,i,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,i=n.d.length,i<3)n=cr(s,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/cn(5,e)),n=cr(s,2,n,n,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);e--;)a=n.times(n),n=n.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=t,s.rounding=r,S(n,t,r,!0)};y.hyperbolicTangent=y.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,K(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};y.inverseCosine=y.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,n=t.rounding;return r!==-1?r===0?e.isNeg()?Xe(t,i,n):new t(0):new t(NaN):e.isZero()?Xe(t,i+4,n).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=n,e.times(2))};y.inverseHyperbolicCosine=y.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,I=!1,r=r.times(r).minus(1).sqrt().plus(r),I=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};y.inverseHyperbolicSine=y.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,I=!1,r=r.times(r).plus(1).sqrt().plus(r),I=!0,i.precision=e,i.rounding=t,r.ln())};y.inverseHyperbolicTangent=y.atanh=function(){var e,t,r,i,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=s.precision,t=s.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?S(new s(n),e,t,!0):(s.precision=r=i-n.e,n=K(n.plus(1),new s(1).minus(n),r+e,1),s.precision=e+4,s.rounding=1,n=n.ln(),s.precision=e,s.rounding=t,n.times(.5))):new s(NaN)};y.inverseSine=y.asin=function(){var e,t,r,i,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),r=s.precision,i=s.rounding,t!==-1?t===0?(e=Xe(s,r+4,i).times(.5),e.s=n.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=i,n.times(2)))};y.inverseTangent=y.atan=function(){var e,t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=aa)return a=Xe(c,d+4,f).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=aa)return a=Xe(c,d+4,f).times(.5),a.s=u.s,a}for(c.precision=o=d+10,c.rounding=1,r=Math.min(28,o/R+2|0),e=r;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(I=!1,t=Math.ceil(o/R),i=1,l=u.times(u),a=new c(u),n=u;e!==-1;)if(n=n.times(l),s=a.minus(n.div(i+=2)),n=n.times(l),a=s.plus(n.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===s.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),I=!0,S(a,c.precision=d,c.rounding=f,!0)};y.isFinite=function(){return!!this.d};y.isInteger=y.isInt=function(){return!!this.d&&he(this.e/R)>this.d.length-2};y.isNaN=function(){return!this.s};y.isNegative=y.isNeg=function(){return this.s<0};y.isPositive=y.isPos=function(){return this.s>0};y.isZero=function(){return!!this.d&&this.d[0]===0};y.lessThan=y.lt=function(e){return this.cmp(e)<0};y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1};y.logarithm=y.log=function(e){var t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding,p=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(n=r[0];n%10===0;)n/=10;s=n!==1}if(I=!1,o=d+p,a=Et(u,o),i=t?en(c,o+10):Et(e,o),l=K(a,i,o,1),Xr(l.d,n=d,f))do if(o+=10,a=Et(u,o),i=t?en(c,o+10):Et(e,o),l=K(a,i,o,1),!s){+de(l.d).slice(n+1,n+15)+1==1e14&&(l=S(l,d+1,0));break}while(Xr(l.d,n+=10,f));return I=!0,S(l,d,f)};y.minus=y.sub=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,g=p.constructor;if(e=new g(e),!p.d||!e.d)return!p.s||!e.s?e=new g(NaN):p.d?e.s=-e.s:e=new g(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,f=e.d,o=g.precision,l=g.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else if(u[0])e=new g(p);else return new g(l===3?-0:0);return I?S(e,o,l):e}if(r=he(e.e/R),c=he(p.e/R),u=u.slice(),s=c-r,s){for(d=s<0,d?(t=u,s=-s,a=f.length):(t=f,r=c,a=u.length),i=Math.max(Math.ceil(o/R),a)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=u.length,a=f.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}s=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),a=u.length,i=f.length-a;i>0;--i)u[a++]=0;for(i=f.length;i>s;){if(u[--i]<f[i]){for(n=i;n&&u[--n]===0;)u[n]=Ve-1;--u[n],u[i]+=Ve}u[i]-=f[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=un(u,r),I?S(e,o,l):e):new g(l===3?-0:0)};y.modulo=y.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?S(new i(r),i.precision,i.rounding):(I=!1,i.modulo==9?(t=K(r,e.abs(),0,3,1),t.s*=e.s):t=K(r,e,0,i.modulo,1),t=t.times(e),I=!0,r.minus(t))};y.naturalExponential=y.exp=function(){return oa(this)};y.naturalLogarithm=y.ln=function(){return Et(this)};y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,S(e)};y.plus=y.add=function(e){var t,r,i,n,s,a,o,l,u,c,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return!d.s||!e.s?e=new f(NaN):d.d||(e=new f(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,o=f.precision,l=f.rounding,!u[0]||!c[0])return c[0]||(e=new f(d)),I?S(e,o,l):e;if(s=he(d.e/R),i=he(e.e/R),u=u.slice(),n=s-i,n){for(n<0?(r=u,n=-n,a=c.length):(r=c,i=s,a=u.length),s=Math.ceil(o/R),a=s>a?s+1:a+1,n>a&&(n=a,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(a=u.length,n=c.length,a-n<0&&(n=a,r=c,c=u,u=r),t=0;n;)t=(u[--n]=u[n]+c[n]+t)/Ve|0,u[n]%=Ve;for(t&&(u.unshift(t),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=un(u,i),I?S(e,o,l):e};y.precision=y.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Tt+e);return r.d?(t=yd(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};y.round=function(){var e=this,t=e.constructor;return S(new t(e),e.e+1,t.rounding)};y.sine=y.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+R,i.rounding=1,r=fv(i,wd(i,r)),i.precision=e,i.rounding=t,S(ct>2?r.neg():r,e,t,!0)):new i(NaN)};y.squareRoot=y.sqrt=function(){var e,t,r,i,n,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(I=!1,u=Math.sqrt(+a),u==0||u==1/0?(t=de(o),(t.length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=he((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),i=new c(t)):i=new c(u.toString()),r=(l=c.precision)+3;;)if(s=i,i=s.plus(K(a,s,r+2,1)).times(.5),de(s.d).slice(0,r)===(t=de(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(S(s,l+1,0),s.times(s).eq(a))){i=s;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(S(i,l+1,1),e=!i.times(i).eq(a));break}return I=!0,S(i,l,c.rounding,e)};y.tangent=y.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=K(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,S(ct==2||ct==4?r.neg():r,e,t,!0)):new i(NaN)};y.times=y.mul=function(e){var t,r,i,n,s,a,o,l,u,c=this,d=c.constructor,f=c.d,p=(e=new d(e)).d;if(e.s*=c.s,!f||!f[0]||!p||!p[0])return new d(!e.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?e.s/0:e.s*0);for(r=he(c.e/R)+he(e.e/R),l=f.length,u=p.length,l<u&&(s=f,f=p,p=s,a=l,l=u,u=a),s=[],a=l+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(t=0,n=l+i;n>i;)o=s[n]+p[i]*f[n-i-1]+t,s[n--]=o%Ve|0,t=o/Ve|0;s[n]=(s[n]+t)%Ve|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=un(s,r),I?S(e,d.precision,d.rounding):e};y.toBinary=function(e,t){return qa(this,2,e,t)};y.toDecimalPlaces=y.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(ke(e,0,It),t===void 0?t=i.rounding:ke(t,0,8),S(r,e+r.e+1,t))};y.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=et(i,!0):(ke(e,0,It),t===void 0?t=n.rounding:ke(t,0,8),i=S(new n(i),e+1,t),r=et(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toFixed=function(e,t){var r,i,n=this,s=n.constructor;return e===void 0?r=et(n):(ke(e,0,It),t===void 0?t=s.rounding:ke(t,0,8),i=S(new s(n),e+n.e+1,t),r=et(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};y.toFraction=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,g=p.d,h=p.constructor;if(!g)return new h(p);if(u=r=new h(1),i=l=new h(0),t=new h(i),s=t.e=yd(g)-p.e-1,a=s%R,t.d[0]=le(10,a<0?R+a:a),e==null)e=s>0?t:u;else{if(o=new h(e),!o.isInt()||o.lt(u))throw Error(Tt+o);e=o.gt(t)?s>0?t:u:o}for(I=!1,o=new h(de(g)),c=h.precision,h.precision=s=g.length*R*2;d=K(o,t,0,1,1),n=r.plus(d.times(i)),n.cmp(e)!=1;)r=i,i=n,n=u,u=l.plus(d.times(n)),l=n,n=t,t=o.minus(d.times(n)),o=n;return n=K(e.minus(r),i,0,1,1),l=l.plus(n.times(u)),r=r.plus(n.times(i)),l.s=u.s=p.s,f=K(u,i,s,1).minus(p).abs().cmp(K(l,r,s,1).minus(p).abs())<1?[u,i]:[l,r],h.precision=c,I=!0,f};y.toHexadecimal=y.toHex=function(e,t){return qa(this,16,e,t)};y.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:ke(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(I=!1,r=K(r,e,0,t,1).times(e),I=!0,S(r)):(e.s=r.s,r=e),r};y.toNumber=function(){return+this};y.toOctal=function(e,t){return qa(this,8,e,t)};y.toPower=y.pow=function(e){var t,r,i,n,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new l(le(+o,u));if(o=new l(o),o.eq(1))return o;if(i=l.precision,s=l.rounding,e.eq(1))return S(o,i,s);if(t=he(e.e/R),t>=e.d.length-1&&(r=u<0?-u:u)<=lv)return n=bd(l,o,r,i),e.s<0?new l(1).div(n):S(n,i,s);if(a=o.s,a<0){if(t<e.d.length-1)return new l(NaN);if((e.d[t]&1)==0&&(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return r=le(+o,u),t=r==0||!isFinite(r)?he(u*(Math.log("0."+de(o.d))/Math.LN10+o.e+1)):new l(r+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(I=!1,l.rounding=o.s=1,r=Math.min(12,(t+"").length),n=oa(e.times(Et(o,i+r)),i),n.d&&(n=S(n,i+5,1),Xr(n.d,i,s)&&(t=i+10,n=S(oa(e.times(Et(o,t+r)),t),t+5,1),+de(n.d).slice(i+1,i+15)+1==1e14&&(n=S(n,i+1,0)))),n.s=a,I=!0,l.rounding=s,S(n,i,s))};y.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=et(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(ke(e,1,It),t===void 0?t=n.rounding:ke(t,0,8),i=S(new n(i),e,t),r=et(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toSignificantDigits=y.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(ke(e,1,It),t===void 0?t=i.rounding:ke(t,0,8)),S(new i(r),e,t)};y.toString=function(){var e=this,t=e.constructor,r=et(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};y.truncated=y.trunc=function(){return S(new this.constructor(this),this.e+1,1)};y.valueOf=y.toJSON=function(){var e=this,t=e.constructor,r=et(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function de(e){var t,r,i,n=e.length-1,s="",a=e[0];if(n>0){for(s+=a,t=1;t<n;t++)i=e[t]+"",r=R-i.length,r&&(s+=St(r)),s+=i;a=e[t],i=a+"",r=R-i.length,r&&(s+=St(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function ke(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Tt+e)}function Xr(e,t,r,i){var n,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=R,n=0):(n=Math.ceil((t+1)/R),t%=R),s=le(10,R-t),o=e[n]%s|0,i==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),a=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):a=(r<4&&o+1==s||r>3&&o+1==s/2)&&(e[n+1]/s/100|0)==le(10,t-2)-1||(o==s/2||o==0)&&(e[n+1]/s/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),a=(i||r<4)&&o==9999||!i&&r>3&&o==4999):a=((i||r<4)&&o+1==s||!i&&r>3&&o+1==s/2)&&(e[n+1]/s/1e3|0)==le(10,t-3)-1,a}function Bi(e,t,r){for(var i,n=[0],s,a=0,o=e.length;a<o;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=na.indexOf(e.charAt(a++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function cv(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/cn(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=cr(e,1,t.times(n),new e(1));for(var s=r;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var K=(function(){function e(i,n,s){var a,o=0,l=i.length;for(i=i.slice();l--;)a=i[l]*n+o,i[l]=a%s|0,o=a/s|0;return o&&i.unshift(o),i}function t(i,n,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=n[o]){l=i[o]>n[o]?1:-1;break}return l}function r(i,n,s,a){for(var o=0;s--;)i[s]-=o,o=i[s]<n[s]?1:0,i[s]=o*a+i[s]-n[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,s,a,o,l){var u,c,d,f,p,g,h,E,_,C,N,G,Ae,T,b,A,O,B,M,D,j=i.constructor,te=i.s==n.s?1:-1,H=i.d,F=n.d;if(!H||!H[0]||!F||!F[0])return new j(!i.s||!n.s||(H?F&&H[0]==F[0]:!F)?NaN:H&&H[0]==0||!F?te*0:te/0);for(l?(p=1,c=i.e-n.e):(l=Ve,p=R,c=he(i.e/p)-he(n.e/p)),M=F.length,O=H.length,_=new j(te),C=_.d=[],d=0;F[d]==(H[d]||0);d++);if(F[d]>(H[d]||0)&&c--,s==null?(T=s=j.precision,a=j.rounding):o?T=s+(i.e-n.e)+1:T=s,T<0)C.push(1),g=!0;else{if(T=T/p+2|0,d=0,M==1){for(f=0,F=F[0],T++;(d<O||f)&&T--;d++)b=f*l+(H[d]||0),C[d]=b/F|0,f=b%F|0;g=f||d<O}else{for(f=l/(F[0]+1)|0,f>1&&(F=e(F,f,l),H=e(H,f,l),M=F.length,O=H.length),A=M,N=H.slice(0,M),G=N.length;G<M;)N[G++]=0;D=F.slice(),D.unshift(0),B=F[0],F[1]>=l/2&&++B;do f=0,u=t(F,N,M,G),u<0?(Ae=N[0],M!=G&&(Ae=Ae*l+(N[1]||0)),f=Ae/B|0,f>1?(f>=l&&(f=l-1),h=e(F,f,l),E=h.length,G=N.length,u=t(h,N,E,G),u==1&&(f--,r(h,M<E?D:F,E,l))):(f==0&&(u=f=1),h=F.slice()),E=h.length,E<G&&h.unshift(0),r(N,h,G,l),u==-1&&(G=N.length,u=t(F,N,M,G),u<1&&(f++,r(N,M<G?D:F,G,l))),G=N.length):u===0&&(f++,N=[0]),C[d++]=f,u&&N[0]?N[G++]=H[A]||0:(N=[H[A]],G=1);while((A++<O||N[0]!==void 0)&&T--);g=N[0]!==void 0}C[0]||C.shift()}if(p==1)_.e=c,fd=g;else{for(d=1,f=C[0];f>=10;f/=10)d++;_.e=d+c*p-1,S(_,o?s+_.e+1:s,a,g)}return _}})();function S(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(n=1,o=d[0];o>=10;o/=10)n++;if(s=t-n,s<0)s+=R,a=t,c=d[f=0],l=c/le(10,n-a-1)%10|0;else if(f=Math.ceil((s+1)/R),o=d.length,f>=o)if(i){for(;o++<=f;)d.push(0);c=l=0,n=1,s%=R,a=s-R+1}else break e;else{for(c=o=d[f],n=1;o>=10;o/=10)n++;s%=R,a=s-R+n,l=a<0?0:c/le(10,n-a-1)%10|0}if(i=i||t<0||d[f+1]!==void 0||(a<0?c:c%le(10,n-a-1)),u=r<4?(l||i)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||i||r==6&&(s>0?a>0?c/le(10,n-a):0:d[f-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=le(10,(R-t%R)%R),e.e=-t||0):d[0]=e.e=0,e;if(s==0?(d.length=f,o=1,f--):(d.length=f+1,o=le(10,R-s),d[f]=a>0?(c/le(10,n-a)%le(10,a)|0)*o:0),u)for(;;)if(f==0){for(s=1,a=d[0];a>=10;a/=10)s++;for(a=d[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,d[0]==Ve&&(d[0]=1));break}else{if(d[f]+=o,d[f]!=Ve)break;d[f--]=0,o=1}for(s=d.length;d[--s]===0;)d.pop()}return I&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function et(e,t,r){if(!e.isFinite())return vd(e);var i,n=e.e,s=de(e.d),a=s.length;return t?(r&&(i=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+St(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):n<0?(s="0."+St(-n-1)+s,r&&(i=r-a)>0&&(s+=St(i))):n>=a?(s+=St(n+1-a),r&&(i=r-n-1)>0&&(s=s+"."+St(i))):((i=n+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-a)>0&&(n+1===a&&(s+="."),s+=St(i))),s}function un(e,t){var r=e[0];for(t*=R;r>=10;r/=10)t++;return t}function en(e,t,r){if(t>uv)throw I=!0,r&&(e.precision=r),Error(pd);return S(new e(Xi),t,1,!0)}function Xe(e,t,r){if(t>aa)throw Error(pd);return S(new e(Zi),t,r,!0)}function yd(e){var t=e.length-1,r=t*R+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function St(e){for(var t="";e--;)t+="0";return t}function bd(e,t,r,i){var n,s=new e(1),a=Math.ceil(i/R+4);for(I=!1;;){if(r%2&&(s=s.times(t),Yu(s.d,a)&&(n=!0)),r=he(r/2),r===0){r=s.d.length-1,n&&s.d[r]===0&&++s.d[r];break}t=t.times(t),Yu(t.d,a)}return I=!0,s}function Wu(e){return e.d[e.d.length-1]&1}function xd(e,t,r){for(var i,n,s=new e(t[0]),a=0;++a<t.length;){if(n=new e(t[a]),!n.s){s=n;break}i=s.cmp(n),(i===r||i===0&&s.s===r)&&(s=n)}return s}function oa(e,t){var r,i,n,s,a,o,l,u=0,c=0,d=0,f=e.constructor,p=f.rounding,g=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(I=!1,l=g):l=t,o=new f(.03125);e.e>-2;)e=e.times(o),d+=5;for(i=Math.log(le(2,d))/Math.LN10*2+5|0,l+=i,r=s=a=new f(1),f.precision=l;;){if(s=S(s.times(e),l,1),r=r.times(++c),o=a.plus(K(s,r,l,1)),de(o.d).slice(0,l)===de(a.d).slice(0,l)){for(n=d;n--;)a=S(a.times(a),l,1);if(t==null)if(u<3&&Xr(a.d,l-i,p,u))f.precision=l+=10,r=s=o=new f(1),c=0,u++;else return S(a,f.precision=g,p,I=!0);else return f.precision=g,a}a=o}}function Et(e,t){var r,i,n,s,a,o,l,u,c,d,f,p=1,g=10,h=e,E=h.d,_=h.constructor,C=_.rounding,N=_.precision;if(h.s<0||!E||!E[0]||!h.e&&E[0]==1&&E.length==1)return new _(E&&!E[0]?-1/0:h.s!=1?NaN:E?0:h);if(t==null?(I=!1,c=N):c=t,_.precision=c+=g,r=de(E),i=r.charAt(0),Math.abs(s=h.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)h=h.times(e),r=de(h.d),i=r.charAt(0),p++;s=h.e,i>1?(h=new _("0."+r),s++):h=new _(i+"."+r.slice(1))}else return u=en(_,c+2,N).times(s+""),h=Et(new _(i+"."+r.slice(1)),c-g).plus(u),_.precision=N,t==null?S(h,N,C,I=!0):h;for(d=h,l=a=h=K(h.minus(1),h.plus(1),c,1),f=S(h.times(h),c,1),n=3;;){if(a=S(a.times(f),c,1),u=l.plus(K(a,new _(n),c,1)),de(u.d).slice(0,c)===de(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(en(_,c+2,N).times(s+""))),l=K(l,new _(p),c,1),t==null)if(Xr(l.d,c-g,C,o))_.precision=c+=g,u=a=h=K(d.minus(1),d.plus(1),c,1),f=S(h.times(h),c,1),n=o=1;else return S(l,_.precision=N,C,I=!0);else return _.precision=N,l;l=u,n+=2}}function vd(e){return String(e.s*e.s/0)}function Gi(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%R,r<0&&(i+=R),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=R;i<n;)e.d.push(+t.slice(i,i+=R));t=t.slice(i),i=R-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),I&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function dv(e,t){var r,i,n,s,a,o,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),gd.test(t))return Gi(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(av.test(t))r=16,t=t.toLowerCase();else if(sv.test(t))r=2;else if(ov.test(t))r=8;else throw Error(Tt+t);for(s=t.search(/p/i),s>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),a=s>=0,i=e.constructor,a&&(t=t.replace(".",""),o=t.length,s=o-s,n=bd(i,new i(r),s,s*2)),u=Bi(t,r,Ve),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new i(e.s*0):(e.e=un(u,c),e.d=u,I=!1,a&&(e=K(e,n,o*4)),l&&(e=e.times(Math.abs(l)<54?le(2,l):Yt.pow(2,l))),I=!0,e)}function fv(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:cr(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/cn(5,r)),t=cr(e,2,t,t);for(var n,s=new e(5),a=new e(16),o=new e(20);r--;)n=t.times(t),t=t.times(s.plus(n.times(a.times(n).minus(o))));return t}function cr(e,t,r,i,n){var s,a,o,l,u=1,c=e.precision,d=Math.ceil(c/R);for(I=!1,l=r.times(r),o=new e(i);;){if(a=K(o.times(l),new e(t++*t++),c,1),o=n?i.plus(a):i.minus(a),i=K(a.times(l),new e(t++*t++),c,1),a=o.plus(i),a.d[d]!==void 0){for(s=d;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=i,i=a,a=s,u++}return I=!0,a.d.length=d+1,a}function cn(e,t){for(var r=e;--t;)r*=e;return r}function wd(e,t){var r,i=t.s<0,n=Xe(e,e.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return ct=i?4:1,t;if(r=t.divToInt(n),r.isZero())ct=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(s))return ct=Wu(r)?i?2:3:i?4:1,t;ct=Wu(r)?i?1:4:i?3:2}return t.minus(n).abs()}function qa(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor,g=r!==void 0;if(g?(ke(r,1,It),i===void 0?i=p.rounding:ke(i,0,8)):(r=p.precision,i=p.rounding),!e.isFinite())c=vd(e);else{for(c=et(e),a=c.indexOf("."),g?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,a>=0&&(c=c.replace(".",""),f=new p(1),f.e=c.length-a,f.d=Bi(et(f),10,n),f.e=f.d.length),d=Bi(c,10,n),s=l=d.length;d[--l]==0;)d.pop();if(!d[0])c=g?"0p+0":"0";else{if(a<0?s--:(e=new p(e),e.d=d,e.e=s,e=K(e,f,r,i,0,n),d=e.d,s=e.e,u=fd),a=d[r],o=n/2,u=u||d[r+1]!==void 0,u=i<4?(a!==void 0||u)&&(i===0||i===(e.s<0?3:2)):a>o||a===o&&(i===4||u||i===6&&d[r-1]&1||i===(e.s<0?8:7)),d.length=r,u)for(;++d[--r]>n-1;)d[r]=0,r||(++s,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,c="";a<l;a++)c+=na.charAt(d[a]);if(g){if(l>1)if(t==16||t==8){for(a=t==16?4:3,--l;l%a;l++)c+="0";for(d=Bi(c,n,t),l=d.length;!d[l-1];--l);for(a=1,c="1.";a<l;a++)c+=na.charAt(d[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Yu(e,t){if(e.length>t)return e.length=t,!0}function pv(e){return new this(e).abs()}function hv(e){return new this(e).acos()}function mv(e){return new this(e).acosh()}function gv(e,t){return new this(e).plus(t)}function yv(e){return new this(e).asin()}function bv(e){return new this(e).asinh()}function xv(e){return new this(e).atan()}function vv(e){return new this(e).atanh()}function wv(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,s=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Xe(this,s,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Xe(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Xe(this,s,1).times(.5),r.s=e.s):t.s<0?(this.precision=s,this.rounding=1,r=this.atan(K(e,t,s,1)),t=Xe(this,s,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(K(e,t,s,1)),r}function Sv(e){return new this(e).cbrt()}function Ev(e){return S(e=new this(e),e.e+1,2)}function Av(e,t,r){return new this(e).clamp(t,r)}function Rv(e){if(!e||typeof e!="object")throw Error(ln+"Object expected");var t,r,i,n=e.defaults===!0,s=["precision",1,It,"rounding",0,8,"toExpNeg",-or,0,"toExpPos",0,or,"maxE",0,or,"minE",-or,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],n&&(this[r]=sa[r]),(i=e[r])!==void 0)if(he(i)===i&&i>=s[t+1]&&i<=s[t+2])this[r]=i;else throw Error(Tt+r+": "+i);if(r="crypto",n&&(this[r]=sa[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(hd);else this[r]=!1;else throw Error(Tt+r+": "+i);return this}function kv(e){return new this(e).cos()}function Tv(e){return new this(e).cosh()}function Sd(e){var t,r,i;function n(s){var a,o,l,u=this;if(!(u instanceof n))return new n(s);if(u.constructor=n,Xu(s)){u.s=s.s,I?!s.d||s.e>n.maxE?(u.e=NaN,u.d=null):s.e<n.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;I?a>n.maxE?(u.e=NaN,u.d=null):a<n.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Gi(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),gd.test(s)?Gi(u,s):dv(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,Gi(u,s.toString());throw Error(Tt+s)}if(n.prototype=y,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Rv,n.clone=Sd,n.isDecimal=Xu,n.abs=pv,n.acos=hv,n.acosh=mv,n.add=gv,n.asin=yv,n.asinh=bv,n.atan=xv,n.atanh=vv,n.atan2=wv,n.cbrt=Sv,n.ceil=Ev,n.clamp=Av,n.cos=kv,n.cosh=Tv,n.div=Iv,n.exp=Ov,n.floor=_v,n.hypot=qv,n.ln=Cv,n.log=Pv,n.log10=Dv,n.log2=Nv,n.max=Uv,n.min=Lv,n.mod=Fv,n.mul=Mv,n.pow=jv,n.random=$v,n.round=Vv,n.sign=Bv,n.sin=Gv,n.sinh=Hv,n.sqrt=Qv,n.sub=Kv,n.sum=zv,n.tan=Jv,n.tanh=Wv,n.trunc=Yv,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function Iv(e,t){return new this(e).div(t)}function Ov(e){return new this(e).exp()}function _v(e){return S(e=new this(e),e.e+1,3)}function qv(){var e,t,r=new this(0);for(I=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return I=!0,new this(1/0);r=t}return I=!0,r.sqrt()}function Xu(e){return e instanceof Yt||e&&e.toStringTag===md||!1}function Cv(e){return new this(e).ln()}function Pv(e,t){return new this(e).log(t)}function Nv(e){return new this(e).log(2)}function Dv(e){return new this(e).log(10)}function Uv(){return xd(this,arguments,-1)}function Lv(){return xd(this,arguments,1)}function Fv(e,t){return new this(e).mod(t)}function Mv(e,t){return new this(e).mul(t)}function jv(e,t){return new this(e).pow(t)}function $v(e){var t,r,i,n,s=0,a=new this(1),o=[];if(e===void 0?e=this.precision:ke(e,1,It),i=Math.ceil(e/R),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));s<i;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);s<i;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(n%1e7),s+=4);s=i/4}else throw Error(hd);else for(;s<i;)o[s++]=Math.random()*1e7|0;for(i=o[--s],e%=R,i&&e&&(n=le(10,R-e),o[s]=(i/n|0)*n);o[s]===0;s--)o.pop();if(s<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=R)o.shift();for(i=1,n=o[0];n>=10;n/=10)i++;i<R&&(r-=R-i)}return a.e=r,a.d=o,a}function Vv(e){return S(e=new this(e),e.e+1,this.rounding)}function Bv(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Gv(e){return new this(e).sin()}function Hv(e){return new this(e).sinh()}function Qv(e){return new this(e).sqrt()}function Kv(e,t){return new this(e).sub(t)}function zv(){var e=0,t=arguments,r=new this(t[e]);for(I=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return I=!0,S(r,this.precision,this.rounding)}function Jv(e){return new this(e).tan()}function Wv(e){return new this(e).tanh()}function Yv(e){return S(e=new this(e),e.e+1,1)}y[Symbol.for("nodejs.util.inspect.custom")]=y.toString;y[Symbol.toStringTag]="Decimal";var Yt=y.constructor=Sd(sa);Xi=new Yt(Xi);Zi=new Yt(Zi);var dn=Yt;function Ca(e){return Yt.isDecimal(e)?!0:e!==null&&typeof e=="object"&&typeof e.s=="number"&&typeof e.e=="number"&&typeof e.toFixed=="function"&&Array.isArray(e.d)}var Ed={};Wt(Ed,{ModelAction:()=>fn,datamodelEnumToSchemaEnum:()=>Xv});function Xv(e){return{name:e.name,values:e.values.map(t=>t.name)}}var fn=(e=>(e.findUnique="findUnique",e.findUniqueOrThrow="findUniqueOrThrow",e.findFirst="findFirst",e.findFirstOrThrow="findFirstOrThrow",e.findMany="findMany",e.create="create",e.createMany="createMany",e.createManyAndReturn="createManyAndReturn",e.update="update",e.updateMany="updateMany",e.updateManyAndReturn="updateManyAndReturn",e.upsert="upsert",e.delete="delete",e.deleteMany="deleteMany",e.groupBy="groupBy",e.count="count",e.aggregate="aggregate",e.findRaw="findRaw",e.aggregateRaw="aggregateRaw",e))(fn||{}),Zv=Q(Nc()),ew=Q(require("node:fs")),tw={keyword:Kt,entity:Kt,value:e=>$e($r(e)),punctuation:$r,directive:Kt,function:Kt,variable:e=>$e($r(e)),string:e=>$e(Kr(e)),boolean:ti,number:Kt,comment:Sa},rw=e=>e,Mi={},iw=0,P={manual:Mi.Prism&&Mi.Prism.manual,disableWorkerMessageHandler:Mi.Prism&&Mi.Prism.disableWorkerMessageHandler,util:{encode:function(e){if(e instanceof We){let t=e;return new We(t.type,P.util.encode(t.content),t.alias)}else return Array.isArray(e)?e.map(P.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++iw}),e.__id},clone:function e(t,r){let i,n,s=P.util.type(t);switch(r=r||{},s){case"Object":if(n=P.util.objId(t),r[n])return r[n];i={},r[n]=i;for(let a in t)t.hasOwnProperty(a)&&(i[a]=e(t[a],r));return i;case"Array":return n=P.util.objId(t),r[n]?r[n]:(i=[],r[n]=i,t.forEach(function(a,o){i[o]=e(a,r)}),i);default:return t}}},languages:{extend:function(e,t){let r=P.util.clone(P.languages[e]);for(let i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){i=i||P.languages;let n=i[e],s={};for(let o in n)if(n.hasOwnProperty(o)){if(o==t)for(let l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);r.hasOwnProperty(o)||(s[o]=n[o])}let a=i[e];return i[e]=s,P.languages.DFS(P.languages,function(o,l){l===a&&o!=e&&(this[o]=s)}),s},DFS:function e(t,r,i,n){n=n||{};let s=P.util.objId;for(let a in t)if(t.hasOwnProperty(a)){r.call(t,a,t[a],i||a);let o=t[a],l=P.util.type(o);l==="Object"&&!n[s(o)]?(n[s(o)]=!0,e(o,r,null,n)):l==="Array"&&!n[s(o)]&&(n[s(o)]=!0,e(o,r,a,n))}}},plugins:{},highlight:function(e,t,r){let i={code:e,grammar:t,language:r};return P.hooks.run("before-tokenize",i),i.tokens=P.tokenize(i.code,i.grammar),P.hooks.run("after-tokenize",i),We.stringify(P.util.encode(i.tokens),i.language)},matchGrammar:function(e,t,r,i,n,s,a){for(let h in r){if(!r.hasOwnProperty(h)||!r[h])continue;if(h==a)return;let E=r[h];E=P.util.type(E)==="Array"?E:[E];for(let _=0;_<E.length;++_){let C=E[_],N=C.inside,G=!!C.lookbehind,Ae=!!C.greedy,T=0,b=C.alias;if(Ae&&!C.pattern.global){let A=C.pattern.toString().match(/[imuy]*$/)[0];C.pattern=RegExp(C.pattern.source,A+"g")}C=C.pattern||C;for(let A=i,O=n;A<t.length;O+=t[A].length,++A){let B=t[A];if(t.length>e.length)return;if(B instanceof We)continue;if(Ae&&A!=t.length-1){C.lastIndex=O;var d=C.exec(e);if(!d)break;var c=d.index+(G?d[1].length:0),f=d.index+d[0].length,o=A,l=O;for(let F=t.length;o<F&&(l<f||!t[o].type&&!t[o-1].greedy);++o)l+=t[o].length,c>=l&&(++A,O=l);if(t[A]instanceof We)continue;u=o-A,B=e.slice(O,l),d.index-=O}else{C.lastIndex=0;var d=C.exec(B),u=1}if(!d){if(s)break;continue}G&&(T=d[1]?d[1].length:0);var c=d.index+T,d=d[0].slice(T),f=c+d.length,p=B.slice(0,c),g=B.slice(f);let M=[A,u];p&&(++A,O+=p.length,M.push(p));let D=new We(h,N?P.tokenize(d,N):d,b,d,Ae);if(M.push(D),g&&M.push(g),Array.prototype.splice.apply(t,M),u!=1&&P.matchGrammar(e,t,r,A,O,!0,h),s)break}}}},tokenize:function(e,t){let r=[e],i=t.rest;if(i){for(let n in i)t[n]=i[n];delete t.rest}return P.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){let r=P.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){let r=P.hooks.all[e];if(!(!r||!r.length))for(var i=0,n;n=r[i++];)n(t)}},Token:We};P.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};P.languages.javascript=P.languages.extend("clike",{"class-name":[P.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});P.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;P.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:P.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:P.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:P.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:P.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});P.languages.markup&&P.languages.markup.tag.addInlined("script","javascript");P.languages.js=P.languages.javascript;P.languages.typescript=P.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});P.languages.ts=P.languages.typescript;function We(e,t,r,i,n){this.type=e,this.content=t,this.alias=r,this.length=(i||"").length|0,this.greedy=!!n}We.stringify=function(e,t){return typeof e=="string"?e:Array.isArray(e)?e.map(function(r){return We.stringify(r,t)}).join(""):nw(e.type)(e.content)};function nw(e){return tw[e]||rw}function sw(e){return aw(e,P.languages.javascript)}function aw(e,t){return P.tokenize(e,t).map(r=>We.stringify(r)).join("")}function ow(e){return Ux(e)}var lw=class Ht{firstLineNumber;lines;static read(t){let r;try{r=ew.default.readFileSync(t,"utf-8")}catch{return null}return Ht.fromContent(r)}static fromContent(t){let r=t.split(/\r?\n/);return new Ht(1,r)}constructor(t,r){this.firstLineNumber=t,this.lines=r}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(t,r){if(t<this.firstLineNumber||t>this.lines.length+this.firstLineNumber)return this;let i=t-this.firstLineNumber,n=[...this.lines];return n[i]=r(n[i]),new Ht(this.firstLineNumber,n)}mapLines(t){return new Ht(this.firstLineNumber,this.lines.map((r,i)=>t(r,this.firstLineNumber+i)))}lineAt(t){return this.lines[t-this.firstLineNumber]}prependSymbolAt(t,r){return this.mapLines((i,n)=>n===t?`${r} ${i}`:`  ${i}`)}slice(t,r){let i=this.lines.slice(t-1,r).join(`
`);return new Ht(t,ow(i).split(`
`))}highlight(){let t=sw(this.toString());return new Ht(this.firstLineNumber,t.split(`
`))}toString(){return this.lines.join(`
`)}},uw={red:zt,gray:Sa,dim:ei,bold:$e,underline:Ce,highlightSource:e=>e.highlight()},cw={red:e=>e,gray:e=>e,dim:e=>e,bold:e=>e,underline:e=>e,highlightSource:e=>e};function dw({message:e,originalMethod:t,isPanic:r,callArguments:i}){return{functionName:`prisma.${t}()`,message:e,isPanic:r??!1,callArguments:i}}function fw({callsite:e,message:t,originalMethod:r,isPanic:i,callArguments:n},s){let a=dw({message:t,originalMethod:r,isPanic:i,callArguments:n});if(!e||typeof window<"u"||process.env.NODE_ENV==="production")return a;let o=e.getLocation();if(!o||!o.lineNumber||!o.columnNumber)return a;let l=Math.max(1,o.lineNumber-3),u=lw.read(o.fileName)?.slice(l,o.lineNumber),c=u?.lineAt(o.lineNumber);if(u&&c){let d=hw(c),f=pw(c);if(!f)return a;a.functionName=`${f.code})`,a.location=o,i||(u=u.mapLineAt(o.lineNumber,g=>g.slice(0,f.openingBraceIndex))),u=s.highlightSource(u);let p=String(u.lastLineNumber).length;if(a.contextLines=u.mapLines((g,h)=>s.gray(String(h).padStart(p))+" "+g).mapLines(g=>s.dim(g)).prependSymbolAt(o.lineNumber,s.bold(s.red("\u2192"))),n){let g=d+p+1;g+=2,a.callArguments=(0,Zv.default)(n,g).slice(g)}}return a}function pw(e){let t=Object.keys(fn).join("|"),r=new RegExp(String.raw`\.(${t})\(`).exec(e);if(r){let i=r.index+r[0].length,n=e.lastIndexOf(" ",r.index)+1;return{code:e.slice(n,i),openingBraceIndex:i}}return null}function hw(e){let t=0;for(let r=0;r<e.length;r++){if(e.charAt(r)!==" ")return t;t++}return t}function mw({functionName:e,location:t,message:r,isPanic:i,contextLines:n,callArguments:s},a){let o=[""],l=t?" in":":";if(i?(o.push(a.red(`Oops, an unknown error occurred! This is ${a.bold("on us")}, you did nothing wrong.`)),o.push(a.red(`It occurred in the ${a.bold(`\`${e}\``)} invocation${l}`))):o.push(a.red(`Invalid ${a.bold(`\`${e}\``)} invocation${l}`)),t&&o.push(a.underline(gw(t))),n){o.push("");let u=[n.toString()];s&&(u.push(s),u.push(a.dim(")"))),o.push(u.join("")),s&&o.push("")}else o.push(""),s&&o.push(s),o.push("");return o.push(r),o.join(`
`)}function gw(e){let t=[e.fileName];return e.lineNumber&&t.push(String(e.lineNumber)),e.columnNumber&&t.push(String(e.columnNumber)),t.join(":")}function Ad(e){let t=e.showColors?uw:cw,r;return r=fw(e,t),mw(r,t)}var yw=Q(Dc());function bw(e,t,r){let i=Rd(e),n=xw(i),s=ww(n);s?qd(s,t,r):t.addErrorMessage(()=>"Unknown error")}function Rd(e){return e.errors.flatMap(t=>t.kind==="Union"?Rd(t):[t])}function xw(e){let t=new Map,r=[];for(let i of e){if(i.kind!=="InvalidArgumentType"){r.push(i);continue}let n=`${i.selectionPath.join(".")}:${i.argumentPath.join(".")}`,s=t.get(n);s?t.set(n,{...i,argument:{...i.argument,typeNames:vw(s.argument.typeNames,i.argument.typeNames)}}):t.set(n,i)}return r.push(...t.values()),r}function vw(e,t){return[...new Set(e.concat(t))]}function ww(e){return rv(e,(t,r)=>{let i=Zu(t),n=Zu(r);return i!==n?i-n:ec(t)-ec(r)})}function Zu(e){let t=0;return Array.isArray(e.selectionPath)&&(t+=e.selectionPath.length),Array.isArray(e.argumentPath)&&(t+=e.argumentPath.length),t}function ec(e){switch(e.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var tt=class{constructor(e,t){this.name=e,this.value=t}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(e){let{colors:{green:t}}=e.context;e.addMarginSymbol(t(this.isRequired?"+":"?")),e.write(t(this.name)),this.isRequired||e.write(t("?")),e.write(t(": ")),typeof this.value=="string"?e.write(t(this.value)):e.write(this.value)}};Jb();var kd=class{constructor(e=0,t){this.context=t,this.currentIndent=e}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(e){return typeof e=="string"?this.currentLine+=e:e.write(this),this}writeJoined(e,t,r=(i,n)=>n.write(i)){let i=t.length-1;for(let n=0;n<t.length;n++)r(t[n],this),n!==i&&this.write(e);return this}writeLine(e){return this.write(e).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let e=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,e?.(),this}withIndent(e){return this.indent(),e(this),this.unindent(),this}afterNextNewline(e){return this.afterNextNewLineCallback=e,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(e){return this.marginSymbol=e,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let e=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+e.slice(1):e}};zb();var Sw=class{constructor(e){this.value=e}write(e){e.write(this.value)}markAsError(){this.value.markAsError()}},ji=e=>e,Td={bold:ji,red:ji,green:ji,dim:ji,enabled:!1},Ew={bold:$e,red:zt,green:Kr,dim:ei,enabled:!0},Pa={write(e){e.writeLine(",")}},pn=class{constructor(e){this.contents=e}isUnderlined=!1;color=e=>e;underline(){return this.isUnderlined=!0,this}setColor(e){return this.color=e,this}write(e){let t=e.getCurrentLineLength();e.write(this.color(this.contents)),this.isUnderlined&&e.afterNextNewline(()=>{e.write(" ".repeat(t)).writeLine(this.color("~".repeat(this.contents.length)))})}},Na=class{hasError=!1;markAsError(){return this.hasError=!0,this}},Id=class extends Na{items=[];addItem(e){return this.items.push(new Sw(e)),this}getField(e){return this.items[e]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(e=>e.value.getPrintWidth()))+2}write(e){if(this.items.length===0){this.writeEmpty(e);return}this.writeWithItems(e)}writeEmpty(e){let t=new pn("[]");this.hasError&&t.setColor(e.context.colors.red).underline(),e.write(t)}writeWithItems(e){let{colors:t}=e.context;e.writeLine("[").withIndent(()=>e.writeJoined(Pa,this.items).newLine()).write("]"),this.hasError&&e.afterNextNewline(()=>{e.writeLine(t.red("~".repeat(this.getPrintWidth())))})}asObject(){}},Od=class Hi extends Na{fields={};suggestions=[];addField(t){this.fields[t.name]=t}addSuggestion(t){this.suggestions.push(t)}getField(t){return this.fields[t]}getDeepField(t){let[r,...i]=t,n=this.getField(r);if(!n)return;let s=n;for(let a of i){let o;if(s.value instanceof Hi?o=s.value.getField(a):s.value instanceof Id&&(o=s.value.getField(Number(a))),!o)return;s=o}return s}getDeepFieldValue(t){return t.length===0?this:this.getDeepField(t)?.value}hasField(t){return!!this.getField(t)}removeAllFields(){this.fields={}}removeField(t){delete this.fields[t]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(t){return this.getField(t)?.value}getDeepSubSelectionValue(t){let r=this;for(let i of t){if(!(r instanceof Hi))return;let n=r.getSubSelectionValue(i);if(!n)return;r=n}return r}getDeepSelectionParent(t){let r=this.getSelectionParent();if(!r)return;let i=r;for(let n of t){let s=i.value.getFieldValue(n);if(!s||!(s instanceof Hi))return;let a=s.getSelectionParent();if(!a)return;i=a}return i}getSelectionParent(){let t=this.getField("select")?.value.asObject();if(t)return{kind:"select",value:t};let r=this.getField("include")?.value.asObject();if(r)return{kind:"include",value:r}}getSubSelectionValue(t){return this.getSelectionParent()?.value.fields[t].value}getPrintWidth(){let t=Object.values(this.fields);return t.length==0?2:Math.max(...t.map(r=>r.getPrintWidth()))+2}write(t){let r=Object.values(this.fields);if(r.length===0&&this.suggestions.length===0){this.writeEmpty(t);return}this.writeWithContents(t,r)}asObject(){return this}writeEmpty(t){let r=new pn("{}");this.hasError&&r.setColor(t.context.colors.red).underline(),t.write(r)}writeWithContents(t,r){t.writeLine("{").withIndent(()=>{t.writeJoined(Pa,[...r,...this.suggestions]).newLine()}),t.write("}"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(t.context.colors.red("~".repeat(this.getPrintWidth())))})}},Re=class extends Na{constructor(e){super(),this.text=e}getPrintWidth(){return this.text.length}write(e){let t=new pn(this.text);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t)}asObject(){}},_d=class{fields=[];addField(e,t){return this.fields.push({write(r){let{green:i,dim:n}=r.context.colors;r.write(i(n(`${e}: ${t}`))).addMarginSymbol(i(n("+")))}}),this}write(e){let{colors:{green:t}}=e.context;e.writeLine(t("{")).withIndent(()=>{e.writeJoined(Pa,this.fields).newLine()}).write(t("}")).addMarginSymbol(t("+"))}};function qd(e,t,r){switch(e.kind){case"MutuallyExclusiveFields":Aw(e,t);break;case"IncludeOnScalar":Rw(e,t);break;case"EmptySelection":kw(e,t,r);break;case"UnknownSelectionField":_w(e,t);break;case"InvalidSelectionValue":qw(e,t);break;case"UnknownArgument":Cw(e,t);break;case"UnknownInputField":Pw(e,t);break;case"RequiredArgumentMissing":Nw(e,t);break;case"InvalidArgumentType":Dw(e,t);break;case"InvalidArgumentValue":Uw(e,t);break;case"ValueTooLarge":Lw(e,t);break;case"SomeFieldsMissing":Fw(e,t);break;case"TooManyFieldsGiven":Mw(e,t);break;case"Union":bw(e,t,r);break;default:throw new Error("not implemented: "+e.kind)}}function Aw(e,t){let r=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();r&&(r.getField(e.firstField)?.markAsError(),r.getField(e.secondField)?.markAsError()),t.addErrorMessage(i=>`Please ${i.bold("either")} use ${i.green(`\`${e.firstField}\``)} or ${i.green(`\`${e.secondField}\``)}, but ${i.red("not both")} at the same time.`)}function Rw(e,t){let[r,i]=dr(e.selectionPath),n=e.outputType,s=t.arguments.getDeepSelectionParent(r)?.value;if(s&&(s.getField(i)?.markAsError(),n))for(let a of n.fields)a.isRelation&&s.addSuggestion(new tt(a.name,"true"));t.addErrorMessage(a=>{let o=`Invalid scalar field ${a.red(`\`${i}\``)} for ${a.bold("include")} statement`;return n?o+=` on model ${a.bold(n.name)}. ${ni(a)}`:o+=".",o+=`
Note that ${a.bold("include")} statements only accept relation fields.`,o})}function kw(e,t,r){let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getField("omit")?.value.asObject();if(n){Tw(e,t,n);return}if(i.hasField("select")){Iw(e,t);return}}if(r?.[on(e.outputType.name)]){Ow(e,t);return}t.addErrorMessage(()=>`Unknown field at "${e.selectionPath.join(".")} selection"`)}function Tw(e,t,r){r.removeAllFields();for(let i of e.outputType.fields)r.addSuggestion(new tt(i.name,"false"));t.addErrorMessage(i=>`The ${i.red("omit")} statement includes every field of the model ${i.bold(e.outputType.name)}. At least one field must be included in the result`)}function Iw(e,t){let r=e.outputType,i=t.arguments.getDeepSelectionParent(e.selectionPath)?.value,n=i?.isEmpty()??!1;i&&(i.removeAllFields(),Nd(i,r)),t.addErrorMessage(s=>n?`The ${s.red("`select`")} statement for type ${s.bold(r.name)} must not be empty. ${ni(s)}`:`The ${s.red("`select`")} statement for type ${s.bold(r.name)} needs ${s.bold("at least one truthy value")}.`)}function Ow(e,t){let r=new _d;for(let n of e.outputType.fields)n.isRelation||r.addField(n.name,"false");let i=new tt("omit",r).makeRequired();if(e.selectionPath.length===0)t.arguments.addSuggestion(i);else{let[n,s]=dr(e.selectionPath),a=t.arguments.getDeepSelectionParent(n)?.value.asObject()?.getField(s);if(a){let o=a?.value.asObject()??new Od;o.addSuggestion(i),a.value=o}}t.addErrorMessage(n=>`The global ${n.red("omit")} configuration excludes every field of the model ${n.bold(e.outputType.name)}. At least one field must be included in the result`)}function _w(e,t){let r=Dd(e.selectionPath,t);if(r.parentKind!=="unknown"){r.field.markAsError();let i=r.parent;switch(r.parentKind){case"select":Nd(i,e.outputType);break;case"include":jw(i,e.outputType);break;case"omit":$w(i,e.outputType);break}}t.addErrorMessage(i=>{let n=[`Unknown field ${i.red(`\`${r.fieldName}\``)}`];return r.parentKind!=="unknown"&&n.push(`for ${i.bold(r.parentKind)} statement`),n.push(`on model ${i.bold(`\`${e.outputType.name}\``)}.`),n.push(ni(i)),n.join(" ")})}function qw(e,t){let r=Dd(e.selectionPath,t);r.parentKind!=="unknown"&&r.field.value.markAsError(),t.addErrorMessage(i=>`Invalid value for selection field \`${i.red(r.fieldName)}\`: ${e.underlyingError}`)}function Cw(e,t){let r=e.argumentPath[0],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&(i.getField(r)?.markAsError(),Vw(i,e.arguments)),t.addErrorMessage(n=>Cd(n,r,e.arguments.map(s=>s.name)))}function Pw(e,t){let[r,i]=dr(e.argumentPath),n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){n.getDeepField(e.argumentPath)?.markAsError();let s=n.getDeepFieldValue(r)?.asObject();s&&Ud(s,e.inputType)}t.addErrorMessage(s=>Cd(s,i,e.inputType.fields.map(a=>a.name)))}function Cd(e,t,r){let i=[`Unknown argument \`${e.red(t)}\`.`],n=Gw(t,r);return n&&i.push(`Did you mean \`${e.green(n)}\`?`),r.length>0&&i.push(ni(e)),i.join(" ")}function Nw(e,t){let r;t.addErrorMessage(l=>r?.value instanceof Re&&r.value.text==="null"?`Argument \`${l.green(s)}\` must not be ${l.red("null")}.`:`Argument \`${l.green(s)}\` is missing.`);let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(!i)return;let[n,s]=dr(e.argumentPath),a=new _d,o=i.getDeepFieldValue(n)?.asObject();if(o){if(r=o.getField(s),r&&o.removeField(s),e.inputTypes.length===1&&e.inputTypes[0].kind==="object"){for(let l of e.inputTypes[0].fields)a.addField(l.name,l.typeNames.join(" | "));o.addSuggestion(new tt(s,a).makeRequired())}else{let l=e.inputTypes.map(Pd).join(" | ");o.addSuggestion(new tt(s,l).makeRequired())}if(e.dependentArgumentPath){i.getDeepField(e.dependentArgumentPath)?.markAsError();let[,l]=dr(e.dependentArgumentPath);t.addErrorMessage(u=>`Argument \`${u.green(s)}\` is required because argument \`${u.green(l)}\` was provided.`)}}}function Pd(e){return e.kind==="list"?`${Pd(e.elementType)}[]`:e.name}function Dw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=hn("or",e.argument.typeNames.map(a=>n.green(a)));return`Argument \`${n.bold(r)}\`: Invalid value provided. Expected ${s}, provided ${n.red(e.inferredType)}.`})}function Uw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=[`Invalid value for argument \`${n.bold(r)}\``];if(e.underlyingError&&s.push(`: ${e.underlyingError}`),s.push("."),e.argument.typeNames.length>0){let a=hn("or",e.argument.typeNames.map(o=>n.green(o)));s.push(` Expected ${a}.`)}return s.join("")})}function Lw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n;if(i){let s=i.getDeepField(e.argumentPath)?.value;s?.markAsError(),s instanceof Re&&(n=s.text)}t.addErrorMessage(s=>{let a=["Unable to fit value"];return n&&a.push(s.red(n)),a.push(`into a 64-bit signed integer for field \`${s.bold(r)}\``),a.join(" ")})}function Fw(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getDeepFieldValue(e.argumentPath)?.asObject();n&&Ud(n,e.inputType)}t.addErrorMessage(n=>{let s=[`Argument \`${n.bold(r)}\` of type ${n.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1?e.constraints.requiredFields?s.push(`${n.green("at least one of")} ${hn("or",e.constraints.requiredFields.map(a=>`\`${n.bold(a)}\``))} arguments.`):s.push(`${n.green("at least one")} argument.`):s.push(`${n.green(`at least ${e.constraints.minFieldCount}`)} arguments.`),s.push(ni(n)),s.join(" ")})}function Mw(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n=[];if(i){let s=i.getDeepFieldValue(e.argumentPath)?.asObject();s&&(s.markAsError(),n=Object.keys(s.getFields()))}t.addErrorMessage(s=>{let a=[`Argument \`${s.bold(r)}\` of type ${s.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1&&e.constraints.maxFieldCount==1?a.push(`${s.green("exactly one")} argument,`):e.constraints.maxFieldCount==1?a.push(`${s.green("at most one")} argument,`):a.push(`${s.green(`at most ${e.constraints.maxFieldCount}`)} arguments,`),a.push(`but you provided ${hn("and",n.map(o=>s.red(o)))}. Please choose`),e.constraints.maxFieldCount===1?a.push("one."):a.push(`${e.constraints.maxFieldCount}.`),a.join(" ")})}function Nd(e,t){for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new tt(r.name,"true"))}function jw(e,t){for(let r of t.fields)r.isRelation&&!e.hasField(r.name)&&e.addSuggestion(new tt(r.name,"true"))}function $w(e,t){for(let r of t.fields)!e.hasField(r.name)&&!r.isRelation&&e.addSuggestion(new tt(r.name,"true"))}function Vw(e,t){for(let r of t)e.hasField(r.name)||e.addSuggestion(new tt(r.name,r.typeNames.join(" | ")))}function Dd(e,t){let[r,i]=dr(e),n=t.arguments.getDeepSubSelectionValue(r)?.asObject();if(!n)return{parentKind:"unknown",fieldName:i};let s=n.getFieldValue("select")?.asObject(),a=n.getFieldValue("include")?.asObject(),o=n.getFieldValue("omit")?.asObject(),l=s?.getField(i);return s&&l?{parentKind:"select",parent:s,field:l,fieldName:i}:(l=a?.getField(i),a&&l?{parentKind:"include",field:l,parent:a,fieldName:i}:(l=o?.getField(i),o&&l?{parentKind:"omit",field:l,parent:o,fieldName:i}:{parentKind:"unknown",fieldName:i}))}function Ud(e,t){if(t.kind==="object")for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new tt(r.name,r.typeNames.join(" | ")))}function dr(e){let t=[...e],r=t.pop();if(!r)throw new Error("unexpected empty path");return[t,r]}function ni({green:e,enabled:t}){return"Available options are "+(t?`listed in ${e("green")}`:"marked with ?")+"."}function hn(e,t){if(t.length===1)return t[0];let r=[...t],i=r.pop();return`${r.join(", ")} ${e} ${i}`}var Bw=3;function Gw(e,t){let r=1/0,i;for(let n of t){let s=(0,yw.default)(e,n);s>Bw||s<r&&(r=s,i=n)}return i}var Ld=class{modelName;name;typeName;isList;isEnum;constructor(e,t,r,i,n){this.modelName=e,this.name=t,this.typeName=r,this.isList=i,this.isEnum=n}_toGraphQLInputType(){let e=this.isList?"List":"",t=this.isEnum?"Enum":"";return`${e}${t}${this.typeName}FieldRefInput<${this.modelName}>`}};function Da(e){return e instanceof Ld}var Qi=Symbol(),Us=new WeakMap,mn=class{constructor(e){e===Qi?Us.set(this,`Prisma.${this._getName()}`):Us.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return Us.get(this)}},Ua=class extends mn{_getNamespace(){return"NullTypes"}},la=class extends Ua{#e};La(la,"DbNull");var ua=class extends Ua{#e};La(ua,"JsonNull");var ca=class extends Ua{#e};La(ca,"AnyNull");var Fd={classes:{DbNull:la,JsonNull:ua,AnyNull:ca},instances:{DbNull:new la(Qi),JsonNull:new ua(Qi),AnyNull:new ca(Qi)}};function La(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var tc=": ",Hw=class{constructor(e,t){this.name=e,this.value=t}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+tc.length}write(e){let t=new pn(this.name);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t).write(tc).write(this.value)}},Qw=class{arguments;errorMessages=[];constructor(e){this.arguments=e}write(e){e.write(this.arguments)}addErrorMessage(e){this.errorMessages.push(e)}renderAllMessages(e){return this.errorMessages.map(t=>t(e)).join(`
`)}};function Fa(e){return new Qw(Md(e))}function Md(e){let t=new Od;for(let[r,i]of Object.entries(e)){let n=new Hw(r,jd(i));t.addField(n)}return t}function jd(e){if(typeof e=="string")return new Re(JSON.stringify(e));if(typeof e=="number"||typeof e=="boolean")return new Re(String(e));if(typeof e=="bigint")return new Re(`${e}n`);if(e===null)return new Re("null");if(e===void 0)return new Re("undefined");if(Ca(e))return new Re(`new Prisma.Decimal("${e.toFixed()}")`);if(e instanceof Uint8Array)return Buffer.isBuffer(e)?new Re(`Buffer.alloc(${e.byteLength})`):new Re(`new Uint8Array(${e.byteLength})`);if(e instanceof Date){let t=dd(e)?e.toISOString():"Invalid Date";return new Re(`new Date("${t}")`)}return e instanceof mn?new Re(`Prisma.${e._getName()}`):Da(e)?new Re(`prisma.${on(e.modelName)}.$fields.${e.name}`):Array.isArray(e)?Kw(e):typeof e=="object"?Md(e):new Re(Object.prototype.toString.call(e))}function Kw(e){let t=new Id;for(let r of e)t.addItem(jd(r));return t}function $d(e,t){let r=t==="pretty"?Ew:Td,i=e.renderAllMessages(r),n=new kd(0,{colors:r}).write(e).toString();return{message:i,args:n}}function Vd({args:e,errors:t,errorFormat:r,callsite:i,originalMethod:n,clientVersion:s,globalOmit:a}){let o=Fa(e);for(let d of t)qd(d,o,a);let{message:l,args:u}=$d(o,r),c=Ad({message:l,callsite:i,originalMethod:n,showColors:r==="pretty",callArguments:u});throw new ut(c,{clientVersion:s})}function si(e){return e.replace(/^./,t=>t.toLowerCase())}function zw(e,t,r){let i=si(r);return!t.result||!(t.result.$allModels||t.result[i])?e:Jw({...e,...rc(t.name,e,t.result.$allModels),...rc(t.name,e,t.result[i])})}function Jw(e){let t=new Gr,r=(i,n)=>t.getOrCreate(i,()=>n.has(i)?[i]:(n.add(i),e[i]?e[i].needs.flatMap(s=>r(s,n)):[i]));return ld(e,i=>({...i,needs:r(i.name,new Set)}))}function rc(e,t,r){return r?ld(r,({needs:i,compute:n},s)=>({name:s,needs:i?Object.keys(i).filter(a=>i[a]):[],compute:Ww(t,s,n)})):{}}function Ww(e,t,r){let i=e?.[t]?.compute;return i?n=>r({...n,[t]:i(n)}):r}function Yw(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(e[i.name])for(let n of i.needs)r[n]=!0;return r}function Xw(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(!e[i.name])for(let n of i.needs)delete r[n];return r}var ic=class{constructor(e,t){this.extension=e,this.previous=t}computedFieldsCache=new Gr;modelExtensionsCache=new Gr;queryCallbacksCache=new Gr;clientExtensions=ia(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=ia(()=>{let e=this.previous?.getAllBatchQueryCallbacks()??[],t=this.extension.query?.$__internalBatch;return t?e.concat(t):e});getAllComputedFields(e){return this.computedFieldsCache.getOrCreate(e,()=>zw(this.previous?.getAllComputedFields(e),this.extension,e))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(e){return this.modelExtensionsCache.getOrCreate(e,()=>{let t=si(e);return!this.extension.model||!(this.extension.model[t]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(e):{...this.previous?.getAllModelExtensions(e),...this.extension.model.$allModels,...this.extension.model[t]}})}getAllQueryCallbacks(e,t){return this.queryCallbacksCache.getOrCreate(`${e}:${t}`,()=>{let r=this.previous?.getAllQueryCallbacks(e,t)??[],i=[],n=this.extension.query;return!n||!(n[e]||n.$allModels||n[t]||n.$allOperations)?r:(n[e]!==void 0&&(n[e][t]!==void 0&&i.push(n[e][t]),n[e].$allOperations!==void 0&&i.push(n[e].$allOperations)),e!=="$none"&&n.$allModels!==void 0&&(n.$allModels[t]!==void 0&&i.push(n.$allModels[t]),n.$allModels.$allOperations!==void 0&&i.push(n.$allModels.$allOperations)),n[t]!==void 0&&i.push(n[t]),n.$allOperations!==void 0&&i.push(n.$allOperations),r.concat(i))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},Bd=class Ki{constructor(t){this.head=t}static empty(){return new Ki}static single(t){return new Ki(new ic(t))}isEmpty(){return this.head===void 0}append(t){return new Ki(new ic(t,this.head))}getAllComputedFields(t){return this.head?.getAllComputedFields(t)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(t){return this.head?.getAllModelExtensions(t)}getAllQueryCallbacks(t,r){return this.head?.getAllQueryCallbacks(t,r)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},Gd=class{constructor(e){this.name=e}};function Zw(e){return e instanceof Gd}function eS(e){return new Gd(e)}var Hd=Symbol(),Qd=class{constructor(e){if(e!==Hd)throw new Error("Skip instance can not be constructed directly")}ifUndefined(e){return e===void 0?Kd:e}},Kd=new Qd(Hd);function Jt(e){return e instanceof Qd}var tS={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},zd="explicitly `undefined` values are not allowed";function Jd({modelName:e,action:t,args:r,runtimeDataModel:i,extensions:n=Bd.empty(),callsite:s,clientMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c}){let d=new cS({runtimeDataModel:i,modelName:e,action:t,rootArgs:r,callsite:s,extensions:n,selectionPath:[],argumentPath:[],originalMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c});return{modelName:e,action:tS[t],query:Zr(r,d)}}function Zr({select:e,include:t,...r}={},i){let n=r.omit;return delete r.omit,{arguments:Yd(r,i),selection:rS(e,t,n,i)}}function rS(e,t,r,i){return e?(t?i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:i.getSelectionPath()}):r&&i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:i.getSelectionPath()}),aS(e,i)):iS(i,t,r)}function iS(e,t,r){let i={};return e.modelOrType&&!e.isRawAction()&&(i.$composites=!0,i.$scalars=!0),t&&nS(i,t,e),sS(i,r,e),i}function nS(e,t,r){for(let[i,n]of Object.entries(t)){if(Jt(n))continue;let s=r.nestSelection(i);if(Ma(n,s),n===!1||n===void 0){e[i]=!1;continue}let a=r.findField(i);if(a&&a.kind!=="object"&&r.throwValidationError({kind:"IncludeOnScalar",selectionPath:r.getSelectionPath().concat(i),outputType:r.getOutputTypeDescription()}),a){e[i]=Zr(n===!0?{}:n,s);continue}if(n===!0){e[i]=!0;continue}e[i]=Zr(n,s)}}function sS(e,t,r){let i=r.getComputedFields(),n={...r.getGlobalOmit(),...t},s=Xw(n,i);for(let[a,o]of Object.entries(s)){if(Jt(o))continue;Ma(o,r.nestSelection(a));let l=r.findField(a);i?.[a]&&!l||(e[a]=!o)}}function aS(e,t){let r={},i=t.getComputedFields(),n=Yw(e,i);for(let[s,a]of Object.entries(n)){if(Jt(a))continue;let o=t.nestSelection(s);Ma(a,o);let l=t.findField(s);if(!(i?.[s]&&!l)){if(a===!1||a===void 0||Jt(a)){r[s]=!1;continue}if(a===!0){l?.kind==="object"?r[s]=Zr({},o):r[s]=!0;continue}r[s]=Zr(a,o)}}return r}function Wd(e,t){if(e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="bigint")return{$type:"BigInt",value:String(e)};if(_a(e)){if(dd(e))return{$type:"DateTime",value:e.toISOString()};t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(Zw(e))return{$type:"Param",value:e.name};if(Da(e))return{$type:"FieldRef",value:{_ref:e.name,_container:e.modelName}};if(Array.isArray(e))return oS(e,t);if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{$type:"Bytes",value:Buffer.from(r,i,n).toString("base64")}}if(lS(e))return e.values;if(Ca(e))return{$type:"Decimal",value:e.toFixed()};if(e instanceof mn){if(e!==Fd.instances[e._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:e._getName()}}if(uS(e))return e.toJSON();if(typeof e=="object")return Yd(e,t);t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(e)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function Yd(e,t){if(e.$type)return{$type:"Raw",value:e};let r={};for(let i in e){let n=e[i],s=t.nestArgument(i);Jt(n)||(n!==void 0?r[i]=Wd(n,s):t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidArgumentValue",argumentPath:s.getArgumentPath(),selectionPath:t.getSelectionPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:zd}))}return r}function oS(e,t){let r=[];for(let i=0;i<e.length;i++){let n=t.nestArgument(String(i)),s=e[i];if(s===void 0||Jt(s)){let a=s===void 0?"undefined":"Prisma.skip";t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:n.getSelectionPath(),argumentPath:n.getArgumentPath(),argument:{name:`${t.getArgumentName()}[${i}]`,typeNames:[]},underlyingError:`Can not use \`${a}\` value within array. Use \`null\` or filter out \`${a}\` values`})}r.push(Wd(s,n))}return r}function lS(e){return typeof e=="object"&&e!==null&&e.__prismaRawParameters__===!0}function uS(e){return typeof e=="object"&&e!==null&&typeof e.toJSON=="function"}function Ma(e,t){e===void 0&&t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidSelectionValue",selectionPath:t.getSelectionPath(),underlyingError:zd})}var cS=class da{constructor(t){this.params=t,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(t){Vd({errors:[t],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(t=>({name:t.name,typeName:"boolean",isRelation:t.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(t){return this.params.previewFeatures.includes(t)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(t){return this.modelOrType?.fields.find(r=>r.name===t)}nestSelection(t){let r=this.findField(t),i=r?.kind==="object"?r.type:void 0;return new da({...this.params,modelName:i,selectionPath:this.params.selectionPath.concat(t)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[on(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:Oa(this.params.action,"Unknown action")}}nestArgument(t){return new da({...this.params,argumentPath:this.params.argumentPath.concat(t)})}};function nc(e){if(!e._hasPreviewFlag("metrics"))throw new ut("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:e._clientVersion})}var Xd=class{_client;constructor(e){this._client=e}prometheus(e){return nc(this._client),this._client._engine.metrics({format:"prometheus",...e})}json(e){return nc(this._client),this._client._engine.metrics({format:"json",...e})}};function dS(e,t){let r=ia(()=>fS(t));Object.defineProperty(e,"dmmf",{get:()=>r.get()})}function fS(e){return{datamodel:{models:Ls(e.models),enums:Ls(e.enums),types:Ls(e.types)}}}function Ls(e){return Object.entries(e).map(([t,r])=>({name:t,...r}))}var Fs=new WeakMap,tn="$$PrismaTypedSql",Zd=class{constructor(e,t){Fs.set(this,{sql:e,values:t}),Object.defineProperty(this,tn,{value:tn})}get sql(){return Fs.get(this).sql}get values(){return Fs.get(this).values}};function pS(e){return(...t)=>new Zd(e,t)}function ef(e){return e!=null&&e[tn]===tn}var hS=Q(Pc()),mS=require("node:async_hooks"),gS=require("node:events"),yS=Q(require("node:fs")),Ms=Q(require("node:path")),Ot=class fa{constructor(t,r){if(t.length-1!==r.length)throw t.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${t.length} strings to have ${t.length-1} values`);let i=r.reduce((a,o)=>a+(o instanceof fa?o.values.length:1),0);this.values=new Array(i),this.strings=new Array(i+1),this.strings[0]=t[0];let n=0,s=0;for(;n<r.length;){let a=r[n++],o=t[n];if(a instanceof fa){this.strings[s]+=a.strings[0];let l=0;for(;l<a.values.length;)this.values[s++]=a.values[l++],this.strings[s]=a.strings[l];this.strings[s]+=o}else this.values[s++]=a,this.strings[s]=o}}get sql(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`?${this.strings[r++]}`;return i}get statement(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`:${r}${this.strings[r++]}`;return i}get text(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`$${r}${this.strings[r++]}`;return i}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function bS(e,t=",",r="",i=""){if(e.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new Ot([r,...Array(e.length-1).fill(t),i],e)}function tf(e){return new Ot([e],[])}var xS=tf("");function vS(e,...t){return new Ot(e,t)}function rf(e){return{getKeys(){return Object.keys(e)},getPropertyValue(t){return e[t]}}}function Ze(e,t){return{getKeys(){return[e]},getPropertyValue(){return t()}}}function ja(e){let t=new Gr;return{getKeys(){return e.getKeys()},getPropertyValue(r){return t.getOrCreate(r,()=>e.getPropertyValue(r))},getPropertyDescriptor(r){return e.getPropertyDescriptor?.(r)}}}var pa={enumerable:!0,configurable:!0,writable:!0};function nf(e){let t=new Set(e);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>pa,has:(r,i)=>t.has(i),set:(r,i,n)=>t.add(i)&&Reflect.set(r,i,n),ownKeys:()=>[...t]}}var sc=Symbol.for("nodejs.util.inspect.custom");function fr(e,t){let r=wS(t),i=new Set,n=new Proxy(e,{get(s,a){if(i.has(a))return s[a];let o=r.get(a);return o?o.getPropertyValue(a):s[a]},has(s,a){if(i.has(a))return!0;let o=r.get(a);return o?o.has?.(a)??!0:Reflect.has(s,a)},ownKeys(s){let a=ac(Reflect.ownKeys(s),r),o=ac(Array.from(r.keys()),r);return[...new Set([...a,...o,...i])]},set(s,a,o){return r.get(a)?.getPropertyDescriptor?.(a)?.writable===!1?!1:(i.add(a),Reflect.set(s,a,o))},getOwnPropertyDescriptor(s,a){let o=Reflect.getOwnPropertyDescriptor(s,a);if(o&&!o.configurable)return o;let l=r.get(a);return l?l.getPropertyDescriptor?{...pa,...l?.getPropertyDescriptor(a)}:pa:o},defineProperty(s,a,o){return i.add(a),Reflect.defineProperty(s,a,o)},getPrototypeOf:()=>Object.prototype});return n[sc]=function(){let s={...this};return delete s[sc],s},n}function wS(e){let t=new Map;for(let r of e){let i=r.getKeys();for(let n of i)t.set(n,r)}return t}function ac(e,t){return e.filter(r=>t.get(r)?.has?.(r)??!0)}function ha(e){return{getKeys(){return e},has(){return!1},getPropertyValue(){}}}function $a(e,t){return{batch:e,transaction:t?.kind==="batch"?{isolationLevel:t.options.isolationLevel}:void 0}}function SS(e){if(e===void 0)return"";let t=Fa(e);return new kd(0,{colors:Td}).write(t).toString()}var ES="P2037";function Va({error:e,user_facing_error:t},r,i){return t.error_code?new kt(AS(t,i),{code:t.error_code,clientVersion:r,meta:t.meta,batchRequestIdx:t.batch_request_idx}):new Oe(e,{clientVersion:r,batchRequestIdx:t.batch_request_idx})}function AS(e,t){let r=e.message;return(t==="postgresql"||t==="postgres"||t==="mysql")&&e.error_code===ES&&(r+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),r}var ai="<unknown>";function RS(e){var t=e.split(`
`);return t.reduce(function(r,i){var n=IS(i)||_S(i)||PS(i)||LS(i)||DS(i);return n&&r.push(n),r},[])}var kS=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,TS=/\((\S*)(?::(\d+))(?::(\d+))\)/;function IS(e){var t=kS.exec(e);if(!t)return null;var r=t[2]&&t[2].indexOf("native")===0,i=t[2]&&t[2].indexOf("eval")===0,n=TS.exec(t[2]);return i&&n!=null&&(t[2]=n[1],t[3]=n[2],t[4]=n[3]),{file:r?null:t[2],methodName:t[1]||ai,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var OS=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function _S(e){var t=OS.exec(e);return t?{file:t[2],methodName:t[1]||ai,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var qS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,CS=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function PS(e){var t=qS.exec(e);if(!t)return null;var r=t[3]&&t[3].indexOf(" > eval")>-1,i=CS.exec(t[3]);return r&&i!=null&&(t[3]=i[1],t[4]=i[2],t[5]=null),{file:t[3],methodName:t[1]||ai,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var NS=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function DS(e){var t=NS.exec(e);return t?{file:t[3],methodName:t[1]||ai,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var US=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function LS(e){var t=US.exec(e);return t?{file:t[2],methodName:t[1]||ai,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var FS=class{getLocation(){return null}},MS=class{_error;constructor(){this._error=new Error}getLocation(){let e=this._error.stack;if(!e)return null;let t=RS(e).find(r=>{if(!r.file)return!1;let i=Yx(r.file);return i!=="<anonymous>"&&!i.includes("@prisma")&&!i.includes("/packages/client/src/runtime/")&&!i.endsWith("/runtime/binary.js")&&!i.endsWith("/runtime/library.js")&&!i.endsWith("/runtime/edge.js")&&!i.endsWith("/runtime/edge-esm.js")&&!i.startsWith("internal/")&&!r.methodName.includes("new ")&&!r.methodName.includes("getCallSite")&&!r.methodName.includes("Proxy.")&&r.methodName.split(".").length<4});return!t||!t.file?null:{fileName:t.file,lineNumber:t.lineNumber,columnNumber:t.column}}};function Hr(e){return e==="minimal"?typeof $EnabledCallSite=="function"&&e!=="minimal"?new $EnabledCallSite:new FS:new MS}var jS={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function rn(e={}){let t=$S(e);return Object.entries(t).reduce((r,[i,n])=>(jS[i]!==void 0?r.select[i]={select:n}:r[i]=n,r),{select:{}})}function $S(e={}){return typeof e._count=="boolean"?{...e,_count:{_all:e._count}}:e}function ma(e={}){return t=>(typeof e._count=="boolean"&&(t._count=t._count._all),t)}function VS(e,t){let r=ma(e);return t({action:"aggregate",unpacker:r,argsMapper:rn})(e)}function BS(e={}){let{select:t,...r}=e;return rn(typeof t=="object"?{...r,_count:t}:{...r,_count:{_all:!0}})}function GS(e={}){return typeof e.select=="object"?t=>ma(e)(t)._count:t=>ma(e)(t)._count._all}function HS(e,t){return t({action:"count",unpacker:GS(e),argsMapper:BS})(e)}function QS(e={}){let t=rn(e);if(Array.isArray(t.by))for(let r of t.by)typeof r=="string"&&(t.select[r]=!0);else typeof t.by=="string"&&(t.select[t.by]=!0);return t}function KS(e={}){return t=>(typeof e?._count=="boolean"&&t.forEach(r=>{r._count=r._count._all}),t)}function zS(e,t){return t({action:"groupBy",unpacker:KS(e),argsMapper:QS})(e)}function JS(e,t,r){if(t==="aggregate")return i=>VS(i,r);if(t==="count")return i=>HS(i,r);if(t==="groupBy")return i=>zS(i,r)}function WS(e,t){let r=t.fields.filter(n=>!n.relationName),i=iv(r,"name");return new Proxy({},{get(n,s){if(s in n||typeof s=="symbol")return n[s];let a=i[s];if(a)return new Ld(e,s,a.type,a.isList,a.kind==="enum")},...nf(Object.keys(i))})}var sf=e=>Array.isArray(e)?e:e.split("."),af=(e,t)=>sf(t).reduce((r,i)=>r&&r[i],e),YS=(e,t,r)=>sf(t).reduceRight((i,n,s,a)=>Object.assign({},af(e,a.slice(0,s)),{[n]:i}),r);function XS(e,t){return e===void 0||t===void 0?[]:[...t,"select",e]}function ZS(e,t,r){return t===void 0?e??{}:YS(t,r,e||!0)}function of(e,t,r,i,n,s){let a=e._runtimeDataModel.models[t].fields.reduce((o,l)=>({...o,[l.name]:l}),{});return o=>{let l=Hr(e._errorFormat),u=XS(i,n),c=ZS(o,s,u),d=r({dataPath:u,callsite:l})(c),f=eE(e,t);return new Proxy(d,{get(p,g){if(!f.includes(g))return p[g];let h=[a[g].type,r,g],E=[u,c];return of(e,...h,...E)},...nf([...f,...Object.getOwnPropertyNames(d)])})}}function eE(e,t){return e._runtimeDataModel.models[t].fields.filter(r=>r.kind==="object").map(r=>r.name)}var tE=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],rE=["aggregate","count","groupBy"];function oc(e,t){let r=e._extensions.getAllModelExtensions(t)??{},i=[iE(e,t),sE(e,t),rf(r),Ze("name",()=>t),Ze("$name",()=>t),Ze("$parent",()=>e._appliedParent)];return fr({},i)}function iE(e,t){let r=si(t),i=Object.keys(fn).concat("count");return{getKeys(){return i},getPropertyValue(n){let s=n,a=o=>l=>{let u=Hr(e._errorFormat);return e._createPrismaPromise(c=>{let d={args:l,dataPath:[],action:s,model:t,clientMethod:`${r}.${n}`,jsModelName:r,transaction:c,callsite:u};return e._request({...d,...o})},{action:s,args:l,model:t})};return tE.includes(s)?of(e,t,a):nE(n)?JS(e,n,a):a({})}}}function nE(e){return rE.includes(e)}function sE(e,t){return ja(Ze("fields",()=>{let r=e._runtimeDataModel.models[t];return WS(t,r)}))}function aE(e){return e.replace(/^./,t=>t.toUpperCase())}var ga=Symbol();function ya(e){let t=[oE(e),lE(e),Ze(ga,()=>e),Ze("$parent",()=>e._appliedParent)],r=e._extensions.getAllClientExtensions();return r&&t.push(rf(r)),fr(e,t)}function oE(e){let t=Object.getPrototypeOf(e._originalClient),r=[...new Set(Object.getOwnPropertyNames(t))];return{getKeys(){return r},getPropertyValue(i){return e[i]}}}function lE(e){let t=Object.keys(e._runtimeDataModel.models),r=t.map(si),i=[...new Set(t.concat(r))];return ja({getKeys(){return i},getPropertyValue(n){let s=aE(n);if(e._runtimeDataModel.models[s]!==void 0)return oc(e,s);if(e._runtimeDataModel.models[n]!==void 0)return oc(e,n)},getPropertyDescriptor(n){if(!r.includes(n))return{enumerable:!1}}})}function uE(e){return e[ga]?e[ga]:e}function cE(e){if(typeof e=="function")return e(this);if(e.client?.__AccelerateEngine){let r=e.client.__AccelerateEngine;this._originalClient._engine=new r(this._originalClient._accelerateEngineConfig)}let t=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(e)},_appliedParent:{value:this,configurable:!0},$on:{value:void 0}});return ya(t)}function dE({result:e,modelName:t,select:r,omit:i,extensions:n}){let s=n.getAllComputedFields(t);if(!s)return e;let a=[],o=[];for(let l of Object.values(s)){if(i){if(i[l.name])continue;let u=l.needs.filter(c=>i[c]);u.length>0&&o.push(ha(u))}else if(r){if(!r[l.name])continue;let u=l.needs.filter(c=>!r[c]);u.length>0&&o.push(ha(u))}fE(e,l.needs)&&a.push(pE(l,fr(e,a)))}return a.length>0||o.length>0?fr(e,[...a,...o]):e}function fE(e,t){return t.every(r=>tv(e,r))}function pE(e,t){return ja(Ze(e.name,()=>e.compute(t)))}function Ba({visitor:e,result:t,args:r,runtimeDataModel:i,modelName:n}){if(Array.isArray(t)){for(let a=0;a<t.length;a++)t[a]=Ba({result:t[a],args:r,modelName:n,runtimeDataModel:i,visitor:e});return t}let s=e(t,n,r)??t;return r.include&&lc({includeOrSelect:r.include,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),r.select&&lc({includeOrSelect:r.select,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),s}function lc({includeOrSelect:e,result:t,parentModelName:r,runtimeDataModel:i,visitor:n}){for(let[s,a]of Object.entries(e)){if(!a||t[s]==null||Jt(a))continue;let o=i.models[r].fields.find(u=>u.name===s);if(!o||o.kind!=="object"||!o.relationName)continue;let l=typeof a=="object"?a:{};t[s]=Ba({visitor:n,result:t[s],args:l,modelName:o.type,runtimeDataModel:i})}}function hE({result:e,modelName:t,args:r,extensions:i,runtimeDataModel:n,globalOmit:s}){return i.isEmpty()||e==null||typeof e!="object"||!n.models[t]?e:Ba({result:e,args:r??{},modelName:t,runtimeDataModel:n,visitor:(a,o,l)=>{let u=si(o);return dE({result:a,modelName:u,select:l.select,omit:l.select?void 0:{...s?.[u],...l.omit},extensions:i})}})}var mE=["$connect","$disconnect","$on","$transaction","$extends"],gE=mE;function yE(e){if(e instanceof Ot)return bE(e);if(ef(e))return xE(e);if(Array.isArray(e)){let r=[e[0]];for(let i=1;i<e.length;i++)r[i]=Qr(e[i]);return r}let t={};for(let r in e)t[r]=Qr(e[r]);return t}function bE(e){return new Ot(e.strings,e.values)}function xE(e){return new Zd(e.sql,e.values)}function Qr(e){if(typeof e!="object"||e==null||e instanceof mn||Da(e))return e;if(Ca(e))return new dn(e.toFixed());if(_a(e))return new Date(+e);if(ArrayBuffer.isView(e))return e.slice(0);if(Array.isArray(e)){let t=e.length,r;for(r=Array(t);t--;)r[t]=Qr(e[t]);return r}if(typeof e=="object"){let t={};for(let r in e)r==="__proto__"?Object.defineProperty(t,r,{value:Qr(e[r]),configurable:!0,enumerable:!0,writable:!0}):t[r]=Qr(e[r]);return t}Oa(e,"Unknown value")}function lf(e,t,r,i=0){return e._createPrismaPromise(n=>{let s=t.customDataProxyFetch;return"transaction"in t&&n!==void 0&&(t.transaction?.kind==="batch"&&t.transaction.lock.then(),t.transaction=n),i===r.length?e._executeRequest(t):r[i]({model:t.model,operation:t.model?t.action:t.clientMethod,args:yE(t.args??{}),__internalParams:t,query:(a,o=t)=>{let l=o.customDataProxyFetch;return o.customDataProxyFetch=cf(s,l),o.args=a,lf(e,o,r,i+1)}})})}function vE(e,t){let{jsModelName:r,action:i,clientMethod:n}=t,s=r?i:n;if(e._extensions.isEmpty())return e._executeRequest(t);let a=e._extensions.getAllQueryCallbacks(r??"$none",s);return lf(e,t,a)}function wE(e){return t=>{let r={requests:t},i=t[0].extensions.getAllBatchQueryCallbacks();return i.length?uf(r,i,0,e):e(r)}}function uf(e,t,r,i){if(r===t.length)return i(e);let n=e.customDataProxyFetch,s=e.requests[0].transaction;return t[r]({args:{queries:e.requests.map(a=>({model:a.modelName,operation:a.action,args:a.args})),transaction:s?{isolationLevel:s.kind==="batch"?s.isolationLevel:void 0}:void 0},__internalParams:e,query(a,o=e){let l=o.customDataProxyFetch;return o.customDataProxyFetch=cf(n,l),uf(o,t,r+1,i)}})}var uc=e=>e;function cf(e=uc,t=uc){return r=>e(t(r))}var cc=ve("prisma:client"),dc={Vercel:"vercel","Netlify CI":"netlify"};function SE({postinstall:e,ciName:t,clientVersion:r,generator:i}){if(cc("checkPlatformCaching:postinstall",e),cc("checkPlatformCaching:ciName",t),e===!0&&!(i?.output&&typeof(i.output.fromEnvVar??i.output.value)=="string")&&t&&t in dc){let n=`Prisma has detected that this project was built on ${t}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${dc[t]}-build`;throw console.error(n),new oe(n,r)}}function EE(e,t){return e?e.datasources?e.datasources:e.datasourceUrl?{[t[0]]:{url:e.datasourceUrl}}:{}:{}}var AE=Q(require("node:fs")),zi=Q(require("node:path"));function df(e){let{runtimeBinaryTarget:t}=e;return`Add "${t}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${RE(e)}`}function RE(e){let{generator:t,generatorBinaryTargets:r,runtimeBinaryTarget:i}=e,n={fromEnvVar:null,value:i},s=[...r,n];return jx({...t,binaryTargets:s})}function gn(e){let{runtimeBinaryTarget:t}=e;return`Prisma Client could not locate the Query Engine for runtime "${t}".`}function yn(e){let{searchedLocations:t}=e;return`The following locations have been searched:
${[...new Set(t)].map(r=>`  ${r}`).join(`
`)}`}function kE(e){let{runtimeBinaryTarget:t}=e;return`${gn(e)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${t}".
${df(e)}

${yn(e)}`}function ff(e){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${e}`}function pf(e){let{errorStack:t}=e;return t?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function TE(e){let{queryEngineName:t}=e;return`${gn(e)}${pf(e)}

This is likely caused by a bundler that has not copied "${t}" next to the resulting bundle.
Ensure that "${t}" has been copied next to the bundle or in "${e.expectedLocation}".

${ff("engine-not-found-bundler-investigation")}

${yn(e)}`}function IE(e){let{runtimeBinaryTarget:t,generatorBinaryTargets:r}=e,i=r.find(n=>n.native);return`${gn(e)}

This happened because Prisma Client was generated for "${i?.value??"unknown"}", but the actual deployment required "${t}".
${df(e)}

${yn(e)}`}function OE(e){let{queryEngineName:t}=e;return`${gn(e)}${pf(e)}

This is likely caused by tooling that has not copied "${t}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${t}" has been copied to "${e.expectedLocation}".

${ff("engine-not-found-tooling-investigation")}

${yn(e)}`}var _E=ve("prisma:client:engines:resolveEnginePath"),qE=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function CE(e,t){let r={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[e]??t.prismaPath;if(r!==void 0)return r;let{enginePath:i,searchedLocations:n}=await PE(e,t);if(_E("enginePath",i),i!==void 0&&e==="binary"&&Px(i),i!==void 0)return t.prismaPath=i;let s=await Aa(),a=t.generator?.binaryTargets??[],o=a.some(f=>f.native),l=!a.some(f=>f.value===s),u=__filename.match(qE())===null,c={searchedLocations:n,generatorBinaryTargets:a,generator:t.generator,runtimeBinaryTarget:s,queryEngineName:hf(e,s),expectedLocation:zi.default.relative(process.cwd(),t.dirname),errorStack:new Error().stack},d;throw o&&l?d=IE(c):l?d=kE(c):u?d=TE(c):d=OE(c),new oe(d,t.clientVersion)}async function PE(e,t){let r=await Aa(),i=[],n=[t.dirname,zi.default.resolve(__dirname,".."),t.generator?.output?.value??__dirname,zi.default.resolve(__dirname,"../../../.prisma/client"),"/tmp/prisma-engines",t.cwd];__filename.includes("resolveEnginePath")&&n.push(Cx());for(let s of n){let a=hf(e,r),o=zi.default.join(s,a);if(i.push(s),AE.default.existsSync(o))return{enginePath:o,searchedLocations:i}}return{enginePath:void 0,searchedLocations:i}}function hf(e,t){return e==="library"?R1(t,"fs"):`query-engine-${t}${t==="windows"?".exe":""}`}function NE(e){return e?e.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,t=>`${t[0]}5`):""}function DE(e){return e.split(`
`).map(t=>t.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var UE=Q(Kb());function LE({title:e,user:t="prisma",repo:r="prisma",template:i="bug_report.yml",body:n}){return(0,UE.default)({user:t,repo:r,template:i,title:e,body:n})}function FE({version:e,binaryTarget:t,title:r,description:i,engineVersion:n,database:s,query:a}){let o=v1(6e3-(a?.length??0)),l=DE(ea(o)),u=i?`# Description
\`\`\`
${i}
\`\`\``:"",c=ea(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${t?.padEnd(19)}|
| Prisma Client   | ${e?.padEnd(19)}|
| Query Engine    | ${n?.padEnd(19)}|
| Database        | ${s?.padEnd(19)}|

${u}

## Logs
\`\`\`
${l}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${a?NE(a):""}
\`\`\`
`),d=LE({title:r,body:c});return`${r}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Ce(d)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function ME(e,t){throw new Error(t)}function jE(e){return e!==null&&typeof e=="object"&&typeof e.$type=="string"}function $E(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function nn(e){return e===null?e:Array.isArray(e)?e.map(nn):typeof e=="object"?jE(e)?VE(e):e.constructor!==null&&e.constructor.name!=="Object"?e:$E(e,nn):e}function VE({$type:e,value:t}){switch(e){case"BigInt":return BigInt(t);case"Bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"DateTime":return new Date(t);case"Decimal":return new Yt(t);case"Json":return JSON.parse(t);default:ME(t,"Unknown tagged value")}}var BE="6.19.0",GE=()=>globalThis.process?.release?.name==="node",HE=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,QE=()=>!!globalThis.Deno,KE=()=>typeof globalThis.Netlify=="object",zE=()=>typeof globalThis.EdgeRuntime=="object",JE=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function WE(){return[[KE,"netlify"],[zE,"edge-light"],[JE,"workerd"],[QE,"deno"],[HE,"bun"],[GE,"node"]].flatMap(e=>e[0]()?[e[1]]:[]).at(0)??""}var YE={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function mf(){let e=WE();return{id:e,prettyName:YE[e]||e,isEdge:["workerd","deno","netlify","edge-light"].includes(e)}}function Ga({inlineDatasources:e,overrideDatasources:t,env:r,clientVersion:i}){let n,s=Object.keys(e)[0],a=e[s]?.url,o=t[s]?.url;if(s===void 0?n=void 0:o?n=o:a?.value?n=a.value:a?.fromEnvVar&&(n=r[a.fromEnvVar]),a?.fromEnvVar!==void 0&&n===void 0)throw new oe(`error: Environment variable not found: ${a.fromEnvVar}.`,i);if(n===void 0)throw new oe("error: Missing URL environment variable, value, or override.",i);return n}var XE=class extends Error{clientVersion;cause;constructor(e,t){super(e),this.clientVersion=t.clientVersion,this.cause=t.cause}get[Symbol.toStringTag](){return this.name}},pr=class extends XE{isRetryable;constructor(e,t){super(e,t),this.isRetryable=t.isRetryable??!0}};function me(e,t){return{...e,isRetryable:t}}var Ji=class extends pr{name="InvalidDatasourceError";code="P6001";constructor(e,t){super(e,me(t,!1))}};se(Ji,"InvalidDatasourceError");function ZE(e){let t={clientVersion:e.clientVersion},r=Object.keys(e.inlineDatasources)[0],i=Ga({inlineDatasources:e.inlineDatasources,overrideDatasources:e.overrideDatasources,clientVersion:e.clientVersion,env:{...e.env,...typeof process<"u"?process.env:{}}}),n;try{n=new URL(i)}catch{throw new Ji(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\``,t)}let{protocol:s,searchParams:a}=n;if(s!=="prisma:"&&s!==td)throw new Ji(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\` or \`prisma+postgres://\``,t);let o=a.get("api_key");if(o===null||o.length<1)throw new Ji(`Error validating datasource \`${r}\`: the URL must contain a valid API key`,t);let l=Fx(n)?"http:":"https:";process.env.TEST_CLIENT_ENGINE_REMOTE_EXECUTOR&&n.searchParams.has("use_http")&&(l="http:");let u=new URL(n.href.replace(s,l));return{apiKey:o,url:u}}var eA=Q(wa()),tA=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:e,tracingHelper:t,logLevel:r,logQueries:i,engineHash:n}){this.apiKey=e,this.tracingHelper=t,this.logLevel=r,this.logQueries=i,this.engineHash=n}build({traceparent:e,transactionId:t}={}){let r={Accept:"application/json",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","Prisma-Engine-Hash":this.engineHash,"Prisma-Engine-Version":eA.enginesVersion};this.tracingHelper.isEnabled()&&(r.traceparent=e??this.tracingHelper.getTraceParent()),t&&(r["X-Transaction-Id"]=t);let i=this.#e();return i.length>0&&(r["X-Capture-Telemetry"]=i.join(", ")),r}#e(){let e=[];return this.tracingHelper.isEnabled()&&e.push("tracing"),this.logLevel&&e.push(this.logLevel),this.logQueries&&e.push("query"),e}};function rA(e){return e[0]*1e3+e[1]/1e6}function fc(e){return new Date(rA(e))}var ba=class extends pr{name="ForcedRetryError";code="P5001";constructor(e){super("This request must be retried",me(e,!0))}};se(ba,"ForcedRetryError");var Ha=class extends pr{name="NotImplementedYetError";code="P5004";constructor(e,t){super(e,me(t,!1))}};se(Ha,"NotImplementedYetError");var De=class extends pr{response;constructor(e,t){super(e,t),this.response=t.response;let r=this.response.headers.get("prisma-request-id");if(r){let i=`(The request id was: ${r})`;this.message=this.message+" "+i}}},Qa=class extends De{name="SchemaMissingError";code="P5005";constructor(e){super("Schema needs to be uploaded",me(e,!0))}};se(Qa,"SchemaMissingError");var gf="This request could not be understood by the server",yf=class extends De{name="BadRequestError";code="P5000";constructor(e,t,r){super(t||gf,me(e,!1)),r&&(this.code=r)}};se(yf,"BadRequestError");var bf=class extends De{name="HealthcheckTimeoutError";code="P5013";logs;constructor(e,t){super("Engine not started: healthcheck timeout",me(e,!0)),this.logs=t}};se(bf,"HealthcheckTimeoutError");var xf=class extends De{name="EngineStartupError";code="P5014";logs;constructor(e,t,r){super(t,me(e,!0)),this.logs=r}};se(xf,"EngineStartupError");var vf=class extends De{name="EngineVersionNotSupportedError";code="P5012";constructor(e){super("Engine version is not supported",me(e,!1))}};se(vf,"EngineVersionNotSupportedError");var wf="Request timed out",Sf=class extends De{name="GatewayTimeoutError";code="P5009";constructor(e,t=wf){super(t,me(e,!1))}};se(Sf,"GatewayTimeoutError");var iA="Interactive transaction error",Ef=class extends De{name="InteractiveTransactionError";code="P5015";constructor(e,t=iA){super(t,me(e,!1))}};se(Ef,"InteractiveTransactionError");var nA="Request parameters are invalid",Af=class extends De{name="InvalidRequestError";code="P5011";constructor(e,t=nA){super(t,me(e,!1))}};se(Af,"InvalidRequestError");var Rf="Requested resource does not exist",kf=class extends De{name="NotFoundError";code="P5003";constructor(e,t=Rf){super(t,me(e,!1))}};se(kf,"NotFoundError");var Tf="Unknown server error",xa=class extends De{name="ServerError";code="P5006";logs;constructor(e,t,r){super(t||Tf,me(e,!0)),this.logs=r}};se(xa,"ServerError");var If="Unauthorized, check your connection string",Of=class extends De{name="UnauthorizedError";code="P5007";constructor(e,t=If){super(t,me(e,!1))}};se(Of,"UnauthorizedError");var _f="Usage exceeded, retry again later",qf=class extends De{name="UsageExceededError";code="P5008";constructor(e,t=_f){super(t,me(e,!0))}};se(qf,"UsageExceededError");async function sA(e){let t;try{t=await e.text()}catch{return{type:"EmptyError"}}try{let r=JSON.parse(t);if(typeof r=="string")switch(r){case"InternalDataProxyError":return{type:"DataProxyError",body:r};default:return{type:"UnknownTextError",body:r}}if(typeof r=="object"&&r!==null){if("is_panic"in r&&"message"in r&&"error_code"in r)return{type:"QueryEngineError",body:r};if("EngineNotStarted"in r||"InteractiveTransactionMisrouted"in r||"InvalidRequestError"in r){let i=Object.values(r)[0].reason;return typeof i=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(i)?{type:"UnknownJsonError",body:r}:{type:"DataProxyError",body:r}}}return{type:"UnknownJsonError",body:r}}catch{return t===""?{type:"EmptyError"}:{type:"UnknownTextError",body:t}}}async function $i(e,t){if(e.ok)return;let r={clientVersion:t,response:e},i=await sA(e);if(i.type==="QueryEngineError")throw new kt(i.body.message,{code:i.body.error_code,clientVersion:t});if(i.type==="DataProxyError"){if(i.body==="InternalDataProxyError")throw new xa(r,"Internal Data Proxy error");if("EngineNotStarted"in i.body){if(i.body.EngineNotStarted.reason==="SchemaMissing")return new Qa(r);if(i.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new vf(r);if("EngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,logs:s}=i.body.EngineNotStarted.reason.EngineStartupError;throw new xf(r,n,s)}if("KnownEngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,error_code:s}=i.body.EngineNotStarted.reason.KnownEngineStartupError;throw new oe(n,t,s)}if("HealthcheckTimeout"in i.body.EngineNotStarted.reason){let{logs:n}=i.body.EngineNotStarted.reason.HealthcheckTimeout;throw new bf(r,n)}}if("InteractiveTransactionMisrouted"in i.body){let n={IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"};throw new Ef(r,n[i.body.InteractiveTransactionMisrouted.reason])}if("InvalidRequestError"in i.body)throw new Af(r,i.body.InvalidRequestError.reason)}if(e.status===401||e.status===403)throw new Of(r,sr(If,i));if(e.status===404)return new kf(r,sr(Rf,i));if(e.status===429)throw new qf(r,sr(_f,i));if(e.status===504)throw new Sf(r,sr(wf,i));if(e.status>=500)throw new xa(r,sr(Tf,i));if(e.status>=400)throw new yf(r,sr(gf,i))}function sr(e,t){return t.type==="EmptyError"?e:`${e}: ${JSON.stringify(t)}`}function aA(e){let t=Math.pow(2,e)*50,r=Math.ceil(Math.random()*t)-Math.ceil(t/2),i=t+r;return new Promise(n=>setTimeout(()=>n(i),i))}var ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function oA(e){let t=new TextEncoder().encode(e),r="",i=t.byteLength,n=i%3,s=i-n,a,o,l,u,c;for(let d=0;d<s;d=d+3)c=t[d]<<16|t[d+1]<<8|t[d+2],a=(c&16515072)>>18,o=(c&258048)>>12,l=(c&4032)>>6,u=c&63,r+=ot[a]+ot[o]+ot[l]+ot[u];return n==1?(c=t[s],a=(c&252)>>2,o=(c&3)<<4,r+=ot[a]+ot[o]+"=="):n==2&&(c=t[s]<<8|t[s+1],a=(c&64512)>>10,o=(c&1008)>>4,l=(c&15)<<2,r+=ot[a]+ot[o]+ot[l]+"="),r}function lA(e){if(e.generator?.previewFeatures.some(t=>t.toLowerCase().includes("metrics")))throw new oe("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",e.clientVersion)}var uA={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},Cf=class extends pr{name="RequestError";code="P5010";constructor(e,t){super(`Cannot fetch data from service:
${e}`,me(t,!0))}};se(Cf,"RequestError");async function jr(e,t,r=i=>i){let{clientVersion:i,...n}=t,s=r(fetch);try{return await s(e,n)}catch(a){let o=a.message??"Unknown error";throw new Cf(o,{clientVersion:i,cause:a})}}var cA=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,Pf=ve("prisma:client:dataproxyEngine");async function dA(e,t){let r=uA["@prisma/engines-version"],i=t.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(e.includes("accelerate")&&i!=="0.0.0"&&i!=="in-memory")return i;let[n,s]=i?.split("-")??[];if(s===void 0&&cA.test(n))return n;if(s!==void 0||i==="0.0.0"||i==="in-memory"){let[a]=r.split("-")??[],[o,l,u]=a.split("."),c=pA(`<=${o}.${l}.${u}`),d=await jr(c,{clientVersion:i});if(!d.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${d.status} ${d.statusText}, response body: ${await d.text()||"<empty body>"}`);let f=await d.text();Pf("length of body fetched from unpkg.com",f.length);let p;try{p=JSON.parse(f)}catch(g){throw console.error("JSON.parse error: body fetched from unpkg.com: ",f),g}return p.version}throw new Ha("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:i})}async function fA(e,t){let r=await dA(e,t);return Pf("version",r),r}function pA(e){return encodeURI(`https://unpkg.com/prisma@${e}/package.json`)}var pc=3,Lr=ve("prisma:client:dataproxyEngine"),hA=class{name="DataProxyEngine";inlineSchema;inlineSchemaHash;inlineDatasources;config;logEmitter;env;clientVersion;engineHash;tracingHelper;remoteClientVersion;host;headerBuilder;startPromise;protocol;constructor(e){lA(e),this.config=e,this.env=e.env,this.inlineSchema=oA(e.inlineSchema),this.inlineDatasources=e.inlineDatasources,this.inlineSchemaHash=e.inlineSchemaHash,this.clientVersion=e.clientVersion,this.engineHash=e.engineVersion,this.logEmitter=e.logEmitter,this.tracingHelper=e.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let{apiKey:e,url:t}=this.getURLAndAPIKey();this.host=t.host,this.protocol=t.protocol,this.headerBuilder=new tA({apiKey:e,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel??"error",logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await fA(this.host,this.config),Lr("host",this.host),Lr("protocol",this.protocol)})(),await this.startPromise}async stop(){}propagateResponseExtensions(e){e?.logs?.length&&e.logs.forEach(t=>{switch(t.level){case"debug":case"trace":Lr(t);break;case"error":case"warn":case"info":{this.logEmitter.emit(t.level,{timestamp:fc(t.timestamp),message:t.attributes.message??"",target:t.target??"BinaryEngine"});break}case"query":{this.logEmitter.emit("query",{query:t.attributes.query??"",timestamp:fc(t.timestamp),duration:t.attributes.duration_ms??0,params:t.attributes.params??"",target:t.target??"BinaryEngine"});break}default:t.level}}),e?.traces?.length&&this.tracingHelper.dispatchEngineSpans(e.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(e){return await this.start(),`${this.protocol}//${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${e}`}async uploadSchema(){let e={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(e,async()=>{let t=await jr(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});t.ok||Lr("schema response status",t.status);let r=await $i(t,this.clientVersion);if(r)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${r.message}`,timestamp:new Date,target:""}),r;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(e,{traceparent:t,interactiveTransaction:r,customDataProxyFetch:i}){return this.requestInternal({body:e,traceparent:t,interactiveTransaction:r,customDataProxyFetch:i})}async requestBatch(e,{traceparent:t,transaction:r,customDataProxyFetch:i}){let n=r?.kind==="itx"?r.options:void 0,s=$a(e,r);return(await this.requestInternal({body:s,customDataProxyFetch:i,interactiveTransaction:n,traceparent:t})).map(a=>(a.extensions&&this.propagateResponseExtensions(a.extensions),"errors"in a?this.convertProtocolErrorsToClientError(a.errors):a))}requestInternal({body:e,traceparent:t,customDataProxyFetch:r,interactiveTransaction:i}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:n})=>{let s=i?`${i.payload.endpoint}/graphql`:await this.url("graphql");n(s);let a=await jr(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t,transactionId:i?.id}),body:JSON.stringify(e),clientVersion:this.clientVersion},r);a.ok||Lr("graphql response status",a.status),await this.handleError(await $i(a,this.clientVersion));let o=await a.json();if(o.extensions&&this.propagateResponseExtensions(o.extensions),"errors"in o)throw this.convertProtocolErrorsToClientError(o.errors);return"batchResult"in o?o.batchResult:o}})}async transaction(e,t,r){let i={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${i[e]} transaction`,callback:async({logHttpCall:n})=>{if(e==="start"){let s=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel}),a=await this.url("transaction/start");n(a);let o=await jr(a,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),body:s,clientVersion:this.clientVersion});await this.handleError(await $i(o,this.clientVersion));let l=await o.json(),{extensions:u}=l;u&&this.propagateResponseExtensions(u);let c=l.id,d=l["data-proxy"].endpoint;return{id:c,payload:{endpoint:d}}}else{let s=`${r.payload.endpoint}/${e}`;n(s);let a=await jr(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),clientVersion:this.clientVersion});await this.handleError(await $i(a,this.clientVersion));let o=await a.json(),{extensions:l}=o;l&&this.propagateResponseExtensions(l);return}}})}getURLAndAPIKey(){return ZE({clientVersion:this.clientVersion,env:this.env,inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources})}metrics(){throw new Ha("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(e){for(let t=0;;t++){let r=i=>{this.logEmitter.emit("info",{message:`Calling ${i} (n=${t})`,timestamp:new Date,target:""})};try{return await e.callback({logHttpCall:r})}catch(i){if(!(i instanceof pr)||!i.isRetryable)throw i;if(t>=pc)throw i instanceof ba?i.cause:i;this.logEmitter.emit("warn",{message:`Attempt ${t+1}/${pc} failed for ${e.actionGerund}: ${i.message??"(unknown)"}`,timestamp:new Date,target:""});let n=await aA(t);this.logEmitter.emit("warn",{message:`Retrying after ${n}ms`,timestamp:new Date,target:""})}}}async handleError(e){if(e instanceof Qa)throw await this.uploadSchema(),new ba({clientVersion:this.clientVersion,cause:e});if(e)throw e}convertProtocolErrorsToClientError(e){return e.length===1?Va(e[0],this.config.clientVersion,this.config.activeProvider):new Oe(JSON.stringify(e),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function mA(e){if(e?.kind==="itx")return e.options.id}var hc=Q(require("node:os")),gA=Q(require("node:path")),js=Symbol("PrismaLibraryEngineCache");function yA(){let e=globalThis;return e[js]===void 0&&(e[js]={}),e[js]}function bA(e){let t=yA();if(t[e]!==void 0)return t[e];let r=gA.default.toNamespacedPath(e),i={exports:{}},n=0;return process.platform!=="win32"&&(n=hc.default.constants.dlopen.RTLD_LAZY|hc.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(i,r,n),t[e]=i.exports,i.exports}var xA={async loadLibrary(e){let t=await H1(),r=await CE("library",e);try{return e.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>bA(r))}catch(i){let n=Nx({e:i,platformInfo:t,id:r});throw new oe(n,e.clientVersion)}}},$s,vA={async loadLibrary(e){let{clientVersion:t,adapter:r,engineWasm:i}=e;if(r===void 0)throw new oe(`The \`adapter\` option for \`PrismaClient\` is required in this context (${mf().prettyName})`,t);if(i===void 0)throw new oe("WASM engine was unexpectedly `undefined`",t);$s===void 0&&($s=(async()=>{let s=await i.getRuntime(),a=await i.getQueryEngineWasmModule();if(a==null)throw new oe("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",t);let o={"./query_engine_bg.js":s},l=new WebAssembly.Instance(a,o),u=l.exports.__wbindgen_start;return s.__wbg_set_wasm(l.exports),u(),s.QueryEngine})());let n=await $s;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:n}}},wA="P2036",Ke=ve("prisma:client:libraryEngine");function SA(e){return e.item_type==="query"&&"query"in e}function EA(e){return"level"in e?e.level==="error"&&e.message==="PANIC":!1}var mc=[...A1,"native"],AA=0xffffffffffffffffn,Vs=1n;function RA(){let e=Vs++;return Vs>AA&&(Vs=1n),e}var gc=class{name="LibraryEngine";engine;libraryInstantiationPromise;libraryStartingPromise;libraryStoppingPromise;libraryStarted;executingQueryPromise;config;QueryEngineConstructor;libraryLoader;library;logEmitter;libQueryEnginePath;binaryTarget;datasourceOverrides;datamodel;logQueries;logLevel;lastQuery;loggerRustPanic;tracingHelper;adapterPromise;versionInfo;constructor(e,t){this.libraryLoader=t??xA,e.engineWasm!==void 0&&(this.libraryLoader=t??vA),this.config=e,this.libraryStarted=!1,this.logQueries=e.logQueries??!1,this.logLevel=e.logLevel??"error",this.logEmitter=e.logEmitter,this.datamodel=e.inlineSchema,this.tracingHelper=e.tracingHelper,e.enableDebugLogs&&(this.logLevel="debug");let r=Object.keys(e.overrideDatasources)[0],i=e.overrideDatasources[r]?.url;r!==void 0&&i!==void 0&&(this.datasourceOverrides={[r]:i}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(e){return{applyPendingMigrations:e.applyPendingMigrations?.bind(e),commitTransaction:this.withRequestId(e.commitTransaction.bind(e)),connect:this.withRequestId(e.connect.bind(e)),disconnect:this.withRequestId(e.disconnect.bind(e)),metrics:e.metrics?.bind(e),query:this.withRequestId(e.query.bind(e)),rollbackTransaction:this.withRequestId(e.rollbackTransaction.bind(e)),sdlSchema:e.sdlSchema?.bind(e),startTransaction:this.withRequestId(e.startTransaction.bind(e)),trace:e.trace.bind(e),free:e.free?.bind(e)}}withRequestId(e){return async(...t)=>{let r=RA().toString();try{return await e(...t,r)}finally{if(this.tracingHelper.isEnabled()){let i=await this.engine?.trace(r);if(i){let n=JSON.parse(i);this.tracingHelper.dispatchEngineSpans(n.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(e,t,r){await this.start();let i=await this.adapterPromise,n=JSON.stringify(t),s;if(e==="start"){let o=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel});s=await this.engine?.startTransaction(o,n)}else e==="commit"?s=await this.engine?.commitTransaction(r.id,n):e==="rollback"&&(s=await this.engine?.rollbackTransaction(r.id,n));let a=this.parseEngineResponse(s);if(kA(a)){let o=this.getExternalAdapterError(a,i?.errorRegistry);throw o?o.error:new kt(a.message,{code:a.error_code,clientVersion:this.config.clientVersion,meta:a.meta})}else if(typeof a.message=="string")throw new Oe(a.message,{clientVersion:this.config.clientVersion});return a}async instantiateLibrary(){if(Ke("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;E1(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let e=await this.tracingHelper.runInChildSpan("detect_platform",()=>Aa());if(!mc.includes(e))throw new oe(`Unknown ${zt("PRISMA_QUERY_ENGINE_LIBRARY")} ${zt($e(e))}. Possible binaryTargets: ${Kr(mc.join(", "))} or a path to the query engine library.
You may have to run ${Kr("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return e}}parseEngineResponse(e){if(!e)throw new Oe("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(e)}catch{throw new Oe("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let e=new WeakRef(this);this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Gu));let t=await this.adapterPromise;t&&Ke("Using driver adapter: %O",t),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},r=>{e.deref()?.logger(r)},t))}catch(e){let t=e,r=this.parseInitError(t.message);throw typeof r=="string"?t:new oe(r.message,this.config.clientVersion,r.error_code)}}}logger(e){let t=this.parseEngineResponse(e);t&&(t.level=t?.level.toLowerCase()??"unknown",SA(t)?this.logEmitter.emit("query",{timestamp:new Date,query:t.query,params:t.params,duration:Number(t.duration_ms),target:t.module_path}):EA(t)?this.loggerRustPanic=new At(Bs(this,`${t.message}: ${t.reason} in ${t.file}:${t.line}:${t.column}`),this.config.clientVersion):this.logEmitter.emit(t.level,{timestamp:new Date,message:t.message,target:t.module_path}))}parseInitError(e){try{return JSON.parse(e)}catch{}return e}parseRequestError(e){try{return JSON.parse(e)}catch{}return e}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(this.libraryInstantiationPromise||(this.libraryInstantiationPromise=this.instantiateLibrary()),await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return Ke(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let e=async()=>{Ke("library starting");try{let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(t)),this.libraryStarted=!0,this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Gu)),await this.adapterPromise,Ke("library started")}catch(t){let r=this.parseInitError(t.message);throw typeof r=="string"?t:new oe(r.message,this.config.clientVersion,r.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",e),this.libraryStartingPromise}async stop(){if(await this.libraryInstantiationPromise,await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return Ke("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted){await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0;return}let e=async()=>{await new Promise(r=>setImmediate(r)),Ke("library stopping");let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(t)),this.engine?.free&&this.engine.free(),this.engine=void 0,this.libraryStarted=!1,this.libraryStoppingPromise=void 0,this.libraryInstantiationPromise=void 0,await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0,Ke("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",e),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(e){return this.library?.debugPanic(e)}async request(e,{traceparent:t,interactiveTransaction:r}){Ke(`sending request, this.libraryStarted: ${this.libraryStarted}`);let i=JSON.stringify({traceparent:t}),n=JSON.stringify(e);try{await this.start();let s=await this.adapterPromise;this.executingQueryPromise=this.engine?.query(n,i,r?.id),this.lastQuery=n;let a=this.parseEngineResponse(await this.executingQueryPromise);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],s?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:a}}catch(s){if(s instanceof oe)throw s;if(s.code==="GenericFailure"&&s.message?.startsWith("PANIC:"))throw new At(Bs(this,s.message),this.config.clientVersion);let a=this.parseRequestError(s.message);throw typeof a=="string"?s:new Oe(`${a.message}
${a.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(e,{transaction:t,traceparent:r}){Ke("requestBatch");let i=$a(e,t);await this.start();let n=await this.adapterPromise;this.lastQuery=JSON.stringify(i),this.executingQueryPromise=this.engine?.query(this.lastQuery,JSON.stringify({traceparent:r}),mA(t));let s=await this.executingQueryPromise,a=this.parseEngineResponse(s);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],n?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});let{batchResult:o,errors:l}=a;if(Array.isArray(o))return o.map(u=>u.errors&&u.errors.length>0?this.loggerRustPanic??this.buildQueryError(u.errors[0],n?.errorRegistry):{data:u});throw l&&l.length===1?new Error(l[0].error):new Error(JSON.stringify(a))}buildQueryError(e,t){if(e.user_facing_error.is_panic)return new At(Bs(this,e.user_facing_error.message),this.config.clientVersion);let r=this.getExternalAdapterError(e.user_facing_error,t);return r?r.error:Va(e,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(e,t){if(e.error_code===wA&&t){let r=e.meta?.id;Ku(typeof r=="number","Malformed external JS error received from the engine");let i=t.consumeError(r);return Ku(i,"External error with reported id was not registered"),i}}async metrics(e){await this.start();let t=await this.engine.metrics(JSON.stringify(e));return e.format==="prometheus"?t:this.parseEngineResponse(t)}};function kA(e){return typeof e=="object"&&e!==null&&e.error_code!==void 0}function Bs(e,t){return FE({binaryTarget:e.binaryTarget,title:t,version:e.config.clientVersion,engineVersion:e.versionInfo?.commit,database:e.config.activeProvider,query:e.lastQuery})}function TA({url:e,adapter:t,copyEngine:r,targetBuildType:i}){let n=[],s=[],a=h=>{n.push({_tag:"warning",value:h})},o=h=>{let E=h.join(`
`);s.push({_tag:"error",value:E})},l=!!e?.startsWith("prisma://"),u=rd(e),c=!!t,d=l||u;!c&&r&&d&&i!=="client"&&i!=="wasm-compiler-edge"&&a(["recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"]);let f=d||!r;c&&(f||i==="edge")&&(i==="edge"?o(["Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint.","Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."]):d?o(["You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate.","Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."]):r||o(["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."]));let p={accelerate:f,ppg:u,driverAdapters:c};function g(h){return h.length>0}return g(s)?{ok:!1,diagnostics:{warnings:n,errors:s},isUsing:p}:{ok:!0,diagnostics:{warnings:n},isUsing:p}}function IA({copyEngine:e=!0},t){let r;try{r=Ga({inlineDatasources:t.inlineDatasources,overrideDatasources:t.overrideDatasources,env:{...t.env,...process.env},clientVersion:t.clientVersion})}catch{}let{ok:i,isUsing:n,diagnostics:s}=TA({url:r,adapter:t.adapter,copyEngine:e,targetBuildType:"library"});for(let d of s.warnings)ud(...d.value);if(!i){let d=s.errors[0];throw new ut(d.value,{clientVersion:t.clientVersion})}let a=Xs(t.generator),o=a==="library",l=a==="binary",u=a==="client",c=(n.accelerate||n.ppg)&&!n.driverAdapters;return n.accelerate?new hA(t):(n.driverAdapters,o?new gc(t):(n.accelerate,new gc(t)))}function OA({generator:e}){return e?.previewFeatures??[]}var _A=e=>({command:e}),qA=e=>e.strings.reduce((t,r,i)=>`${t}@P${i}${r}`);function Fr(e){try{return yc(e,"fast")}catch{return yc(e,"slow")}}function yc(e,t){return JSON.stringify(e.map(r=>Nf(r,t)))}function Nf(e,t){if(Array.isArray(e))return e.map(r=>Nf(r,t));if(typeof e=="bigint")return{prisma__type:"bigint",prisma__value:e.toString()};if(_a(e))return{prisma__type:"date",prisma__value:e.toJSON()};if(dn.isDecimal(e))return{prisma__type:"decimal",prisma__value:e.toJSON()};if(Buffer.isBuffer(e))return{prisma__type:"bytes",prisma__value:e.toString("base64")};if(CA(e))return{prisma__type:"bytes",prisma__value:Buffer.from(e).toString("base64")};if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{prisma__type:"bytes",prisma__value:Buffer.from(r,i,n).toString("base64")}}return typeof e=="object"&&t==="slow"?Df(e):e}function CA(e){return e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?!0:typeof e=="object"&&e!==null?e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer":!1}function Df(e){if(typeof e!="object"||e===null)return e;if(typeof e.toJSON=="function")return e.toJSON();if(Array.isArray(e))return e.map(bc);let t={};for(let r of Object.keys(e))t[r]=bc(e[r]);return t}function bc(e){return typeof e=="bigint"?e.toString():Df(e)}var PA=/^(\s*alter\s)/i,xc=ve("prisma:client");function vc(e,t,r,i){if(!(e!=="postgresql"&&e!=="cockroachdb")&&r.length>0&&PA.exec(t))throw new Error(`Running ALTER using ${i} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var wc=({clientMethod:e,activeProvider:t})=>r=>{let i="",n;if(ef(r))i=r.sql,n={values:Fr(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[s,...a]=r;i=s,n={values:Fr(a||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{i=r.sql,n={values:Fr(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{i=r.text,n={values:Fr(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{i=qA(r),n={values:Fr(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return n?.values?xc(`prisma.${e}(${i}, ${n.values})`):xc(`prisma.${e}(${i})`),{query:i,parameters:n}},NA={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Ot(t,r)}},DA={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function Sc(e){return function(t,r){let i,n=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=Ec(t(s)):Ec(t(s))}catch(a){return Promise.reject(a)}};return{get spec(){return r},then(s,a){return n().then(s,a)},catch(s){return n().catch(s)},finally(s){return n().finally(s)},requestTransaction(s){let a=n(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function Ec(e){return typeof e.then=="function"?e:Promise.resolve(e)}var UA=kx.split(".")[0],LA={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},FA=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(e){return this.getGlobalTracingHelper().getTraceParent(e)}dispatchEngineSpans(e){return this.getGlobalTracingHelper().dispatchEngineSpans(e)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(e,t){return this.getGlobalTracingHelper().runInChildSpan(e,t)}getGlobalTracingHelper(){let e=globalThis[`V${UA}_PRISMA_INSTRUMENTATION`],t=globalThis.PRISMA_INSTRUMENTATION;return e?.helper??t?.helper??LA}};function MA(){return new FA}function jA(e,t=()=>{}){let r,i=new Promise(n=>r=n);return{then(n){return--e===0&&r(t()),n?.(i)}}}function $A(e){return typeof e=="string"?e:e.reduce((t,r)=>{let i=typeof r=="string"?r:r.level;return i==="query"?t:t&&(r==="info"||t==="info")?"info":i},void 0)}function Uf(e){return typeof e.batchRequestIdx=="number"}function VA(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(va(e.query.arguments)),t.push(va(e.query.selection)),t.join("")}function va(e){return`(${Object.keys(e).sort().map(t=>{let r=e[t];return typeof r=="object"&&r!==null?`(${t} ${va(r)})`:t}).join(" ")})`}var BA={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function Ac(e){return BA[e]}var GA=class{constructor(e){this.options=e,this.batches={}}batches;tickActive=!1;request(e){let t=this.options.batchBy(e);return t?(this.batches[t]||(this.batches[t]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((r,i)=>{this.batches[t].push({request:e,resolve:r,reject:i})})):this.options.singleLoader(e)}dispatchBatches(){for(let e in this.batches){let t=this.batches[e];delete this.batches[e],t.length===1?this.options.singleLoader(t[0].request).then(r=>{r instanceof Error?t[0].reject(r):t[0].resolve(r)}).catch(r=>{t[0].reject(r)}):(t.sort((r,i)=>this.options.batchOrder(r.request,i.request)),this.options.batchLoader(t.map(r=>r.request)).then(r=>{if(r instanceof Error)for(let i=0;i<t.length;i++)t[i].reject(r);else for(let i=0;i<t.length;i++){let n=r[i];n instanceof Error?t[i].reject(n):t[i].resolve(n)}}).catch(r=>{for(let i=0;i<t.length;i++)t[i].reject(r)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function Qt(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"decimal":return new dn(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Qt("bigint",r));case"bytes-array":return t.map(r=>Qt("bytes",r));case"decimal-array":return t.map(r=>Qt("decimal",r));case"datetime-array":return t.map(r=>Qt("datetime",r));case"date-array":return t.map(r=>Qt("date",r));case"time-array":return t.map(r=>Qt("time",r));default:return t}}function Lf(e){let t=[],r=HA(e);for(let i=0;i<e.rows.length;i++){let n=e.rows[i],s={...r};for(let a=0;a<n.length;a++)s[e.columns[a]]=Qt(e.types[a],n[a]);t.push(s)}return t}function HA(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var QA=ve("prisma:client:request_handler"),KA=class{client;dataloader;logEmitter;constructor(e,t){this.logEmitter=t,this.client=e,this.dataloader=new GA({batchLoader:wE(async({requests:r,customDataProxyFetch:i})=>{let{transaction:n,otelParentCtx:s}=r[0],a=r.map(u=>u.protocolQuery),o=this.client._tracingHelper.getTraceParent(s),l=r.some(u=>Ac(u.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:o,transaction:zA(n),containsWrite:l,customDataProxyFetch:i})).map((u,c)=>{if(u instanceof Error)return u;try{return this.mapQueryEngineResult(r[c],u)}catch(d){return d}})}),singleLoader:async r=>{let i=r.transaction?.kind==="itx"?Ff(r.transaction):void 0,n=await this.client._engine.request(r.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:Ac(r.protocolQuery.action),customDataProxyFetch:r.customDataProxyFetch});return this.mapQueryEngineResult(r,n)},batchBy:r=>r.transaction?.id?`transaction-${r.transaction.id}`:VA(r.protocolQuery),batchOrder(r,i){return r.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?r.transaction.index-i.transaction.index:0}})}async request(e){try{return await this.dataloader.request(e)}catch(t){let{clientMethod:r,callsite:i,transaction:n,args:s,modelName:a}=e;this.handleAndLogRequestError({error:t,clientMethod:r,callsite:i,transaction:n,args:s,modelName:a,globalOmit:e.globalOmit})}}mapQueryEngineResult({dataPath:e,unpacker:t},r){let i=r?.data,n=this.unpack(i,e,t);return process.env.PRISMA_CLIENT_GET_TIME?{data:n}:n}handleAndLogRequestError(e){try{this.handleRequestError(e)}catch(t){throw this.logEmitter&&this.logEmitter.emit("error",{message:t.message,target:e.clientMethod,timestamp:new Date}),t}}handleRequestError({error:e,clientMethod:t,callsite:r,transaction:i,args:n,modelName:s,globalOmit:a}){if(QA(e),JA(e,i))throw e;if(e instanceof kt&&WA(e)){let l=Mf(e.meta);Vd({args:n,errors:[l],callsite:r,errorFormat:this.client._errorFormat,originalMethod:t,clientVersion:this.client._clientVersion,globalOmit:a})}let o=e.message;if(r&&(o=Ad({callsite:r,originalMethod:t,isPanic:e.isPanic,showColors:this.client._errorFormat==="pretty",message:o})),o=this.sanitizeMessage(o),e.code){let l=s?{modelName:s,...e.meta}:e.meta;throw new kt(o,{code:e.code,clientVersion:this.client._clientVersion,meta:l,batchRequestIdx:e.batchRequestIdx})}else{if(e.isPanic)throw new At(o,this.client._clientVersion);if(e instanceof Oe)throw new Oe(o,{clientVersion:this.client._clientVersion,batchRequestIdx:e.batchRequestIdx});if(e instanceof oe)throw new oe(o,this.client._clientVersion);if(e instanceof At)throw new At(o,this.client._clientVersion)}throw e.clientVersion=this.client._clientVersion,e}sanitizeMessage(e){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?ea(e):e}unpack(e,t,r){if(!e||(e.data&&(e=e.data),!e))return e;let i=Object.keys(e)[0],n=Object.values(e)[0],s=t.filter(l=>l!=="select"&&l!=="include"),a=af(n,s),o=i==="queryRaw"?Lf(a):nn(a);return r?r(o):o}get[Symbol.toStringTag](){return"RequestHandler"}};function zA(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:Ff(e)};Oa(e,"Unknown transaction kind")}}function Ff(e){return{id:e.id,payload:e.payload}}function JA(e,t){return Uf(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function WA(e){return e.code==="P2009"||e.code==="P2012"}function Mf(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(Mf)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var YA=BE,XA=Q(Dc()),X=class extends Error{constructor(e){super(e+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};se(X,"PrismaClientConstructorValidationError");var Rc=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],kc=["pretty","colorless","minimal"],Tc=["info","query","warn","error"],ZA={datasources:(e,{datasourceNames:t})=>{if(e){if(typeof e!="object"||Array.isArray(e))throw new X(`Invalid value ${JSON.stringify(e)} for "datasources" provided to PrismaClient constructor`);for(let[r,i]of Object.entries(e)){if(!t.includes(r)){let n=ar(r,t)||` Available datasources: ${t.join(", ")}`;throw new X(`Unknown datasource ${r} provided to PrismaClient constructor.${n}`)}if(typeof i!="object"||Array.isArray(i))throw new X(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(i&&typeof i=="object")for(let[n,s]of Object.entries(i)){if(n!=="url")throw new X(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof s!="string")throw new X(`Invalid value ${JSON.stringify(s)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(e,t)=>{if(!e&&Xs(t.generator)==="client")throw new X('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(e!==null){if(e===void 0)throw new X('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(Xs(t.generator)==="binary")throw new X('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')}},datasourceUrl:e=>{if(typeof e<"u"&&typeof e!="string")throw new X(`Invalid value ${JSON.stringify(e)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:e=>{if(e){if(typeof e!="string")throw new X(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!kc.includes(e)){let t=ar(e,kc);throw new X(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new X(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!Tc.includes(r)){let i=ar(r,Tc);throw new X(`Invalid log level "${r}" provided to PrismaClient constructor.${i}`)}}for(let r of e){t(r);let i={level:t,emit:n=>{let s=["stdout","event"];if(!s.includes(n)){let a=ar(n,s);throw new X(`Invalid value ${JSON.stringify(n)} for "emit" in logLevel provided to PrismaClient constructor.${a}`)}}};if(r&&typeof r=="object")for(let[n,s]of Object.entries(r))if(i[n])i[n](s);else throw new X(`Invalid property ${n} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new X(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new X(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new X('"omit" option is expected to be an object.');if(e===null)throw new X('"omit" option can not be `null`');let r=[];for(let[i,n]of Object.entries(e)){let s=rR(i,t.runtimeDataModel);if(!s){r.push({kind:"UnknownModel",modelKey:i});continue}for(let[a,o]of Object.entries(n)){let l=s.fields.find(u=>u.name===a);if(!l){r.push({kind:"UnknownField",modelKey:i,fieldName:a});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:i,fieldName:a});continue}typeof o!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:i,fieldName:a})}}if(r.length>0)throw new X(iR(e,r))},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new X(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let i=ar(r,t);throw new X(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${i}`)}}};function eR(e,t){for(let[r,i]of Object.entries(e)){if(!Rc.includes(r)){let n=ar(r,Rc);throw new X(`Unknown property ${r} provided to PrismaClient constructor.${n}`)}ZA[r](i,t)}if(e.datasourceUrl&&e.datasources)throw new X('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function ar(e,t){if(t.length===0||typeof e!="string")return"";let r=tR(e,t);return r?` Did you mean "${r}"?`:""}function tR(e,t){if(t.length===0)return null;let r=t.map(n=>({value:n,distance:(0,XA.default)(e,n)}));r.sort((n,s)=>n.distance<s.distance?-1:1);let i=r[0];return i.distance<3?i.value:null}function rR(e,t){return Ic(t.models,e)??Ic(t.types,e)}function Ic(e,t){let r=Object.keys(e).find(i=>on(i)===t);if(r)return e[r]}function iR(e,t){let r=Fa(e);for(let s of t)switch(s.kind){case"UnknownModel":r.arguments.getField(s.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${s.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${s.modelKey}" does not have a field named "${s.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:i,args:n}=$d(r,"colorless");return`Error validating "omit" option:

${n}

${i}`}function nR(e){return e.length===0?Promise.resolve([]):new Promise((t,r)=>{let i=new Array(e.length),n=null,s=!1,a=0,o=()=>{s||(a++,a===e.length&&(s=!0,n?r(n):t(i)))},l=u=>{s||(s=!0,r(u))};for(let u=0;u<e.length;u++)e[u].then(c=>{i[u]=c,o()},c=>{if(!Uf(c)){l(c);return}c.batchRequestIdx===u?l(c):(n||(n=c),o())})})}var yt=ve("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var sR={requestArgsToMiddlewareArgs:e=>e,middlewareArgsToRequestArgs:e=>e},aR=Symbol.for("prisma.client.transaction.id"),oR={id:0,nextId(){return++this.id}};function lR(e){class t{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=Sc();constructor(i){e=i?.__internal?.configOverride?.(e)??e,SE(e),i&&eR(i,e);let n=new gS.EventEmitter().on("error",()=>{});this._extensions=Bd.empty(),this._previewFeatures=OA(e),this._clientVersion=e.clientVersion??YA,this._activeProvider=e.activeProvider,this._globalOmit=i?.omit,this._tracingHelper=MA();let s=e.relativeEnvPaths&&{rootEnvPath:e.relativeEnvPaths.rootEnvPath&&Ms.default.resolve(e.dirname,e.relativeEnvPaths.rootEnvPath),schemaEnvPath:e.relativeEnvPaths.schemaEnvPath&&Ms.default.resolve(e.dirname,e.relativeEnvPaths.schemaEnvPath)},a;if(i?.adapter){a=i.adapter;let l=e.activeProvider==="postgresql"||e.activeProvider==="cockroachdb"?"postgres":e.activeProvider;if(a.provider!==l)throw new oe(`The Driver Adapter \`${a.adapterName}\`, based on \`${a.provider}\`, is not compatible with the provider \`${l}\` specified in the Prisma schema.`,this._clientVersion);if(i.datasources||i.datasourceUrl!==void 0)throw new oe("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let o=!a&&s&&ad(s,{conflictCheck:"none"})||e.injectableEdgeEnv?.();try{let l=i??{},u=l.__internal??{},c=u.debug===!0;c&&ve.enable("prisma:client");let d=Ms.default.resolve(e.dirname,e.relativePath);yS.default.existsSync(d)||(d=e.dirname),yt("dirname",e.dirname),yt("relativePath",e.relativePath),yt("cwd",d);let f=u.engine||{};if(l.errorFormat?this._errorFormat=l.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=e.runtimeDataModel,this._engineConfig={cwd:d,dirname:e.dirname,enableDebugLogs:c,allowTriggerPanic:f.allowTriggerPanic,prismaPath:f.binaryPath??void 0,engineEndpoint:f.endpoint,generator:e.generator,showColors:this._errorFormat==="pretty",logLevel:l.log&&$A(l.log),logQueries:l.log&&!!(typeof l.log=="string"?l.log==="query":l.log.find(p=>typeof p=="string"?p==="query":p.level==="query")),env:o?.parsed??{},flags:[],engineWasm:e.engineWasm,compilerWasm:e.compilerWasm,clientVersion:e.clientVersion,engineVersion:e.engineVersion,previewFeatures:this._previewFeatures,activeProvider:e.activeProvider,inlineSchema:e.inlineSchema,overrideDatasources:EE(l,e.datasourceNames),inlineDatasources:e.inlineDatasources,inlineSchemaHash:e.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:l.transactionOptions?.maxWait??2e3,timeout:l.transactionOptions?.timeout??5e3,isolationLevel:l.transactionOptions?.isolationLevel},logEmitter:n,isBundled:e.isBundled,adapter:a},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:Ga,getBatchRequestPayload:$a,prismaGraphQLToJSError:Va,PrismaClientUnknownRequestError:Oe,PrismaClientInitializationError:oe,PrismaClientKnownRequestError:kt,debug:ve("prisma:client:accelerateEngine"),engineVersion:hS.version,clientVersion:e.clientVersion}},yt("clientVersion",e.clientVersion),this._engine=IA(e,this._engineConfig),this._requestHandler=new KA(this,n),l.log)for(let p of l.log){let g=typeof p=="string"?p:p.emit==="stdout"?p.level:null;g&&this.$on(g,h=>{Zs.log(`${Zs.tags[g]??""}`,h.message||h.query)})}}catch(l){throw l.clientVersion=this._clientVersion,l}return this._appliedParent=ya(this)}get[Symbol.toStringTag](){return"PrismaClient"}$on(i,n){return i==="beforeExit"?this._engine.onBeforeExit(n):i&&this._engineConfig.logEmitter.on(i,n),this}$connect(){try{return this._engine.start()}catch(i){throw i.clientVersion=this._clientVersion,i}}async $disconnect(){try{await this._engine.stop()}catch(i){throw i.clientVersion=this._clientVersion,i}finally{w1()}}$executeRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"executeRaw",args:s,transaction:i,clientMethod:n,argsMapper:wc({clientMethod:n,activeProvider:o}),callsite:Hr(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$executeRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0){let[a,o]=Oc(i,n);return vc(this._activeProvider,a.text,a.values,Array.isArray(i)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(s,"$executeRaw",a,o)}throw new ut("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(i,...n){return this._createPrismaPromise(s=>(vc(this._activeProvider,i,n,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(s,"$executeRawUnsafe",[i,...n])))}$runCommandRaw(i){if(e.activeProvider!=="mongodb")throw new ut(`The ${e.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(n=>this._request({args:i,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:_A,callsite:Hr(this._errorFormat),transaction:n}))}async $queryRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"queryRaw",args:s,transaction:i,clientMethod:n,argsMapper:wc({clientMethod:n,activeProvider:o}),callsite:Hr(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$queryRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0)return this.$queryRawInternal(s,"$queryRaw",...Oc(i,n));throw new ut("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(i){return this._createPrismaPromise(n=>{if(!this._hasPreviewFlag("typedSql"))throw new ut("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(n,"$queryRawTyped",i)})}$queryRawUnsafe(i,...n){return this._createPrismaPromise(s=>this.$queryRawInternal(s,"$queryRawUnsafe",[i,...n]))}_transactionWithArray({promises:i,options:n}){let s=oR.nextId(),a=jA(i.length),o=i.map((l,u)=>{if(l?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let c=n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,d={kind:"batch",id:s,index:u,isolationLevel:c,lock:a};return l.requestTransaction?.(d)??l});return nR(o)}async _transactionWithCallback({callback:i,options:n}){let s={traceparent:this._tracingHelper.getTraceParent()},a={maxWait:n?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:n?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},o=await this._engine.transaction("start",s,a),l;try{let u={kind:"itx",...o};l=await i(this._createItxClient(u)),await this._engine.transaction("commit",s,o)}catch(u){throw await this._engine.transaction("rollback",s,o).catch(()=>{}),u}return l}_createItxClient(i){return fr(ya(fr(uE(this),[Ze("_appliedParent",()=>this._appliedParent._createItxClient(i)),Ze("_createPrismaPromise",()=>Sc(i)),Ze(aR,()=>i.id)])),[ha(gE)])}$transaction(i,n){let s;typeof i=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?s=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:s=()=>this._transactionWithCallback({callback:i,options:n}):s=()=>this._transactionWithArray({promises:i,options:n});let a={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(a,s)}_request(i){i.otelParentCtx=this._tracingHelper.getActiveContext();let n=i.middlewareArgsMapper??sR,s={args:n.requestArgsToMiddlewareArgs(i.args),dataPath:i.dataPath,runInTransaction:!!i.transaction,action:i.action,model:i.model},a={operation:{name:"operation",attributes:{method:s.action,model:s.model,name:s.model?`${s.model}.${s.action}`:s.action}}},o=async l=>{let{runInTransaction:u,args:c,...d}=l,f={...i,...d};c&&(f.args=n.middlewareArgsToRequestArgs(c)),i.transaction!==void 0&&u===!1&&delete f.transaction;let p=await vE(this,f);return f.model?hE({result:p,modelName:f.model,args:f.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):p};return this._tracingHelper.runInChildSpan(a.operation,()=>new mS.AsyncResource("prisma-client-request").runInAsyncScope(()=>o(s)))}async _executeRequest({args:i,clientMethod:n,dataPath:s,callsite:a,action:o,model:l,argsMapper:u,transaction:c,unpacker:d,otelParentCtx:f,customDataProxyFetch:p}){try{i=u?u(i):i;let g={name:"serialize"},h=this._tracingHelper.runInChildSpan(g,()=>Jd({modelName:l,runtimeDataModel:this._runtimeDataModel,action:o,args:i,clientMethod:n,callsite:a,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return ve.enabled("prisma:client")&&(yt("Prisma Client call:"),yt(`prisma.${n}(${SS(i)})`),yt("Generated request:"),yt(JSON.stringify(h,null,2)+`
`)),c?.kind==="batch"&&await c.lock,this._requestHandler.request({protocolQuery:h,modelName:l,action:o,clientMethod:n,dataPath:s,callsite:a,args:i,extensions:this._extensions,transaction:c,unpacker:d,otelParentCtx:f,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:p})}catch(g){throw g.clientVersion=this._clientVersion,g}}$metrics=new Xd(this);_hasPreviewFlag(i){return!!this._engineConfig.previewFeatures?.includes(i)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}$extends=cE}return t}function Oc(e,t){return uR(e)?[new Ot(e,t),NA]:[e,DA]}function uR(e){return Array.isArray(e)&&Array.isArray(e.raw)}var cR=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function dR(e){return new Proxy(e,{get(t,r){if(r in t)return t[r];if(!cR.has(r))throw new TypeError(`Invalid enum value: ${String(r)}`)}})}function fR(e){ad(e,{conflictCheck:"warn"})}});var Bf=m(U=>{Object.defineProperty(U,"__esModule",{value:!0});var{PrismaClientKnownRequestError:pR,PrismaClientUnknownRequestError:hR,PrismaClientRustPanicError:mR,PrismaClientInitializationError:gR,PrismaClientValidationError:yR,getPrismaClient:bR,sqltag:xR,empty:vR,join:wR,raw:SR,skip:K6,Decimal:ER,Debug:z6,objectEnumValues:hr,makeStrictEnum:AR,Extensions:Vf,warnOnce:J6,defineDmmfProperty:RR,Public:kR,getRuntime:W6,createParam:Y6}=Ka(),J={};U.Prisma=J;U.$Enums={};J.prismaVersion={client:"6.19.0",engine:"2ba551f319ab1df4bc874a89965d8b3641056773"};J.PrismaClientKnownRequestError=pR;J.PrismaClientUnknownRequestError=hR;J.PrismaClientRustPanicError=mR;J.PrismaClientInitializationError=gR;J.PrismaClientValidationError=yR;J.Decimal=ER;J.sql=xR;J.empty=vR;J.join=wR;J.raw=SR;J.validator=kR.validator;J.getExtensionContext=Vf.getExtensionContext;J.defineExtension=Vf.defineExtension;J.DbNull=hr.instances.DbNull;J.JsonNull=hr.instances.JsonNull;J.AnyNull=hr.instances.AnyNull;J.NullTypes={DbNull:hr.classes.DbNull,JsonNull:hr.classes.JsonNull,AnyNull:hr.classes.AnyNull};var ft=require("path");U.Prisma.TransactionIsolationLevel=AR({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});U.Prisma.UserScalarFieldEnum={id:"id",username:"username",email:"email",normalizedEmail:"normalizedEmail",password:"password",displayName:"displayName",bio:"bio",avatar:"avatar",name:"name",role:"role",emailVerified:"emailVerified",emailVerifiedAt:"emailVerifiedAt",twoFactorEnabled:"twoFactorEnabled",twoFactorSecret:"twoFactorSecret",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.ScriptScalarFieldEnum={id:"id",title:"title",summary:"summary",authorId:"authorId",createdAt:"createdAt"};U.Prisma.AuditionScalarFieldEnum={id:"id",title:"title",summary:"summary",hostId:"hostId",createdAt:"createdAt"};U.Prisma.PostScalarFieldEnum={id:"id",content:"content",media:"media",authorId:"authorId",createdAt:"createdAt"};U.Prisma.ReelScalarFieldEnum={id:"id",videoUrl:"videoUrl",thumbnail:"thumbnail",caption:"caption",authorId:"authorId",createdAt:"createdAt"};U.Prisma.CommentScalarFieldEnum={id:"id",text:"text",reelId:"reelId",authorId:"authorId",createdAt:"createdAt"};U.Prisma.LikeScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};U.Prisma.BookmarkScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};U.Prisma.ConversationScalarFieldEnum={id:"id",title:"title",lastMessage:"lastMessage",lastMessageAt:"lastMessageAt",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.ConversationParticipantScalarFieldEnum={id:"id",conversationId:"conversationId",userId:"userId",joinedAt:"joinedAt"};U.Prisma.MessageScalarFieldEnum={id:"id",text:"text",conversationId:"conversationId",senderId:"senderId",createdAt:"createdAt"};U.Prisma.NotificationScalarFieldEnum={id:"id",type:"type",message:"message",recipientId:"recipientId",triggererId:"triggererId",isRead:"isRead",metadata:"metadata",createdAt:"createdAt"};U.Prisma.ConnectionRequestScalarFieldEnum={id:"id",senderId:"senderId",receiverId:"receiverId",status:"status",message:"message",createdAt:"createdAt"};U.Prisma.ProfileScalarFieldEnum={id:"id",userId:"userId",vanityUrl:"vanityUrl",headline:"headline",bio:"bio",roles:"roles",location:"location",privacy:"privacy",tags:"tags",socialLinks:"socialLinks",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.MediaScalarFieldEnum={id:"id",profileId:"profileId",type:"type",s3Key:"s3Key",posterS3Key:"posterS3Key",title:"title",description:"description",duration:"duration",width:"width",height:"height",fileSize:"fileSize",privacy:"privacy",processedStatus:"processedStatus",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.CreditScalarFieldEnum={id:"id",profileId:"profileId",title:"title",role:"role",company:"company",year:"year",description:"description",orderIndex:"orderIndex",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.UserSettingsScalarFieldEnum={id:"id",userId:"userId",notifications:"notifications",accountSecurity:"accountSecurity",privacy:"privacy",billing:"billing",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.ReelRequestScalarFieldEnum={id:"id",mediaId:"mediaId",requesterId:"requesterId",ownerId:"ownerId",status:"status",message:"message",response:"response",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.EmailVerificationTokenScalarFieldEnum={id:"id",userId:"userId",token:"token",expiresAt:"expiresAt",createdAt:"createdAt"};U.Prisma.RefreshTokenScalarFieldEnum={id:"id",userId:"userId",jti:"jti",expiresAt:"expiresAt",invalidatedAt:"invalidatedAt",createdAt:"createdAt",lastUsedAt:"lastUsedAt"};U.Prisma.PRIntelligenceScalarFieldEnum={id:"id",prNumber:"prNumber",changedFilesCount:"changedFilesCount",sensitivePathsCount:"sensitivePathsCount",riskScore:"riskScore",metadata:"metadata",createdAt:"createdAt"};U.Prisma.TestRunScalarFieldEnum={id:"id",suite:"suite",testName:"testName",status:"status",durationMs:"durationMs",runAt:"runAt",metadata:"metadata"};U.Prisma.ModerationReportScalarFieldEnum={id:"id",reporterId:"reporterId",targetType:"targetType",targetId:"targetId",category:"category",description:"description",evidenceUrls:"evidenceUrls",status:"status",severity:"severity",createdAt:"createdAt",updatedAt:"updatedAt"};U.Prisma.ModerationActionScalarFieldEnum={id:"id",reportId:"reportId",action:"action",reason:"reason",actorId:"actorId",createdAt:"createdAt"};U.Prisma.AnalyticsEventScalarFieldEnum={id:"id",event:"event",anonId:"anonId",userId:"userId",sessionId:"sessionId",properties:"properties",createdAt:"createdAt"};U.Prisma.SortOrder={asc:"asc",desc:"desc"};U.Prisma.NullableJsonNullValueInput={DbNull:J.DbNull,JsonNull:J.JsonNull};U.Prisma.JsonNullValueInput={JsonNull:J.JsonNull};U.Prisma.QueryMode={default:"default",insensitive:"insensitive"};U.Prisma.NullsOrder={first:"first",last:"last"};U.Prisma.JsonNullValueFilter={DbNull:J.DbNull,JsonNull:J.JsonNull,AnyNull:J.AnyNull};U.Prisma.ModelName={User:"User",Script:"Script",Audition:"Audition",Post:"Post",Reel:"Reel",Comment:"Comment",Like:"Like",Bookmark:"Bookmark",Conversation:"Conversation",ConversationParticipant:"ConversationParticipant",Message:"Message",Notification:"Notification",ConnectionRequest:"ConnectionRequest",Profile:"Profile",Media:"Media",Credit:"Credit",UserSettings:"UserSettings",ReelRequest:"ReelRequest",EmailVerificationToken:"EmailVerificationToken",RefreshToken:"RefreshToken",PRIntelligence:"PRIntelligence",TestRun:"TestRun",ModerationReport:"ModerationReport",ModerationAction:"ModerationAction",AnalyticsEvent:"AnalyticsEvent"};var Te={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\node_modules\\@prisma\\client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"rhel-openssl-3.0.x"}],previewFeatures:[],sourceFilePath:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\prisma\\schema.prisma"},relativeEnvPaths:{rootEnvPath:null},relativePath:"../../../prisma",clientVersion:"6.19.0",engineVersion:"2ba551f319ab1df4bc874a89965d8b3641056773",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(uuid())
  username         String    @unique
  email            String    @unique
  normalizedEmail  String?   @unique // Lowercase normalized email for case-insensitive lookups
  password         String // hashed password
  displayName      String
  bio              String?
  avatar           String?
  name             String?
  role             String    @default("artist") // 'artist' | 'observer'
  emailVerified    Boolean   @default(false)
  emailVerifiedAt  DateTime?
  twoFactorEnabled Boolean   @default(false)
  twoFactorSecret  String? // Encrypted or hashed TOTP secret
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  scripts              Script[]
  auditions            Audition[]
  posts                Post[]
  reels                Reel[]
  comments             Comment[]
  likes                Like[]
  bookmarks            Bookmark[]
  sentRequests         ConnectionRequest[]       @relation("sender")
  receivedRequests     ConnectionRequest[]       @relation("receiver")
  sentMessages         Message[]                 @relation("sender")
  conversations        ConversationParticipant[]
  notifications        Notification[]            @relation("recipient")
  triggeredNotifs      Notification[]            @relation("triggerer")
  profile              Profile?
  settings             UserSettings?
  sentReelRequests     ReelRequest[]             @relation("requester")
  receivedReelRequests ReelRequest[]             @relation("owner")
  verificationTokens   EmailVerificationToken[]
  refreshTokens        RefreshToken[]

  @@map("users")
}

model Script {
  id        String   @id @default(cuid())
  title     String
  summary   String
  authorId  String
  author    User     @relation(fields: [authorId], references: [id])
  createdAt DateTime @default(now())
}

model Audition {
  id        String   @id @default(cuid())
  title     String
  summary   String
  hostId    String
  host      User     @relation(fields: [hostId], references: [id])
  createdAt DateTime @default(now())
}

model Post {
  id        String   @id @default(uuid())
  content   String   @db.Text
  media     String[]
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([authorId])
  @@map("posts")
}

model Reel {
  id        String   @id @default(uuid())
  videoUrl  String
  thumbnail String?
  caption   String?  @db.Text
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  comments  Comment[]
  likes     Like[]
  bookmarks Bookmark[]

  @@index([authorId])
  @@index([createdAt])
  @@map("reels")
}

model Comment {
  id        String   @id @default(uuid())
  text      String   @db.Text
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([reelId])
  @@index([authorId])
  @@map("comments")
}

model Like {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("likes")
}

model Bookmark {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("bookmarks")
}

model Conversation {
  id            String    @id @default(uuid())
  title         String?
  lastMessage   String?   @db.Text
  lastMessageAt DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  participants ConversationParticipant[]
  messages     Message[]

  @@map("conversations")
}

model ConversationParticipant {
  id             String       @id @default(uuid())
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  userId         String
  user           User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  joinedAt       DateTime     @default(now())

  @@unique([conversationId, userId])
  @@index([userId])
  @@map("conversation_participants")
}

model Message {
  id             String       @id @default(uuid())
  text           String       @db.Text
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  senderId       String
  sender         User         @relation("sender", fields: [senderId], references: [id], onDelete: Cascade)
  createdAt      DateTime     @default(now())

  @@index([conversationId])
  @@index([senderId])
  @@map("messages")
}

model Notification {
  id          String   @id @default(uuid())
  type        String // 'like', 'comment', 'follow', 'message'
  message     String   @db.Text
  recipientId String
  recipient   User     @relation("recipient", fields: [recipientId], references: [id], onDelete: Cascade)
  triggererId String?
  triggerer   User?    @relation("triggerer", fields: [triggererId], references: [id], onDelete: SetNull)
  isRead      Boolean  @default(false)
  metadata    Json? // Additional data like reelId, commentId, etc.
  createdAt   DateTime @default(now())

  @@index([recipientId, isRead])
  @@index([createdAt])
  @@map("notifications")
}

model ConnectionRequest {
  id         String   @id @default(uuid())
  senderId   String
  sender     User     @relation("sender", fields: [senderId], references: [id])
  receiverId String
  receiver   User     @relation("receiver", fields: [receiverId], references: [id])
  status     String   @default("pending")
  message    String?
  createdAt  DateTime @default(now())

  @@unique([senderId, receiverId])
  @@map("connection_requests")
}

model Profile {
  id          String   @id @default(uuid())
  userId      String   @unique
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  vanityUrl   String   @unique
  headline    String?
  bio         String?  @db.Text
  roles       String[] // ["Actor", "Director", "Writer"]
  location    Json? // { city: "Los Angeles", state: "CA", country: "USA" }
  privacy     Json     @default("{}") // { visibility: "public|network|private", showEmail: false, showPhone: false }
  tags        String[] // searchable tags
  socialLinks Json? // { website: "", instagram: "", imdb: "" }
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  media   Media[]
  credits Credit[]

  @@index([vanityUrl])
  @@index([roles])
  @@map("profiles")
}

model Media {
  id              String   @id @default(uuid())
  profileId       String
  profile         Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  type            String // "image" | "video" | "pdf"
  s3Key           String // S3 object key
  posterS3Key     String? // For videos - thumbnail/poster frame
  title           String?
  description     String?  @db.Text
  duration        Int? // For videos in seconds
  width           Int?
  height          Int?
  fileSize        Int? // In bytes
  privacy         String   @default("public") // "public" | "on-request" | "private"
  processedStatus String   @default("pending") // "pending" | "processing" | "complete" | "failed"
  metadata        Json? // Additional metadata like tags, derivatives, etc.
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  reelRequests ReelRequest[]

  @@index([profileId])
  @@index([type])
  @@index([privacy])
  @@index([processedStatus])
  @@map("media")
}

model Credit {
  id          String   @id @default(uuid())
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  title       String // Project/show title
  role        String // Character or position
  company     String? // Production company
  year        Int?
  description String?  @db.Text
  orderIndex  Int      @default(0) // For custom ordering
  metadata    Json? // Additional fields like genre, awards, etc.
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([profileId])
  @@index([year])
  @@map("credits")
}

model UserSettings {
  id              String   @id @default(uuid())
  userId          String   @unique
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  notifications   Json     @default("{}") // { email: true, push: true, reelRequests: true, messages: true }
  accountSecurity Json     @default("{}") // { twoFactorEnabled: false, loginNotifications: true }
  privacy         Json     @default("{}") // { showActivity: true, allowMessagesFrom: "everyone" }
  billing         Json? // Reference to billing info (not stored directly for PCI compliance)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("user_settings")
}

model ReelRequest {
  id          String   @id @default(uuid())
  mediaId     String
  media       Media    @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  requesterId String
  requester   User     @relation("requester", fields: [requesterId], references: [id], onDelete: Cascade)
  ownerId     String
  owner       User     @relation("owner", fields: [ownerId], references: [id], onDelete: Cascade)
  status      String   @default("pending") // "pending" | "approved" | "denied"
  message     String?  @db.Text
  response    String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([mediaId, requesterId])
  @@index([mediaId])
  @@index([requesterId])
  @@index([ownerId, status])
  @@map("reel_requests")
}

model EmailVerificationToken {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@index([userId])
  @@index([token])
  @@map("email_verification_tokens")
}

model RefreshToken {
  id            String    @id @default(uuid())
  userId        String
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  jti           String    @unique // JWT ID for tracking
  expiresAt     DateTime
  invalidatedAt DateTime? // When token was invalidated (logout)
  createdAt     DateTime  @default(now())
  lastUsedAt    DateTime  @default(now())

  @@index([userId])
  @@index([jti])
  @@index([userId, invalidatedAt])
  @@map("refresh_tokens")
}

model PRIntelligence {
  id                  String   @id @default(uuid())
  prNumber            Int
  changedFilesCount   Int
  sensitivePathsCount Int
  riskScore           Float
  metadata            Json? // Additional PR metadata
  createdAt           DateTime @default(now())

  @@index([prNumber])
  @@index([riskScore])
  @@map("pr_intelligence")
}

model TestRun {
  id         String   @id @default(uuid())
  suite      String
  testName   String
  status     String // "passed" | "failed" | "skipped"
  durationMs Int
  runAt      DateTime @default(now())
  metadata   Json? // Additional test metadata

  @@index([suite, testName])
  @@index([runAt])
  @@index([status])
  @@map("test_runs")
}

model ModerationReport {
  id           String   @id @default(cuid())
  reporterId   String
  targetType   String // "user" | "profile" | "post" | "comment" | "link"
  targetId     String
  category     String // from REPORT_CATEGORY_ALLOWLIST
  description  String?  @db.Text
  evidenceUrls String[] @default([])
  status       String   @default("open") // "open" | "reviewed" | "actioned" | "dismissed"
  severity     Int      @default(0) // 0=info,1=low,2=med,3=high
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  actions ModerationAction[]

  @@index([reporterId])
  @@index([targetType, targetId])
  @@index([status])
  @@index([category])
  @@index([severity])
  @@index([createdAt])
  @@map("moderation_reports")
}

model ModerationAction {
  id        String   @id @default(cuid())
  reportId  String
  action    String // "allow" | "remove" | "ban" | "warn"
  reason    String?  @db.Text
  actorId   String // admin userId
  createdAt DateTime @default(now())

  report ModerationReport @relation(fields: [reportId], references: [id], onDelete: Cascade)

  @@index([reportId])
  @@index([actorId])
  @@index([createdAt])
  @@map("moderation_actions")
}

model AnalyticsEvent {
  id         String   @id @default(cuid())
  event      String
  anonId     String? // random UUID per browser (cookie); no userId unless strictly needed
  userId     String? // optional: only if user is logged in AND consented (flag controlled)
  sessionId  String? // generated client-side ephemeral (no personal data)
  properties Json?
  createdAt  DateTime @default(now())

  @@index([event])
  @@index([createdAt])
  @@map("analytics_events")
}
`,inlineSchemaHash:"7e2e2a26a1c41eb103ff9d68413a3e4434415fea613cb1fa8dc67b1314b1865b",copyEngine:!0},$f=require("fs");Te.dirname=__dirname;if(!$f.existsSync(ft.join(__dirname,"schema.prisma"))){let e=["node_modules/.prisma/client",".prisma/client"],t=e.find(r=>$f.existsSync(ft.join(process.cwd(),r,"schema.prisma")))??e[0];Te.dirname=ft.join(process.cwd(),t),Te.isBundled=!0}Te.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":"users","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"username","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"normalizedEmail","kind":"scalar","isList":false,"isRequired":false,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"displayName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"avatar","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"artist","isGenerated":false,"isUpdatedAt":false},{"name":"emailVerified","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"emailVerifiedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorEnabled","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorSecret","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"scripts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Script","nativeType":null,"relationName":"ScriptToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"auditions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Audition","nativeType":null,"relationName":"AuditionToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"posts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Post","nativeType":null,"relationName":"PostToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"reels","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"ReelToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"receiver","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentMessages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"conversations","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"recipient","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"triggeredNotifs","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"triggerer","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"ProfileToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"settings","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"UserSettings","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"requester","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"owner","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"verificationTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"EmailVerificationToken","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"refreshTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"RefreshToken","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Script":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ScriptToUser","relationFromFields":["authorId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Audition":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"hostId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"host","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"AuditionToUser","relationFromFields":["hostId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Post":{"dbName":"posts","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"content","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"PostToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Reel":{"dbName":"reels","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"videoUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"thumbnail","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"caption","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ReelToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Comment":{"dbName":"comments","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"CommentToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"CommentToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Like":{"dbName":"likes","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"LikeToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"LikeToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Bookmark":{"dbName":"bookmarks","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Conversation":{"dbName":"conversations","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessage","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessageAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"participants","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"messages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConversationParticipant":{"dbName":"conversation_participants","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"joinedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["conversationId","userId"]],"uniqueIndexes":[{"name":null,"fields":["conversationId","userId"]}],"isGenerated":false},"Message":{"dbName":"messages","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Notification":{"dbName":"notifications","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"recipientId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"recipient","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"recipient","relationFromFields":["recipientId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"triggererId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"triggerer","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"triggerer","relationFromFields":["triggererId"],"relationToFields":["id"],"relationOnDelete":"SetNull","isGenerated":false,"isUpdatedAt":false},{"name":"isRead","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConnectionRequest":{"dbName":"connection_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"receiverId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"receiver","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"receiver","relationFromFields":["receiverId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["senderId","receiverId"]],"uniqueIndexes":[{"name":null,"fields":["senderId","receiverId"]}],"isGenerated":false},"Profile":{"dbName":"profiles","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ProfileToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"vanityUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"headline","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"roles","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"location","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"tags","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"socialLinks","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"media","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"credits","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Credit","nativeType":null,"relationName":"CreditToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Media":{"dbName":"media","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"MediaToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"s3Key","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"posterS3Key","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"duration","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"width","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"height","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"fileSize","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"public","isGenerated":false,"isUpdatedAt":false},{"name":"processedStatus","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"reelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Credit":{"dbName":"credits","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"CreditToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"company","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"year","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"orderIndex","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"UserSettings":{"dbName":"user_settings","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"accountSecurity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"billing","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ReelRequest":{"dbName":"reel_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"mediaId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":["mediaId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"requesterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"requester","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"requester","relationFromFields":["requesterId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"ownerId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"owner","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"owner","relationFromFields":["ownerId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"response","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[["mediaId","requesterId"]],"uniqueIndexes":[{"name":null,"fields":["mediaId","requesterId"]}],"isGenerated":false},"EmailVerificationToken":{"dbName":"email_verification_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"token","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"RefreshToken":{"dbName":"refresh_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"jti","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"invalidatedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"lastUsedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"PRIntelligence":{"dbName":"pr_intelligence","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"prNumber","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"changedFilesCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sensitivePathsCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"riskScore","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"TestRun":{"dbName":"test_runs","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"suite","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"testName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"durationMs","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"runAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationReport":{"dbName":"moderation_reports","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reporterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetType","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"category","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"evidenceUrls","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":[],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"open","isGenerated":false,"isUpdatedAt":false},{"name":"severity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"actions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationAction","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationAction":{"dbName":"moderation_actions","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reportId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"action","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reason","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"actorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"report","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationReport","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":["reportId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"AnalyticsEvent":{"dbName":"analytics_events","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"event","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"anonId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sessionId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"properties","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{},"types":{}}');RR(U.Prisma,Te.runtimeDataModel);Te.engineWasm=void 0;Te.compilerWasm=void 0;var{warnEnvConflicts:TR}=Ka();TR({rootEnvPath:Te.relativeEnvPaths.rootEnvPath&&ft.resolve(Te.dirname,Te.relativeEnvPaths.rootEnvPath),schemaEnvPath:Te.relativeEnvPaths.schemaEnvPath&&ft.resolve(Te.dirname,Te.relativeEnvPaths.schemaEnvPath)});var IR=bR(Te);U.PrismaClient=IR;Object.assign(U,J);ft.join(__dirname,"libquery_engine-rhel-openssl-3.0.x.so.node");ft.join(process.cwd(),"node_modules/.prisma/client/libquery_engine-rhel-openssl-3.0.x.so.node");ft.join(__dirname,"schema.prisma");ft.join(process.cwd(),"node_modules/.prisma/client/schema.prisma")});var Hf=m((Z6,Gf)=>{Gf.exports={...Bf()}});var Kf=m((eN,Qf)=>{Qf.exports={...Hf()}});var up=m(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});function QR(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var lp=QR(require("crypto")),KR=(e,t,r)=>lp.createHmac(e,Buffer.from(t,"hex")).update(Buffer.from(r,"hex")).digest().toString("hex"),zR=(e,t)=>lp.randomBytes(e).toString(t);xn.createDigest=KR;xn.createRandomBytes=zR});var dp=m(to=>{"use strict";var JR="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",cp=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function WR(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1}to.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t=0,r=0,i=0,n=0,s=new Buffer(WR(e)*8);t<e.length;){var a=e[t];i>3?(n=a&255>>i,i=(i+5)%8,n=n<<i|(t+1<e.length?e[t+1]:0)>>8-i,t++):(n=a>>8-(i+5)&31,i=(i+5)%8,i===0&&t++),s[r]=JR.charCodeAt(n),r++}for(t=r;t<s.length;t++)s[t]=61;return s};to.decode=function(e){var t=0,r=0,i,n=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var s=new Buffer(Math.ceil(e.length*5/8)),a=0;a<e.length&&e[a]!==61;a++){var o=e[a]-48;if(o<cp.length)r=cp[o],t<=3?(t=(t+5)%8,t===0?(i|=r,s[n]=i,n++,i=0):i|=255&r<<8-t):(t=(t+5)%8,i|=255&r>>>t,s[n]=i,n++,i=255&r<<8-t);else throw new Error("Invalid input - it is not base32 encoded string")}return s.slice(0,n)}});var pp=m(ro=>{var fp=dp();ro.encode=fp.encode;ro.decode=fp.decode});var mp=m(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});function YR(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var hp=YR(pp()),XR=(e,t)=>hp.decode(e).toString(t),ZR=(e,t)=>hp.encode(Buffer.from(e,t).toString("ascii")).toString().replace(/=/g,"");vn.keyDecoder=XR;vn.keyEncoder=ZR});var Lp=m(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});function kn(e){return Object.keys(e).map(t=>e[t])}(function(e){e.SHA1="sha1",e.SHA256="sha256",e.SHA512="sha512"})(w.HashAlgorithms||(w.HashAlgorithms={}));var Sn=kn(w.HashAlgorithms);(function(e){e.ASCII="ascii",e.BASE64="base64",e.HEX="hex",e.LATIN1="latin1",e.UTF8="utf8"})(w.KeyEncodings||(w.KeyEncodings={}));var io=kn(w.KeyEncodings);(function(e){e.HOTP="hotp",e.TOTP="totp"})(w.Strategy||(w.Strategy={}));var no=kn(w.Strategy),Tn=()=>{throw new Error("Please provide an options.createDigest implementation.")};function oo(e){return/^(\d+)$/.test(e)}function lo(e,t,r){return e.length>=t?e:`${Array(t+1).join(r)}${e}`.slice(-1*t)}function uo(e){let t=`otpauth://${e.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,r=[];if(no.indexOf(e.type)<0)throw new Error(`Expecting options.type to be one of ${no.join(", ")}. Received ${e.type}.`);if(e.type==="hotp"){if(e.counter==null||typeof e.counter!="number")throw new Error('Expecting options.counter to be a number when options.type is "hotp".');r.push(`&counter=${e.counter}`)}return e.type==="totp"&&e.step&&r.push(`&period=${e.step}`),e.digits&&r.push(`&digits=${e.digits}`),e.algorithm&&r.push(`&algorithm=${e.algorithm.toUpperCase()}`),e.issuer&&r.push(`&issuer=${encodeURIComponent(e.issuer)}`),t.replace("{labelPrefix}",encodeURIComponent(e.issuer||e.accountName)).replace("{accountName}",encodeURIComponent(e.accountName)).replace("{secret}",e.secret).replace("{query}",r.join(""))}var En=class e{constructor(t={}){this._defaultOptions=Object.freeze({...t}),this._options=Object.freeze({})}create(t={}){return new e(t)}clone(t={}){let r=this.create({...this._defaultOptions,...t});return r.options=this._options,r}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(t){this._options=Object.freeze({...this._options,...t})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}};function co(e){if(typeof e.createDigest!="function")throw new Error("Expecting options.createDigest to be a function.");if(typeof e.createHmacKey!="function")throw new Error("Expecting options.createHmacKey to be a function.");if(typeof e.digits!="number")throw new Error("Expecting options.digits to be a number.");if(!e.algorithm||Sn.indexOf(e.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${Sn.join(", ")}. Received ${e.algorithm}.`);if(!e.encoding||io.indexOf(e.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${io.join(", ")}. Received ${e.encoding}.`)}var yp=(e,t,r)=>Buffer.from(t,r).toString("hex");function bp(){return{algorithm:w.HashAlgorithms.SHA1,createHmacKey:yp,createDigest:Tn,digits:6,encoding:w.KeyEncodings.ASCII}}function xp(e){let t={...bp(),...e};return co(t),Object.freeze(t)}function vp(e){let t=e.toString(16);return lo(t,16,"0")}function wp(e,t){let r=Buffer.from(e,"hex"),i=r[r.length-1]&15,s=((r[i]&127)<<24|(r[i+1]&255)<<16|(r[i+2]&255)<<8|r[i+3]&255)%Math.pow(10,t);return lo(String(s),t,"0")}function ek(e,t,r){let i=vp(t),n=r.createHmacKey(r.algorithm,e,r.encoding);return r.createDigest(r.algorithm,n,i)}function In(e,t,r){let i=r.digest||ek(e,t,r);return wp(i,r.digits)}function Sp(e,t,r,i){if(!oo(e))return!1;let n=In(t,r,i);return e===n}function Ep(e,t,r,i,n){return uo({algorithm:n.algorithm,digits:n.digits,type:w.Strategy.HOTP,accountName:e,counter:i,issuer:t,secret:r})}var An=class e extends En{create(t={}){return new e(t)}allOptions(){return xp(this.options)}generate(t,r){return In(t,r,this.allOptions())}check(t,r,i){return Sp(t,r,i,this.allOptions())}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret,t.counter)}keyuri(t,r,i,n){return Ep(t,r,i,n,this.allOptions())}};function Ap(e){if(typeof e=="number")return[Math.abs(e),Math.abs(e)];if(Array.isArray(e)){let[t,r]=e;if(typeof t=="number"&&typeof r=="number")return[Math.abs(t),Math.abs(r)]}throw new Error("Expecting options.window to be an number or [number, number].")}function fo(e){if(co(e),Ap(e.window),typeof e.epoch!="number")throw new Error("Expecting options.epoch to be a number.");if(typeof e.step!="number")throw new Error("Expecting options.step to be a number.")}var wn=(e,t,r)=>{let i=e.length,n=Buffer.from(e,t).toString("hex");if(i<r){let s=new Array(r-i+1).join(n);return Buffer.from(s,"hex").slice(0,r).toString("hex")}return n},po=(e,t,r)=>{switch(e){case w.HashAlgorithms.SHA1:return wn(t,r,20);case w.HashAlgorithms.SHA256:return wn(t,r,32);case w.HashAlgorithms.SHA512:return wn(t,r,64);default:throw new Error(`Expecting algorithm to be one of ${Sn.join(", ")}. Received ${e}.`)}};function Rp(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:Tn,createHmacKey:po,digits:6,encoding:w.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function kp(e){let t={...Rp(),...e};return fo(t),Object.freeze(t)}function Tp(e,t){return Math.floor(e/t/1e3)}function On(e,t){let r=Tp(t.epoch,t.step);return In(e,r,t)}function gp(e,t,r,i){let n=[];if(i===0)return n;for(let s=1;s<=i;s++){let a=t*s*r;n.push(e+a)}return n}function Ip(e,t,r){let i=Ap(r),n=t*1e3;return{current:e,past:gp(e,-1,n,i[0]),future:gp(e,1,n,i[1])}}function ho(e,t,r){if(!oo(e))return!1;let i=On(t,r);return e===i}function so(e,t,r,i){let n=null;return e.some((s,a)=>ho(t,r,{...i,epoch:s})?(n=a+1,!0):!1),n}function mo(e,t,r){if(ho(e,t,r))return 0;let i=Ip(r.epoch,r.step,r.window),n=so(i.past,e,t,r);return n!==null?n*-1:so(i.future,e,t,r)}function go(e,t){return Math.floor(e/1e3)%t}function Op(e,t){return t-go(e,t)}function _p(e,t,r,i){return uo({algorithm:i.algorithm,digits:i.digits,step:i.step,type:w.Strategy.TOTP,accountName:e,issuer:t,secret:r})}var Rn=class e extends An{create(t={}){return new e(t)}allOptions(){return kp(this.options)}generate(t){return On(t,this.allOptions())}checkDelta(t,r){return mo(t,r,this.allOptions())}check(t,r){return typeof this.checkDelta(t,r)=="number"}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret)}timeRemaining(){let t=this.allOptions();return Op(t.epoch,t.step)}timeUsed(){let t=this.allOptions();return go(t.epoch,t.step)}keyuri(t,r,i){return _p(t,r,i,this.allOptions())}};function qp(e){if(fo(e),typeof e.keyDecoder!="function")throw new Error("Expecting options.keyDecoder to be a function.");if(e.keyEncoder&&typeof e.keyEncoder!="function")throw new Error("Expecting options.keyEncoder to be a function.")}function Cp(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:Tn,createHmacKey:po,digits:6,encoding:w.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function Pp(e){let t={...Cp(),...e};return qp(t),Object.freeze(t)}function yo(e,t){return t.keyEncoder(e,t.encoding)}function _n(e,t){return t.keyDecoder(e,t.encoding)}function Np(e,t){let r=t.createRandomBytes(e,t.encoding);return yo(r,t)}function Dp(e,t){return On(_n(e,t),t)}function Up(e,t,r){return mo(e,_n(t,r),r)}var ao=class e extends Rn{create(t={}){return new e(t)}allOptions(){return Pp(this.options)}generate(t){return Dp(t,this.allOptions())}checkDelta(t,r){return Up(t,r,this.allOptions())}encode(t){return yo(t,this.allOptions())}decode(t){return _n(t,this.allOptions())}generateSecret(t=10){return Np(t,this.allOptions())}};w.Authenticator=ao;w.HASH_ALGORITHMS=Sn;w.HOTP=An;w.KEY_ENCODINGS=io;w.OTP=En;w.STRATEGY=no;w.TOTP=Rn;w.authenticatorCheckWithWindow=Up;w.authenticatorDecoder=_n;w.authenticatorDefaultOptions=Cp;w.authenticatorEncoder=yo;w.authenticatorGenerateSecret=Np;w.authenticatorOptionValidator=qp;w.authenticatorOptions=Pp;w.authenticatorToken=Dp;w.createDigestPlaceholder=Tn;w.hotpCheck=Sp;w.hotpCounter=vp;w.hotpCreateHmacKey=yp;w.hotpDefaultOptions=bp;w.hotpDigestToToken=wp;w.hotpKeyuri=Ep;w.hotpOptions=xp;w.hotpOptionsValidator=co;w.hotpToken=In;w.isTokenValid=oo;w.keyuri=uo;w.objectValues=kn;w.padStart=lo;w.totpCheck=ho;w.totpCheckByEpoch=so;w.totpCheckWithWindow=mo;w.totpCounter=Tp;w.totpCreateHmacKey=po;w.totpDefaultOptions=Rp;w.totpEpochAvailable=Ip;w.totpKeyuri=_p;w.totpOptions=kp;w.totpOptionsValidator=fo;w.totpPadSecret=wn;w.totpTimeRemaining=Op;w.totpTimeUsed=go;w.totpToken=On});var Mp=m(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});var qn=up(),Fp=mp(),bo=Lp(),tk=new bo.HOTP({createDigest:qn.createDigest}),rk=new bo.TOTP({createDigest:qn.createDigest}),ik=new bo.Authenticator({createDigest:qn.createDigest,createRandomBytes:qn.createRandomBytes,keyDecoder:Fp.keyDecoder,keyEncoder:Fp.keyEncoder});ui.authenticator=ik;ui.hotp=tk;ui.totp=rk});var $p=m(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var jp=Mp();Object.keys(jp).forEach(function(e){e!=="default"&&Object.defineProperty(xo,e,{enumerable:!0,get:function(){return jp[e]}})})});var Qp=m((pN,nk)=>{nk.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var yr=m(_e=>{"use strict";var sk=_e&&_e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.getKeyIndexes=_e.hasFlag=_e.exists=_e.list=void 0;var Cn=sk(Qp());_e.list=Object.keys(Cn.default);var vo={};_e.list.forEach(e=>{vo[e]=Cn.default[e].flags.reduce(function(t,r){return t[r]=!0,t},{})});function ak(e){return!!Cn.default[e]}_e.exists=ak;function ok(e,t){if(!vo[e])throw new Error("Unknown command "+e);return!!vo[e][t]}_e.hasFlag=ok;function lk(e,t,r){let i=Cn.default[e];if(!i)throw new Error("Unknown command "+e);if(!Array.isArray(t))throw new Error("Expect args to be an array");let n=[],s=!!(r&&r.parseExternalKey),a=(l,u)=>{let c=[],d=Number(l[u]);for(let f=0;f<d;f++)c.push(f+u+1);return c},o=(l,u,c)=>{for(let d=u;d<l.length-1;d+=1)if(String(l[d]).toLowerCase()===c.toLowerCase())return d+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":n.push(0,...a(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":n.push(...a(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{n.push(...a(t,0));break}case"georadius":{n.push(0);let l=o(t,5,"STORE");l&&n.push(l);let u=o(t,5,"STOREDIST");u&&n.push(u);break}case"georadiusbymember":{n.push(0);let l=o(t,4,"STORE");l&&n.push(l);let u=o(t,4,"STOREDIST");u&&n.push(u);break}case"sort":case"sort_ro":n.push(0);for(let l=1;l<t.length-1;l++){let u=t[l];if(typeof u!="string")continue;let c=u.toUpperCase();c==="GET"?(l+=1,u=t[l],u!=="#"&&(s?n.push([l,Kp(u)]):n.push(l))):c==="BY"?(l+=1,s?n.push([l,Kp(t[l])]):n.push(l)):c==="STORE"&&(l+=1,n.push(l))}break;case"migrate":if(t[2]==="")for(let l=5;l<t.length-1;l++){let u=t[l];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let c=l+1;c<t.length;c++)n.push(c);break}}else n.push(2);break;case"xreadgroup":case"xread":for(let l=e==="xread"?0:3;l<t.length-1;l++)if(String(t[l]).toUpperCase()==="STREAMS"){for(let u=l+1;u<=l+(t.length-1-l)/2;u++)n.push(u);break}break;default:if(i.step>0){let l=i.keyStart-1,u=i.keyStop>0?i.keyStop:t.length+i.keyStop+1;for(let c=l;c<u;c+=i.step)n.push(c)}break}return n}_e.getKeyIndexes=lk;function Kp(e){typeof e!="string"&&(e=String(e));let t=e.indexOf("->");return t===-1?e.length:t}});var zp=m(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.tryCatch=qt.errorObj=void 0;qt.errorObj={e:{}};var wo;function uk(e,t){try{let r=wo;return wo=null,r.apply(this,arguments)}catch(r){return qt.errorObj.e=r,qt.errorObj}}function ck(e){return wo=e,uk}qt.tryCatch=ck});var Ct=m(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var br=zp();function Jp(e){setTimeout(function(){throw e},0)}function dk(e,t,r){return typeof t=="function"&&e.then(i=>{let n;r!==void 0&&Object(r).spread&&Array.isArray(i)?n=br.tryCatch(t).apply(void 0,[null].concat(i)):n=i===void 0?br.tryCatch(t)(null):br.tryCatch(t)(null,i),n===br.errorObj&&Jp(n.e)},i=>{if(!i){let s=new Error(i+"");Object.assign(s,{cause:i}),i=s}let n=br.tryCatch(t)(i);n===br.errorObj&&Jp(n.e)}),e}So.default=dk});var Xp=m((yN,Yp)=>{"use strict";var Wp=require("assert"),ci=require("util");function xr(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ci.inherits(xr,Error);Object.defineProperty(xr.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function Eo(e,t,r){Wp(t),Wp.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=r,this.buffer=t}ci.inherits(Eo,xr);Object.defineProperty(Eo.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function Ao(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}ci.inherits(Ao,xr);Object.defineProperty(Ao.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function Pn(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ci.inherits(Pn,xr);Object.defineProperty(Pn.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function Ro(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ci.inherits(Ro,Pn);Object.defineProperty(Ro.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});Yp.exports={RedisError:xr,ParserError:Eo,ReplyError:Ao,AbortError:Pn,InterruptError:Ro}});var th=m((bN,eh)=>{"use strict";var Zp=require("assert"),vr=class extends Error{get name(){return this.constructor.name}},ko=class extends vr{constructor(t,r,i){Zp(r),Zp.strictEqual(typeof i,"number");let n=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=n,this.offset=i,this.buffer=r}get name(){return this.constructor.name}},To=class extends vr{constructor(t){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=r}get name(){return this.constructor.name}},Nn=class extends vr{get name(){return this.constructor.name}},Io=class extends Nn{get name(){return this.constructor.name}};eh.exports={RedisError:vr,ParserError:ko,ReplyError:To,AbortError:Nn,InterruptError:Io}});var Xt=m((xN,rh)=>{"use strict";var fk=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?Xp():th();rh.exports=fk});var di=m((vN,Oo)=>{var ih=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],pk=function(t){for(var r,i=0,n=0,s=[],a=t.length;i<a;i++)r=t.charCodeAt(i),r<128?s[n++]=r:r<2048?(s[n++]=r>>6|192,s[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),s[n++]=r>>18|240,s[n++]=r>>12&63|128,s[n++]=r>>6&63|128,s[n++]=r&63|128):(s[n++]=r>>12|224,s[n++]=r>>6&63|128,s[n++]=r&63|128);return s},nh=Oo.exports=function(t){for(var r,i=0,n=-1,s=0,a=0,o=typeof t=="string"?pk(t):t,l=o.length;i<l;){if(r=o[i++],n===-1)r===123&&(n=i);else if(r!==125)a=ih[(r^a>>8)&255]^a<<8;else if(i-1!==n)return a&16383;s=ih[(r^s>>8)&255]^s<<8}return s&16383};Oo.exports.generateMulti=function(t){for(var r=1,i=t.length,n=nh(t[0]);r<i;)if(nh(t[r++])!==n)return-1;return n}});var fh=m((wN,dh)=>{var ah=9007199254740991,hk="[object Arguments]",mk="[object Function]",gk="[object GeneratorFunction]",yk=/^(?:0|[1-9]\d*)$/;function oh(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function bk(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var fi=Object.prototype,pi=fi.hasOwnProperty,lh=fi.toString,xk=fi.propertyIsEnumerable,sh=Math.max;function vk(e,t){var r=_k(e)||Ok(e)?bk(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||pi.call(e,s))&&!(n&&(s=="length"||ch(s,i)))&&r.push(s);return r}function wk(e,t,r,i){return e===void 0||_o(e,fi[r])&&!pi.call(i,r)?t:e}function Sk(e,t,r){var i=e[t];(!(pi.call(e,t)&&_o(i,r))||r===void 0&&!(t in e))&&(e[t]=r)}function Ek(e){if(!Co(e))return Ik(e);var t=Tk(e),r=[];for(var i in e)i=="constructor"&&(t||!pi.call(e,i))||r.push(i);return r}function uh(e,t){return t=sh(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,n=sh(r.length-t,0),s=Array(n);++i<n;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=s,oh(e,this,a)}}function Ak(e,t,r,i){r||(r={});for(var n=-1,s=t.length;++n<s;){var a=t[n],o=i?i(r[a],e[a],a,r,e):void 0;Sk(r,a,o===void 0?e[a]:o)}return r}function Rk(e){return uh(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&kk(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}function ch(e,t){return t=t??ah,!!t&&(typeof e=="number"||yk.test(e))&&e>-1&&e%1==0&&e<t}function kk(e,t,r){if(!Co(r))return!1;var i=typeof t;return(i=="number"?qo(r)&&ch(t,r.length):i=="string"&&t in r)?_o(r[t],e):!1}function Tk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||fi;return e===r}function Ik(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function _o(e,t){return e===t||e!==e&&t!==t}function Ok(e){return qk(e)&&pi.call(e,"callee")&&(!xk.call(e,"callee")||lh.call(e)==hk)}var _k=Array.isArray;function qo(e){return e!=null&&Pk(e.length)&&!Ck(e)}function qk(e){return Nk(e)&&qo(e)}function Ck(e){var t=Co(e)?lh.call(e):"";return t==mk||t==gk}function Pk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ah}function Co(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Nk(e){return!!e&&typeof e=="object"}var Dk=Rk(function(e,t,r,i){Ak(t,Lk(t),e,i)}),Uk=uh(function(e){return e.push(void 0,wk),oh(Dk,void 0,e)});function Lk(e){return qo(e)?vk(e,!0):Ek(e)}dh.exports=Uk});var mh=m((SN,hh)=>{var Fk=9007199254740991,Mk="[object Arguments]",jk="[object Function]",$k="[object GeneratorFunction]",Po=Object.prototype,Vk=Po.hasOwnProperty,ph=Po.toString,Bk=Po.propertyIsEnumerable;function Gk(e){return Qk(e)&&Vk.call(e,"callee")&&(!Bk.call(e,"callee")||ph.call(e)==Mk)}function Hk(e){return e!=null&&zk(e.length)&&!Kk(e)}function Qk(e){return Wk(e)&&Hk(e)}function Kk(e){var t=Jk(e)?ph.call(e):"";return t==jk||t==$k}function zk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Fk}function Jk(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Wk(e){return!!e&&typeof e=="object"}hh.exports=Gk});var Dn=m(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.isArguments=Pt.defaults=Pt.noop=void 0;var Yk=fh();Pt.defaults=Yk;var Xk=mh();Pt.isArguments=Xk;function Zk(){}Pt.noop=Zk});var No=m((AN,gh)=>{var wr=1e3,Sr=wr*60,Er=Sr*60,Zt=Er*24,eT=Zt*7,tT=Zt*365.25;gh.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return rT(e);if(r==="number"&&isFinite(e))return t.long?nT(e):iT(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function rT(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*tT;case"weeks":case"week":case"w":return r*eT;case"days":case"day":case"d":return r*Zt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Er;case"minutes":case"minute":case"mins":case"min":case"m":return r*Sr;case"seconds":case"second":case"secs":case"sec":case"s":return r*wr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function iT(e){var t=Math.abs(e);return t>=Zt?Math.round(e/Zt)+"d":t>=Er?Math.round(e/Er)+"h":t>=Sr?Math.round(e/Sr)+"m":t>=wr?Math.round(e/wr)+"s":e+"ms"}function nT(e){var t=Math.abs(e);return t>=Zt?Un(e,t,Zt,"day"):t>=Er?Un(e,t,Er,"hour"):t>=Sr?Un(e,t,Sr,"minute"):t>=wr?Un(e,t,wr,"second"):e+" ms"}function Un(e,t,r,i){var n=t>=r*1.5;return Math.round(e/r)+" "+i+(n?"s":"")}});var Do=m((RN,yh)=>{function sT(e){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=n,r.enabled=o,r.humanize=No(),r.destroy=u,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(c){let d,f=null,p,g;function h(...E){if(!h.enabled)return;let _=h,C=Number(new Date),N=C-(d||C);_.diff=N,_.prev=d,_.curr=C,d=C,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let G=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(T,b)=>{if(T==="%%")return"%";G++;let A=r.formatters[b];if(typeof A=="function"){let O=E[G];T=A.call(_,O),E.splice(G,1),G--}return T}),r.formatArgs.call(_,E),(_.log||r.log).apply(_,E)}return h.namespace=c,h.useColors=r.useColors(),h.color=r.selectColor(c),h.extend=i,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,g=r.enabled(c)),g),set:E=>{f=E}}),typeof r.init=="function"&&r.init(h),h}function i(c,d){let f=r(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let f of d)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function s(c,d){let f=0,p=0,g=-1,h=0;for(;f<c.length;)if(p<d.length&&(d[p]===c[f]||d[p]==="*"))d[p]==="*"?(g=p,h=f,p++):(f++,p++);else if(g!==-1)p=g+1,h++,f=h;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}function a(){let c=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),c}function o(c){for(let d of r.skips)if(s(c,d))return!1;for(let d of r.names)if(s(c,d))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}yh.exports=sT});var bh=m((Ie,Ln)=>{Ie.formatArgs=oT;Ie.save=lT;Ie.load=uT;Ie.useColors=aT;Ie.storage=cT();Ie.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ie.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function aT(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function oT(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ln.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),e.splice(i,0,t)}Ie.log=console.debug||console.log||(()=>{});function lT(e){try{e?Ie.storage.setItem("debug",e):Ie.storage.removeItem("debug")}catch{}}function uT(){let e;try{e=Ie.storage.getItem("debug")||Ie.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function cT(){try{return localStorage}catch{}}Ln.exports=Do()(Ie);var{formatters:dT}=Ln.exports;dT.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var vh=m((kN,xh)=>{"use strict";xh.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}});var Eh=m((TN,Sh)=>{"use strict";var fT=require("os"),wh=require("tty"),Ue=vh(),{env:ue}=process,Fn;Ue("no-color")||Ue("no-colors")||Ue("color=false")||Ue("color=never")?Fn=0:(Ue("color")||Ue("colors")||Ue("color=true")||Ue("color=always"))&&(Fn=1);function pT(){if("FORCE_COLOR"in ue)return ue.FORCE_COLOR==="true"?1:ue.FORCE_COLOR==="false"?0:ue.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ue.FORCE_COLOR,10),3)}function hT(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function mT(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let i=pT();i!==void 0&&(Fn=i);let n=r?Fn:i;if(n===0)return 0;if(r){if(Ue("color=16m")||Ue("color=full")||Ue("color=truecolor"))return 3;if(Ue("color=256"))return 2}if(e&&!t&&n===void 0)return 0;let s=n||0;if(ue.TERM==="dumb")return s;if(process.platform==="win32"){let a=fT.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in ue)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in ue)||ue.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ue)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ue.TEAMCITY_VERSION)?1:0;if(ue.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ue){let a=Number.parseInt((ue.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ue.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ue.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ue.TERM)||"COLORTERM"in ue?1:s}function Uo(e,t={}){let r=mT(e,{streamIsTTY:e&&e.isTTY,...t});return hT(r)}Sh.exports={supportsColor:Uo,stdout:Uo({isTTY:wh.isatty(1)}),stderr:Uo({isTTY:wh.isatty(2)})}});var Rh=m((ce,jn)=>{var gT=require("tty"),Mn=require("util");ce.init=ET;ce.log=vT;ce.formatArgs=bT;ce.save=wT;ce.load=ST;ce.useColors=yT;ce.destroy=Mn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ce.colors=[6,2,3,4,5,1];try{let e=Eh();e&&(e.stderr||e).level>=2&&(ce.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ce.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});function yT(){return"colors"in ce.inspectOpts?!!ce.inspectOpts.colors:gT.isatty(process.stderr.fd)}function bT(e){let{namespace:t,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(n+"m+"+jn.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=xT()+t+" "+e[0]}function xT(){return ce.inspectOpts.hideDate?"":new Date().toISOString()+" "}function vT(...e){return process.stderr.write(Mn.formatWithOptions(ce.inspectOpts,...e)+`
`)}function wT(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function ST(){return process.env.DEBUG}function ET(e){e.inspectOpts={};let t=Object.keys(ce.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=ce.inspectOpts[t[r]]}jn.exports=Do()(ce);var{formatters:Ah}=jn.exports;Ah.o=function(e){return this.inspectOpts.colors=this.useColors,Mn.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Ah.O=function(e){return this.inspectOpts.colors=this.useColors,Mn.inspect(e,this.inspectOpts)}});var kh=m((IN,Lo)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Lo.exports=bh():Lo.exports=Rh()});var Oh=m(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.genRedactedString=ht.getStringValue=ht.MAX_ARGUMENT_LENGTH=void 0;var AT=kh(),Fo=200;ht.MAX_ARGUMENT_LENGTH=Fo;var RT="ioredis";function Th(e){if(e!==null)switch(typeof e){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch{return}case"string":return e}}ht.getStringValue=Th;function Ih(e,t){let{length:r}=e;return r<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+r+'">'}ht.genRedactedString=Ih;function kT(e){let t=(0,AT.default)(`${RT}:${e}`);function r(...i){if(t.enabled){for(let n=1;n<i.length;n++){let s=Th(i[n]);typeof s=="string"&&s.length>Fo&&(i[n]=Ih(s,Fo))}return t.apply(null,i)}}return Object.defineProperties(r,{namespace:{get(){return t.namespace}},enabled:{get(){return t.enabled}},destroy:{get(){return t.destroy}},log:{get(){return t.log},set(i){t.log=i}}}),r}ht.default=kT});var qh=m(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});var _h=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,TT={RedisCloudFixed:{ca:_h},RedisCloudFlexible:{ca:_h}};Mo.default=TT});var fe=m(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.noop=L.defaults=L.Debug=L.getPackageMeta=L.zipMap=L.CONNECTION_CLOSED_ERROR_MSG=L.shuffle=L.sample=L.resolveTLSProfile=L.parseURL=L.optimizeErrorStack=L.toArg=L.convertMapToArray=L.convertObjectToArray=L.timeout=L.packObject=L.isInt=L.wrapMultiResult=L.convertBufferToString=void 0;var IT=require("fs"),OT=require("path"),Ch=require("url"),jo=Dn();Object.defineProperty(L,"defaults",{enumerable:!0,get:function(){return jo.defaults}});Object.defineProperty(L,"noop",{enumerable:!0,get:function(){return jo.noop}});var _T=Oh();L.Debug=_T.default;var qT=qh();function Ph(e,t){if(e instanceof Buffer)return e.toString(t);if(Array.isArray(e)){let r=e.length,i=Array(r);for(let n=0;n<r;++n)i[n]=e[n]instanceof Buffer&&t==="utf8"?e[n].toString():Ph(e[n],t);return i}return e}L.convertBufferToString=Ph;function CT(e){if(!e)return null;let t=[],r=e.length;for(let i=0;i<r;++i){let n=e[i];n instanceof Error?t.push([n]):t.push([null,n])}return t}L.wrapMultiResult=CT;function Nh(e){let t=parseFloat(e);return!isNaN(e)&&(t|0)===t}L.isInt=Nh;function PT(e){let t={},r=e.length;for(let i=1;i<r;i+=2)t[e[i-1]]=e[i];return t}L.packObject=PT;function NT(e,t){let r=null,i=function(){r&&(clearTimeout(r),r=null,e.apply(this,arguments))};return r=setTimeout(i,t,new Error("timeout")),i}L.timeout=NT;function DT(e){let t=[],r=Object.keys(e);for(let i=0,n=r.length;i<n;i++)t.push(r[i],e[r[i]]);return t}L.convertObjectToArray=DT;function UT(e){let t=[],r=0;return e.forEach(function(i,n){t[r]=n,t[r+1]=i,r+=2}),t}L.convertMapToArray=UT;function LT(e){return e===null||typeof e>"u"?"":String(e)}L.toArg=LT;function FT(e,t,r){let i=t.split(`
`),n="",s;for(s=1;s<i.length&&i[s].indexOf(r)!==-1;++s);for(let a=s;a<i.length;++a)n+=`
`+i[a];if(e.stack){let a=e.stack.indexOf(`
`);e.stack=e.stack.slice(0,a)+n}return e}L.optimizeErrorStack=FT;function MT(e){if(Nh(e))return{port:e};let t=(0,Ch.parse)(e,!0,!0);!t.slashes&&e[0]!=="/"&&(e="//"+e,t=(0,Ch.parse)(e,!0,!0));let r=t.query||{},i={};if(t.auth){let n=t.auth.indexOf(":");i.username=n===-1?t.auth:t.auth.slice(0,n),i.password=n===-1?"":t.auth.slice(n+1)}if(t.pathname&&(t.protocol==="redis:"||t.protocol==="rediss:"?t.pathname.length>1&&(i.db=t.pathname.slice(1)):i.path=t.pathname),t.host&&(i.host=t.hostname),t.port&&(i.port=t.port),typeof r.family=="string"){let n=Number.parseInt(r.family,10);Number.isNaN(n)||(i.family=n)}return(0,jo.defaults)(i,r),i}L.parseURL=MT;function jT(e){let t=e?.tls;typeof t=="string"&&(t={profile:t});let r=qT.default[t?.profile];return r&&(t=Object.assign({},r,t),delete t.profile,e=Object.assign({},e,{tls:t})),e}L.resolveTLSProfile=jT;function $T(e,t=0){let r=e.length;return t>=r?null:e[t+Math.floor(Math.random()*(r-t))]}L.sample=$T;function VT(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e}L.shuffle=VT;L.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function BT(e,t){let r=new Map;return e.forEach((i,n)=>{r.set(i,t[n])}),r}L.zipMap=BT;var Ar=null;async function GT(){if(Ar)return Ar;try{let e=(0,OT.resolve)(__dirname,"..","..","package.json"),t=await IT.promises.readFile(e,"utf8");return Ar={version:JSON.parse(t).version},Ar}catch{return Ar={version:"error-fetching-version"},Ar}}L.getPackageMeta=GT});var mt=m(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Dh=yr(),HT=di(),QT=Ct(),er=fe(),rt=class e{constructor(t,r=[],i={},n){if(this.name=t,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=i.replyEncoding,this.errorStack=i.errorStack,this.args=r.flat(),this.callback=n,this.initPromise(),i.keyPrefix){let s=i.keyPrefix instanceof Buffer,a=s?i.keyPrefix:null;this._iterateKeys(o=>o instanceof Buffer?(a===null&&(a=Buffer.from(i.keyPrefix)),Buffer.concat([a,o])):s?Buffer.concat([i.keyPrefix,Buffer.from(String(o))]):i.keyPrefix+o)}i.readOnly&&(this.isReadOnly=!0)}static checkFlag(t,r){return!!this.getFlagMap()[t][r]}static setArgumentTransformer(t,r){this._transformer.argument[t]=r}static setReplyTransformer(t,r){this._transformer.reply[t]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(e.FLAGS).reduce((t,r)=>(t[r]={},e.FLAGS[r].forEach(i=>{t[r][i]=!0}),t),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let t=this.getKeys()[0];this.slot=t==null?null:HT(t)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(t){let r,i="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let n=new $o;n.push(i);for(let s=0;s<this.args.length;++s){let a=this.args[s];a instanceof Buffer?a.length===0?n.push(`$0\r
\r
`):(n.push("$"+a.length+`\r
`),n.push(a),n.push(`\r
`)):n.push("$"+Buffer.byteLength(a)+`\r
`+a+`\r
`)}r=n.toBuffer()}else{r=i;for(let n=0;n<this.args.length;++n){let s=this.args[n];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let t=0;t<this.args.length;++t){let r=this.args[t];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[t]=(0,er.toArg)(r))}}transformReply(t){this.replyEncoding&&(t=(0,er.convertBufferToString)(t,this.replyEncoding));let r=e._transformer.reply[this.name];return r&&(t=r(t)),t}setTimeout(t){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},t))}initPromise(){let t=new Promise((r,i)=>{if(!this.transformed){this.transformed=!0;let n=e._transformer.argument[this.name];n&&(this.args=n(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=n=>{i((0,er.optimizeErrorStack)(n,this.errorStack.stack,__dirname))}:this.reject=i});this.promise=(0,QT.default)(t,this.callback)}_iterateKeys(t=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,Dh.exists)(this.name))){let r=(0,Dh.getKeyIndexes)(this.name,this.args);for(let i of r)this.args[i]=t(this.args[i]),this.keys.push(this.args[i])}return this.keys}_convertValue(t){return r=>{try{let i=this._commandTimeoutTimer;i&&(clearTimeout(i),delete this._commandTimeoutTimer),t(this.transformReply(r)),this.isResolved=!0}catch(i){this.reject(i)}return this.promise}}};Vo.default=rt;rt.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};rt._transformer={argument:{},reply:{}};var Uh=function(e){if(e.length===1){if(e[0]instanceof Map)return(0,er.convertMapToArray)(e[0]);if(typeof e[0]=="object"&&e[0]!==null)return(0,er.convertObjectToArray)(e[0])}return e},Lh=function(e){if(e.length===2){if(e[1]instanceof Map)return[e[0]].concat((0,er.convertMapToArray)(e[1]));if(typeof e[1]=="object"&&e[1]!==null)return[e[0]].concat((0,er.convertObjectToArray)(e[1]))}return e};rt.setArgumentTransformer("mset",Uh);rt.setArgumentTransformer("msetnx",Uh);rt.setArgumentTransformer("hset",Lh);rt.setArgumentTransformer("hmset",Lh);rt.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];i in t?Object.defineProperty(t,i,{value:n,configurable:!0,enumerable:!0,writable:!0}):t[i]=n}return t}return e});var $o=class{constructor(){this.length=0,this.items=[]}push(t){this.length+=Buffer.byteLength(t),this.items.push(t)}toBuffer(){let t=Buffer.allocUnsafe(this.length),r=0;for(let i of this.items){let n=Buffer.byteLength(i);Buffer.isBuffer(i)?i.copy(t,r):t.write(i,r,n),r+=n}return t}}});var Fh=m(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});var KT=Xt(),$n=class extends KT.RedisError{constructor(t,r){super(t),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Bo.default=$n;$n.defaultMessage="Failed to refresh slots cache."});var Vn=m(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var zT=require("stream"),Go=class extends zT.Readable{constructor(t){super(t),this.opt=t,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let t=[this._redisCursor];this.opt.key&&t.unshift(this.opt.key),this.opt.match&&t.push("MATCH",this.opt.match),this.opt.type&&t.push("TYPE",this.opt.type),this.opt.count&&t.push("COUNT",String(this.opt.count)),this.opt.noValues&&t.push("NOVALUES"),this.opt.redis[this.opt.command](t,(r,i)=>{if(r){this.emit("error",r);return}this._redisCursor=i[0]instanceof Buffer?i[0].toString():i[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(i[1])})}close(){this._redisDrained=!0}};Ho.default=Go});var Gh=m(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.executeWithAutoPipelining=ae.getFirstValueInFlattenedArray=ae.shouldUseAutoPipelining=ae.notAllowedAutoPipelineCommands=ae.kCallbacks=ae.kExec=void 0;var jh=Dn(),JT=di(),Mh=Ct();ae.kExec=Symbol("exec");ae.kCallbacks=Symbol("callbacks");ae.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function $h(e,t){if(e._runningAutoPipelines.has(t)||!e._autoPipelines.has(t))return;e._runningAutoPipelines.add(t);let r=e._autoPipelines.get(t);e._autoPipelines.delete(t);let i=r[ae.kCallbacks];r[ae.kCallbacks]=null,r.exec(function(n,s){if(e._runningAutoPipelines.delete(t),n)for(let a=0;a<i.length;a++)process.nextTick(i[a],n);else for(let a=0;a<i.length;a++)process.nextTick(i[a],...s[a]);e._autoPipelines.has(t)&&$h(e,t)})}function WT(e,t,r){return t&&e.options.enableAutoPipelining&&!e.isPipeline&&!ae.notAllowedAutoPipelineCommands.includes(r)&&!e.options.autoPipeliningIgnoredCommands.includes(r)}ae.shouldUseAutoPipelining=WT;function Vh(e){for(let t=0;t<e.length;t++){let r=e[t];if(typeof r=="string")return r;if(Array.isArray(r)||(0,jh.isArguments)(r)){if(r.length===0)continue;return r[0]}let i=[r].flat();if(i.length>0)return i[0]}}ae.getFirstValueInFlattenedArray=Vh;function Bh(e,t,r,i,n){if(e.isCluster&&!e.slots.length)return e.status==="wait"&&e.connect().catch(jh.noop),(0,Mh.default)(new Promise(function(u,c){e.delayUntilReady(d=>{if(d){c(d);return}Bh(e,t,r,i,null).then(u,c)})}),n);let s=e.options.keyPrefix||"",a=e.isCluster?e.slots[JT(`${s}${Vh(i)}`)].join(","):"main";if(!e._autoPipelines.has(a)){let u=e.pipeline();u[ae.kExec]=!1,u[ae.kCallbacks]=[],e._autoPipelines.set(a,u)}let o=e._autoPipelines.get(a);o[ae.kExec]||(o[ae.kExec]=!0,setImmediate($h,e,a));let l=new Promise(function(u,c){o[ae.kCallbacks].push(function(d,f){if(d){c(d);return}u(f)}),t==="call"&&i.unshift(r),o[t](...i)});return(0,Mh.default)(l,n)}ae.executeWithAutoPipelining=Bh});var Hh=m(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});var YT=require("crypto"),XT=mt(),ZT=Ct(),Qo=class{constructor(t,r=null,i="",n=!1){this.lua=t,this.numberOfKeys=r,this.keyPrefix=i,this.readOnly=n,this.sha=(0,YT.createHash)("sha1").update(t).digest("hex");let s=this.sha,a=new WeakSet;this.Command=class extends XT.default{toWritable(l){let u=this.reject;return this.reject=c=>{c.message.indexOf("NOSCRIPT")!==-1&&a.delete(l),u.call(this,c)},a.has(l)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(a.add(l),this.name="eval",this.args[0]=t),super.toWritable(l)}}}execute(t,r,i,n){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(i.keyPrefix=this.keyPrefix),this.readOnly&&(i.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],i);return s.promise=s.promise.catch(a=>{if(a.message.indexOf("NOSCRIPT")===-1)throw a;let o=new this.Command("evalsha",[this.sha,...r],i);return(t.isPipeline?t.redis:t).sendCommand(o)}),(0,ZT.default)(s.promise,n),t.sendCommand(s)}};Ko.default=Qo});var Gn=m(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var eI=yr(),Bn=Gh(),tI=mt(),rI=Hh(),gt=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return zo.slice(0)}createBuiltinCommand(t){return{string:Nt(null,t,"utf8"),buffer:Nt(null,t,null)}}addBuiltinCommand(t){this.addedBuiltinSet.add(t),this[t]=Nt(t,t,"utf8"),this[t+"Buffer"]=Nt(t+"Buffer",t,null)}defineCommand(t,r){let i=new rI.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[t]=i,this[t]=Qh(t,t,i,"utf8"),this[t+"Buffer"]=Qh(t+"Buffer",t,i,null)}sendCommand(t,r,i){throw new Error('"sendCommand" is not implemented')}},zo=eI.list.filter(e=>e!=="monitor");zo.push("sentinel");zo.forEach(function(e){gt.prototype[e]=Nt(e,e,"utf8"),gt.prototype[e+"Buffer"]=Nt(e+"Buffer",e,null)});gt.prototype.call=Nt("call","utf8");gt.prototype.callBuffer=Nt("callBuffer",null);gt.prototype.send_command=gt.prototype.call;function Nt(e,t,r){return typeof r>"u"&&(r=t,t=null),function(...i){let n=t||i.shift(),s=i[i.length-1];typeof s=="function"?i.pop():s=void 0;let a={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,Bn.shouldUseAutoPipelining)(this,e,n)?(0,Bn.executeWithAutoPipelining)(this,e,n,i,s):this.sendCommand(new tI.default(n,i,a,s))}}function Qh(e,t,r,i){return function(...n){let s=typeof n[n.length-1]=="function"?n.pop():void 0,a={replyEncoding:i};return this.options.showFriendlyErrorStack&&(a.errorStack=new Error),(0,Bn.shouldUseAutoPipelining)(this,e,t)?(0,Bn.executeWithAutoPipelining)(this,e,t,n,s):r.execute(this,n,a,s)}}Jo.default=gt});var Xo=m(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});var Wo=di(),Kh=yr(),zh=Ct(),iI=require("util"),nI=mt(),sI=fe(),aI=Gn();function oI(e,t){let r=Wo(t[0]),i=e._groupsBySlot[r];for(let n=1;n<t.length;n++)if(e._groupsBySlot[Wo(t[n])]!==i)return-1;return r}var Dt=class extends aI.default{constructor(t){super(),this.redis=t,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=t.options,Object.keys(t.scriptsSet).forEach(i=>{let n=t.scriptsSet[i];this._shaToScript[n.sha]=n,this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),t.addedBuiltinSet.forEach(i=>{this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(t,r){if(this._queue[r].name==="exec"&&Array.isArray(t[1])){let n=t[1].length;for(let s=0;s<n;s++){if(t[1][s]instanceof Error)continue;let a=this._queue[r-(n-s)];try{t[1][s]=a.transformReply(t[1][s])}catch(o){t[1][s]=o}}}if(this._result[r]=t,--this.replyPending)return;if(this.isCluster){let n=!0,s;for(let a=0;a<this._result.length;++a){let o=this._result[a][0],l=this._queue[a];if(o){if(l.name==="exec"&&o.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:o.name,message:o.message};else if(s.name!==o.name||s.message!==o.message){n=!1;break}}else if(!l.inTransaction&&!((0,Kh.exists)(l.name)&&(0,Kh.hasFlag)(l.name,"readonly"))){n=!1;break}}if(s&&n){let a=this,o=s.message.split(" "),l=this._queue,u=!1;this._queue=[];for(let p=0;p<l.length;++p){if(o[0]==="ASK"&&!u&&l[p].name!=="asking"&&(!l[p-1]||l[p-1].name!=="asking")){let g=new nI.default("asking");g.ignore=!0,this.sendCommand(g)}l[p].initPromise(),this.sendCommand(l[p]),u=l[p].inTransaction}let c=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){a.exec()},f=this.redis;if(f.handleError(s,this.leftRedirections,{moved:function(p,g){a.preferKey=g,f.slots[o[1]]=[g],f._groupsBySlot[o[1]]=f._groupsIds[f.slots[o[1]].join(";")],f.refreshSlotsCache(),a.exec()},ask:function(p,g){a.preferKey=g,a.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{c=!1},defaults:()=>{c=!1}}),c)return}}let i=0;for(let n=0;n<this._queue.length-i;++n)this._queue[n+i].ignore&&(i+=1),this._result[n]=this._result[n+i];this.resolve(this._result.slice(0,this._result.length-i))}sendCommand(t){this._transactions>0&&(t.inTransaction=!0);let r=this._queue.length;return t.pipelineIndex=r,t.promise.then(i=>{this.fillResult([null,i],r)}).catch(i=>{this.fillResult([i],r)}),this._queue.push(t),this}addBatch(t){let r,i,n;for(let s=0;s<t.length;++s)r=t[s],i=r[0],n=r.slice(1),this[i].apply(this,n);return this}};Yo.default=Dt;var lI=Dt.prototype.multi;Dt.prototype.multi=function(){return this._transactions+=1,lI.apply(this,arguments)};var Jh=Dt.prototype.execBuffer;Dt.prototype.execBuffer=(0,iI.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),Jh.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");Dt.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(sI.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,zh.default)(this.promise,e)),this.redis.delayUntilReady(n=>{if(n){this.reject(n);return}this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,Jh.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,zh.default)(this.promise,e)),this._queue.length||this.resolve([]);let t;if(this.isCluster){let n=[];for(let s=0;s<this._queue.length;s++){let a=this._queue[s].getKeys();if(a.length&&n.push(a[0]),a.length&&Wo.generateMulti(a)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(n.length){if(t=oI(this.redis,n),t<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=Math.random()*16384|0}let r=this;return i(),this.promise;function i(){let n=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:t,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let a="",o,l={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(u){typeof u!="string"?(o||(o=[]),a&&(o.push(Buffer.from(a,"utf8")),a=""),o.push(u)):a+=u,--n||(o?(a&&o.push(Buffer.from(a,"utf8")),l.destination.redis.stream.write(Buffer.concat(o))):l.destination.redis.stream.write(a),n=r._queue.length,a="",o=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],l,s);return r.promise}}});var tl=m(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.addTransactionSupport=void 0;var Zo=fe(),el=Ct(),Wh=Xo();function uI(e){e.pipeline=function(i){let n=new Wh.default(this);return Array.isArray(i)&&n.addBatch(i),n};let{multi:t}=e;e.multi=function(i,n){if(typeof n>"u"&&!Array.isArray(i)&&(n=i,i=null),n&&n.pipeline===!1)return t.call(this);let s=new Wh.default(this);s.multi(),Array.isArray(i)&&s.addBatch(i);let a=s.exec;s.exec=function(l){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Zo.noop),(0,el.default)(new Promise((c,d)=>{this.redis.delayUntilReady(f=>{if(f){d(f);return}this.exec(s).then(c,d)})}),l);if(this._transactions>0&&a.call(s),this.nodeifiedPromise)return a.call(s);let u=a.call(s);return(0,el.default)(u.then(function(c){let d=c[c.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let f=0;f<c.length-1;++f)c[f][0]&&d[0].previousErrors.push(c[f][0]);throw d[0]}return(0,Zo.wrapMultiResult)(d[1])}),l)};let{execBuffer:o}=s;return s.execBuffer=function(l){return this._transactions>0&&o.call(s),s.exec(l)},s};let{exec:r}=e;e.exec=function(i){return(0,el.default)(r.call(this).then(function(n){return Array.isArray(n)&&(n=(0,Zo.wrapMultiResult)(n)),n}),i)}}Hn.addTransactionSupport=uI});var il=m(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});function cI(e,t){Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})}rl.default=cI});var Xh=m(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.DEFAULT_CLUSTER_OPTIONS=void 0;var Yh=require("dns");Qn.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+e*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:Yh.resolveSrv,dnsLookup:Yh.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var hi=m(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.getConnectionName=ge.weightSrvRecords=ge.groupSrvRecords=ge.getUniqueHostnamesFromOptions=ge.normalizeNodeOptions=ge.nodeKeyToRedisOptions=ge.getNodeKey=void 0;var Zh=fe(),dI=require("net");function fI(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port}ge.getNodeKey=fI;function pI(e){let t=e.lastIndexOf(":");if(t===-1)throw new Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}}ge.nodeKeyToRedisOptions=pI;function hI(e){return e.map(t=>{let r={};if(typeof t=="object")Object.assign(r,t);else if(typeof t=="string")Object.assign(r,(0,Zh.parseURL)(t));else if(typeof t=="number")r.port=t;else throw new Error("Invalid argument "+t);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,Zh.resolveTLSProfile)(r)})}ge.normalizeNodeOptions=hI;function mI(e){let t={};return e.forEach(r=>{t[r.host]=!0}),Object.keys(t).filter(r=>!(0,dI.isIP)(r))}ge.getUniqueHostnamesFromOptions=mI;function gI(e){let t={};for(let r of e)t.hasOwnProperty(r.priority)?(t[r.priority].totalWeight+=r.weight,t[r.priority].records.push(r)):t[r.priority]={totalWeight:r.weight,records:[r]};return t}ge.groupSrvRecords=gI;function yI(e){if(e.records.length===1)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),r=0;for(let[i,n]of e.records.entries())if(r+=1+n.weight,r>t)return e.totalWeight-=n.weight,e.records.splice(i,1),n}ge.weightSrvRecords=yI;function bI(e,t){let r=`ioredis-cluster(${e})`;return t?`${r}:${t}`:r}ge.getConnectionName=bI});var ol=m(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var em=hi(),nl=fe(),xI=Ut(),it=(0,nl.Debug)("cluster:subscriber"),sl=class{constructor(t,r,i=!1){this.connectionPool=t,this.emitter=r,this.isSharded=i,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){it("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}it("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,s)=>{!this.started||!this.subscriber||(0,em.getNodeKey)(this.subscriber.options)===s&&(it("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(it("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(t){return this.isSharded&&(this.slotRange=t),this.slotRange}start(){this.started=!0,this.selectSubscriber(),it("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let t=this.lastActiveSubscriber;t&&(t.off("end",this.onSubscriberEnd),t.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,nl.sample)(this.connectionPool.getNodes());if(!r){it("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:i}=r;it("selected a subscriber %s:%s",i.host,i.port);let n="subscriber";this.isSharded&&(n="ssubscriber"),this.subscriber=new xI.default({port:i.port,host:i.host,username:i.username,password:i.password,enableReadyCheck:!0,connectionName:(0,em.getConnectionName)(n,i.connectionName),lazyConnect:!0,tls:i.tls,retryStrategy:null}),this.subscriber.on("error",nl.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(t){let a=t.condition||t.prevCondition;a&&a.subscriber&&(s.subscribe=a.subscriber.channels("subscribe"),s.psubscribe=a.subscriber.channels("psubscribe"),s.ssubscribe=a.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let a=0;for(let o of["subscribe","psubscribe","ssubscribe"]){let l=s[o];if(l.length!=0)if(it("%s %d channels",o,l.length),o==="ssubscribe")for(let u of l)a+=1,this.subscriber[o](u).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{it("failed to ssubscribe to channel: %s",u)});else a+=1,this.subscriber[o](l).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{it("failed to %s %d channels",o,l.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let a of["message","messageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)});for(let a of["pmessage","pmessageBuffer"])this.subscriber.on(a,(o,l,u)=>{this.emitter.emit(a,o,l,u)});if(this.isSharded==!0)for(let a of["smessage","smessageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)})}};al.default=sl});var dl=m(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var vI=require("events"),Kn=fe(),ll=hi(),wI=Ut(),mi=(0,Kn.Debug)("cluster:connectionPool"),ul=class extends vI.EventEmitter{constructor(t){super(),this.redisOptions=t,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(t="all"){let r=this.nodes[t];return Object.keys(r).map(i=>r[i])}getInstanceByKey(t){return this.nodes.all[t]}getSampleInstance(t){let r=Object.keys(this.nodes[t]),i=(0,Kn.sample)(r);return this.nodes[t][i]}addMasterNode(t){let r=(0,ll.getNodeKey)(t.options),i=this.createRedisFromOptions(t,t.options.readOnly);return t.options.readOnly?!1:(this.nodes.all[r]=i,this.nodes.master[r]=i,!0)}createRedisFromOptions(t,r){return new wI.default((0,Kn.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},t,this.redisOptions,{lazyConnect:!0}))}findOrCreate(t,r=!1){let i=(0,ll.getNodeKey)(t);r=!!r,this.specifiedOptions[i]?Object.assign(t,this.specifiedOptions[i]):this.specifiedOptions[i]=t;let n;return this.nodes.all[i]?(n=this.nodes.all[i],n.options.readOnly!==r&&(n.options.readOnly=r,mi("Change role of %s to %s",i,r?"slave":"master"),n[r?"readonly":"readwrite"]().catch(Kn.noop),r?(delete this.nodes.master[i],this.nodes.slave[i]=n):(delete this.nodes.slave[i],this.nodes.master[i]=n))):(mi("Connecting to %s as %s",i,r?"slave":"master"),n=this.createRedisFromOptions(t,r),this.nodes.all[i]=n,this.nodes[r?"slave":"master"][i]=n,n.once("end",()=>{this.removeNode(i),this.emit("-node",n,i),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",n,i),n.on("error",function(s){this.emit("nodeError",s,i)})),n}reset(t){mi("Reset with %O",t);let r={};t.forEach(i=>{let n=(0,ll.getNodeKey)(i);i.readOnly&&r[n]||(r[n]=i)}),Object.keys(this.nodes.all).forEach(i=>{r[i]||(mi("Disconnect %s because the node does not hold any slot",i),this.nodes.all[i].disconnect(),this.removeNode(i))}),Object.keys(r).forEach(i=>{let n=r[i];this.findOrCreate(n,n.readOnly)})}removeNode(t){let{nodes:r}=this;r.all[t]&&(mi("Remove %s from the pool",t),delete r.all[t]),delete r.master[t],delete r.slave[t]}};cl.default=ul});var zn=m((QN,tm)=>{"use strict";function ie(e,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}ie.prototype.peekAt=function(t){var r=t;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};ie.prototype.get=function(t){return this.peekAt(t)};ie.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ie.prototype.peekFront=function(){return this.peek()};ie.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ie.prototype,"length",{get:function(){return this.size()}});ie.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ie.prototype.unshift=function(t){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ie.prototype.shift=function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ie.prototype.push=function(t){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ie.prototype.pop=function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),i}};ie.prototype.removeOne=function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(t<i/2){for(a=t;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-t;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};ie.prototype.remove=function(t,r){var i=t,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var l;for(n=new Array(r),l=0;l<r;l++)n[l]=this._list[this._head+i+l&this._capacityMask];if(i=this._head+i&this._capacityMask,t+r===a){for(this._tail=this._tail-r+o&this._capacityMask,l=r;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(t===0){for(this._head=this._head+r+o&this._capacityMask,l=r-1;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+t+r+o&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;t<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,l=a-(r+t);l>0;l--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};ie.prototype.splice=function(t,r){var i=t;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,l=arguments.length,u=this._list.length,c=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);l>c;)this.unshift(arguments[--l]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var d=a.length;for(s=0;s<d;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-d+u&this._capacityMask);c<l;)this.push(arguments[c++]);for(s=0;s<d;s++)this.push(a[s])}return o}else return this.remove(i,r)}};ie.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};ie.prototype.isEmpty=function(){return this._head===this._tail};ie.prototype.toArray=function(){return this._copyArray(!1)};ie.prototype._fromArray=function(t){var r=t.length,i=this._nextPowerOf2(r);this._list=new Array(i),this._capacityMask=i-1,this._tail=r;for(var n=0;n<r;n++)this._list[n]=t[n]};ie.prototype._copyArray=function(t,r){var i=this._list,n=i.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=new Array(r),o=0,l;if(t||this._head>this._tail){for(l=this._head;l<n;l++)a[o++]=i[l];for(l=0;l<this._tail;l++)a[o++]=i[l]}else for(l=this._head;l<this._tail;l++)a[o++]=i[l];return a};ie.prototype._growArray=function(){if(this._head!=0){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};ie.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};ie.prototype._nextPowerOf2=function(t){var r=Math.log(t)/Math.log(2),i=1<<r+1;return Math.max(i,4)};tm.exports=ie});var rm=m(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});var SI=fe(),EI=zn(),AI=(0,SI.Debug)("delayqueue"),fl=class{constructor(){this.queues={},this.timeouts={}}push(t,r,i){let n=i.callback||process.nextTick;this.queues[t]||(this.queues[t]=new EI),this.queues[t].push(r),this.timeouts[t]||(this.timeouts[t]=setTimeout(()=>{n(()=>{this.timeouts[t]=null,this.execute(t)})},i.timeout))}execute(t){let r=this.queues[t];if(!r)return;let{length:i}=r;if(i)for(AI("send %d commands in %s queue",i,t),this.queues[t]=null;r.length>0;)r.shift()()}};pl.default=fl});var sm=m(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var RI=fe(),kI=ol(),TI=dl(),im=hi(),Jn=di(),nm=(0,RI.Debug)("cluster:subscriberGroup"),hl=class{constructor(t,r){this.cluster=t,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,t.on("+node",i=>{this._addSubscriber(i)}),t.on("-node",i=>{this._removeSubscriber(i)}),t.on("refresh",()=>{this._refreshSlots(t)}),t.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(t){let r=this.clusterSlots[t][0];return this.shardedSubscribers.get(r)}addChannels(t){let r=Jn(t[0]);t.forEach(n=>{if(Jn(n)!=r)return-1});let i=this.channels.get(r);return i?this.channels.set(r,i.concat(t)):this.channels.set(r,t),[...this.channels.values()].flatMap(n=>n).length}removeChannels(t){let r=Jn(t[0]);t.forEach(n=>{if(Jn(n)!=r)return-1});let i=this.channels.get(r);if(i){let n=i.filter(s=>!t.includes(s));this.channels.set(r,n)}return[...this.channels.values()].flatMap(n=>n).length}stop(){for(let t of this.shardedSubscribers.values())t.stop()}start(){for(let t of this.shardedSubscribers.values())t.isStarted()||t.start()}_addSubscriber(t){let r=new TI.default(t.options);if(r.addMasterNode(t)){let i=new kI.default(r,this.cluster,!0),n=(0,im.getNodeKey)(t.options);return this.shardedSubscribers.set(n,i),i.start(),this._resubscribe(),this.cluster.emit("+subscriber"),i}return null}_removeSubscriber(t){let r=(0,im.getNodeKey)(t.options),i=this.shardedSubscribers.get(r);return i&&(i.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(t){if(this._slotsAreEqual(t.slots))nm("Nothing to refresh because the new cluster map is equal to the previous one.");else{nm("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<t.slots.length;r++){let i=t.slots[r][0];this.subscriberToSlotsIndex.has(i)||this.subscriberToSlotsIndex.set(i,[]),this.subscriberToSlotsIndex.get(i).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(t.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((t,r)=>{let i=this.subscriberToSlotsIndex.get(r);i&&(t.associateSlotRange(i),i.forEach(n=>{let s=t.getInstance(),a=this.channels.get(n);a&&a.length>0&&s&&(s.ssubscribe(a),s.on("ready",()=>{s.ssubscribe(a)}))}))})}_slotsAreEqual(t){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(t)}};ml.default=hl});var bl=m(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var am=yr(),dm=require("events"),gi=Xt(),om=Ct(),lm=mt(),gl=Fh(),II=Ut(),OI=Vn(),_I=tl(),qe=fe(),qI=il(),CI=Gn(),PI=Xh(),NI=ol(),DI=dl(),UI=rm(),Rr=hi(),um=zn(),LI=sm(),ne=(0,qe.Debug)("cluster"),cm=new WeakSet,yi=class e extends CI.default{constructor(t,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new UI.default,this.offlineQueue=new um,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,dm.EventEmitter.call(this),this.startupNodes=t,this.options=(0,qe.defaults)({},r,PI.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new LI.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new DI.default(this.options.redisOptions),this.connectionPool.on("-node",(i,n)=>{this.emit("-node",i)}),this.connectionPool.on("+node",i=>{this.emit("+node",i)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(i,n)=>{this.emit("node error",i,n)}),this.subscriber=new NI.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,n])=>{this.defineCommand(i,n)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(i=>{ne("connecting failed: %s",i)})}connect(){return new Promise((t,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let i=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(n=>{if(this.connectionEpoch!==i){ne("discard connecting after resolving startup nodes because epoch not match: %d != %d",i,this.connectionEpoch),r(new gi.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){ne("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new gi.RedisError("Connection is aborted"));return}this.connectionPool.reset(n);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),t()},a,o=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",a),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((l,u)=>{l||u?(ne("Ready check failed (%s). Reconnecting...",l||u),this.status==="connect"&&this.disconnect(!0)):s()}):s()};a=()=>{let l=new Error("None of startup nodes is available");this.removeListener("refresh",o),this.invokeReadyDelayedCallbacks(l),r(l)},this.once("refresh",o),this.once("close",a),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(l=>{l&&l.message===gl.default.defaultMessage&&(II.default.prototype.silentEmit.call(this,"error",l),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(n=>{this.setStatus("close"),this.handleCloseEvent(n),this.invokeReadyDelayedCallbacks(n),r(n)})})}disconnect(t=!1){let r=this.status;this.setStatus("disconnecting"),t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,ne("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(t){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let i=(0,om.default)(Promise.resolve("OK"),t);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),i}return(0,om.default)(Promise.all(this.nodes().map(i=>i.quit().catch(n=>{if(n.message===qe.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw n}))).then(()=>"OK"),t)}duplicate(t=[],r={}){let i=t.length>0?t:this.startupNodes.slice(0),n=Object.assign({},this.options,r);return new e(i,n)}nodes(t="all"){if(t!=="all"&&t!=="master"&&t!=="slave")throw new Error('Invalid role "'+t+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(t)}delayUntilReady(t){this._readyDelayedCallbacks.push(t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}refreshSlotsCache(t){if(t&&this._refreshSlotsCacheCallbacks.push(t),this.isRefreshing)return;this.isRefreshing=!0;let r=this,i=o=>{this.isRefreshing=!1;for(let l of this._refreshSlotsCacheCallbacks)l(o);this._refreshSlotsCacheCallbacks=[]},n=(0,qe.shuffle)(this.connectionPool.getNodes()),s=null;function a(o){if(o===n.length){let c=new gl.default(gl.default.defaultMessage,s);return i(c)}let l=n[o],u=`${l.options.host}:${l.options.port}`;ne("getting slot cache from %s",u),r.getInfoFromNode(l,function(c){switch(r.status){case"close":case"end":return i(new Error("Cluster is disconnected."));case"disconnecting":return i(new Error("Cluster is disconnecting."))}c?(r.emit("node error",c,u),s=c,a(o+1)):(r.emit("refresh"),i())})}a(0)}sendCommand(t,r,i){if(this.status==="wait"&&this.connect().catch(qe.noop),this.status==="end")return t.reject(new Error(qe.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let n=this.options.scaleReads;n!=="master"&&(t.isReadOnly||(0,am.exists)(t.name)&&(0,am.hasFlag)(t.name,"readonly")||(n="master"));let s=i?i.slot:t.getSlot(),a={},o=this;if(!i&&!cm.has(t)){cm.add(t);let u=t.reject;t.reject=function(c){let d=l.bind(null,!0);o.handleError(c,a,{moved:function(f,p){ne("command %s is moved to %s",t.name,p),s=Number(f),o.slots[f]?o.slots[f][0]=p:o.slots[f]=[p],o._groupsBySlot[f]=o._groupsIds[o.slots[f].join(";")],o.connectionPool.findOrCreate(o.natMapper(p)),l(),ne("refreshing slot caches... (triggered by MOVED error)"),o.refreshSlotsCache()},ask:function(f,p){ne("command %s is required to ask %s:%s",t.name,p);let g=o.natMapper(p);o.connectionPool.findOrCreate(g),l(!1,`${g.host}:${g.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(f){u.call(t,f)},defaults:function(){u.call(t,c)}})}}l();function l(u,c){if(o.status==="end"){t.reject(new gi.AbortError("Cluster is ended."));return}let d;if(o.status==="ready"||t.name==="cluster"){if(i&&i.redis)d=i.redis;else if(lm.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||lm.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(o.options.shardedSubscribers==!0&&(t.name=="ssubscribe"||t.name=="sunsubscribe")){let f=o.shardedSubscribers.getResponsibleSubscriber(s),p=-1;t.name=="ssubscribe"&&(p=o.shardedSubscribers.addChannels(t.getKeys())),t.name=="sunsubscribe"&&(p=o.shardedSubscribers.removeChannels(t.getKeys())),p!==-1?d=f.getInstance():t.reject(new gi.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else d=o.subscriber.getInstance();if(!d){t.reject(new gi.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof s=="number"&&o.slots[s]){let f=o.slots[s];if(typeof n=="function"){let p=f.map(function(g){return o.connectionPool.getInstanceByKey(g)});d=n(p,t),Array.isArray(d)&&(d=(0,qe.sample)(d)),d||(d=p[0])}else{let p;n==="all"?p=(0,qe.sample)(f):n==="slave"&&f.length>1?p=(0,qe.sample)(f,1):p=f[0],d=o.connectionPool.getInstanceByKey(p)}}c&&(d=o.connectionPool.getInstanceByKey(c),d.asking())}d||(d=(typeof n=="function"?null:o.connectionPool.getSampleInstance(n))||o.connectionPool.getSampleInstance("all"))}i&&!i.redis&&(i.redis=d)}d?d.sendCommand(t,r):o.options.enableOfflineQueue?o.offlineQueue.push({command:t,stream:r,node:i}):t.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return t.promise}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}handleError(t,r,i){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){i.maxRedirections(new Error("Too many Cluster redirections. Last error: "+t));return}let n=t.message.split(" ");if(n[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",i.moved.bind(null,n[1],n[2]),{timeout:s}):i.moved(n[1],n[2])}else n[0]==="ASK"?i.ask(n[1],n[2]):n[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",i.tryagain,{timeout:this.options.retryDelayOnTryAgain}):n[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",i.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):t.message===qe.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",i.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):i.defaults()}resetOfflineQueue(){this.offlineQueue=new um}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let t=()=>{this.slotsTimer=setTimeout(()=>{ne('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{t()})},this.options.slotsRefreshInterval)};t()}setStatus(t){ne("status: %s -> %s",this.status||"[empty]",t),this.status=t,process.nextTick(()=>{this.emit(t)})}handleCloseEvent(t){t&&ne("closed because %s",t);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,t)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,ne("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(i){ne("Got error %s when reconnecting. Ignoring...",i)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(t){let r;for(;r=this.offlineQueue.shift();)r.command.reject(t)}executeOfflineCommands(){if(this.offlineQueue.length){ne("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=t.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(t){let r=typeof t=="string"?t:`${t.host}:${t.port}`,i=null;return this.options.natMap&&typeof this.options.natMap=="function"?i=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(i=this.options.natMap[r]),i?(ne("NAT mapping %s -> %O",r,i),Object.assign({},i)):typeof t=="string"?(0,Rr.nodeKeyToRedisOptions)(t):t}getInfoFromNode(t,r){if(!t)return r(new Error("Node is disconnected"));let i=t.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,Rr.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});i.on("error",qe.noop),i.cluster("SLOTS",(0,qe.timeout)((n,s)=>{if(i.disconnect(),n)return ne("error encountered running CLUSTER.SLOTS: %s",n),r(n);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){ne("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let a=[];ne("cluster slots result count: %d",s.length);for(let l=0;l<s.length;++l){let u=s[l],c=u[0],d=u[1],f=[];for(let p=2;p<u.length;p++){if(!u[p][0])continue;let g=this.natMapper({host:u[p][0],port:u[p][1]});g.readOnly=p!==2,a.push(g),f.push(g.host+":"+g.port)}ne("cluster slots result [%d]: slots %d~%d served by %s",l,c,d,f);for(let p=c;p<=d;p++)this.slots[p]=f}this._groupsIds=Object.create(null);let o=0;for(let l=0;l<16384;l++){let u=(this.slots[l]||[]).join(";");if(!u.length){this._groupsBySlot[l]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++o),this._groupsBySlot[l]=this._groupsIds[u]}this.connectionPool.reset(a),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(t){for(let r of this._readyDelayedCallbacks)process.nextTick(r,t);this._readyDelayedCallbacks=[]}readyCheck(t){this.cluster("INFO",(r,i)=>{if(r)return t(r);if(typeof i!="string")return t();let n,s=i.split(`\r
`);for(let a=0;a<s.length;++a){let o=s[a].split(":");if(o[0]==="cluster_state"){n=o[1];break}}n==="fail"?(ne("cluster state not ok (%s)",n),t(null,n)):t()})}resolveSrv(t){return new Promise((r,i)=>{this.options.resolveSrv(t,(n,s)=>{if(n)return i(n);let a=this,o=(0,Rr.groupSrvRecords)(s),l=Object.keys(o).sort((c,d)=>parseInt(c)-parseInt(d));function u(c){if(!l.length)return i(c);let d=l[0],f=o[d],p=(0,Rr.weightSrvRecords)(f);f.records.length||l.shift(),a.dnsLookup(p.name).then(g=>r({host:g,port:p.port}),u)}u()})})}dnsLookup(t){return new Promise((r,i)=>{this.options.dnsLookup(t,(n,s)=>{n?(ne("failed to resolve hostname %s to IP: %s",t,n.message),i(n)):(ne("resolved hostname %s to IP %s",t,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let t=(0,Rr.normalizeNodeOptions)(this.startupNodes),r=(0,Rr.getUniqueHostnamesFromOptions)(t);if(r.length===0)return t;let i=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),n=(0,qe.zipMap)(r,i);return t.map(s=>{let a=n.get(s.host);return a?this.options.useSRVRecords?Object.assign({},s,a):Object.assign({},s,{host:a}):s})}createScanStream(t,{key:r,options:i={}}){return new OI.default({objectMode:!0,key:r,redis:this,command:t,...i})}};(0,qI.default)(yi,dm.EventEmitter);(0,_I.addTransactionSupport)(yi.prototype);yl.default=yi});var Wn=m(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var FI=fe(),MI=(0,FI.Debug)("AbstractConnector"),xl=class{constructor(t){this.connecting=!1,this.disconnectTimeout=t}check(t){return!0}disconnect(){if(this.connecting=!1,this.stream){let t=this.stream,r=setTimeout(()=>{MI("stream %s:%s still open, destroying it",t.remoteAddress,t.remotePort),t.destroy()},this.disconnectTimeout);t.on("close",()=>clearTimeout(r)),t.end()}}};vl.default=xl});var fm=m(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var jI=require("net"),$I=require("tls"),VI=fe(),BI=Wn(),wl=class extends BI.default{constructor(t){super(t.disconnectTimeout),this.options=t}connect(t){let{options:r}=this;this.connecting=!0;let i;return"path"in r&&r.path?i={path:r.path}:(i={},"port"in r&&r.port!=null&&(i.port=r.port),"host"in r&&r.host!=null&&(i.host=r.host),"family"in r&&r.family!=null&&(i.family=r.family)),r.tls&&Object.assign(i,r.tls),new Promise((n,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(VI.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,$I.connect)(i):this.stream=(0,jI.createConnection)(i)}catch(a){s(a);return}this.stream.once("error",a=>{this.firstError=a}),n(this.stream)})})}};Sl.default=wl});var pm=m(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});function GI(e,t){return(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379)}var El=class{constructor(t){this.cursor=0,this.sentinels=t.slice(0)}next(){let t=this.cursor>=this.sentinels.length;return{done:t,value:t?void 0:this.sentinels[this.cursor++]}}reset(t){t&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(t){for(let r=0;r<this.sentinels.length;r++)if(GI(t,this.sentinels[r]))return!1;return this.sentinels.push(t),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};Al.default=El});var mm=m(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.FailoverDetector=void 0;var HI=fe(),Rl=(0,HI.Debug)("FailoverDetector"),hm="+switch-master",kl=class{constructor(t,r){this.isDisconnected=!1,this.connector=t,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let t of this.sentinels)t.client.disconnect()}async subscribe(){Rl("Starting FailoverDetector");let t=[];for(let r of this.sentinels){let i=r.client.subscribe(hm).catch(n=>{Rl("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,n.message)});t.push(i),r.client.on("message",n=>{!this.isDisconnected&&n===hm&&this.disconnect()})}await Promise.all(t)}disconnect(){this.isDisconnected=!0,Rl("Failover detected, disconnecting"),this.connector.disconnect()}};Yn.FailoverDetector=kl});var Xn=m(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.SentinelIterator=void 0;var QI=require("net"),bi=fe(),KI=require("tls"),gm=pm();xi.SentinelIterator=gm.default;var zI=Wn(),JI=Ut(),WI=mm(),kr=(0,bi.Debug)("SentinelConnector"),Tl=class extends zI.default{constructor(t){if(super(t.disconnectTimeout),this.options=t,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new gm.default(this.options.sentinels)}check(t){let r=!t.role||this.options.role===t.role;return r||(kr("role invalid, expected %s, but got %s",this.options.role,t.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(t){this.connecting=!0,this.retryAttempts=0;let r,i=async()=>{let n=this.sentinelIterator.next();if(n.done){this.sentinelIterator.reset(!1);let l=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof l!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${l}ms.`;r&&(u+=` Last error: ${r.message}`),kr(u);let c=new Error(u);if(typeof l=="number")return t("error",c),await new Promise(d=>setTimeout(d,l)),i();throw c}let s=null,a=null;try{s=await this.resolve(n.value)}catch(l){a=l}if(!this.connecting)throw new Error(bi.CONNECTION_CLOSED_ERROR_MSG);let o=n.value.host+":"+n.value.port;if(s)return kr("resolved: %s:%s from sentinel %s",s.host,s.port,o),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,KI.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,QI.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",l=>{this.firstError=l}),this.stream;{let l=a?"failed to connect to sentinel "+o+" because "+a.message:"connected to sentinel "+o+" successfully, but got an invalid reply: "+s;return kr(l),t("sentinelError",new Error(l)),a&&(r=a),i()}};return i()}async updateSentinels(t){if(!this.options.updateSentinels)return;let r=await t.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(bi.packObject).forEach(i=>{if((i.flags?i.flags.split(","):[]).indexOf("disconnected")===-1&&i.ip&&i.port){let s=this.sentinelNatResolve(ym(i));this.sentinelIterator.add(s)&&kr("adding sentinel %s:%s",s.host,s.port)}}),kr("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(t){let r=await t.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(t),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(t){let r=await t.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let i=r.map(bi.packObject).filter(n=>n.flags&&!n.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(YI(i,this.options.preferredSlaves))}sentinelNatResolve(t){if(!t||!this.options.natMap)return t;let r=`${t.host}:${t.port}`,i=t;return typeof this.options.natMap=="function"?i=this.options.natMap(r)||t:typeof this.options.natMap=="object"&&(i=this.options.natMap[r]||t),i}connectToSentinel(t,r){return new JI.default({port:t.port||26379,host:t.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:t.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(t){let r=this.connectToSentinel(t);r.on("error",XI);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var t;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:i,value:n}=this.sentinelIterator.next();if(i)break;let s=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var a;(a=this.emitter)===null||a===void 0||a.emit("sentinelReconnecting")}),r.push({address:n,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new WI.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(t=this.emitter)===null||t===void 0||t.emit("failoverSubscribed")}};xi.default=Tl;function YI(e,t){if(e.length===0)return null;let r;if(typeof t=="function")r=t(e);else if(t!==null&&typeof t=="object"){let i=Array.isArray(t)?t:[t];i.sort((n,s)=>(n.prio||(n.prio=1),s.prio||(s.prio=1),n.prio<s.prio?-1:n.prio>s.prio?1:0));for(let n=0;n<i.length;n++){for(let s=0;s<e.length;s++){let a=e[s];if(a.ip===i[n].ip&&a.port===i[n].port){r=a;break}}if(r)break}}return r||(r=(0,bi.sample)(e)),ym(r)}function ym(e){return{host:e.ip,port:Number(e.port)}}function XI(){}});var bm=m(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.SentinelConnector=Tr.StandaloneConnector=void 0;var ZI=fm();Tr.StandaloneConnector=ZI.default;var e2=Xn();Tr.SentinelConnector=e2.default});var xm=m(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var t2=Xt(),Il=class extends t2.AbortError{constructor(t){let r=`Reached the max retries per request limit (which is ${t}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Ol.default=Il});var vm=m(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.MaxRetriesPerRequestError=void 0;var r2=xm();Zn.MaxRetriesPerRequestError=r2.default});var Tm=m((nD,km)=>{"use strict";var Dl=require("buffer").Buffer,i2=require("string_decoder").StringDecoder,_l=new i2,wm=Xt(),n2=wm.ReplyError,s2=wm.ParserError,Ge=Dl.allocUnsafe(32*1024),we=0,es=null,vi=0,ql=0;function a2(e){let t=e.buffer.length-1;var r=e.offset,i=0,n=1;for(e.buffer[r]===45&&(n=-1,r++);r<t;){let s=e.buffer[r++];if(s===13)return e.offset=r+1,n*i;i=i*10+(s-48)}}function o2(e){let t=e.buffer.length-1;var r=e.offset,i=0,n="";for(e.buffer[r]===45&&(n+="-",r++);r<t;){var s=e.buffer[r++];if(s===13)return e.offset=r+1,i!==0&&(n+=i),n;i>429496728?(n+=i*10+(s-48),i=0):s===48&&i===0?n+=0:i=i*10+(s-48)}}function Sm(e){let t=e.offset,r=e.buffer,i=r.length-1;for(var n=t;n<i;)if(r[n++]===13)return e.offset=n+1,e.optionReturnBuffers===!0?e.buffer.slice(t,n-1):e.buffer.toString("utf8",t,n-1)}function Em(e){let t=e.buffer.length-1;for(var r=e.offset,i=0;r<t;){let n=e.buffer[r++];if(n===13)return e.offset=r+1,i;i=i*10+(n-48)}}function l2(e){return e.optionStringNumbers===!0?o2(e):a2(e)}function u2(e){let t=Em(e);if(t===void 0)return;if(t<0)return null;let r=e.offset+t;if(r+2>e.buffer.length){e.bigStrSize=r+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return e.offset=r+2,e.optionReturnBuffers===!0?e.buffer.slice(i,r):e.buffer.toString("utf8",i,r)}function c2(e){var t=Sm(e);if(t!==void 0)return e.optionReturnBuffers===!0&&(t=t.toString()),new n2(t)}function d2(e,t){let r=new s2("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(r)}function f2(e){let t=Em(e);if(t===void 0)return;if(t<0)return null;let r=new Array(t);return Am(e,r,0)}function Cl(e,t,r){e.arrayCache.push(t),e.arrayPos.push(r)}function Pl(e){let t=e.arrayCache.pop();var r=e.arrayPos.pop();if(e.arrayCache.length){let i=Pl(e);if(i===void 0){Cl(e,t,r);return}t[r++]=i}return Am(e,t,r)}function Am(e,t,r){let i=e.buffer.length;for(;r<t.length;){let n=e.offset;if(e.offset>=i){Cl(e,t,r);return}let s=Rm(e,e.buffer[e.offset++]);if(s===void 0){e.arrayCache.length||e.bufferCache.length||(e.offset=n),Cl(e,t,r);return}t[r]=s,r++}return t}function Rm(e,t){switch(t){case 36:return u2(e);case 43:return Sm(e);case 42:return f2(e);case 58:return l2(e);case 45:return c2(e);default:return d2(e,t)}}function p2(){if(Ge.length>50*1024)if(vi===1||ql>vi*2){let e=Math.floor(Ge.length/10),t=e<we?we:e;we=0,Ge=Ge.slice(t,Ge.length)}else ql++,vi--;else clearInterval(es),vi=0,ql=0,es=null}function h2(e){if(Ge.length<e+we){let t=e>78643200?2:3;we>1024*1024*111&&(we=1024*1024*50),Ge=Dl.allocUnsafe(e*t+we),we=0,vi++,es===null&&(es=setInterval(p2,50))}}function m2(e){let t=e.bufferCache,r=e.offset;var i=t.length,n=e.bigStrSize-e.totalChunkSize;if(e.offset=n,n<=2){if(i===2)return t[0].toString("utf8",r,t[0].length+n-2);i--,n=t[t.length-2].length+n}for(var s=_l.write(t[0].slice(r)),a=1;a<i-1;a++)s+=_l.write(t[a]);return s+=_l.end(t[a].slice(0,n-2)),s}function g2(e){let t=e.bufferCache,r=e.offset,i=e.bigStrSize-r-2;var n=t.length,s=e.bigStrSize-e.totalChunkSize;if(e.offset=s,s<=2){if(n===2)return t[0].slice(r,t[0].length+s-2);n--,s=t[t.length-2].length+s}h2(i);let a=we;t[0].copy(Ge,a,r,t[0].length),we+=t[0].length-r;for(var o=1;o<n-1;o++)t[o].copy(Ge,we),we+=t[o].length;return t[o].copy(Ge,we,0,s-2),we+=s-2,Ge.slice(a,we)}var Nl=class{constructor(t){if(!t)throw new TypeError("Options are mandatory.");if(typeof t.returnError!="function"||typeof t.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!t.returnBuffers),this.setStringNumbers(!!t.stringNumbers),this.returnError=t.returnError,this.returnFatalError=t.returnFatalError||t.returnError,this.returnReply=t.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(t){if(typeof t!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=t}setStringNumbers(t){if(typeof t!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=t}execute(t){if(this.buffer===null)this.buffer=t,this.offset=0;else if(this.bigStrSize===0){let i=this.buffer.length,n=i-this.offset,s=Dl.allocUnsafe(n+t.length);if(this.buffer.copy(s,0,this.offset,i),t.copy(s,n,0,t.length),this.buffer=s,this.offset=0,this.arrayCache.length){let a=Pl(this);if(a===void 0)return;this.returnReply(a)}}else if(this.totalChunkSize+t.length>=this.bigStrSize){this.bufferCache.push(t);var r=this.optionReturnBuffers?g2(this):m2(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=t,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=Pl(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(t),this.totalChunkSize+=t.length;return}for(;this.offset<this.buffer.length;){let i=this.offset,n=this.buffer[this.offset++],s=Rm(this,n);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=i);return}n===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};km.exports=Nl});var Om=m((sD,Im)=>{"use strict";Im.exports=Tm()});var _m=m(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var Ll=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(t,r){this.set[Ul(t)][r]=!0}del(t,r){delete this.set[Ul(t)][r]}channels(t){return Object.keys(this.set[Ul(t)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};Fl.default=Ll;function Ul(e){return e==="unsubscribe"?"subscribe":e==="punsubscribe"?"psubscribe":e==="sunsubscribe"?"ssubscribe":e}});var Nm=m(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var qm=mt(),y2=fe(),b2=Om(),x2=_m(),v2=(0,y2.Debug)("dataHandler"),Ml=class{constructor(t,r){this.redis=t;let i=new b2({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:n=>{this.returnError(n)},returnFatalError:n=>{this.returnFatalError(n)},returnReply:n=>{this.returnReply(n)}});t.stream.prependListener("data",n=>{i.execute(n)}),t.stream.resume()}returnFatalError(t){t.message+=". Please report this.",this.redis.recoverFromFatalError(t,t,{offlineQueue:!1})}returnError(t){let r=this.shiftCommand(t);if(r){if(t.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&t.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(t,r)}}returnReply(t){if(this.handleMonitorReply(t)||this.handleSubscriberReply(t))return;let r=this.shiftCommand(t);r&&(qm.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new x2.default,this.redis.condition.subscriber.add(r.command.name,t[1].toString()),Cm(r.command,t[2])||this.redis.commandQueue.unshift(r)):qm.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?Pm(r.command,t[2])||this.redis.commandQueue.unshift(r):r.command.resolve(t))}handleSubscriberReply(t){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(t)?t[0].toString():null;switch(v2('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("messageBuffer",t[1],t[2]);break;case"pmessage":{let i=t[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",i,t[2].toString(),t[3].toString()),this.redis.emit("pmessageBuffer",i,t[2],t[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("smessageBuffer",t[1],t[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let i=t[1].toString();this.redis.condition.subscriber.add(r,i);let n=this.shiftCommand(t);if(!n)return;Cm(n.command,t[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let i=t[1]?t[1].toString():null;i&&this.redis.condition.subscriber.del(r,i);let n=t[2];Number(n)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(t);if(!s)return;Pm(s.command,n)||this.redis.commandQueue.unshift(s);break}default:{let i=this.shiftCommand(t);if(!i)return;i.command.resolve(t)}}return!0}handleMonitorReply(t){if(this.redis.status!=="monitoring")return!1;let r=t.toString();if(r==="OK")return!1;let i=r.indexOf(" "),n=r.slice(0,i),s=r.indexOf('"'),a=r.slice(s+1,-1).split('" "').map(l=>l.replace(/\\"/g,'"')),o=r.slice(i+2,s-2).split(" ");return this.redis.emit("monitor",n,a,o[1],o[0]),!0}shiftCommand(t){let r=this.redis.commandQueue.shift();if(!r){let i="Command queue state error. If you can reproduce this, please report it.",n=new Error(i+(t instanceof Error?` Last error: ${t.message}`:` Last reply: ${t.toString()}`));return this.redis.emit("error",n),null}return r}};jl.default=Ml;var Lt=new WeakMap;function Cm(e,t){let r=Lt.has(e)?Lt.get(e):e.args.length;return r-=1,r<=0?(e.resolve(t),Lt.delete(e),!0):(Lt.set(e,r),!1)}function Pm(e,t){let r=Lt.has(e)?Lt.get(e):e.args.length;return r===0?Number(t)===0?(Lt.delete(e),e.resolve(t),!0):!1:(r-=1,r<=0?(e.resolve(t),!0):(Lt.set(e,r),!1))}});var Dm=m(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.readyHandler=Le.errorHandler=Le.closeHandler=Le.connectHandler=void 0;var w2=Xt(),S2=mt(),E2=vm(),nt=fe(),A2=Nm(),pe=(0,nt.Debug)("connection");function R2(e){return function(){var t;e.setStatus("connect"),e.resetCommandQueue();let r=!1,{connectionEpoch:i}=e;e.condition.auth&&e.auth(e.condition.auth,function(s){i===e.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,e.recoverFromFatalError(s,s)))}),e.condition.select&&e.select(e.condition.select).catch(s=>{e.silentEmit("error",s)}),new A2.default(e,{stringNumbers:e.options.stringNumbers});let n=[];e.options.connectionName&&(pe("set the connection name [%s]",e.options.connectionName),n.push(e.client("setname",e.options.connectionName).catch(nt.noop))),e.options.disableClientInfo||(pe("set the client info"),n.push((0,nt.getPackageMeta)().then(s=>e.client("SETINFO","LIB-VER",s.version).catch(nt.noop)).catch(nt.noop)),n.push(e.client("SETINFO","LIB-NAME",!((t=e.options)===null||t===void 0)&&t.clientInfoTag?`ioredis(${e.options.clientInfoTag})`:"ioredis").catch(nt.noop))),Promise.all(n).catch(nt.noop).finally(()=>{e.options.enableReadyCheck||Le.readyHandler(e)(),e.options.enableReadyCheck&&e._readyCheck(function(s,a){i===e.connectionEpoch&&(s?r||e.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):e.connector.check(a)?Le.readyHandler(e)():e.disconnect(!0))})})}}Le.connectHandler=R2;function $l(e){let t=new w2.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}function k2(e){var t;let r=0;for(let i=0;i<e.length;){let n=(t=e.peekAt(i))===null||t===void 0?void 0:t.command,s=n.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){e.remove(i,1),n.reject($l(n));continue}i++}}function T2(e){var t;for(let r=0;r<e.length;){let i=(t=e.peekAt(r))===null||t===void 0?void 0:t.command;if(i.name==="multi")break;if(i.name==="exec"){e.remove(r,1),i.reject($l(i));break}i.inTransaction?(e.remove(r,1),i.reject($l(i))):r++}}function I2(e){return function(){let r=e.status;if(e.setStatus("close"),e.commandQueue.length&&k2(e.commandQueue),e.offlineQueue.length&&T2(e.offlineQueue),r==="ready"&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,pe("skip reconnecting since the connection is manually closed."),t();if(typeof e.options.retryStrategy!="function")return pe("skip reconnecting because `retryStrategy` is not a function"),t();let i=e.options.retryStrategy(++e.retryAttempts);if(typeof i!="number")return pe("skip reconnecting because `retryStrategy` doesn't return a number"),t();pe("reconnect in %sms",i),e.setStatus("reconnecting",i),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(nt.noop)},i);let{maxRetriesPerRequest:n}=e.options;typeof n=="number"&&(n<0?pe("maxRetriesPerRequest is negative, ignoring..."):e.retryAttempts%(n+1)===0&&(pe("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new E2.MaxRetriesPerRequestError(n))))};function t(){e.setStatus("end"),e.flushQueue(new Error(nt.CONNECTION_CLOSED_ERROR_MSG))}}Le.closeHandler=I2;function O2(e){return function(t){pe("error: %s",t),e.silentEmit("error",t)}}Le.errorHandler=O2;function _2(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),i=>e.emit("error",i));let{sendCommand:r}=e;e.sendCommand=function(i){return S2.default.checkFlag("VALID_IN_MONITOR_MODE",i.name)?r.call(e,i):(i.reject(new Error("Connection is in monitoring mode, can't process commands.")),i.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.readOnly&&(pe("set the connection to readonly mode"),e.readonly().catch(nt.noop)),e.prevCondition){let r=e.prevCondition;if(e.prevCondition=null,r.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(pe("connect to db [%d]",t),e.select(t));let i=r.subscriber.channels("subscribe");i.length&&(pe("subscribe %d channels",i.length),e.subscribe(i));let n=r.subscriber.channels("psubscribe");n.length&&(pe("psubscribe %d channels",n.length),e.psubscribe(n));let s=r.subscriber.channels("ssubscribe");if(s.length){pe("ssubscribe %s",s.length);for(let a of s)e.ssubscribe(a)}}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(pe("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let r=e.prevCommandQueue.shift();r.select!==e.condition.select&&r.command.name!=="select"&&e.select(r.select),e.sendCommand(r.command,r.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){pe("send %d commands in offline queue",e.offlineQueue.length);let r=e.offlineQueue;for(e.resetOfflineQueue();r.length>0;){let i=r.shift();i.select!==e.condition.select&&i.command.name!=="select"&&e.select(i.select),e.sendCommand(i.command,i.stream)}}e.condition.select!==t&&(pe("connect to db [%d]",t),e.select(t))}}Le.readyHandler=_2});var Um=m(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.DEFAULT_REDIS_OPTIONS=void 0;ts.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(e*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(e*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var Ut=m(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var Lm=yr(),Mm=require("events"),Vl=Ct(),q2=bl(),wi=mt(),C2=bm(),P2=Xn(),Ft=Dm(),N2=Um(),D2=Vn(),U2=tl(),tr=fe(),L2=il(),F2=Gn(),Mt=Dn(),Fm=zn(),jt=(0,tr.Debug)("redis"),$t=class e extends F2.default{constructor(t,r,i){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(t,r,i),Mm.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let n=new P2.default(this.options);n.emitter=this,this.connector=n}else this.connector=new C2.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Mt.noop)}static createClient(...t){return new e(...t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}connect(t){let r=new Promise((i,n)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){n(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let a=this;(0,Vl.default)(this.connector.connect(function(o,l){a.silentEmit(o,l)}),function(o,l){if(o){a.flushQueue(o),a.silentEmit("error",o),n(o),a.setStatus("end");return}let u=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(u="connect"),a.stream=l,s.noDelay&&l.setNoDelay(!0),typeof s.keepAlive=="number"&&(l.connecting?l.once(u,()=>{l.setKeepAlive(!0,s.keepAlive)}):l.setKeepAlive(!0,s.keepAlive)),l.connecting){if(l.once(u,Ft.connectHandler(a)),s.connectTimeout){let f=!1;l.setTimeout(s.connectTimeout,function(){if(f)return;l.setTimeout(0),l.destroy();let p=new Error("connect ETIMEDOUT");p.errorno="ETIMEDOUT",p.code="ETIMEDOUT",p.syscall="connect",Ft.errorHandler(a)(p)}),l.once(u,function(){f=!0,l.setTimeout(0)})}}else if(l.destroyed){let f=a.connector.firstError;f&&process.nextTick(()=>{Ft.errorHandler(a)(f)}),process.nextTick(Ft.closeHandler(a))}else process.nextTick(Ft.connectHandler(a));l.destroyed||(l.once("error",Ft.errorHandler(a)),l.once("close",Ft.closeHandler(a)));let c=function(){a.removeListener("close",d),i()};var d=function(){a.removeListener("ready",c),n(new Error(tr.CONNECTION_CLOSED_ERROR_MSG))};a.once("ready",c),a.once("close",d)})});return(0,Vl.default)(r,t)}disconnect(t=!1){t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Ft.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(t){return new e({...this.options,...t})}get mode(){var t;return this.options.monitor?"monitor":!((t=this.condition)===null||t===void 0)&&t.subscriber?"subscriber":"normal"}monitor(t){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,Vl.default)(new Promise(function(i,n){r.once("error",n),r.once("monitoring",function(){i(r)})}),t)}sendCommand(t,r){var i,n;if(this.status==="wait"&&this.connect().catch(Mt.noop),this.status==="end")return t.reject(new Error(tr.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if(!((i=this.condition)===null||i===void 0)&&i.subscriber&&!wi.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;typeof this.options.commandTimeout=="number"&&t.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!r&&this.status==="connect"&&(0,Lm.exists)(t.name)&&((0,Lm.hasFlag)(t.name,"loading")||wi.default.checkFlag("HANDSHAKE_COMMANDS",t.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)jt.enabled&&jt("write command[%s]: %d -> %s(%o)",this._getDescription(),(n=this.condition)===null||n===void 0?void 0:n.select,t.name,t.args),r?"isPipeline"in r&&r.isPipeline?r.write(t.toWritable(r.destination.redis.stream)):r.write(t.toWritable(r)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:r,select:this.condition.select}),wi.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if(t.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;jt.enabled&&jt("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:r,select:this.condition.select})}if(t.name==="select"&&(0,tr.isInt)(t.args[0])){let a=parseInt(t.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),jt("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(t){return this.createScanStream("scan",{options:t})}scanBufferStream(t){return this.createScanStream("scanBuffer",{options:t})}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}silentEmit(t,r){let i;if(!(t==="error"&&(i=r,this.status==="end"||this.manuallyClosing&&i instanceof Error&&(i.message===tr.CONNECTION_CLOSED_ERROR_MSG||i.syscall==="connect"||i.syscall==="read"))))return this.listeners(t).length>0?this.emit.apply(this,arguments):(i&&i instanceof Error&&console.error("[ioredis] Unhandled error event:",i.stack),!1)}recoverFromFatalError(t,r,i){this.flushQueue(r,i),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(t,r){var i;let n=!1;switch(this.options.reconnectOnError&&!wi.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(n=this.options.reconnectOnError(t)),n){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(t);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((i=this.condition)===null||i===void 0?void 0:i.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(t)}}_getDescription(){let t;return"path"in this.options&&this.options.path?t=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?t=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?t=this.options.host+":"+this.options.port:t="",this.options.connectionName&&(t+=` (${this.options.connectionName})`),t}resetCommandQueue(){this.commandQueue=new Fm}resetOfflineQueue(){this.offlineQueue=new Fm}parseOptions(...t){let r={},i=!1;for(let n=0;n<t.length;++n){let s=t[n];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,Mt.defaults)(r,s);else if(typeof s=="string")(0,Mt.defaults)(r,(0,tr.parseURL)(s)),s.startsWith("rediss://")&&(i=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}i&&(0,Mt.defaults)(r,{tls:!0}),(0,Mt.defaults)(r,e.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,tr.resolveTLSProfile)(r)}setStatus(t,r){jt.enabled&&jt("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",t),this.status=t,process.nextTick(this.emit.bind(this,t,r))}createScanStream(t,{key:r,options:i={}}){return new D2.default({objectMode:!0,key:r,redis:this,command:t,...i})}flushQueue(t,r){r=(0,Mt.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let i;if(r.offlineQueue)for(;i=this.offlineQueue.shift();)i.command.reject(t);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");i=this.commandQueue.shift();)i.command.reject(t)}_readyCheck(t){let r=this;this.info(function(i,n){if(i)return i.message&&i.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${i.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),t(null,{})):t(i);if(typeof n!="string")return t(null,n);let s={},a=n.split(`\r
`);for(let o=0;o<a.length;++o){let[l,...u]=a[o].split(":"),c=u.join(":");c&&(s[l]=c)}if(!s.loading||s.loading==="0")t(null,s);else{let o=(s.loading_eta_seconds||1)*1e3,l=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<o?r.options.maxLoadingRetryTime:o;jt("Redis server still loading, trying again in "+l+"ms"),setTimeout(function(){r._readyCheck(t)},l)}}).catch(Mt.noop)}};$t.Cluster=q2.default;$t.Command=wi.default;$t.defaultOptions=N2.DEFAULT_REDIS_OPTIONS;(0,L2.default)($t,Mm.EventEmitter);(0,U2.addTransactionSupport)($t.prototype);Bl.default=$t});var Vm=m((W,$m)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.print=W.ReplyError=W.SentinelIterator=W.SentinelConnector=W.AbstractConnector=W.Pipeline=W.ScanStream=W.Command=W.Cluster=W.Redis=W.default=void 0;W=$m.exports=Ut().default;var M2=Ut();Object.defineProperty(W,"default",{enumerable:!0,get:function(){return M2.default}});var j2=Ut();Object.defineProperty(W,"Redis",{enumerable:!0,get:function(){return j2.default}});var $2=bl();Object.defineProperty(W,"Cluster",{enumerable:!0,get:function(){return $2.default}});var V2=mt();Object.defineProperty(W,"Command",{enumerable:!0,get:function(){return V2.default}});var B2=Vn();Object.defineProperty(W,"ScanStream",{enumerable:!0,get:function(){return B2.default}});var G2=Xo();Object.defineProperty(W,"Pipeline",{enumerable:!0,get:function(){return G2.default}});var H2=Wn();Object.defineProperty(W,"AbstractConnector",{enumerable:!0,get:function(){return H2.default}});var jm=Xn();Object.defineProperty(W,"SentinelConnector",{enumerable:!0,get:function(){return jm.default}});Object.defineProperty(W,"SentinelIterator",{enumerable:!0,get:function(){return jm.SentinelIterator}});W.ReplyError=Xt().ReplyError;Object.defineProperty(W,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function Q2(e,t){console.log(e?"Error: "+e:"Reply: "+t)}W.print=Q2});var Or=m((Hl,zm)=>{var ns=require("buffer"),st=ns.Buffer;function Km(e,t){for(var r in e)t[r]=e[r]}st.from&&st.alloc&&st.allocUnsafe&&st.allocUnsafeSlow?zm.exports=ns:(Km(ns,Hl),Hl.Buffer=rr);function rr(e,t,r){return st(e,t,r)}rr.prototype=Object.create(st.prototype);Km(st,rr);rr.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return st(e,t,r)};rr.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=st(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};rr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return st(e)};rr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ns.SlowBuffer(e)}});var Ql=m((hD,Jm)=>{var ss=Or().Buffer,Z2=require("stream"),eO=require("util");function as(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=ss.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=ss.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}eO.inherits(as,Z2);as.prototype.write=function(t){this.buffer=ss.concat([this.buffer,ss.from(t)]),this.emit("data",t)};as.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};Jm.exports=as});var Ym=m((mD,Wm)=>{"use strict";function Kl(e){var t=(e/8|0)+(e%8===0?0:1);return t}var tO={ES256:Kl(256),ES384:Kl(384),ES512:Kl(521)};function rO(e){var t=tO[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}Wm.exports=rO});var n0=m((gD,i0)=>{"use strict";var os=Or().Buffer,Zm=Ym(),ls=128,e0=0,iO=32,nO=16,sO=2,t0=nO|iO|e0<<6,us=sO|e0<<6;function aO(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function r0(e){if(os.isBuffer(e))return e;if(typeof e=="string")return os.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function oO(e,t){e=r0(e);var r=Zm(t),i=r+1,n=e.length,s=0;if(e[s++]!==t0)throw new Error('Could not find expected "seq"');var a=e[s++];if(a===(ls|1)&&(a=e[s++]),n-s<a)throw new Error('"seq" specified length of "'+a+'", only "'+(n-s)+'" remaining');if(e[s++]!==us)throw new Error('Could not find expected "int" for "r"');var o=e[s++];if(n-s-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(n-s-2)+'" available');if(i<o)throw new Error('"r" specified length of "'+o+'", max of "'+i+'" is acceptable');var l=s;if(s+=o,e[s++]!==us)throw new Error('Could not find expected "int" for "s"');var u=e[s++];if(n-s!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(n-s)+'"');if(i<u)throw new Error('"s" specified length of "'+u+'", max of "'+i+'" is acceptable');var c=s;if(s+=u,s!==n)throw new Error('Expected to consume entire buffer, but "'+(n-s)+'" bytes remain');var d=r-o,f=r-u,p=os.allocUnsafe(d+o+f+u);for(s=0;s<d;++s)p[s]=0;e.copy(p,s,l+Math.max(-d,0),l+o),s=r;for(var g=s;s<g+f;++s)p[s]=0;return e.copy(p,s,c+Math.max(-f,0),c+u),p=p.toString("base64"),p=aO(p),p}function Xm(e,t,r){for(var i=0;t+i<r&&e[t+i]===0;)++i;var n=e[t+i]>=ls;return n&&--i,i}function lO(e,t){e=r0(e);var r=Zm(t),i=e.length;if(i!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+i+'"');var n=Xm(e,0,r),s=Xm(e,r,e.length),a=r-n,o=r-s,l=2+a+1+1+o,u=l<ls,c=os.allocUnsafe((u?2:3)+l),d=0;return c[d++]=t0,u?c[d++]=l:(c[d++]=ls|1,c[d++]=l&255),c[d++]=us,c[d++]=a,n<0?(c[d++]=0,d+=e.copy(c,d,0,r)):d+=e.copy(c,d,n,r),c[d++]=us,c[d++]=o,s<0?(c[d++]=0,e.copy(c,d,r)):e.copy(c,d,r+s),c}i0.exports={derToJose:oO,joseToDer:lO}});var a0=m((yD,s0)=>{"use strict";var Ei=require("buffer").Buffer,zl=require("buffer").SlowBuffer;s0.exports=cs;function cs(e,t){if(!Ei.isBuffer(e)||!Ei.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}cs.install=function(){Ei.prototype.equal=zl.prototype.equal=function(t){return cs(this,t)}};var uO=Ei.prototype.equal,cO=zl.prototype.equal;cs.restore=function(){Ei.prototype.equal=uO,zl.prototype.equal=cO}});var Xl=m((bD,m0)=>{var qr=Or().Buffer,Fe=require("crypto"),l0=n0(),o0=require("util"),dO=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Ai="secret must be a string or buffer",_r="key must be a string or a buffer",fO="key must be a string, a buffer or an object",Wl=typeof Fe.createPublicKey=="function";Wl&&(_r+=" or a KeyObject",Ai+="or a KeyObject");function u0(e){if(!qr.isBuffer(e)&&typeof e!="string"&&(!Wl||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw He(_r)}function c0(e){if(!qr.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw He(fO)}function pO(e){if(!qr.isBuffer(e)){if(typeof e=="string")return e;if(!Wl||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw He(Ai)}}function Yl(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d0(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function He(e){var t=[].slice.call(arguments,1),r=o0.format.bind(o0,e).apply(null,t);return new TypeError(r)}function hO(e){return qr.isBuffer(e)||typeof e=="string"}function Ri(e){return hO(e)||(e=JSON.stringify(e)),e}function f0(e){return function(r,i){pO(i),r=Ri(r);var n=Fe.createHmac("sha"+e,i),s=(n.update(r),n.digest("base64"));return Yl(s)}}var Jl,mO="timingSafeEqual"in Fe?function(t,r){return t.byteLength!==r.byteLength?!1:Fe.timingSafeEqual(t,r)}:function(t,r){return Jl||(Jl=a0()),Jl(t,r)};function gO(e){return function(r,i,n){var s=f0(e)(r,n);return mO(qr.from(i),qr.from(s))}}function p0(e){return function(r,i){c0(i),r=Ri(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign(i,"base64"));return Yl(s)}}function h0(e){return function(r,i,n){u0(n),r=Ri(r),i=d0(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify(n,i,"base64")}}function yO(e){return function(r,i){c0(i),r=Ri(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign({key:i,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Yl(s)}}function bO(e){return function(r,i,n){u0(n),r=Ri(r),i=d0(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify({key:n,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},i,"base64")}}function xO(e){var t=p0(e);return function(){var i=t.apply(null,arguments);return i=l0.derToJose(i,"ES"+e),i}}function vO(e){var t=h0(e);return function(i,n,s){n=l0.joseToDer(n,"ES"+e).toString("base64");var a=t(i,n,s);return a}}function wO(){return function(){return""}}function SO(){return function(t,r){return r===""}}m0.exports=function(t){var r={hs:f0,rs:p0,ps:yO,es:xO,none:wO},i={hs:gO,rs:h0,ps:bO,es:vO,none:SO},n=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw He(dO,t);var s=(n[1]||n[3]).toLowerCase(),a=n[2];return{sign:r[s](a),verify:i[s](a)}}});var Zl=m((xD,g0)=>{var EO=require("buffer").Buffer;g0.exports=function(t){return typeof t=="string"?t:typeof t=="number"||EO.isBuffer(t)?t.toString():JSON.stringify(t)}});var S0=m((vD,w0)=>{var AO=Or().Buffer,y0=Ql(),RO=Xl(),kO=require("stream"),b0=Zl(),eu=require("util");function x0(e,t){return AO.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function TO(e,t,r){r=r||"utf8";var i=x0(b0(e),"binary"),n=x0(b0(t),r);return eu.format("%s.%s",i,n)}function v0(e){var t=e.header,r=e.payload,i=e.secret||e.privateKey,n=e.encoding,s=RO(t.alg),a=TO(t,r,n),o=s.sign(a,i);return eu.format("%s.%s",a,o)}function ds(e){var t=e.secret||e.privateKey||e.key,r=new y0(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new y0(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}eu.inherits(ds,kO);ds.prototype.sign=function(){try{var t=v0({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};ds.sign=v0;w0.exports=ds});var C0=m((wD,q0)=>{var A0=Or().Buffer,E0=Ql(),IO=Xl(),OO=require("stream"),R0=Zl(),_O=require("util"),qO=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function CO(e){return Object.prototype.toString.call(e)==="[object Object]"}function PO(e){if(CO(e))return e;try{return JSON.parse(e)}catch{return}}function k0(e){var t=e.split(".",1)[0];return PO(A0.from(t,"base64").toString("binary"))}function NO(e){return e.split(".",2).join(".")}function T0(e){return e.split(".")[2]}function DO(e,t){t=t||"utf8";var r=e.split(".")[1];return A0.from(r,"base64").toString(t)}function I0(e){return qO.test(e)&&!!k0(e)}function O0(e,t,r){if(!t){var i=new Error("Missing algorithm parameter for jws.verify");throw i.code="MISSING_ALGORITHM",i}e=R0(e);var n=T0(e),s=NO(e),a=IO(t);return a.verify(s,n,r)}function _0(e,t){if(t=t||{},e=R0(e),!I0(e))return null;var r=k0(e);if(!r)return null;var i=DO(e);return(r.typ==="JWT"||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:T0(e)}}function Cr(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new E0(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new E0(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}_O.inherits(Cr,OO);Cr.prototype.verify=function(){try{var t=O0(this.signature.buffer,this.algorithm,this.key.buffer),r=_0(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(i){this.readable=!1,this.emit("error",i),this.emit("close")}};Cr.decode=_0;Cr.isValid=I0;Cr.verify=O0;q0.exports=Cr});var ps=m(Vt=>{var P0=S0(),fs=C0(),UO=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Vt.ALGORITHMS=UO;Vt.sign=P0.sign;Vt.verify=fs.verify;Vt.decode=fs.decode;Vt.isValid=fs.isValid;Vt.createSign=function(t){return new P0(t)};Vt.createVerify=function(t){return new fs(t)}});var tu=m((ED,N0)=>{var LO=ps();N0.exports=function(e,t){t=t||{};var r=LO.decode(e,t);if(!r)return null;var i=r.payload;if(typeof i=="string")try{var n=JSON.parse(i);n!==null&&typeof n=="object"&&(i=n)}catch{}return t.complete===!0?{header:r.header,payload:i,signature:r.signature}:i}});var ki=m((AD,D0)=>{var hs=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};hs.prototype=Object.create(Error.prototype);hs.prototype.constructor=hs;D0.exports=hs});var ru=m((RD,L0)=>{var U0=ki(),ms=function(e,t){U0.call(this,e),this.name="NotBeforeError",this.date=t};ms.prototype=Object.create(U0.prototype);ms.prototype.constructor=ms;L0.exports=ms});var iu=m((kD,M0)=>{var F0=ki(),gs=function(e,t){F0.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};gs.prototype=Object.create(F0.prototype);gs.prototype.constructor=gs;M0.exports=gs});var nu=m((TD,j0)=>{var FO=No();j0.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if(typeof e=="string"){var i=FO(e);return typeof i>"u"?void 0:Math.floor(r+i/1e3)}else return typeof e=="number"?r+e:void 0}});var Ti=m((ID,$0)=>{"use strict";var MO="2.0.0",jO=Number.MAX_SAFE_INTEGER||9007199254740991,$O=16,VO=250,BO=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$0.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:$O,MAX_SAFE_BUILD_LENGTH:VO,MAX_SAFE_INTEGER:jO,RELEASE_TYPES:BO,SEMVER_SPEC_VERSION:MO,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ii=m((OD,V0)=>{"use strict";var GO=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};V0.exports=GO});var Pr=m((at,B0)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:su,MAX_SAFE_BUILD_LENGTH:HO,MAX_LENGTH:QO}=Ti(),KO=Ii();at=B0.exports={};var zO=at.re=[],JO=at.safeRe=[],x=at.src=[],WO=at.safeSrc=[],v=at.t={},YO=0,au="[a-zA-Z0-9-]",XO=[["\\s",1],["\\d",QO],[au,HO]],ZO=e=>{for(let[t,r]of XO)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},q=(e,t,r)=>{let i=ZO(t),n=YO++;KO(e,n,t),v[e]=n,x[n]=t,WO[n]=i,zO[n]=new RegExp(t,r?"g":void 0),JO[n]=new RegExp(i,r?"g":void 0)};q("NUMERICIDENTIFIER","0|[1-9]\\d*");q("NUMERICIDENTIFIERLOOSE","\\d+");q("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${au}*`);q("MAINVERSION",`(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})`);q("MAINVERSIONLOOSE",`(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})`);q("PRERELEASEIDENTIFIER",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIER]})`);q("PRERELEASEIDENTIFIERLOOSE",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIERLOOSE]})`);q("PRERELEASE",`(?:-(${x[v.PRERELEASEIDENTIFIER]}(?:\\.${x[v.PRERELEASEIDENTIFIER]})*))`);q("PRERELEASELOOSE",`(?:-?(${x[v.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${x[v.PRERELEASEIDENTIFIERLOOSE]})*))`);q("BUILDIDENTIFIER",`${au}+`);q("BUILD",`(?:\\+(${x[v.BUILDIDENTIFIER]}(?:\\.${x[v.BUILDIDENTIFIER]})*))`);q("FULLPLAIN",`v?${x[v.MAINVERSION]}${x[v.PRERELEASE]}?${x[v.BUILD]}?`);q("FULL",`^${x[v.FULLPLAIN]}$`);q("LOOSEPLAIN",`[v=\\s]*${x[v.MAINVERSIONLOOSE]}${x[v.PRERELEASELOOSE]}?${x[v.BUILD]}?`);q("LOOSE",`^${x[v.LOOSEPLAIN]}$`);q("GTLT","((?:<|>)?=?)");q("XRANGEIDENTIFIERLOOSE",`${x[v.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);q("XRANGEIDENTIFIER",`${x[v.NUMERICIDENTIFIER]}|x|X|\\*`);q("XRANGEPLAIN",`[v=\\s]*(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:${x[v.PRERELEASE]})?${x[v.BUILD]}?)?)?`);q("XRANGEPLAINLOOSE",`[v=\\s]*(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:${x[v.PRERELEASELOOSE]})?${x[v.BUILD]}?)?)?`);q("XRANGE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAIN]}$`);q("XRANGELOOSE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAINLOOSE]}$`);q("COERCEPLAIN",`(^|[^\\d])(\\d{1,${su}})(?:\\.(\\d{1,${su}}))?(?:\\.(\\d{1,${su}}))?`);q("COERCE",`${x[v.COERCEPLAIN]}(?:$|[^\\d])`);q("COERCEFULL",x[v.COERCEPLAIN]+`(?:${x[v.PRERELEASE]})?(?:${x[v.BUILD]})?(?:$|[^\\d])`);q("COERCERTL",x[v.COERCE],!0);q("COERCERTLFULL",x[v.COERCEFULL],!0);q("LONETILDE","(?:~>?)");q("TILDETRIM",`(\\s*)${x[v.LONETILDE]}\\s+`,!0);at.tildeTrimReplace="$1~";q("TILDE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAIN]}$`);q("TILDELOOSE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAINLOOSE]}$`);q("LONECARET","(?:\\^)");q("CARETTRIM",`(\\s*)${x[v.LONECARET]}\\s+`,!0);at.caretTrimReplace="$1^";q("CARET",`^${x[v.LONECARET]}${x[v.XRANGEPLAIN]}$`);q("CARETLOOSE",`^${x[v.LONECARET]}${x[v.XRANGEPLAINLOOSE]}$`);q("COMPARATORLOOSE",`^${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]})$|^$`);q("COMPARATOR",`^${x[v.GTLT]}\\s*(${x[v.FULLPLAIN]})$|^$`);q("COMPARATORTRIM",`(\\s*)${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]}|${x[v.XRANGEPLAIN]})`,!0);at.comparatorTrimReplace="$1$2$3";q("HYPHENRANGE",`^\\s*(${x[v.XRANGEPLAIN]})\\s+-\\s+(${x[v.XRANGEPLAIN]})\\s*$`);q("HYPHENRANGELOOSE",`^\\s*(${x[v.XRANGEPLAINLOOSE]})\\s+-\\s+(${x[v.XRANGEPLAINLOOSE]})\\s*$`);q("STAR","(<|>)?=?\\s*\\*");q("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");q("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ys=m((_D,G0)=>{"use strict";var e_=Object.freeze({loose:!0}),t_=Object.freeze({}),r_=e=>e?typeof e!="object"?e_:e:t_;G0.exports=r_});var ou=m((qD,K0)=>{"use strict";var H0=/^[0-9]+$/,Q0=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=H0.test(e),i=H0.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},i_=(e,t)=>Q0(t,e);K0.exports={compareIdentifiers:Q0,rcompareIdentifiers:i_}});var ye=m((CD,J0)=>{"use strict";var bs=Ii(),{MAX_LENGTH:z0,MAX_SAFE_INTEGER:xs}=Ti(),{safeRe:vs,t:ws}=Pr(),n_=ys(),{compareIdentifiers:lu}=ou(),uu=class e{constructor(t,r){if(r=n_(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>z0)throw new TypeError(`version is longer than ${z0} characters`);bs("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?vs[ws.LOOSE]:vs[ws.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>xs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xs||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<xs)return s}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(bs("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=t.prerelease[r];if(bs("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return lu(i,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let i=this.build[r],n=t.build[r];if(bs("build compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return lu(i,n)}while(++r)}inc(t,r,i){if(t.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let n=`-${r}`.match(this.options.loose?vs[ws.PRERELEASELOOSE]:vs[ws.PRERELEASE]);if(!n||n[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let s=[r,n];i===!1&&(s=[r]),lu(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};J0.exports=uu});var ir=m((PD,Y0)=>{"use strict";var W0=ye(),s_=(e,t,r=!1)=>{if(e instanceof W0)return e;try{return new W0(e,t)}catch(i){if(!r)return null;throw i}};Y0.exports=s_});var Z0=m((ND,X0)=>{"use strict";var a_=ir(),o_=(e,t)=>{let r=a_(e,t);return r?r.version:null};X0.exports=o_});var tg=m((DD,eg)=>{"use strict";var l_=ir(),u_=(e,t)=>{let r=l_(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};eg.exports=u_});var ng=m((UD,ig)=>{"use strict";var rg=ye(),c_=(e,t,r,i,n)=>{typeof r=="string"&&(n=i,i=r,r=void 0);try{return new rg(e instanceof rg?e.version:e,r).inc(t,i,n).version}catch{return null}};ig.exports=c_});var og=m((LD,ag)=>{"use strict";var sg=ir(),d_=(e,t)=>{let r=sg(e,null,!0),i=sg(t,null,!0),n=r.compare(i);if(n===0)return null;let s=n>0,a=s?r:i,o=s?i:r,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}let c=l?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"};ag.exports=d_});var ug=m((FD,lg)=>{"use strict";var f_=ye(),p_=(e,t)=>new f_(e,t).major;lg.exports=p_});var dg=m((MD,cg)=>{"use strict";var h_=ye(),m_=(e,t)=>new h_(e,t).minor;cg.exports=m_});var pg=m((jD,fg)=>{"use strict";var g_=ye(),y_=(e,t)=>new g_(e,t).patch;fg.exports=y_});var mg=m(($D,hg)=>{"use strict";var b_=ir(),x_=(e,t)=>{let r=b_(e,t);return r&&r.prerelease.length?r.prerelease:null};hg.exports=x_});var Me=m((VD,yg)=>{"use strict";var gg=ye(),v_=(e,t,r)=>new gg(e,r).compare(new gg(t,r));yg.exports=v_});var xg=m((BD,bg)=>{"use strict";var w_=Me(),S_=(e,t,r)=>w_(t,e,r);bg.exports=S_});var wg=m((GD,vg)=>{"use strict";var E_=Me(),A_=(e,t)=>E_(e,t,!0);vg.exports=A_});var Ss=m((HD,Eg)=>{"use strict";var Sg=ye(),R_=(e,t,r)=>{let i=new Sg(e,r),n=new Sg(t,r);return i.compare(n)||i.compareBuild(n)};Eg.exports=R_});var Rg=m((QD,Ag)=>{"use strict";var k_=Ss(),T_=(e,t)=>e.sort((r,i)=>k_(r,i,t));Ag.exports=T_});var Tg=m((KD,kg)=>{"use strict";var I_=Ss(),O_=(e,t)=>e.sort((r,i)=>I_(i,r,t));kg.exports=O_});var Oi=m((zD,Ig)=>{"use strict";var __=Me(),q_=(e,t,r)=>__(e,t,r)>0;Ig.exports=q_});var Es=m((JD,Og)=>{"use strict";var C_=Me(),P_=(e,t,r)=>C_(e,t,r)<0;Og.exports=P_});var cu=m((WD,_g)=>{"use strict";var N_=Me(),D_=(e,t,r)=>N_(e,t,r)===0;_g.exports=D_});var du=m((YD,qg)=>{"use strict";var U_=Me(),L_=(e,t,r)=>U_(e,t,r)!==0;qg.exports=L_});var As=m((XD,Cg)=>{"use strict";var F_=Me(),M_=(e,t,r)=>F_(e,t,r)>=0;Cg.exports=M_});var Rs=m((ZD,Pg)=>{"use strict";var j_=Me(),$_=(e,t,r)=>j_(e,t,r)<=0;Pg.exports=$_});var fu=m((e5,Ng)=>{"use strict";var V_=cu(),B_=du(),G_=Oi(),H_=As(),Q_=Es(),K_=Rs(),z_=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return V_(e,r,i);case"!=":return B_(e,r,i);case">":return G_(e,r,i);case">=":return H_(e,r,i);case"<":return Q_(e,r,i);case"<=":return K_(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}};Ng.exports=z_});var Ug=m((t5,Dg)=>{"use strict";var J_=ye(),W_=ir(),{safeRe:ks,t:Ts}=Pr(),Y_=(e,t)=>{if(e instanceof J_)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?ks[Ts.COERCEFULL]:ks[Ts.COERCE]);else{let l=t.includePrerelease?ks[Ts.COERCERTLFULL]:ks[Ts.COERCERTL],u;for(;(u=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],n=r[3]||"0",s=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",o=t.includePrerelease&&r[6]?`+${r[6]}`:"";return W_(`${i}.${n}.${s}${a}${o}`,t)};Dg.exports=Y_});var Fg=m((r5,Lg)=>{"use strict";var pu=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(t,r)}return this}};Lg.exports=pu});var je=m((i5,Vg)=>{"use strict";var X_=/\s+/g,hu=class e{constructor(t,r){if(r=eq(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof mu)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(X_," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(n=>!jg(n[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&oq(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let i=((this.options.includePrerelease&&sq)|(this.options.loose&&aq))+":"+t,n=Mg.get(i);if(n)return n;let s=this.options.loose,a=s?Se[be.HYPHENRANGELOOSE]:Se[be.HYPHENRANGE];t=t.replace(a,yq(this.options.includePrerelease)),ee("hyphen replace",t),t=t.replace(Se[be.COMPARATORTRIM],rq),ee("comparator trim",t),t=t.replace(Se[be.TILDETRIM],iq),ee("tilde trim",t),t=t.replace(Se[be.CARETTRIM],nq),ee("caret trim",t);let o=t.split(" ").map(d=>lq(d,this.options)).join(" ").split(/\s+/).map(d=>gq(d,this.options));s&&(o=o.filter(d=>(ee("loose invalid filter",d,this.options),!!d.match(Se[be.COMPARATORLOOSE])))),ee("range list",o);let l=new Map,u=o.map(d=>new mu(d,this.options));for(let d of u){if(jg(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return Mg.set(i,c),c}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(i=>$g(i,r)&&t.set.some(n=>$g(n,r)&&i.every(s=>n.every(a=>s.intersects(a,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new tq(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(bq(this.set[r],t,this.options))return!0;return!1}};Vg.exports=hu;var Z_=Fg(),Mg=new Z_,eq=ys(),mu=_i(),ee=Ii(),tq=ye(),{safeRe:Se,t:be,comparatorTrimReplace:rq,tildeTrimReplace:iq,caretTrimReplace:nq}=Pr(),{FLAG_INCLUDE_PRERELEASE:sq,FLAG_LOOSE:aq}=Ti(),jg=e=>e.value==="<0.0.0-0",oq=e=>e.value==="",$g=(e,t)=>{let r=!0,i=e.slice(),n=i.pop();for(;r&&i.length;)r=i.every(s=>n.intersects(s,t)),n=i.pop();return r},lq=(e,t)=>(e=e.replace(Se[be.BUILD],""),ee("comp",e,t),e=dq(e,t),ee("caret",e),e=uq(e,t),ee("tildes",e),e=pq(e,t),ee("xrange",e),e=mq(e,t),ee("stars",e),e),Ee=e=>!e||e.toLowerCase()==="x"||e==="*",uq=(e,t)=>e.trim().split(/\s+/).map(r=>cq(r,t)).join(" "),cq=(e,t)=>{let r=t.loose?Se[be.TILDELOOSE]:Se[be.TILDE];return e.replace(r,(i,n,s,a,o)=>{ee("tilde",e,i,n,s,a,o);let l;return Ee(n)?l="":Ee(s)?l=`>=${n}.0.0 <${+n+1}.0.0-0`:Ee(a)?l=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?(ee("replaceTilde pr",o),l=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`):l=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,ee("tilde return",l),l})},dq=(e,t)=>e.trim().split(/\s+/).map(r=>fq(r,t)).join(" "),fq=(e,t)=>{ee("caret",e,t);let r=t.loose?Se[be.CARETLOOSE]:Se[be.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(n,s,a,o,l)=>{ee("caret",e,n,s,a,o,l);let u;return Ee(s)?u="":Ee(a)?u=`>=${s}.0.0${i} <${+s+1}.0.0-0`:Ee(o)?s==="0"?u=`>=${s}.${a}.0${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${i} <${+s+1}.0.0-0`:l?(ee("replaceCaret pr",l),s==="0"?a==="0"?u=`>=${s}.${a}.${o}-${l} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o}-${l} <${+s+1}.0.0-0`):(ee("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${o}${i} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o} <${+s+1}.0.0-0`),ee("caret return",u),u})},pq=(e,t)=>(ee("replaceXRanges",e,t),e.split(/\s+/).map(r=>hq(r,t)).join(" ")),hq=(e,t)=>{e=e.trim();let r=t.loose?Se[be.XRANGELOOSE]:Se[be.XRANGE];return e.replace(r,(i,n,s,a,o,l)=>{ee("xRange",e,i,n,s,a,o,l);let u=Ee(s),c=u||Ee(a),d=c||Ee(o),f=d;return n==="="&&f&&(n=""),l=t.includePrerelease?"-0":"",u?n===">"||n==="<"?i="<0.0.0-0":i="*":n&&f?(c&&(a=0),o=0,n===">"?(n=">=",c?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",c?s=+s+1:a=+a+1),n==="<"&&(l="-0"),i=`${n+s}.${a}.${o}${l}`):c?i=`>=${s}.0.0${l} <${+s+1}.0.0-0`:d&&(i=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),ee("xRange return",i),i})},mq=(e,t)=>(ee("replaceStars",e,t),e.trim().replace(Se[be.STAR],"")),gq=(e,t)=>(ee("replaceGTE0",e,t),e.trim().replace(Se[t.includePrerelease?be.GTE0PRE:be.GTE0],"")),yq=e=>(t,r,i,n,s,a,o,l,u,c,d,f)=>(Ee(i)?r="":Ee(n)?r=`>=${i}.0.0${e?"-0":""}`:Ee(s)?r=`>=${i}.${n}.0${e?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Ee(u)?l="":Ee(c)?l=`<${+u+1}.0.0-0`:Ee(d)?l=`<${u}.${+c+1}.0-0`:f?l=`<=${u}.${c}.${d}-${f}`:e?l=`<${u}.${c}.${+d+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),bq=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(ee(e[i].semver),e[i].semver!==mu.ANY&&e[i].semver.prerelease.length>0){let n=e[i].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}});var _i=m((n5,zg)=>{"use strict";var qi=Symbol("SemVer ANY"),bu=class e{static get ANY(){return qi}constructor(t,r){if(r=Bg(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),yu("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===qi?this.value="":this.value=this.operator+this.semver.version,yu("comp",this)}parse(t){let r=this.options.loose?Gg[Hg.COMPARATORLOOSE]:Gg[Hg.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new Qg(i[2],this.options.loose):this.semver=qi}toString(){return this.value}test(t){if(yu("Comparator.test",t,this.options.loose),this.semver===qi||t===qi)return!0;if(typeof t=="string")try{t=new Qg(t,this.options)}catch{return!1}return gu(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Kg(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new Kg(this.value,r).test(t.semver):(r=Bg(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||gu(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||gu(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};zg.exports=bu;var Bg=ys(),{safeRe:Gg,t:Hg}=Pr(),gu=fu(),yu=Ii(),Qg=ye(),Kg=je()});var Ci=m((s5,Jg)=>{"use strict";var xq=je(),vq=(e,t,r)=>{try{t=new xq(t,r)}catch{return!1}return t.test(e)};Jg.exports=vq});var Yg=m((a5,Wg)=>{"use strict";var wq=je(),Sq=(e,t)=>new wq(e,t).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));Wg.exports=Sq});var Zg=m((o5,Xg)=>{"use strict";var Eq=ye(),Aq=je(),Rq=(e,t,r)=>{let i=null,n=null,s=null;try{s=new Aq(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===-1)&&(i=a,n=new Eq(i,r))}),i};Xg.exports=Rq});var ty=m((l5,ey)=>{"use strict";var kq=ye(),Tq=je(),Iq=(e,t,r)=>{let i=null,n=null,s=null;try{s=new Tq(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===1)&&(i=a,n=new kq(i,r))}),i};ey.exports=Iq});var ny=m((u5,iy)=>{"use strict";var xu=ye(),Oq=je(),ry=Oi(),_q=(e,t)=>{e=new Oq(e,t);let r=new xu("0.0.0");if(e.test(r)||(r=new xu("0.0.0-0"),e.test(r)))return r;r=null;for(let i=0;i<e.set.length;++i){let n=e.set[i],s=null;n.forEach(a=>{let o=new xu(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||ry(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||ry(r,s))&&(r=s)}return r&&e.test(r)?r:null};iy.exports=_q});var ay=m((c5,sy)=>{"use strict";var qq=je(),Cq=(e,t)=>{try{return new qq(e,t).range||"*"}catch{return null}};sy.exports=Cq});var Is=m((d5,cy)=>{"use strict";var Pq=ye(),uy=_i(),{ANY:Nq}=uy,Dq=je(),Uq=Ci(),oy=Oi(),ly=Es(),Lq=Rs(),Fq=As(),Mq=(e,t,r,i)=>{e=new Pq(e,i),t=new Dq(t,i);let n,s,a,o,l;switch(r){case">":n=oy,s=Lq,a=ly,o=">",l=">=";break;case"<":n=ly,s=Fq,a=oy,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Uq(e,t,i))return!1;for(let u=0;u<t.set.length;++u){let c=t.set[u],d=null,f=null;if(c.forEach(p=>{p.semver===Nq&&(p=new uy(">=0.0.0")),d=d||p,f=f||p,n(p.semver,d.semver,i)?d=p:a(p.semver,f.semver,i)&&(f=p)}),d.operator===o||d.operator===l||(!f.operator||f.operator===o)&&s(e,f.semver))return!1;if(f.operator===l&&a(e,f.semver))return!1}return!0};cy.exports=Mq});var fy=m((f5,dy)=>{"use strict";var jq=Is(),$q=(e,t,r)=>jq(e,t,">",r);dy.exports=$q});var hy=m((p5,py)=>{"use strict";var Vq=Is(),Bq=(e,t,r)=>Vq(e,t,"<",r);py.exports=Bq});var yy=m((h5,gy)=>{"use strict";var my=je(),Gq=(e,t,r)=>(e=new my(e,r),t=new my(t,r),e.intersects(t,r));gy.exports=Gq});var xy=m((m5,by)=>{"use strict";var Hq=Ci(),Qq=Me();by.exports=(e,t,r)=>{let i=[],n=null,s=null,a=e.sort((c,d)=>Qq(c,d,r));for(let c of a)Hq(c,t,r)?(s=c,n||(n=c)):(s&&i.push([n,s]),s=null,n=null);n&&i.push([n,null]);let o=[];for(let[c,d]of i)c===d?o.push(c):!d&&c===a[0]?o.push("*"):d?c===a[0]?o.push(`<=${d}`):o.push(`${c} - ${d}`):o.push(`>=${c}`);let l=o.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return l.length<u.length?l:t}});var Ry=m((g5,Ay)=>{"use strict";var vy=je(),wu=_i(),{ANY:vu}=wu,Pi=Ci(),Su=Me(),Kq=(e,t,r={})=>{if(e===t)return!0;e=new vy(e,r),t=new vy(t,r);let i=!1;e:for(let n of e.set){for(let s of t.set){let a=Jq(n,s,r);if(i=i||a!==null,a)continue e}if(i)return!1}return!0},zq=[new wu(">=0.0.0-0")],wy=[new wu(">=0.0.0")],Jq=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===vu){if(t.length===1&&t[0].semver===vu)return!0;r.includePrerelease?e=zq:e=wy}if(t.length===1&&t[0].semver===vu){if(r.includePrerelease)return!0;t=wy}let i=new Set,n,s;for(let p of e)p.operator===">"||p.operator===">="?n=Sy(n,p,r):p.operator==="<"||p.operator==="<="?s=Ey(s,p,r):i.add(p.semver);if(i.size>1)return null;let a;if(n&&s){if(a=Su(n.semver,s.semver,r),a>0)return null;if(a===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let p of i){if(n&&!Pi(p,String(n),r)||s&&!Pi(p,String(s),r))return null;for(let g of t)if(!Pi(p,String(g),r))return!1;return!0}let o,l,u,c,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of t){if(c=c||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",n){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(o=Sy(n,p,r),o===p&&o!==n)return!1}else if(n.operator===">="&&!Pi(n.semver,String(p),r))return!1}if(s){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(l=Ey(s,p,r),l===p&&l!==s)return!1}else if(s.operator==="<="&&!Pi(s.semver,String(p),r))return!1}if(!p.operator&&(s||n)&&a!==0)return!1}return!(n&&u&&!s&&a!==0||s&&c&&!n&&a!==0||f||d)},Sy=(e,t,r)=>{if(!e)return t;let i=Su(e.semver,t.semver,r);return i>0?e:i<0||t.operator===">"&&e.operator===">="?t:e},Ey=(e,t,r)=>{if(!e)return t;let i=Su(e.semver,t.semver,r);return i<0?e:i>0||t.operator==="<"&&e.operator==="<="?t:e};Ay.exports=Kq});var Os=m((y5,Iy)=>{"use strict";var Eu=Pr(),ky=Ti(),Wq=ye(),Ty=ou(),Yq=ir(),Xq=Z0(),Zq=tg(),eC=ng(),tC=og(),rC=ug(),iC=dg(),nC=pg(),sC=mg(),aC=Me(),oC=xg(),lC=wg(),uC=Ss(),cC=Rg(),dC=Tg(),fC=Oi(),pC=Es(),hC=cu(),mC=du(),gC=As(),yC=Rs(),bC=fu(),xC=Ug(),vC=_i(),wC=je(),SC=Ci(),EC=Yg(),AC=Zg(),RC=ty(),kC=ny(),TC=ay(),IC=Is(),OC=fy(),_C=hy(),qC=yy(),CC=xy(),PC=Ry();Iy.exports={parse:Yq,valid:Xq,clean:Zq,inc:eC,diff:tC,major:rC,minor:iC,patch:nC,prerelease:sC,compare:aC,rcompare:oC,compareLoose:lC,compareBuild:uC,sort:cC,rsort:dC,gt:fC,lt:pC,eq:hC,neq:mC,gte:gC,lte:yC,cmp:bC,coerce:xC,Comparator:vC,Range:wC,satisfies:SC,toComparators:EC,maxSatisfying:AC,minSatisfying:RC,minVersion:kC,validRange:TC,outside:IC,gtr:OC,ltr:_C,intersects:qC,simplifyRange:CC,subset:PC,SemVer:Wq,re:Eu.re,src:Eu.src,tokens:Eu.t,SEMVER_SPEC_VERSION:ky.SEMVER_SPEC_VERSION,RELEASE_TYPES:ky.RELEASE_TYPES,compareIdentifiers:Ty.compareIdentifiers,rcompareIdentifiers:Ty.rcompareIdentifiers}});var _y=m((b5,Oy)=>{var NC=Os();Oy.exports=NC.satisfies(process.version,">=15.7.0")});var Cy=m((x5,qy)=>{var DC=Os();qy.exports=DC.satisfies(process.version,">=16.9.0")});var Au=m((v5,Py)=>{var UC=_y(),LC=Cy(),FC={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},MC={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Py.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let i=FC[r];if(!i)throw new Error(`Unknown key type "${r}".`);if(!i.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${i.join(", ")}.`);if(UC)switch(r){case"ec":let n=t.asymmetricKeyDetails.namedCurve,s=MC[e];if(n!==s)throw new Error(`"alg" parameter "${e}" requires curve "${s}".`);break;case"rsa-pss":if(LC){let a=parseInt(e.slice(-3),10),{hashAlgorithm:o,mgf1HashAlgorithm:l,saltLength:u}=t.asymmetricKeyDetails;if(o!==`sha${a}`||l!==o)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var Ru=m((w5,Ny)=>{var jC=Os();Ny.exports=jC.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Ly=m((S5,Uy)=>{var Y=ki(),$C=ru(),Dy=iu(),VC=tu(),BC=nu(),GC=Au(),HC=Ru(),QC=ps(),{KeyObject:KC,createSecretKey:zC,createPublicKey:JC}=require("crypto"),ku=["RS256","RS384","RS512"],WC=["ES256","ES384","ES512"],Tu=["RS256","RS384","RS512"],YC=["HS256","HS384","HS512"];HC&&(ku.splice(ku.length,0,"PS256","PS384","PS512"),Tu.splice(Tu.length,0,"PS256","PS384","PS512"));Uy.exports=function(e,t,r,i){typeof r=="function"&&!i&&(i=r,r={}),r||(r={}),r=Object.assign({},r);let n;if(i?n=i:n=function(c,d){if(c)throw c;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return n(new Y("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return n(new Y("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return n(new Y("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return n(new Y("jwt must be provided"));if(typeof e!="string")return n(new Y("jwt must be a string"));let a=e.split(".");if(a.length!==3)return n(new Y("jwt malformed"));let o;try{o=VC(e,{complete:!0})}catch(c){return n(c)}if(!o)return n(new Y("invalid token"));let l=o.header,u;if(typeof t=="function"){if(!i)return n(new Y("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(c,d){return d(null,t)};return u(l,function(c,d){if(c)return n(new Y("error in secret or public key callback: "+c.message));let f=a[2].trim()!=="";if(!f&&d)return n(new Y("jwt signature is required"));if(f&&!d)return n(new Y("secret or public key must be provided"));if(!f&&!r.algorithms)return n(new Y('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof KC))try{d=JC(d)}catch{try{d=zC(typeof d=="string"?Buffer.from(d):d)}catch{return n(new Y("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=YC:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=Tu:d.asymmetricKeyType==="ec"?r.algorithms=WC:r.algorithms=ku),r.algorithms.indexOf(o.header.alg)===-1)return n(new Y("invalid algorithm"));if(l.alg.startsWith("HS")&&d.type!=="secret")return n(new Y(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&d.type!=="public")return n(new Y(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{GC(l.alg,d)}catch(h){return n(h)}let p;try{p=QC.verify(e,o.header.alg,d)}catch(h){return n(h)}if(!p)return n(new Y("invalid signature"));let g=o.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return n(new Y("invalid nbf value"));if(g.nbf>s+(r.clockTolerance||0))return n(new $C("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return n(new Y("invalid exp value"));if(s>=g.exp+(r.clockTolerance||0))return n(new Dy("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let h=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(C){return h.some(function(N){return N instanceof RegExp?N.test(C):N===C})}))return n(new Y("jwt audience invalid. expected: "+h.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return n(new Y("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return n(new Y("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return n(new Y("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return n(new Y("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return n(new Y("iat required when maxAge is specified"));let h=BC(r.maxAge,g.iat);if(typeof h>"u")return n(new Y('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=h+(r.clockTolerance||0))return n(new Dy("maxAge exceeded",new Date(h*1e3)))}if(r.complete===!0){let h=o.signature;return n(null,{header:l,payload:g,signature:h})}return n(null,g)})}});var By=m((E5,Vy)=>{var Fy=1/0,jy=9007199254740991,XC=17976931348623157e292,My=NaN,ZC="[object Arguments]",e3="[object Function]",t3="[object GeneratorFunction]",r3="[object String]",i3="[object Symbol]",n3=/^\s+|\s+$/g,s3=/^[-+]0x[0-9a-f]+$/i,a3=/^0b[01]+$/i,o3=/^0o[0-7]+$/i,l3=/^(?:0|[1-9]\d*)$/,u3=parseInt;function c3(e,t){for(var r=-1,i=e?e.length:0,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function d3(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function f3(e,t,r){if(t!==t)return d3(e,p3,r);for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}function p3(e){return e!==e}function h3(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function m3(e,t){return c3(t,function(r){return e[r]})}function g3(e,t){return function(r){return e(t(r))}}var _s=Object.prototype,Ou=_s.hasOwnProperty,qs=_s.toString,y3=_s.propertyIsEnumerable,b3=g3(Object.keys,Object),x3=Math.max;function v3(e,t){var r=$y(e)||R3(e)?h3(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||Ou.call(e,s))&&!(n&&(s=="length"||S3(s,i)))&&r.push(s);return r}function w3(e){if(!E3(e))return b3(e);var t=[];for(var r in Object(e))Ou.call(e,r)&&r!="constructor"&&t.push(r);return t}function S3(e,t){return t=t??jy,!!t&&(typeof e=="number"||l3.test(e))&&e>-1&&e%1==0&&e<t}function E3(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||_s;return e===r}function A3(e,t,r,i){e=_u(e)?e:D3(e),r=r&&!i?C3(r):0;var n=e.length;return r<0&&(r=x3(n+r,0)),O3(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&f3(e,t,r)>-1}function R3(e){return k3(e)&&Ou.call(e,"callee")&&(!y3.call(e,"callee")||qs.call(e)==ZC)}var $y=Array.isArray;function _u(e){return e!=null&&I3(e.length)&&!T3(e)}function k3(e){return qu(e)&&_u(e)}function T3(e){var t=Iu(e)?qs.call(e):"";return t==e3||t==t3}function I3(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jy}function Iu(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function qu(e){return!!e&&typeof e=="object"}function O3(e){return typeof e=="string"||!$y(e)&&qu(e)&&qs.call(e)==r3}function _3(e){return typeof e=="symbol"||qu(e)&&qs.call(e)==i3}function q3(e){if(!e)return e===0?e:0;if(e=P3(e),e===Fy||e===-Fy){var t=e<0?-1:1;return t*XC}return e===e?e:0}function C3(e){var t=q3(e),r=t%1;return t===t?r?t-r:t:0}function P3(e){if(typeof e=="number")return e;if(_3(e))return My;if(Iu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Iu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(n3,"");var r=a3.test(e);return r||o3.test(e)?u3(e.slice(2),r?2:8):s3.test(e)?My:+e}function N3(e){return _u(e)?v3(e):w3(e)}function D3(e){return e?m3(e,N3(e)):[]}Vy.exports=A3});var Hy=m((A5,Gy)=>{var U3="[object Boolean]",L3=Object.prototype,F3=L3.toString;function M3(e){return e===!0||e===!1||j3(e)&&F3.call(e)==U3}function j3(e){return!!e&&typeof e=="object"}Gy.exports=M3});var Wy=m((R5,Jy)=>{var Qy=1/0,$3=17976931348623157e292,Ky=NaN,V3="[object Symbol]",B3=/^\s+|\s+$/g,G3=/^[-+]0x[0-9a-f]+$/i,H3=/^0b[01]+$/i,Q3=/^0o[0-7]+$/i,K3=parseInt,z3=Object.prototype,J3=z3.toString;function W3(e){return typeof e=="number"&&e==e4(e)}function zy(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Y3(e){return!!e&&typeof e=="object"}function X3(e){return typeof e=="symbol"||Y3(e)&&J3.call(e)==V3}function Z3(e){if(!e)return e===0?e:0;if(e=t4(e),e===Qy||e===-Qy){var t=e<0?-1:1;return t*$3}return e===e?e:0}function e4(e){var t=Z3(e),r=t%1;return t===t?r?t-r:t:0}function t4(e){if(typeof e=="number")return e;if(X3(e))return Ky;if(zy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=zy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(B3,"");var r=H3.test(e);return r||Q3.test(e)?K3(e.slice(2),r?2:8):G3.test(e)?Ky:+e}Jy.exports=W3});var Xy=m((k5,Yy)=>{var r4="[object Number]",i4=Object.prototype,n4=i4.toString;function s4(e){return!!e&&typeof e=="object"}function a4(e){return typeof e=="number"||s4(e)&&n4.call(e)==r4}Yy.exports=a4});var rb=m((T5,tb)=>{var o4="[object Object]";function l4(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function u4(e,t){return function(r){return e(t(r))}}var c4=Function.prototype,Zy=Object.prototype,eb=c4.toString,d4=Zy.hasOwnProperty,f4=eb.call(Object),p4=Zy.toString,h4=u4(Object.getPrototypeOf,Object);function m4(e){return!!e&&typeof e=="object"}function g4(e){if(!m4(e)||p4.call(e)!=o4||l4(e))return!1;var t=h4(e);if(t===null)return!0;var r=d4.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&eb.call(r)==f4}tb.exports=g4});var nb=m((I5,ib)=>{var y4="[object String]",b4=Object.prototype,x4=b4.toString,v4=Array.isArray;function w4(e){return!!e&&typeof e=="object"}function S4(e){return typeof e=="string"||!v4(e)&&w4(e)&&x4.call(e)==y4}ib.exports=S4});var ub=m((O5,lb)=>{var E4="Expected a function",sb=1/0,A4=17976931348623157e292,ab=NaN,R4="[object Symbol]",k4=/^\s+|\s+$/g,T4=/^[-+]0x[0-9a-f]+$/i,I4=/^0b[01]+$/i,O4=/^0o[0-7]+$/i,_4=parseInt,q4=Object.prototype,C4=q4.toString;function P4(e,t){var r;if(typeof t!="function")throw new TypeError(E4);return e=F4(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}function N4(e){return P4(2,e)}function ob(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function D4(e){return!!e&&typeof e=="object"}function U4(e){return typeof e=="symbol"||D4(e)&&C4.call(e)==R4}function L4(e){if(!e)return e===0?e:0;if(e=M4(e),e===sb||e===-sb){var t=e<0?-1:1;return t*A4}return e===e?e:0}function F4(e){var t=L4(e),r=t%1;return t===t?r?t-r:t:0}function M4(e){if(typeof e=="number")return e;if(U4(e))return ab;if(ob(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ob(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(k4,"");var r=I4.test(e);return r||O4.test(e)?_4(e.slice(2),r?2:8):T4.test(e)?ab:+e}lb.exports=N4});var bb=m((_5,yb)=>{var cb=nu(),j4=Ru(),$4=Au(),db=ps(),V4=By(),Cs=Hy(),fb=Wy(),Cu=Xy(),hb=rb(),Bt=nb(),B4=ub(),{KeyObject:G4,createSecretKey:H4,createPrivateKey:Q4}=require("crypto"),mb=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];j4&&mb.splice(3,0,"PS256","PS384","PS512");var K4={expiresIn:{isValid:function(e){return fb(e)||Bt(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return fb(e)||Bt(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return Bt(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:V4.bind(null,mb),message:'"algorithm" must be a valid string enum value'},header:{isValid:hb,message:'"header" must be an object'},encoding:{isValid:Bt,message:'"encoding" must be a string'},issuer:{isValid:Bt,message:'"issuer" must be a string'},subject:{isValid:Bt,message:'"subject" must be a string'},jwtid:{isValid:Bt,message:'"jwtid" must be a string'},noTimestamp:{isValid:Cs,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Bt,message:'"keyid" must be a string'},mutatePayload:{isValid:Cs,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Cs,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Cs,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},z4={iat:{isValid:Cu,message:'"iat" should be a number of seconds'},exp:{isValid:Cu,message:'"exp" should be a number of seconds'},nbf:{isValid:Cu,message:'"nbf" should be a number of seconds'}};function gb(e,t,r,i){if(!hb(r))throw new Error('Expected "'+i+'" to be a plain object.');Object.keys(r).forEach(function(n){let s=e[n];if(!s){if(!t)throw new Error('"'+n+'" is not allowed in "'+i+'"');return}if(!s.isValid(r[n]))throw new Error(s.message)})}function J4(e){return gb(K4,!1,e,"options")}function W4(e){return gb(z4,!0,e,"payload")}var pb={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},Y4=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];yb.exports=function(e,t,r,i){typeof r=="function"?(i=r,r={}):r=r||{};let n=typeof e=="object"&&!Buffer.isBuffer(e),s=Object.assign({alg:r.algorithm||"HS256",typ:n?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(i)return i(u);throw u}if(!t&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(t!=null&&!(t instanceof G4))try{t=Q4(t)}catch{try{t=H4(typeof t=="string"?Buffer.from(t):t)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&t.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(t.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&t.asymmetricKeyDetails!==void 0&&t.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof e>"u")return a(new Error("payload is required"));if(n){try{W4(e)}catch(u){return a(u)}r.mutatePayload||(e=Object.assign({},e))}else{let u=Y4.filter(function(c){return typeof r[c]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{J4(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{$4(s.alg,t)}catch(u){return a(u)}let o=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:n&&(e.iat=o),typeof r.notBefore<"u"){try{e.nbf=cb(r.notBefore,o)}catch(u){return a(u)}if(typeof e.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof e=="object"){try{e.exp=cb(r.expiresIn,o)}catch(u){return a(u)}if(typeof e.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(pb).forEach(function(u){let c=pb[u];if(typeof r[u]<"u"){if(typeof e[c]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+c+'" property.'));e[c]=r[u]}});let l=r.encoding||"utf8";if(typeof i=="function")i=i&&B4(i),db.createSign({header:s,privateKey:t,payload:e,encoding:l}).once("error",i).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));i(null,u)});else{let u=db.sign({header:s,payload:e,secret:t,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return u}}});var vb=m((q5,xb)=>{xb.exports={decode:tu(),verify:Ly(),sign:bb(),JsonWebTokenError:ki(),NotBeforeError:ru(),TokenExpiredError:iu()}});var gP={};Pb(gP,{disable2FA:()=>fP,enable2FA:()=>kb,enable2fa:()=>pP,getUserFromEvent:()=>mP,login:()=>nP,logout:()=>lP,me:()=>aP,refresh:()=>oP,register:()=>sP,resendVerification:()=>cP,setup2FA:()=>dP,verify2FA:()=>Tb,verify2fa:()=>hP,verifyEmail:()=>uP});module.exports=Nb(gP);var zf=Gt(Kf(),1),za;function pt(){return za||(za=new zf.PrismaClient),za}var OR=process.env.FRONTEND_URL||"http://localhost:5173",_R=process.env.NODE_ENV||"development",Jf=_R==="production",qR=()=>{let e=[OR];return Jf&&e.push("https://dkmxy676d3vgc.cloudfront.net"),Jf||e.push("http://localhost:3000","http://localhost:5173"),e},Ja=e=>{let t=qR(),r=e?.headers?.origin||e?.headers?.Origin||"";return{"Access-Control-Allow-Origin":t.includes(r)?r:t[0],"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,X-CSRF-Token","Access-Control-Max-Age":"86400"}};function CR(e,t=200,r={}){let i=Ja(r.event);return delete r.event,{statusCode:t,headers:{"content-type":"application/json",...i,"x-content-type-options":"nosniff","referrer-policy":"strict-origin-when-cross-origin","permissions-policy":"camera=(), microphone=(), geolocation=()","strict-transport-security":"max-age=63072000; includeSubDomains; preload",...r},body:JSON.stringify(e)}}function k(e,t=400,r={}){return CR({error:e},t,r)}var ep=Gt(require("crypto"),1),Wa=null;function PR(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return ep.default.randomBytes(e)}catch{}if(!Wa)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Wa(e)}function NR(e){Wa=e}function Xa(e,t){if(e=e||Za,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2b$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(bn(PR(oi),oi)),r.join("")}function tp(e,t,r){if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function"&&(r=e,e=void 0),typeof e>"u")e=Za;else if(typeof e!="number")throw Error("illegal arguments: "+typeof e);function i(n){Be(function(){try{n(null,Xa(e))}catch(s){n(s)}})}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);i(r)}else return new Promise(function(n,s){i(function(a,o){if(a){s(a);return}n(o)})})}function rp(e,t){if(typeof t>"u"&&(t=Za),typeof t=="number"&&(t=Xa(t)),typeof e!="string"||typeof t!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof t);return Ya(e,t)}function ip(e,t,r,i){function n(s){typeof e=="string"&&typeof t=="number"?tp(t,function(a,o){Ya(e,o,s,i)}):typeof e=="string"&&typeof t=="string"?Ya(e,t,s,i):Be(s.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);n(r)}else return new Promise(function(s,a){n(function(o,l){if(o){a(o);return}s(l)})})}function np(e,t){for(var r=e.length^t.length,i=0;i<e.length;++i)r|=e.charCodeAt(i)^t.charCodeAt(i);return r===0}function DR(e,t){if(typeof e!="string"||typeof t!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof t);return t.length!==60?!1:np(rp(e,t.substring(0,t.length-31)),t)}function UR(e,t,r,i){function n(s){if(typeof e!="string"||typeof t!="string"){Be(s.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(t.length!==60){Be(s.bind(this,null,!1));return}ip(e,t.substring(0,29),function(a,o){a?s(a):s(null,np(o,t))},i)}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);n(r)}else return new Promise(function(s,a){n(function(o,l){if(o){a(o);return}s(l)})})}function LR(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)}function FR(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);if(e.length!==60)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)}function MR(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return sp(e)>72}var Be=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function sp(e){for(var t=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t}function jR(e){for(var t=0,r,i,n=new Array(sp(e)),s=0,a=e.length;s<a;++s)r=e.charCodeAt(s),r<128?n[t++]=r:r<2048?(n[t++]=r>>6|192,n[t++]=r&63|128):(r&64512)===55296&&((i=e.charCodeAt(s+1))&64512)===56320?(r=65536+((r&1023)<<10)+(i&1023),++s,n[t++]=r>>18|240,n[t++]=r>>12&63|128,n[t++]=r>>6&63|128,n[t++]=r&63|128):(n[t++]=r>>12|224,n[t++]=r>>6&63|128,n[t++]=r&63|128);return n}var mr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),_t=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function bn(e,t){var r=0,i=[],n,s;if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;r<t;){if(n=e[r++]&255,i.push(mr[n>>2&63]),n=(n&3)<<4,r>=t){i.push(mr[n&63]);break}if(s=e[r++]&255,n|=s>>4&15,i.push(mr[n&63]),n=(s&15)<<2,r>=t){i.push(mr[n&63]);break}s=e[r++]&255,n|=s>>6&3,i.push(mr[n&63]),i.push(mr[s&63])}return i.join("")}function ap(e,t){var r=0,i=e.length,n=0,s=[],a,o,l,u,c,d;if(t<=0)throw Error("Illegal len: "+t);for(;r<i-1&&n<t&&(d=e.charCodeAt(r++),a=d<_t.length?_t[d]:-1,d=e.charCodeAt(r++),o=d<_t.length?_t[d]:-1,!(a==-1||o==-1||(c=a<<2>>>0,c|=(o&48)>>4,s.push(String.fromCharCode(c)),++n>=t||r>=i)||(d=e.charCodeAt(r++),l=d<_t.length?_t[d]:-1,l==-1)||(c=(o&15)<<4>>>0,c|=(l&60)>>2,s.push(String.fromCharCode(c)),++n>=t||r>=i)));)d=e.charCodeAt(r++),u=d<_t.length?_t[d]:-1,c=(l&3)<<6>>>0,c|=u,s.push(String.fromCharCode(c)),++n;var f=[];for(r=0;r<n;r++)f.push(s[r].charCodeAt(0));return f}var oi=16,Za=10,$R=16,VR=100,Wf=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Yf=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],op=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function li(e,t,r,i){var n,s=e[t],a=e[t+1];return s^=r[0],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[1],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[2],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[3],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[4],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[5],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[6],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[7],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[8],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[9],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[10],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[11],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[12],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[13],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[14],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[15],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[16],e[t]=a^r[$R+1],e[t+1]=s,e}function gr(e,t){for(var r=0,i=0;r<4;++r)i=i<<8|e[t]&255,t=(t+1)%e.length;return{key:i,offp:t}}function Xf(e,t,r){for(var i=0,n=[0,0],s=t.length,a=r.length,o,l=0;l<s;l++)o=gr(e,i),i=o.offp,t[l]=t[l]^o.key;for(l=0;l<s;l+=2)n=li(n,0,t,r),t[l]=n[0],t[l+1]=n[1];for(l=0;l<a;l+=2)n=li(n,0,t,r),r[l]=n[0],r[l+1]=n[1]}function BR(e,t,r,i){for(var n=0,s=[0,0],a=r.length,o=i.length,l,u=0;u<a;u++)l=gr(t,n),n=l.offp,r[u]=r[u]^l.key;for(n=0,u=0;u<a;u+=2)l=gr(e,n),n=l.offp,s[0]^=l.key,l=gr(e,n),n=l.offp,s[1]^=l.key,s=li(s,0,r,i),r[u]=s[0],r[u+1]=s[1];for(u=0;u<o;u+=2)l=gr(e,n),n=l.offp,s[0]^=l.key,l=gr(e,n),n=l.offp,s[1]^=l.key,s=li(s,0,r,i),i[u]=s[0],i[u+1]=s[1]}function Zf(e,t,r,i,n){var s=op.slice(),a=s.length,o;if(r<4||r>31)if(o=Error("Illegal number of rounds (4-31): "+r),i){Be(i.bind(this,o));return}else throw o;if(t.length!==oi)if(o=Error("Illegal salt length: "+t.length+" != "+oi),i){Be(i.bind(this,o));return}else throw o;r=1<<r>>>0;var l,u,c=0,d;typeof Int32Array=="function"?(l=new Int32Array(Wf),u=new Int32Array(Yf)):(l=Wf.slice(),u=Yf.slice()),BR(t,e,l,u);function f(){if(n&&n(c/r),c<r)for(var g=Date.now();c<r&&(c=c+1,Xf(e,l,u),Xf(t,l,u),!(Date.now()-g>VR)););else{for(c=0;c<64;c++)for(d=0;d<a>>1;d++)li(s,d<<1,l,u);var h=[];for(c=0;c<a;c++)h.push((s[c]>>24&255)>>>0),h.push((s[c]>>16&255)>>>0),h.push((s[c]>>8&255)>>>0),h.push((s[c]&255)>>>0);if(i){i(null,h);return}else return h}i&&Be(f)}if(typeof i<"u")f();else for(var p;;)if(typeof(p=f())<"u")return p||[]}function Ya(e,t,r,i){var n;if(typeof e!="string"||typeof t!="string")if(n=Error("Invalid string / salt: Not a string"),r){Be(r.bind(this,n));return}else throw n;var s,a;if(t.charAt(0)!=="$"||t.charAt(1)!=="2")if(n=Error("Invalid salt version: "+t.substring(0,2)),r){Be(r.bind(this,n));return}else throw n;if(t.charAt(2)==="$")s="\0",a=3;else{if(s=t.charAt(2),s!=="a"&&s!=="b"&&s!=="y"||t.charAt(3)!=="$")if(n=Error("Invalid salt revision: "+t.substring(2,4)),r){Be(r.bind(this,n));return}else throw n;a=4}if(t.charAt(a+2)>"$")if(n=Error("Missing salt rounds"),r){Be(r.bind(this,n));return}else throw n;var o=parseInt(t.substring(a,a+1),10)*10,l=parseInt(t.substring(a+1,a+2),10),u=o+l,c=t.substring(a+3,a+25);e+=s>="a"?"\0":"";var d=jR(e),f=ap(c,oi);function p(g){var h=[];return h.push("$2"),s>="a"&&h.push(s),h.push("$"),u<10&&h.push("0"),h.push(u.toString()),h.push("$"),h.push(bn(f,f.length)),h.push(bn(g,op.length*4-1)),h.join("")}if(typeof r>"u")return p(Zf(d,f,u));Zf(d,f,u,function(g,h){g?r(g,null):r(null,p(h))},i)}function GR(e,t){return bn(e,t)}function HR(e,t){return ap(e,t)}var eo={setRandomFallback:NR,genSaltSync:Xa,genSalt:tp,hashSync:rp,hash:ip,compareSync:DR,compare:UR,getRounds:LR,getSalt:FR,truncates:MR,encodeBase64:GR,decodeBase64:HR};var Dr=Gt($p(),1);var Vp=Gt(require("crypto"),1),dN=process.env.CSRF_ENABLED==="true",Bp=()=>Vp.default.randomBytes(32).toString("hex");var Gp=e=>{let r=(process.env.NODE_ENV||"development")==="production",i=process.env.COOKIE_DOMAIN||void 0,n=`XSRF-TOKEN=${e}; Path=/; SameSite=Lax; Max-Age=900`;return r&&(n+="; Secure"),i&&(n+=`; Domain=${i}`),n};var Hp=()=>{let t=(process.env.NODE_ENV||"development")==="production",r=process.env.COOKIE_DOMAIN||void 0,i="XSRF-TOKEN=; Path=/; SameSite=Lax; Max-Age=0";return t&&(i+="; Secure"),r&&(i+=`; Domain=${r}`),i};var Hm=Gt(Vm(),1);var Si={auth:{maxRequests:10,windowMs:9e5,message:"Too many authentication attempts. Please try again later."},emailVerification:{maxRequests:5,windowMs:36e5,message:"Too many verification email requests. Please try again later."},reports:{maxRequests:parseInt(process.env.REPORTS_MAX_PER_HOUR||"5",10),windowMs:36e5,message:"Too many reports submitted. Please try again later."},write:{maxRequests:100,windowMs:36e5,message:"Too many write requests. Please try again later."},read:{maxRequests:1e3,windowMs:36e5,message:"Too many read requests. Please try again later."}};function Bm(e,t){return e==="/auth/resend-verification"?Si.emailVerification:e==="/reports"&&t==="POST"?Si.reports:e.startsWith("/auth/")?Si.auth:["POST","PUT","DELETE","PATCH"].includes(t.toUpperCase())?Si.write:Si.read}function Gm(e){return!(e==="/health"||e==="/meta")}var Ir=null,rs=null,is=new Map;function K2(){if(Ir)return Ir;let e=process.env.REDIS_URL;if(!e)return console.warn("[RateLimit] REDIS_URL not configured. Using in-memory fallback (single instance only, not distributed)."),null;try{return Ir=new Hm.default(e,{maxRetriesPerRequest:3,retryStrategy:t=>t>3?(console.error("[RateLimit] Redis connection failed after 3 retries"),null):Math.min(t*100,3e3),reconnectOnError:t=>!!t.message.includes("READONLY")}),Ir.on("error",t=>{console.error("[RateLimit] Redis error:",t),rs=t}),Ir.on("connect",()=>{console.log("[RateLimit] Redis connected successfully"),rs=null}),Ir}catch(t){return console.error("[RateLimit] Failed to initialize Redis client:",t),rs=t,null}}function z2(e){if(e.requestContext?.http?.sourceIp)return e.requestContext.http.sourceIp;let t=e.headers?.[" x-forwarded-for"]||e.headers?.["X-Forwarded-For"];return t?t.split(",")[0].trim():"unknown"}function J2(e){return e.userId||null}function W2(e,t,r){let i=r?`user:${r}`:`ip:${t}`;return`rl:${e}:${i}`}async function Y2(e,t,r){let i=K2();if(!i||rs)return Gl(e,t,r);try{let n=Math.ceil(r/1e3),s=Date.now(),a=i.pipeline();a.incr(e),a.pttl(e);let o=await a.exec();if(!o||o.some(([p])=>p))return console.error("[RateLimit] Redis pipeline error, falling back to in-memory"),Gl(e,t,r);let l=o[0][1],u=o[1][1];(l===1||u===-1)&&await i.pexpire(e,r);let c=u>0?s+u:s+r,d=l<=t,f=Math.max(0,t-l);return{allowed:d,remaining:f,resetTime:c}}catch(n){return console.error("[RateLimit] Redis check error, falling back to in-memory:",n),Gl(e,t,r)}}async function Gl(e,t,r){let i=Date.now(),n=is.get(e);if(!n||i>n.resetTime)return n={count:1,resetTime:i+r},is.set(e,n),Math.random()<.01&&X2(),{allowed:!0,remaining:t-1,resetTime:n.resetTime};n.count++;let s=n.count<=t,a=Math.max(0,t-n.count);return{allowed:s,remaining:a,resetTime:n.resetTime}}function X2(){let e=Date.now();for(let[t,r]of is.entries())e>r.resetTime&&is.delete(t)}async function Qm(e,t=null){if(!(process.env.RATE_LIMITING_ENABLED!=="false"))return{allowed:!0};let i=e.requestContext?.http?.method||e.httpMethod||"GET",n=e.requestContext?.http?.path||e.path||"/";if(!Gm(n))return{allowed:!0};let s=t||n,a=z2(e),o=J2(e),l=Bm(s,i),{maxRequests:u,windowMs:c,message:d}=l,f=W2(s,a,o),{allowed:p,remaining:g,resetTime:h}=await Y2(f,u,c);if(!p){let E=Math.ceil((h-Date.now())/1e3);return{allowed:!1,response:{statusCode:429,headers:{"Content-Type":"application/json","Retry-After":E.toString(),"X-RateLimit-Limit":u.toString(),"X-RateLimit-Remaining":"0","X-RateLimit-Reset":Math.ceil(h/1e3).toString()},body:JSON.stringify({error:d,retryAfter:E})}}}return e.rateLimitHeaders={"X-RateLimit-Limit":u.toString(),"X-RateLimit-Remaining":g.toString(),"X-RateLimit-Reset":Math.ceil(h/1e3).toString()},{allowed:!0}}var Ps=Gt(vb(),1),wb=Gt(require("crypto"),1),Pu=process.env.JWT_SECRET||"dev-secret-key-change-in-production",X4="30m",Z4="7d",Nr=process.env.COOKIE_DOMAIN||void 0,eP=process.env.NODE_ENV||"development",Ni=eP==="production",Nu=e=>Ps.default.sign({userId:e,type:"access"},Pu,{expiresIn:X4}),Sb=e=>{let t=wb.default.randomBytes(16).toString("hex");return Ps.default.sign({userId:e,type:"refresh",jti:t},Pu,{expiresIn:Z4})},Du=e=>{try{return Ps.default.verify(e,Pu)}catch{return null}},Uu=(e,t="access")=>{let r=t==="access"?"access_token":"refresh_token",i=tP(e.headers?.cookie||e.headers?.Cookie||"");if(i[r])return i[r];if(t==="access"){let n=e.headers?.authorization||e.headers?.Authorization;if(n&&n.startsWith("Bearer "))return n.substring(7)}return null},tP=e=>{let t={};return e&&e.split(";").forEach(r=>{let[i,...n]=r.split("=");i&&n.length>0&&(t[i.trim()]=n.join("=").trim())}),t},Lu=e=>{let i=`access_token=${e}; HttpOnly; Path=/; SameSite=${Ni?"Strict":"Lax"}; Max-Age=1800`;return Ni&&(i+="; Secure"),Nr&&(i+=`; Domain=${Nr}`),i},Eb=e=>{let i=`refresh_token=${e}; HttpOnly; Path=/; SameSite=${Ni?"Strict":"Lax"}; Max-Age=604800`;return Ni&&(i+="; Secure"),Nr&&(i+=`; Domain=${Nr}`),i},Ab=()=>{let e="Path=/; SameSite=Lax; Max-Age=0",t=Ni?"; Secure":"",r=Nr?`; Domain=${Nr}`:"";return[`access_token=; ${e}${t}${r}`,`refresh_token=; ${e}${t}${r}`]},nr=e=>{let t=Uu(e,"access");if(!t)return null;let r=Du(t);return!r||r.type!=="access"?null:r.userId||null};function rP(e={}){return{...Ja(),...e}}function Rb(){return Math.floor(Date.now()/1e3)}function iP(e){if(!e||typeof e!="string")return"";let[t,r]=e.split("@");return r?`${t.slice(0,2)}***@${r}`:e}function Qe(e,t,r=[]){return{statusCode:e,headers:rP({"Content-Type":"application/json"}),cookies:r,body:JSON.stringify(t)}}async function nP(e){let t=Rb();try{if(!(await Qm(e,"login",10,60)).allowed)return console.warn("[LOGIN] Rate limit exceeded"),k(429,"Too many login attempts");let i=e?.body||"";console.log(`[LOGIN] Raw body length: ${i.length}`);let n={};if(i)try{n=JSON.parse(i)}catch(h){return console.error("[LOGIN] JSON parse error:",h),k(400,"Invalid JSON body")}let{email:s,password:a,twoFactorCode:o}=n||{};if(!s||!a)return console.warn("[LOGIN] Missing email/password"),k(400,"email and password are required");console.log(`[LOGIN] Attempt for email=${iP(s)}`);let u=await pt().user.findUnique({where:{email:s.toLowerCase()}});if(!u)return console.warn("[LOGIN] User not found"),k(401,"Invalid credentials");if(!u.passwordHash)return console.error("[LOGIN] User missing password hash"),k(500,"Server error");if(!await eo.compare(a,u.passwordHash))return console.warn("[LOGIN] Invalid password"),k(401,"Invalid credentials");if(u.twoFactorEnabled){if(!o)return console.warn("[LOGIN] 2FA required but code missing"),k(401,"Two-factor code required");if(!Dr.authenticator.verify({token:o,secret:u.twoFactorSecret}))return console.warn("[LOGIN] 2FA code invalid"),k(401,"Invalid two-factor code")}let d=Nu(u.id),f=Sb(u.id),p=Bp(),g=[Lu(d),Eb(f),Gp(p)];return console.log(`[LOGIN] Success userId=${u.id} latency=${Rb()-t}s`),Qe(200,{user:{id:u.id,email:u.email,createdAt:u.createdAt,twoFactorEnabled:u.twoFactorEnabled||!1},csrfToken:p},g)}catch(r){return console.error("[LOGIN] Unhandled error:",r),k(500,"Server error")}}async function sP(e){try{let t=e?.body||"";console.log(`[REGISTER] Raw body length: ${t.length}`);let r={};if(t)try{r=JSON.parse(t)}catch(c){return console.error("[REGISTER] JSON parse error:",c),k(400,"Invalid JSON body")}let{email:i,password:n}=r;if(!i||!n)return k(400,"email and password are required");let s=process.env.ALLOWED_USER_EMAILS||"";if(s.trim().length>0&&!s.split(",").map(d=>d.trim().toLowerCase()).filter(Boolean).includes(i.toLowerCase()))return console.warn("[REGISTER] Email not allowlisted"),k(403,"Registration not permitted");let a=pt();if(await a.user.findUnique({where:{email:i.toLowerCase()}}))return k(409,"Email already registered");let l=await eo.hash(n,12),u=await a.user.create({data:{email:i.toLowerCase(),passwordHash:l}});return console.log(`[REGISTER] Created userId=${u.id}`),Qe(201,{user:{id:u.id,email:u.email,createdAt:u.createdAt}})}catch(t){return console.error("[REGISTER] Unhandled error:",t),k(500,"Server error")}}async function aP(e){try{let t=nr(e);if(!t)return k(401,"Unauthorized");let i=await pt().user.findUnique({where:{id:t}});return i?Qe(200,{user:{id:i.id,email:i.email,createdAt:i.createdAt,twoFactorEnabled:i.twoFactorEnabled||!1}}):k(404,"Not found")}catch(t){return console.error("[ME] Unhandled error:",t),k(500,"Server error")}}async function oP(e){try{let t=Uu(e,"refresh");if(!t)return k(401,"Missing refresh token");let r=Du(t,"refresh");if(!r)return k(401,"Invalid refresh token");let n=await pt().user.findUnique({where:{id:r.sub}});if(!n)return k(401,"Invalid user");let s=Nu(n.id),a=Lu(s);return Qe(200,{ok:!0},[a])}catch(t){return console.error("[REFRESH] Unhandled error:",t),k(500,"Server error")}}async function lP(e){try{let t=[...Ab(),Hp()];return Qe(200,{ok:!0},t)}catch(t){return console.error("[LOGOUT] Unhandled error:",t),k(500,"Server error")}}async function uP(e){try{let t=e?.body||"",r={};if(t)try{r=JSON.parse(t)}catch{return k(400,"Invalid JSON body")}let{token:i}=r;return i?(console.log("[VERIFY_EMAIL] Not yet implemented"),Qe(200,{verified:!0})):k(400,"token is required")}catch(t){return console.error("[VERIFY_EMAIL] Unhandled error:",t),k(500,"Server error")}}async function cP(e){try{let t=e?.body||"",r={};if(t)try{r=JSON.parse(t)}catch{return k(400,"Invalid JSON body")}let{email:i}=r;return i?(console.log("[RESEND_VERIFICATION] Not yet implemented"),Qe(200,{sent:!0})):k(400,"email is required")}catch(t){return console.error("[RESEND_VERIFICATION] Unhandled error:",t),k(500,"Server error")}}async function dP(e){try{let t=nr(e);if(!t)return k(401,"Unauthorized");let r=pt(),i=await r.user.findUnique({where:{id:t}});if(!i)return k(404,"Not found");if(i.twoFactorEnabled)return k(400,"Already enabled");let n=Dr.authenticator.generateSecret();await r.user.update({where:{id:i.id},data:{twoFactorSecret:n}});let s=Dr.authenticator.keyuri(i.email,"ProjectValine",n);return Qe(200,{secret:n,otpauth:s})}catch(t){return console.error("[SETUP2FA] Unhandled error:",t),k(500,"Server error")}}async function kb(e){try{let t=nr(e);if(!t)return k(401,"Unauthorized");let r=e?.body||"",i={};if(r)try{i=JSON.parse(r)}catch{return k(400,"Invalid JSON body")}let{code:n}=i;if(!n)return k(400,"code is required");let s=pt(),a=await s.user.findUnique({where:{id:t}});return!a||!a.twoFactorSecret?k(400,"2FA not initialized"):Dr.authenticator.verify({token:n,secret:a.twoFactorSecret})?(await s.user.update({where:{id:a.id},data:{twoFactorEnabled:!0}}),Qe(200,{twoFactorEnabled:!0})):k(401,"Invalid code")}catch(t){return console.error("[ENABLE2FA] Unhandled error:",t),k(500,"Server error")}}async function Tb(e){try{let t=nr(e);if(!t)return k(401,"Unauthorized");let r=e?.body||"",i={};if(r)try{i=JSON.parse(r)}catch{return k(400,"Invalid JSON body")}let{code:n}=i;if(!n)return k(400,"code is required");let a=await pt().user.findUnique({where:{id:t}});return!a||!a.twoFactorSecret?k(400,"2FA not initialized"):Dr.authenticator.verify({token:n,secret:a.twoFactorSecret})?Qe(200,{verified:!0}):k(401,"Invalid code")}catch(t){return console.error("[VERIFY2FA] Unhandled error:",t),k(500,"Server error")}}async function fP(e){try{let t=nr(e);if(!t)return k(401,"Unauthorized");let r=pt(),i=await r.user.findUnique({where:{id:t}});return i?i.twoFactorEnabled?(await r.user.update({where:{id:i.id},data:{twoFactorEnabled:!1,twoFactorSecret:null}}),Qe(200,{twoFactorEnabled:!1})):k(400,"2FA not enabled"):k(404,"Not found")}catch(t){return console.error("[DISABLE2FA] Unhandled error:",t),k(500,"Server error")}}async function pP(e){return kb(e)}async function hP(e){return Tb(e)}function mP(e){try{return nr(e)||null}catch{return null}}0&&(module.exports={disable2FA,enable2FA,enable2fa,getUserFromEvent,login,logout,me,refresh,register,resendVerification,setup2FA,verify2FA,verify2fa,verifyEmail});
/*! Bundled license information:

@prisma/client/runtime/library.js:
  (*! Bundled license information:
  
  decimal.js/decimal.mjs:
    (*!
     *  decimal.js v10.5.0
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     *)
  *)

@otplib/plugin-crypto/index.js:
  (**
   * @otplib/plugin-crypto
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/plugin-thirty-two/index.js:
  (**
   * @otplib/plugin-thirty-two
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/core/index.js:
  (**
   * @otplib/core
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/preset-default/index.js:
  (**
   * @otplib/preset-default
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

otplib/index.js:
  (**
   * otplib
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
