var bb=Object.create;var _i=Object.defineProperty;var xb=Object.getOwnPropertyDescriptor;var vb=Object.getOwnPropertyNames;var wb=Object.getPrototypeOf,Sb=Object.prototype.hasOwnProperty;var Eb=(e,t)=>()=>(e&&(t=e(e=0)),t);var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Iu=(e,t)=>{for(var r in t)_i(e,r,{get:t[r],enumerable:!0})},Ou=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of vb(t))!Sb.call(e,n)&&n!==r&&_i(e,n,{get:()=>t[n],enumerable:!(i=xb(t,n))||i.enumerable});return e};var rr=(e,t,r)=>(r=e!=null?bb(wb(e)):{},Ou(t||!e||!e.__esModule?_i(r,"default",{value:e,enumerable:!0}):r,e)),Ab=e=>Ou(_i({},"__esModule",{value:!0}),e);var ja=m((fP,qf)=>{"use strict";var Rb=Object.create,Zi=Object.defineProperty,kb=Object.getOwnPropertyDescriptor,Tb=Object.getOwnPropertyNames,Ib=Object.getPrototypeOf,Ob=Object.prototype.hasOwnProperty,wc=(e,t)=>()=>(e&&(t=e(e=0)),t),Pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zt=(e,t)=>{for(var r in t)Zi(e,r,{get:t[r],enumerable:!0})},Sc=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Tb(t))!Ob.call(e,n)&&n!==r&&Zi(e,n,{get:()=>t[n],enumerable:!(i=kb(t,n))||i.enumerable});return e},H=(e,t,r)=>(r=e!=null?Rb(Ib(e)):{},Sc(t||!e||!e.__esModule?Zi(r,"default",{value:e,enumerable:!0}):r,e)),_b=e=>Sc(Zi({},"__esModule",{value:!0}),e),Ec=Pe((e,t)=>{"use strict";t.exports=(r,i=process.argv)=>{let n=r.startsWith("-")?"":r.length===1?"-":"--",s=i.indexOf(n+r),a=i.indexOf("--");return s!==-1&&(a===-1||s<a)}}),qb=Pe((e,t)=>{"use strict";var r=require("node:os"),i=require("node:tty"),n=Ec(),{env:s}=process,a;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in s&&(s.FORCE_COLOR==="true"?a=1:s.FORCE_COLOR==="false"?a=0:a=s.FORCE_COLOR.length===0?1:Math.min(parseInt(s.FORCE_COLOR,10),3));function o(c){return c===0?!1:{level:c,hasBasic:!0,has256:c>=2,has16m:c>=3}}function l(c,d){if(a===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(c&&!d&&a===void 0)return 0;let f=a||0;if(s.TERM==="dumb")return f;if(process.platform==="win32"){let p=r.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in s)||s.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){let p=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:f}function u(c){let d=l(c,c&&c.isTTY);return o(d)}t.exports={supportsColor:u,stdout:o(l(!0,i.isatty(1))),stderr:o(l(!0,i.isatty(2)))}}),Cb=Pe((e,t)=>{"use strict";var r=qb(),i=Ec();function n(a){if(/^\d{3,4}$/.test(a)){let l=/(\d{1,2})(\d{2})/.exec(a)||[];return{major:0,minor:parseInt(l[1],10),patch:parseInt(l[2],10)}}let o=(a||"").split(".").map(l=>parseInt(l,10));return{major:o[0],minor:o[1],patch:o[2]}}function s(a){let{CI:o,FORCE_HYPERLINK:l,NETLIFY:u,TEAMCITY_VERSION:c,TERM_PROGRAM:d,TERM_PROGRAM_VERSION:f,VTE_VERSION:p,TERM:g}=process.env;if(l)return!(l.length>0&&parseInt(l,10)===0);if(i("no-hyperlink")||i("no-hyperlinks")||i("hyperlink=false")||i("hyperlink=never"))return!1;if(i("hyperlink=true")||i("hyperlink=always")||u)return!0;if(!r.supportsColor(a)||a&&!a.isTTY)return!1;if("WT_SESSION"in process.env)return!0;if(process.platform==="win32"||o||c)return!1;if(d){let h=n(f||"");switch(d){case"iTerm.app":return h.major===3?h.minor>=1:h.major>3;case"WezTerm":return h.major>=20200620;case"vscode":return h.major>1||h.major===1&&h.minor>=72;case"ghostty":return!0}}if(p){if(p==="0.50.0")return!1;let h=n(p);return h.major>0||h.minor>=50}switch(g){case"alacritty":return!0}return!1}t.exports={supportsHyperlink:s,stdout:s(process.stdout),stderr:s(process.stderr)}}),Pb=Pe((e,t)=>{t.exports={name:"@prisma/internals",version:"6.19.0",description:"This package is intended for Prisma's internal use",main:"dist/index.js",types:"dist/index.d.ts",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/internals"},homepage:"https://www.prisma.io",author:"Tim Suchanek <suchanek@prisma.io>",bugs:"https://github.com/prisma/prisma/issues",license:"Apache-2.0",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",test:"dotenv -e ../../.db.env -- jest --silent",prepublishOnly:"pnpm run build"},files:["README.md","dist","!**/libquery_engine*","!dist/get-generators/engines/*","scripts"],devDependencies:{"@babel/helper-validator-identifier":"7.25.9","@opentelemetry/api":"1.9.0","@swc/core":"1.11.5","@swc/jest":"0.2.37","@types/babel__helper-validator-identifier":"7.15.2","@types/jest":"29.5.14","@types/node":"18.19.76","@types/resolve":"1.20.6",archiver:"6.0.2","checkpoint-client":"1.1.33","cli-truncate":"4.0.0",dotenv:"16.5.0",empathic:"2.0.0","escape-string-regexp":"5.0.0",execa:"8.0.1","fast-glob":"3.3.3","find-up":"7.0.0","fp-ts":"2.16.9","fs-extra":"11.3.0","global-directory":"4.0.0",globby:"11.1.0","identifier-regex":"1.0.0","indent-string":"4.0.0","is-windows":"1.0.2","is-wsl":"3.1.0",jest:"29.7.0","jest-junit":"16.0.0",kleur:"4.1.5","mock-stdin":"1.0.0","new-github-issue-url":"0.2.1","node-fetch":"3.3.2","npm-packlist":"5.1.3",open:"7.4.2","p-map":"4.0.0",resolve:"1.22.10","string-width":"7.2.0","strip-indent":"4.0.0","temp-dir":"2.0.0",tempy:"1.0.1","terminal-link":"4.0.0",tmp:"0.2.3","ts-pattern":"5.6.2","ts-toolbelt":"9.6.0",typescript:"5.4.5",yarn:"1.22.22"},dependencies:{"@prisma/config":"workspace:*","@prisma/debug":"workspace:*","@prisma/dmmf":"workspace:*","@prisma/driver-adapter-utils":"workspace:*","@prisma/engines":"workspace:*","@prisma/fetch-engine":"workspace:*","@prisma/generator":"workspace:*","@prisma/generator-helper":"workspace:*","@prisma/get-platform":"workspace:*","@prisma/prisma-schema-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-engine-wasm":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/schema-files-loader":"workspace:*",arg:"5.0.2",prompts:"2.4.2"},peerDependencies:{typescript:">=5.1.0"},peerDependenciesMeta:{typescript:{optional:!0}},sideEffects:!1}}),Ac=Pe((e,t)=>{t.exports={name:"@prisma/engines-version",version:"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"2ba551f319ab1df4bc874a89965d8b3641056773"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),ha=Pe(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enginesVersion=void 0,e.enginesVersion=Ac().prisma.enginesVersion}),Nb=Pe((e,t)=>{"use strict";t.exports=r=>{let i=r.match(/^[ \t]*(?=\S)/gm);return i?i.reduce((n,s)=>Math.min(n,s.length),1/0):0}}),Rc=Pe((e,t)=>{"use strict";t.exports=(r,i=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof i!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof i}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(i===0)return r;let s=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(s,n.indent.repeat(i))}}),Db=Pe((e,t)=>{t.exports={name:"dotenv",version:"16.5.0",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),Ub=Pe((e,t)=>{"use strict";var r=require("node:fs"),i=require("node:path"),n=require("node:os"),s=require("node:crypto"),a=Db(),o=a.version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function u(b){let A={},I=b.toString();I=I.replace(/\r\n?/mg,`
`);let V;for(;(V=l.exec(I))!=null;){let F=V[1],N=V[2]||"";N=N.trim();let M=N[0];N=N.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),M==='"'&&(N=N.replace(/\\n/g,`
`),N=N.replace(/\\r/g,"\r")),A[F]=N}return A}function c(b){let A=h(b),I=k.configDotenv({path:A});if(!I.parsed){let M=new Error(`MISSING_DATA: Cannot parse ${A} for an unknown reason`);throw M.code="MISSING_DATA",M}let V=p(b).split(","),F=V.length,N;for(let M=0;M<F;M++)try{let ee=V[M].trim(),G=g(I,ee);N=k.decrypt(G.ciphertext,G.key);break}catch(ee){if(M+1>=F)throw ee}return k.parse(N)}function d(b){console.log(`[dotenv@${o}][WARN] ${b}`)}function f(b){console.log(`[dotenv@${o}][DEBUG] ${b}`)}function p(b){return b&&b.DOTENV_KEY&&b.DOTENV_KEY.length>0?b.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function g(b,A){let I;try{I=new URL(A)}catch(ee){if(ee.code==="ERR_INVALID_URL"){let G=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw G.code="INVALID_DOTENV_KEY",G}throw ee}let V=I.password;if(!V){let ee=new Error("INVALID_DOTENV_KEY: Missing key part");throw ee.code="INVALID_DOTENV_KEY",ee}let F=I.searchParams.get("environment");if(!F){let ee=new Error("INVALID_DOTENV_KEY: Missing environment part");throw ee.code="INVALID_DOTENV_KEY",ee}let N=`DOTENV_VAULT_${F.toUpperCase()}`,M=b.parsed[N];if(!M){let ee=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${N} in your .env.vault file.`);throw ee.code="NOT_FOUND_DOTENV_ENVIRONMENT",ee}return{ciphertext:M,key:V}}function h(b){let A=null;if(b&&b.path&&b.path.length>0)if(Array.isArray(b.path))for(let I of b.path)r.existsSync(I)&&(A=I.endsWith(".vault")?I:`${I}.vault`);else A=b.path.endsWith(".vault")?b.path:`${b.path}.vault`;else A=i.resolve(process.cwd(),".env.vault");return r.existsSync(A)?A:null}function E(b){return b[0]==="~"?i.join(n.homedir(),b.slice(1)):b}function O(b){b&&b.debug&&f("Loading env from encrypted .env.vault");let A=k._parseVault(b),I=process.env;return b&&b.processEnv!=null&&(I=b.processEnv),k.populate(I,A,b),{parsed:A}}function q(b){let A=i.resolve(process.cwd(),".env"),I="utf8",V=!!(b&&b.debug);b&&b.encoding?I=b.encoding:V&&f("No encoding is specified. UTF-8 is used by default");let F=[A];if(b&&b.path)if(!Array.isArray(b.path))F=[E(b.path)];else{F=[];for(let G of b.path)F.push(E(G))}let N,M={};for(let G of F)try{let L=k.parse(r.readFileSync(G,{encoding:I}));k.populate(M,L,b)}catch(L){V&&f(`Failed to load ${G} ${L.message}`),N=L}let ee=process.env;return b&&b.processEnv!=null&&(ee=b.processEnv),k.populate(ee,M,b),N?{parsed:M,error:N}:{parsed:M}}function P(b){if(p(b).length===0)return k.configDotenv(b);let A=h(b);return A?k._configVault(b):(d(`You set DOTENV_KEY but you are missing a .env.vault file at ${A}. Did you forget to build it?`),k.configDotenv(b))}function B(b,A){let I=Buffer.from(A.slice(-64),"hex"),V=Buffer.from(b,"base64"),F=V.subarray(0,12),N=V.subarray(-16);V=V.subarray(12,-16);try{let M=s.createDecipheriv("aes-256-gcm",I,F);return M.setAuthTag(N),`${M.update(V)}${M.final()}`}catch(M){let ee=M instanceof RangeError,G=M.message==="Invalid key length",L=M.message==="Unsupported state or unable to authenticate data";if(ee||G){let Cr=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Cr.code="INVALID_DOTENV_KEY",Cr}else if(L){let Cr=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Cr.code="DECRYPTION_FAILED",Cr}else throw M}}function Ae(b,A,I={}){let V=!!(I&&I.debug),F=!!(I&&I.override);if(typeof A!="object"){let N=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw N.code="OBJECT_REQUIRED",N}for(let N of Object.keys(A))Object.prototype.hasOwnProperty.call(b,N)?(F===!0&&(b[N]=A[N]),V&&f(F===!0?`"${N}" is already defined and WAS overwritten`:`"${N}" is already defined and was NOT overwritten`)):b[N]=A[N]}var k={configDotenv:q,_configVault:O,_parseVault:c,config:P,decrypt:B,parse:u,populate:Ae};t.exports.configDotenv=k.configDotenv,t.exports._configVault=k._configVault,t.exports._parseVault=k._parseVault,t.exports.config=k.config,t.exports.decrypt=k.decrypt,t.exports.parse=k.parse,t.exports.populate=k.populate,t.exports=k}),Lb=Pe((e,t)=>{"use strict";t.exports=(r={})=>{let i;if(r.repoUrl)i=r.repoUrl;else if(r.user&&r.repo)i=`https://github.com/${r.user}/${r.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let n=new URL(`${i}/issues/new`),s=["body","title","labels","template","milestone","assignee","projects"];for(let a of s){let o=r[a];if(o!==void 0){if(a==="labels"||a==="projects"){if(!Array.isArray(o))throw new TypeError(`The \`${a}\` option should be an array`);o=o.join(",")}n.searchParams.set(a,o)}}return n.toString()},t.exports.default=t.exports}),kc=Pe((e,t)=>{"use strict";t.exports=(function(){function r(i,n,s,a,o){return i<n||s<n?i>s?s+1:i+1:a===o?n:n+1}return function(i,n){if(i===n)return 0;if(i.length>n.length){var s=i;i=n,n=s}for(var a=i.length,o=n.length;a>0&&i.charCodeAt(a-1)===n.charCodeAt(o-1);)a--,o--;for(var l=0;l<a&&i.charCodeAt(l)===n.charCodeAt(l);)l++;if(a-=l,o-=l,a===0||o<3)return o;var u=0,c,d,f,p,g,h,E,O,q,P,B,Ae,k=[];for(c=0;c<a;c++)k.push(c+1),k.push(i.charCodeAt(l+c));for(var b=k.length-1;u<o-3;)for(q=n.charCodeAt(l+(d=u)),P=n.charCodeAt(l+(f=u+1)),B=n.charCodeAt(l+(p=u+2)),Ae=n.charCodeAt(l+(g=u+3)),h=u+=4,c=0;c<b;c+=2)E=k[c],O=k[c+1],d=r(E,d,f,q,O),f=r(d,f,p,P,O),p=r(f,p,g,B,O),h=r(p,g,h,Ae,O),k[c]=h,g=p,p=f,f=d,d=E;for(;u<o;)for(q=n.charCodeAt(l+(d=u)),h=++u,c=0;c<b;c+=2)E=k[c],k[c]=h=r(E,d,h,q,k[c+1]),d=E;return h}})()}),Fb=wc(()=>{"use strict"}),Mb=wc(()=>{"use strict"}),Tc={};zt(Tc,{DMMF:()=>hd,Debug:()=>ve,Decimal:()=>an,Extensions:()=>Ic,MetricsClient:()=>Bd,PrismaClientInitializationError:()=>ae,PrismaClientKnownRequestError:()=>At,PrismaClientRustPanicError:()=>St,PrismaClientUnknownRequestError:()=>Oe,PrismaClientValidationError:()=>lt,Public:()=>Oc,Sql:()=>Tt,createParam:()=>Gw,defineDmmfProperty:()=>tS,deserializeJsonResponse:()=>Xi,deserializeRawResult:()=>If,dmmfToRuntimeDataModel:()=>zx,empty:()=>uS,getPrismaClient:()=>XA,getRuntime:()=>af,join:()=>lS,makeStrictEnum:()=>tR,makeTypedQueryFactory:()=>iS,objectEnumValues:()=>Od,raw:()=>Qd,serializeJsonQuery:()=>jd,skip:()=>Fd,sqltag:()=>cS,warnEnvConflicts:()=>rR,warnOnce:()=>ed});qf.exports=_b(Tc);var Ic={};zt(Ic,{defineExtension:()=>jb,getExtensionContext:()=>$b});function jb(e){return typeof e=="function"?e:t=>t.$extends(e)}function $b(e){return e}var Oc={};zt(Oc,{validator:()=>Vb});function Vb(...e){return t=>t}var Ls={};zt(Ls,{$:()=>Nc,bgBlack:()=>Xb,bgBlue:()=>r1,bgCyan:()=>n1,bgGreen:()=>e1,bgMagenta:()=>i1,bgRed:()=>Zb,bgWhite:()=>s1,bgYellow:()=>t1,black:()=>zb,blue:()=>Lr,bold:()=>$e,cyan:()=>Ht,dim:()=>Wr,gray:()=>ma,green:()=>Br,grey:()=>Yb,hidden:()=>Qb,inverse:()=>Hb,italic:()=>Gb,magenta:()=>Jb,red:()=>Qt,reset:()=>Bb,strikethrough:()=>Kb,underline:()=>Ce,white:()=>Wb,yellow:()=>Yr});var Fs,_c,qc,Cc,Pc=!0;typeof process<"u"&&({FORCE_COLOR:Fs,NODE_DISABLE_COLORS:_c,NO_COLOR:qc,TERM:Cc}=process.env||{},Pc=process.stdout&&process.stdout.isTTY);var Nc={enabled:!_c&&qc==null&&Cc!=="dumb"&&(Fs!=null&&Fs!=="0"||Pc)};function K(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),i=`\x1B[${e}m`,n=`\x1B[${t}m`;return function(s){return!Nc.enabled||s==null?s:i+(~(""+s).indexOf(n)?s.replace(r,n+i):s)+n}}var Bb=K(0,0),$e=K(1,22),Wr=K(2,22),Gb=K(3,23),Ce=K(4,24),Hb=K(7,27),Qb=K(8,28),Kb=K(9,29),zb=K(30,39),Qt=K(31,39),Br=K(32,39),Yr=K(33,39),Lr=K(34,39),Jb=K(35,39),Ht=K(36,39),Wb=K(37,39),ma=K(90,39),Yb=K(90,39),Xb=K(40,49),Zb=K(41,49),e1=K(42,49),t1=K(43,49),r1=K(44,49),i1=K(45,49),n1=K(46,49),s1=K(47,49),a1=100,_u=["green","yellow","blue","magenta","cyan","red"],Fr=[],qu=Date.now(),o1=0,Ms=typeof process<"u"?process.env:{};globalThis.DEBUG??=Ms.DEBUG??"";globalThis.DEBUG_COLORS??=Ms.DEBUG_COLORS?Ms.DEBUG_COLORS==="true":!0;var Mr={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(n=>n.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(n=>n===""||n[0]==="-"?!1:e.match(RegExp(n.split("*").join(".*")+"$"))),i=t.some(n=>n===""||n[0]!=="-"?!1:e.match(RegExp(n.slice(1).split("*").join(".*")+"$")));return r&&!i},log:(...e)=>{let[t,r,...i]=e;(console.warn??console.log)(`${t} ${r}`,...i)},formatters:{}};function l1(e){let t={color:_u[o1++%_u.length],enabled:Mr.enabled(e),namespace:e,log:Mr.log,extend:()=>{}},r=(...i)=>{let{enabled:n,namespace:s,color:a,log:o}=t;if(i.length!==0&&Fr.push([s,...i]),Fr.length>a1&&Fr.shift(),Mr.enabled(s)||n){let l=i.map(c=>typeof c=="string"?c:u1(c)),u=`+${Date.now()-qu}ms`;qu=Date.now(),globalThis.DEBUG_COLORS?o(Ls[a]($e(s)),...l,Ls[a](u)):o(s,...l,u)}};return new Proxy(r,{get:(i,n)=>t[n],set:(i,n,s)=>t[n]=s})}var ve=new Proxy(l1,{get:(e,t)=>Mr[t],set:(e,t,r)=>Mr[t]=r});function u1(e,t=2){let r=new Set;return JSON.stringify(e,(i,n)=>{if(typeof n=="object"&&n!==null){if(r.has(n))return"[Circular *]";r.add(n)}else if(typeof n=="bigint")return n.toString();return n},t)}function c1(e=7500){let t=Fr.map(([r,...i])=>`${r} ${i.map(n=>typeof n=="string"?n:JSON.stringify(n)).join(" ")}`).join(`
`);return t.length<e?t:t.slice(-e)}function d1(){Fr.length=0}var ga=ve,f1=H(require("node:fs"));function p1(){let e=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(e&&f1.default.existsSync(e))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var h1=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],qi="libquery_engine";function m1(e,t){let r=t==="url";return e.includes("windows")?r?"query_engine.dll.node":`query_engine-${e}.dll.node`:e.includes("darwin")?r?`${qi}.dylib.node`:`${qi}-${e}.dylib.node`:r?`${qi}.so.node`:`${qi}-${e}.so.node`}var g1=H(require("node:child_process")),Dc=H(require("node:fs/promises")),js=H(require("node:os")),ct=Symbol.for("@ts-pattern/matcher"),y1=Symbol.for("@ts-pattern/isVariadic"),Hi="@ts-pattern/anonymous-select-key",$s=e=>!!(e&&typeof e=="object"),Li=e=>e&&!!e[ct],We=(e,t,r)=>{if(Li(e)){let i=e[ct](),{matched:n,selections:s}=i.match(t);return n&&s&&Object.keys(s).forEach(a=>r(a,s[a])),n}if($s(e)){if(!$s(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let i=[],n=[],s=[];for(let a of e.keys()){let o=e[a];Li(o)&&o[y1]?s.push(o):s.length?n.push(o):i.push(o)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<i.length+n.length)return!1;let a=t.slice(0,i.length),o=n.length===0?[]:t.slice(-n.length),l=t.slice(i.length,n.length===0?1/0:-n.length);return i.every((u,c)=>We(u,a[c],r))&&n.every((u,c)=>We(u,o[c],r))&&(s.length===0||We(s[0],l,r))}return e.length===t.length&&e.every((a,o)=>We(a,t[o],r))}return Reflect.ownKeys(e).every(i=>{let n=e[i];return(i in t||Li(s=n)&&s[ct]().matcherType==="optional")&&We(n,t[i],r);var s})}return Object.is(t,e)},Et=e=>{var t,r,i;return $s(e)?Li(e)?(t=(r=(i=e[ct]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(e)?Gr(e,Et):Gr(Object.values(e),Et):[]},Gr=(e,t)=>e.reduce((r,i)=>r.concat(t(i)),[]);function Ne(e){return Object.assign(e,{optional:()=>b1(e),and:t=>te(e,t),or:t=>x1(e,t),select:t=>t===void 0?Cu(e):Cu(t,e)})}function b1(e){return Ne({[ct]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return t===void 0?(Et(e).forEach(n=>i(n,void 0)),{matched:!0,selections:r}):{matched:We(e,t,i),selections:r}},getSelectionKeys:()=>Et(e),matcherType:"optional"})})}function te(...e){return Ne({[ct]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return{matched:e.every(n=>We(n,t,i)),selections:r}},getSelectionKeys:()=>Gr(e,Et),matcherType:"and"})})}function x1(...e){return Ne({[ct]:()=>({match:t=>{let r={},i=(n,s)=>{r[n]=s};return Gr(e,Et).forEach(n=>i(n,void 0)),{matched:e.some(n=>We(n,t,i)),selections:r}},getSelectionKeys:()=>Gr(e,Et),matcherType:"or"})})}function j(e){return{[ct]:()=>({match:t=>({matched:!!e(t)})})}}function Cu(...e){let t=typeof e[0]=="string"?e[0]:void 0,r=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return Ne({[ct]:()=>({match:i=>{let n={[t??Hi]:i};return{matched:r===void 0||We(r,i,(s,a)=>{n[s]=a}),selections:n}},getSelectionKeys:()=>[t??Hi].concat(r===void 0?[]:Et(r))})})}function Ke(e){return typeof e=="number"}function gt(e){return typeof e=="string"}function yt(e){return typeof e=="bigint"}var $4=Ne(j(function(e){return!0})),bt=e=>Object.assign(Ne(e),{startsWith:t=>{return bt(te(e,(r=t,j(i=>gt(i)&&i.startsWith(r)))));var r},endsWith:t=>{return bt(te(e,(r=t,j(i=>gt(i)&&i.endsWith(r)))));var r},minLength:t=>bt(te(e,(r=>j(i=>gt(i)&&i.length>=r))(t))),length:t=>bt(te(e,(r=>j(i=>gt(i)&&i.length===r))(t))),maxLength:t=>bt(te(e,(r=>j(i=>gt(i)&&i.length<=r))(t))),includes:t=>{return bt(te(e,(r=t,j(i=>gt(i)&&i.includes(r)))));var r},regex:t=>{return bt(te(e,(r=t,j(i=>gt(i)&&!!i.match(r)))));var r}}),V4=bt(j(gt)),ze=e=>Object.assign(Ne(e),{between:(t,r)=>ze(te(e,((i,n)=>j(s=>Ke(s)&&i<=s&&n>=s))(t,r))),lt:t=>ze(te(e,(r=>j(i=>Ke(i)&&i<r))(t))),gt:t=>ze(te(e,(r=>j(i=>Ke(i)&&i>r))(t))),lte:t=>ze(te(e,(r=>j(i=>Ke(i)&&i<=r))(t))),gte:t=>ze(te(e,(r=>j(i=>Ke(i)&&i>=r))(t))),int:()=>ze(te(e,j(t=>Ke(t)&&Number.isInteger(t)))),finite:()=>ze(te(e,j(t=>Ke(t)&&Number.isFinite(t)))),positive:()=>ze(te(e,j(t=>Ke(t)&&t>0))),negative:()=>ze(te(e,j(t=>Ke(t)&&t<0)))}),B4=ze(j(Ke)),xt=e=>Object.assign(Ne(e),{between:(t,r)=>xt(te(e,((i,n)=>j(s=>yt(s)&&i<=s&&n>=s))(t,r))),lt:t=>xt(te(e,(r=>j(i=>yt(i)&&i<r))(t))),gt:t=>xt(te(e,(r=>j(i=>yt(i)&&i>r))(t))),lte:t=>xt(te(e,(r=>j(i=>yt(i)&&i<=r))(t))),gte:t=>xt(te(e,(r=>j(i=>yt(i)&&i>=r))(t))),positive:()=>xt(te(e,j(t=>yt(t)&&t>0))),negative:()=>xt(te(e,j(t=>yt(t)&&t<0)))}),G4=xt(j(yt)),H4=Ne(j(function(e){return typeof e=="boolean"})),Q4=Ne(j(function(e){return typeof e=="symbol"})),K4=Ne(j(function(e){return e==null})),z4=Ne(j(function(e){return e!=null})),v1=class extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch{t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}},Vs={matched:!1,value:void 0};function en(e){return new w1(e,Vs)}var w1=class Bs{constructor(t,r){this.input=void 0,this.state=void 0,this.input=t,this.state=r}with(...t){if(this.state.matched)return this;let r=t[t.length-1],i=[t[0]],n;t.length===3&&typeof t[1]=="function"?n=t[1]:t.length>2&&i.push(...t.slice(1,t.length-1));let s=!1,a={},o=(u,c)=>{s=!0,a[u]=c},l=!i.some(u=>We(u,this.input,o))||n&&!n(this.input)?Vs:{matched:!0,value:r(s?Hi in a?a[Hi]:a:this.input,this.input)};return new Bs(this.input,l)}when(t,r){if(this.state.matched)return this;let i=!!t(this.input);return new Bs(this.input,i?{matched:!0,value:r(this.input,this.input)}:Vs)}otherwise(t){return this.state.matched?this.state.value:t(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new v1(this.input)}run(){return this.exhaustive()}returnType(){return this}},S1=require("node:util"),E1={warn:Yr("prisma:warn")},A1={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Ts(e,...t){A1.warn()&&console.warn(`${E1.warn} ${e}`,...t)}var R1=(0,S1.promisify)(g1.default.exec),xe=ga("prisma:get-platform"),k1=["1.0.x","1.1.x","3.0.x"];async function T1(){let e=js.default.platform(),t=process.arch;if(e==="freebsd"){let a=await Qi("freebsd-version");if(a&&a.trim().length>0){let o=/^(\d+)\.?/.exec(a);if(o)return{platform:"freebsd",targetDistro:`freebsd${o[1]}`,arch:t}}}if(e!=="linux")return{platform:e,arch:t};let r=await O1(),i=await F1(),n=q1({arch:t,archFromUname:i,familyDistro:r.familyDistro}),{libssl:s}=await C1(n);return{platform:"linux",libssl:s,arch:t,archFromUname:i,...r}}function I1(e){let t=/^ID="?([^"\n]*)"?$/im,r=/^ID_LIKE="?([^"\n]*)"?$/im,i=t.exec(e),n=i&&i[1]&&i[1].toLowerCase()||"",s=r.exec(e),a=s&&s[1]&&s[1].toLowerCase()||"",o=en({id:n,idLike:a}).with({id:"alpine"},({id:l})=>({targetDistro:"musl",familyDistro:l,originalDistro:l})).with({id:"raspbian"},({id:l})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:l})).with({id:"nixos"},({id:l})=>({targetDistro:"nixos",originalDistro:l,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).when(({idLike:l})=>l.includes("debian")||l.includes("ubuntu"),({id:l})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:l})).when(({idLike:l})=>n==="arch"||l.includes("arch"),({id:l})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:l})).when(({idLike:l})=>l.includes("centos")||l.includes("fedora")||l.includes("rhel")||l.includes("suse"),({id:l})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:l})).otherwise(({id:l})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:l}));return xe(`Found distro info:
${JSON.stringify(o,null,2)}`),o}async function O1(){let e="/etc/os-release";try{let t=await Dc.default.readFile(e,{encoding:"utf-8"});return I1(t)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function _1(e){let t=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(e);if(t){let r=`${t[1]}.x`;return Uc(r)}}function Pu(e){let t=/libssl\.so\.(\d)(\.\d)?/.exec(e);if(t){let r=`${t[1]}${t[2]??".0"}.x`;return Uc(r)}}function Uc(e){let t=(()=>{if(Fc(e))return e;let r=e.split(".");return r[1]="0",r.join(".")})();if(k1.includes(t))return t}function q1(e){return en(e).with({familyDistro:"musl"},()=>(xe('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:t})=>(xe('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${t}-linux-gnu`,`/lib/${t}-linux-gnu`])).with({familyDistro:"rhel"},()=>(xe('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:t,arch:r,archFromUname:i})=>(xe(`Don't know any platform-specific paths for "${t}" on ${r} (${i})`),[]))}async function C1(e){let t='grep -v "libssl.so.0"',r=await Nu(e);if(r){xe(`Found libssl.so file using platform-specific paths: ${r}`);let s=Pu(r);if(xe(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"libssl-specific-path"}}xe('Falling back to "ldconfig" and other generic paths');let i=await Qi(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${t}`);if(i||(i=await Nu(["/lib64","/usr/lib64","/lib","/usr/lib"])),i){xe(`Found libssl.so file using "ldconfig" or other generic paths: ${i}`);let s=Pu(i);if(xe(`The parsed libssl version is: ${s}`),s)return{libssl:s,strategy:"ldconfig"}}let n=await Qi("openssl version -v");if(n){xe(`Found openssl binary with version: ${n}`);let s=_1(n);if(xe(`The parsed openssl version is: ${s}`),s)return{libssl:s,strategy:"openssl-binary"}}return xe("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function Nu(e){for(let t of e){let r=await P1(t);if(r)return r}}async function P1(e){try{return(await Dc.default.readdir(e)).find(t=>t.startsWith("libssl.so.")&&!t.startsWith("libssl.so.0"))}catch(t){if(t.code==="ENOENT")return;throw t}}async function ya(){let{binaryTarget:e}=await Lc();return e}function N1(e){return e.binaryTarget!==void 0}async function D1(){let{memoized:e,...t}=await Lc();return t}var Ci={};async function Lc(){if(N1(Ci))return Promise.resolve({...Ci,memoized:!0});let e=await T1(),t=U1(e);return Ci={...e,binaryTarget:t},{...Ci,memoized:!1}}function U1(e){let{platform:t,arch:r,archFromUname:i,libssl:n,targetDistro:s,familyDistro:a,originalDistro:o}=e;t==="linux"&&!["x64","arm64"].includes(r)&&Ts(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${r}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${i}".`);let l="1.1.x";if(t==="linux"&&n===void 0){let c=en({familyDistro:a}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");Ts(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${l}".
${c}`)}let u="debian";if(t==="linux"&&s===void 0&&xe(`Distro is "${o}". Falling back to Prisma engines built for "${u}".`),t==="darwin"&&r==="arm64")return"darwin-arm64";if(t==="darwin")return"darwin";if(t==="win32")return"windows";if(t==="freebsd")return s;if(t==="openbsd")return"openbsd";if(t==="netbsd")return"netbsd";if(t==="linux"&&s==="nixos")return"linux-nixos";if(t==="linux"&&r==="arm64")return`${s==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${n||l}`;if(t==="linux"&&r==="arm")return`linux-arm-openssl-${n||l}`;if(t==="linux"&&s==="musl"){let c="linux-musl";return!n||Fc(n)?c:`${c}-openssl-${n}`}return t==="linux"&&s&&n?`${s}-openssl-${n}`:(t!=="linux"&&Ts(`Prisma detected unknown OS "${t}" and may not work as expected. Defaulting to "linux".`),n?`${u}-openssl-${n}`:s?`${s}-openssl-${l}`:`${u}-openssl-${l}`)}async function L1(e){try{return await e()}catch{return}}function Qi(e){return L1(async()=>{let t=await R1(e);return xe(`Command "${e}" successfully returned "${t.stdout}"`),t.stdout})}async function F1(){return typeof js.default.machine=="function"?js.default.machine():(await Qi("uname -m"))?.trim()}function Fc(e){return e.startsWith("1.")}var Mc={};zt(Mc,{beep:()=>cx,clearScreen:()=>ax,clearTerminal:()=>ox,cursorBackward:()=>H1,cursorDown:()=>B1,cursorForward:()=>G1,cursorGetPosition:()=>z1,cursorHide:()=>Y1,cursorLeft:()=>Vc,cursorMove:()=>V1,cursorNextLine:()=>J1,cursorPrevLine:()=>W1,cursorRestorePosition:()=>K1,cursorSavePosition:()=>Q1,cursorShow:()=>X1,cursorTo:()=>$1,cursorUp:()=>$c,enterAlternativeScreen:()=>lx,eraseDown:()=>rx,eraseEndLine:()=>ex,eraseLine:()=>Bc,eraseLines:()=>Z1,eraseScreen:()=>Gs,eraseStartLine:()=>tx,eraseUp:()=>ix,exitAlternativeScreen:()=>ux,iTerm:()=>px,image:()=>fx,link:()=>dx,scrollDown:()=>sx,scrollUp:()=>nx});var ba=H(require("node:process"),1),xa=globalThis.window?.document!==void 0,J4=globalThis.process?.versions?.node!==void 0,W4=globalThis.process?.versions?.bun!==void 0,Y4=globalThis.Deno?.version?.deno!==void 0,X4=globalThis.process?.versions?.electron!==void 0,Z4=globalThis.navigator?.userAgent?.includes("jsdom")===!0,eP=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,tP=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,rP=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,iP=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,Xr=globalThis.navigator?.userAgentData?.platform,nP=Xr==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",sP=Xr==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",aP=Xr==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",oP=Xr==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),lP=Xr==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android",$="\x1B[",Hr="\x1B]",ar="\x07",Dr=";",jc=!xa&&ba.default.env.TERM_PROGRAM==="Apple_Terminal",M1=!xa&&ba.default.platform==="win32",j1=xa?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:ba.default.cwd,$1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?$+(e+1)+"G":$+(t+1)+Dr+(e+1)+"H"},V1=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=$+-e+"D":e>0&&(r+=$+e+"C"),t<0?r+=$+-t+"A":t>0&&(r+=$+t+"B"),r},$c=(e=1)=>$+e+"A",B1=(e=1)=>$+e+"B",G1=(e=1)=>$+e+"C",H1=(e=1)=>$+e+"D",Vc=$+"G",Q1=jc?"\x1B7":$+"s",K1=jc?"\x1B8":$+"u",z1=$+"6n",J1=$+"E",W1=$+"F",Y1=$+"?25l",X1=$+"?25h",Z1=e=>{let t="";for(let r=0;r<e;r++)t+=Bc+(r<e-1?$c():"");return e&&(t+=Vc),t},ex=$+"K",tx=$+"1K",Bc=$+"2K",rx=$+"J",ix=$+"1J",Gs=$+"2J",nx=$+"S",sx=$+"T",ax="\x1Bc",ox=M1?`${Gs}${$}0f`:`${Gs}${$}3J${$}H`,lx=$+"?1049h",ux=$+"?1049l",cx=ar,dx=(e,t)=>[Hr,"8",Dr,Dr,t,ar,e,Hr,"8",Dr,Dr,ar].join(""),fx=(e,t={})=>{let r=`${Hr}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+ar},px={setCwd:(e=j1())=>`${Hr}50;CurrentDir=${e}${ar}`,annotation(e,t={}){let r=`${Hr}1337;`,i=t.x!==void 0,n=t.y!==void 0;if((i||n)&&!(i&&n&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(i?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+ar}},va=H(Cb(),1);function Qr(e,t,{target:r="stdout",...i}={}){return va.default[r]?Mc.link(e,t):i.fallback===!1?e:typeof i.fallback=="function"?i.fallback(e,t):`${e} (\u200B${t}\u200B)`}Qr.isSupported=va.default.stdout;Qr.stderr=(e,t,r={})=>Qr(e,t,{target:"stderr",...r});Qr.stderr.isSupported=va.default.stderr;function hx(e){return Qr(e,e,{fallback:Ce})}var mx=Pb(),gx=mx.version;function Hs(e){return yx()||(e?.config.engineType==="library"?"library":e?.config.engineType==="binary"?"binary":e?.config.engineType==="client"?"client":bx())}function yx(){let e=process.env.PRISMA_CLIENT_ENGINE_TYPE;return e==="library"?"library":e==="binary"?"binary":e==="client"?"client":void 0}function bx(){return"library"}function Gc(e){return e.name==="DriverAdapterError"&&typeof e.cause=="object"}function wa(e){return{ok:!0,value:e,map(t){return wa(t(e))},flatMap(t){return t(e)}}}function or(e){return{ok:!1,error:e,map(){return or(e)},flatMap(){return or(e)}}}var Hc=ve("driver-adapter-utils"),xx=class{registeredErrors=[];consumeError(e){return this.registeredErrors[e]}registerNewError(e){let t=0;for(;this.registeredErrors[t]!==void 0;)t++;return this.registeredErrors[t]={error:e},t}},Du=(e,t=new xx)=>{let r={adapterName:e.adapterName,errorRegistry:t,queryRaw:ot(t,e.queryRaw.bind(e)),executeRaw:ot(t,e.executeRaw.bind(e)),executeScript:ot(t,e.executeScript.bind(e)),dispose:ot(t,e.dispose.bind(e)),provider:e.provider,startTransaction:async(...i)=>(await ot(t,e.startTransaction.bind(e))(...i)).map(n=>vx(t,n))};return e.getConnectionInfo&&(r.getConnectionInfo=wx(t,e.getConnectionInfo.bind(e))),r},vx=(e,t)=>({adapterName:t.adapterName,provider:t.provider,options:t.options,queryRaw:ot(e,t.queryRaw.bind(t)),executeRaw:ot(e,t.executeRaw.bind(t)),commit:ot(e,t.commit.bind(t)),rollback:ot(e,t.rollback.bind(t))});function ot(e,t){return async(...r)=>{try{return wa(await t(...r))}catch(i){if(Hc("[error@wrapAsync]",i),Gc(i))return or(i.cause);let n=e.registerNewError(i);return or({kind:"GenericJs",id:n})}}}function wx(e,t){return(...r)=>{try{return wa(t(...r))}catch(i){if(Hc("[error@wrapSync]",i),Gc(i))return or(i.cause);let n=e.registerNewError(i);return or({kind:"GenericJs",id:n})}}}var uP=H(ha()),X=H(require("node:path")),cP=H(ha()),dP=ve("prisma:engines");function Sx(){return X.default.join(__dirname,"../")}X.default.join(__dirname,"../query-engine-darwin");X.default.join(__dirname,"../query-engine-darwin-arm64");X.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");X.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");X.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");X.default.join(__dirname,"../query-engine-linux-static-x64");X.default.join(__dirname,"../query-engine-linux-static-arm64");X.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");X.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");X.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");X.default.join(__dirname,"../libquery_engine-darwin.dylib.node");X.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");X.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");X.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");X.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");X.default.join(__dirname,"../libquery_engine-linux-musl.so.node");X.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");X.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");X.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");X.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");X.default.join(__dirname,"../query_engine-windows.dll.node");var Uu=H(require("node:fs")),Lu=ga("chmodPlusX");function Ex(e){if(process.platform==="win32")return;let t=Uu.default.statSync(e),r=t.mode|64|8|1;if(t.mode===r){Lu(`Execution permissions of ${e} are fine`);return}let i=r.toString(8).slice(-3);Lu(`Have to call chmodPlusX on ${e}`),Uu.default.chmodSync(e,i)}function Ax(e){let t=e.e,r=o=>`Prisma cannot find the required \`${o}\` system library in your system`,i=t.message.includes("cannot open shared object file"),n=`Please refer to the documentation about Prisma's system requirements: ${hx("https://pris.ly/d/system-requirements")}`,s=`Unable to require(\`${Wr(e.id)}\`).`,a=en({message:t.message,code:t.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:o})=>i&&o.includes("libz"),()=>`${r("libz")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libgcc_s"),()=>`${r("libgcc_s")}. Please install it and try again.`).when(({message:o})=>i&&o.includes("libssl"),()=>{let o=e.platformInfo.libssl?`openssl-${e.platformInfo.libssl}`:"openssl";return`${r("libssl")}. Please install ${o} and try again.`}).when(({message:o})=>o.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${n}`).when(({message:o})=>e.platformInfo.platform==="linux"&&o.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${e.platformInfo.originalDistro} on (${e.platformInfo.archFromUname}) which uses the \`${e.platformInfo.binaryTarget}\` binaryTarget by default. ${n}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${n}`);return`${s}
${a}

Details: ${t.message}`}var Rx=H(Nb(),1);function kx(e){let t=(0,Rx.default)(e);if(t===0)return e;let r=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(r,"")}var Tx="prisma+postgres",Qc=`${Tx}:`;function Kc(e){return e?.toString().startsWith(`${Qc}//`)??!1}function Ix(e){if(!Kc(e))return!1;let{host:t}=new URL(e);return t.includes("localhost")||t.includes("127.0.0.1")||t.includes("[::1]")}var Ox=H(Rc());function _x(e){return String(new qx(e))}var qx=class{constructor(e){this.config=e}toString(){let{config:e}=this,t=e.provider.fromEnvVar?`env("${e.provider.fromEnvVar}")`:e.provider.value,r=JSON.parse(JSON.stringify({provider:t,binaryTargets:Cx(e.binaryTargets)}));return`generator ${e.name} {
${(0,Ox.default)(Px(r),2)}
}`}};function Cx(e){let t;if(e.length>0){let r=e.find(i=>i.fromEnvVar!==null);r?t=`env("${r.fromEnvVar}")`:t=e.map(i=>i.native?"native":i.value)}else t=void 0;return t}function Px(e){let t=Object.keys(e).reduce((r,i)=>Math.max(r,i.length),0);return Object.entries(e).map(([r,i])=>`${r.padEnd(t)} = ${Nx(i)}`).join(`
`)}function Nx(e){return JSON.parse(JSON.stringify(e,(t,r)=>Array.isArray(r)?`[${r.map(i=>JSON.stringify(i)).join(", ")}]`:JSON.stringify(r)))}var Qs={};zt(Qs,{error:()=>Lx,info:()=>Ux,log:()=>Dx,query:()=>Fx,should:()=>zc,tags:()=>Zr,warn:()=>Jc});var Zr={error:Qt("prisma:error"),warn:Yr("prisma:warn"),info:Ht("prisma:info"),query:Lr("prisma:query")},zc={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Dx(...e){console.log(...e)}function Jc(e,...t){zc.warn()&&console.warn(`${Zr.warn} ${e}`,...t)}function Ux(e,...t){console.info(`${Zr.info} ${e}`,...t)}function Lx(e,...t){console.error(`${Zr.error} ${e}`,...t)}function Fx(e,...t){console.log(`${Zr.query} ${e}`,...t)}function Fu(e,t){if(!e)throw new Error(`${t}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function Sa(e,t){throw new Error(t)}function Mx({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var jx=Mx();function Ks(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(jx,"")}var Pi=H(require("node:path"));function $x(e){return Pi.default.sep===Pi.default.posix.sep?e:e.split(Pi.default.sep).join(Pi.default.posix.sep)}var Wc=H(Ub()),zs=H(require("node:fs")),Kr=H(require("node:path"));function Vx(e){let t=e.ignoreProcessEnv?{}:process.env,r=i=>i.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(n,s){let a=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(s);if(!a)return n;let o=a[1],l,u;if(o==="\\")u=a[0],l=u.replace("\\$","$");else{let c=a[2];u=a[0].substring(o.length),l=Object.hasOwnProperty.call(t,c)?t[c]:e.parsed[c]||"",l=r(l)}return n.replace(u,l)},i)??i;for(let i in e.parsed){let n=Object.hasOwnProperty.call(t,i)?t[i]:e.parsed[i];e.parsed[i]=r(n)}for(let i in e.parsed)t[i]=e.parsed[i];return e}var Js=ga("prisma:tryLoadEnv");function Yc({rootEnvPath:e,schemaEnvPath:t},r={conflictCheck:"none"}){let i=Mu(e);r.conflictCheck!=="none"&&Bx(i,t,r.conflictCheck);let n=null;return Xc(i?.path,t)||(n=Mu(t)),!i&&!n&&Js("No Environment variables loaded"),n?.dotenvResult.error?console.error(Qt($e("Schema Env Error: "))+n.dotenvResult.error):{message:[i?.message,n?.message].filter(Boolean).join(`
`),parsed:{...i?.dotenvResult?.parsed,...n?.dotenvResult?.parsed}}}function Bx(e,t,r){let i=e?.dotenvResult.parsed,n=!Xc(e?.path,t);if(i&&t&&n&&zs.default.existsSync(t)){let s=Wc.default.parse(zs.default.readFileSync(t)),a=[];for(let o in s)i[o]===s[o]&&a.push(o);if(a.length>0){let o=Kr.default.relative(process.cwd(),e.path),l=Kr.default.relative(process.cwd(),t);if(r==="error"){let u=`There is a conflict between env var${a.length>1?"s":""} in ${Ce(o)} and ${Ce(l)}
Conflicting env vars:
${a.map(c=>`  ${$e(c)}`).join(`
`)}

We suggest to move the contents of ${Ce(l)} to ${Ce(o)} to consolidate your env vars.
`;throw new Error(u)}else if(r==="warn"){let u=`Conflict for env var${a.length>1?"s":""} ${a.map(c=>$e(c)).join(", ")} in ${Ce(o)} and ${Ce(l)}
Env vars from ${Ce(l)} overwrite the ones from ${Ce(o)}
      `;console.warn(`${Yr("warn(prisma)")} ${u}`)}}}}function Mu(e){if(Gx(e)){Js(`Environment variables loaded from ${e}`);let t=Wc.default.config({path:e,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:Vx(t),message:Wr(`Environment variables loaded from ${Kr.default.relative(process.cwd(),e)}`),path:e}}else Js(`Environment variables not found at ${e}`);return null}function Xc(e,t){return e&&t&&Kr.default.resolve(e)===Kr.default.resolve(t)}function Gx(e){return!!(e&&zs.default.existsSync(e))}function Hx(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zc(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function Qx(e,t){if(e.length===0)return;let r=e[0];for(let i=1;i<e.length;i++)t(r,e[i])<0&&(r=e[i]);return r}function ne(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var ju=new Set,ed=(e,t,...r)=>{ju.has(e)||(ju.add(e),Jc(t,...r))},ae=class td extends Error{clientVersion;errorCode;retryable;constructor(t,r,i){super(t),this.name="PrismaClientInitializationError",this.clientVersion=r,this.errorCode=i,Error.captureStackTrace(td)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};ne(ae,"PrismaClientInitializationError");var At=class extends Error{code;meta;clientVersion;batchRequestIdx;constructor(e,{code:t,clientVersion:r,meta:i,batchRequestIdx:n}){super(e),this.name="PrismaClientKnownRequestError",this.code=t,this.clientVersion=r,this.meta=i,Object.defineProperty(this,"batchRequestIdx",{value:n,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};ne(At,"PrismaClientKnownRequestError");var St=class extends Error{clientVersion;constructor(e,t){super(e),this.name="PrismaClientRustPanicError",this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};ne(St,"PrismaClientRustPanicError");var Oe=class extends Error{clientVersion;batchRequestIdx;constructor(e,{clientVersion:t,batchRequestIdx:r}){super(e),this.name="PrismaClientUnknownRequestError",this.clientVersion=t,Object.defineProperty(this,"batchRequestIdx",{value:r,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};ne(Oe,"PrismaClientUnknownRequestError");var lt=class extends Error{name="PrismaClientValidationError";clientVersion;constructor(e,{clientVersion:t}){super(e),this.clientVersion=t}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};ne(lt,"PrismaClientValidationError");var jr=class{_map=new Map;get(e){return this._map.get(e)?.value}set(e,t){this._map.set(e,{value:t})}getOrCreate(e,t){let r=this._map.get(e);if(r)return r.value;let i=t();return this.set(e,i),i}};function tn(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function Kx(e,t){let r={};for(let i of e){let n=i[t];r[n]=i}return r}function Ws(e){let t;return{get(){return t||(t={value:e()}),t.value}}}function zx(e){return{models:Is(e.models),enums:Is(e.enums),types:Is(e.types)}}function Is(e){let t={};for(let{name:r,...i}of e)t[r]=i;return t}function Ea(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function rd(e){return e.toString()!=="Invalid Date"}var sr=9e15,kt=1e9,Ys="0123456789abcdef",Ki="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",zi="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Xs={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-sr,maxE:sr,crypto:!1},id,ut,T=!0,rn="[DecimalError] ",Rt=rn+"Invalid argument: ",nd=rn+"Precision limit exceeded",sd=rn+"crypto unavailable",ad="[object Decimal]",he=Math.floor,oe=Math.pow,Jx=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Wx=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Yx=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,od=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ve=1e7,R=7,Xx=9007199254740991,Zx=Ki.length-1,Zs=zi.length-1,y={toStringTag:ad};y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),S(e)};y.ceil=function(){return S(new this.constructor(this),this.e+1,2)};y.clampedTo=y.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Rt+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};y.comparedTo=y.cmp=function(e){var t,r,i,n,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(i=a.length,n=o.length,t=0,r=i<n?i:n;t<r;++t)if(a[t]!==o[t])return a[t]>o[t]^l<0?1:-1;return i===n?0:i>n^l<0?1:-1};y.cosine=y.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+R,i.rounding=1,r=ev(i,fd(i,r)),i.precision=e,i.rounding=t,S(ut==2||ut==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};y.cubeRoot=y.cbrt=function(){var e,t,r,i,n,s,a,o,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(T=!1,s=c.s*oe(c.s*c,1/3),!s||Math.abs(s)==1/0?(r=de(c.d),e=c.e,(s=(e-r.length+1)%3)&&(r+=s==1||s==-2?"0":"00"),s=oe(r,1/3),e=he((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new d(r),i.s=c.s):i=new d(s.toString()),a=(e=d.precision)+3;;)if(o=i,l=o.times(o).times(o),u=l.plus(c),i=Q(u.plus(c).times(o),u.plus(l),a+2,1),de(o.d).slice(0,a)===(r=de(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!n&&r=="4999"){if(!n&&(S(o,e+1,0),o.times(o).times(o).eq(c))){i=o;break}a+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(S(i,e+1,1),t=!i.times(i).times(i).eq(c));break}return T=!0,S(i,e,d.rounding,t)};y.decimalPlaces=y.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-he(this.e/R))*R,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};y.dividedBy=y.div=function(e){return Q(this,new this.constructor(e))};y.dividedToIntegerBy=y.divToInt=function(e){var t=this,r=t.constructor;return S(Q(t,new r(e),0,1,1),r.precision,r.rounding)};y.equals=y.eq=function(e){return this.cmp(e)===0};y.floor=function(){return S(new this.constructor(this),this.e+1,3)};y.greaterThan=y.gt=function(e){return this.cmp(e)>0};y.greaterThanOrEqualTo=y.gte=function(e){var t=this.cmp(e);return t==1||t===0};y.hyperbolicCosine=y.cosh=function(){var e,t,r,i,n,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;r=a.precision,i=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,n=s.d.length,n<32?(e=Math.ceil(n/3),t=(1/sn(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=lr(a,1,s.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return S(s,a.precision=r,a.rounding=i,!0)};y.hyperbolicSine=y.sinh=function(){var e,t,r,i,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,i=n.d.length,i<3)n=lr(s,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/sn(5,e)),n=lr(s,2,n,n,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);e--;)a=n.times(n),n=n.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=t,s.rounding=r,S(n,t,r,!0)};y.hyperbolicTangent=y.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,Q(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};y.inverseCosine=y.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,n=t.rounding;return r!==-1?r===0?e.isNeg()?Ye(t,i,n):new t(0):new t(NaN):e.isZero()?Ye(t,i+4,n).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=n,e.times(2))};y.inverseHyperbolicCosine=y.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,T=!1,r=r.times(r).minus(1).sqrt().plus(r),T=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};y.inverseHyperbolicSine=y.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,T=!1,r=r.times(r).plus(1).sqrt().plus(r),T=!0,i.precision=e,i.rounding=t,r.ln())};y.inverseHyperbolicTangent=y.atanh=function(){var e,t,r,i,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=s.precision,t=s.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?S(new s(n),e,t,!0):(s.precision=r=i-n.e,n=Q(n.plus(1),new s(1).minus(n),r+e,1),s.precision=e+4,s.rounding=1,n=n.ln(),s.precision=e,s.rounding=t,n.times(.5))):new s(NaN)};y.inverseSine=y.asin=function(){var e,t,r,i,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),r=s.precision,i=s.rounding,t!==-1?t===0?(e=Ye(s,r+4,i).times(.5),e.s=n.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=i,n.times(2)))};y.inverseTangent=y.atan=function(){var e,t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=Zs)return a=Ye(c,d+4,f).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=Zs)return a=Ye(c,d+4,f).times(.5),a.s=u.s,a}for(c.precision=o=d+10,c.rounding=1,r=Math.min(28,o/R+2|0),e=r;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(T=!1,t=Math.ceil(o/R),i=1,l=u.times(u),a=new c(u),n=u;e!==-1;)if(n=n.times(l),s=a.minus(n.div(i+=2)),n=n.times(l),a=s.plus(n.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===s.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),T=!0,S(a,c.precision=d,c.rounding=f,!0)};y.isFinite=function(){return!!this.d};y.isInteger=y.isInt=function(){return!!this.d&&he(this.e/R)>this.d.length-2};y.isNaN=function(){return!this.s};y.isNegative=y.isNeg=function(){return this.s<0};y.isPositive=y.isPos=function(){return this.s>0};y.isZero=function(){return!!this.d&&this.d[0]===0};y.lessThan=y.lt=function(e){return this.cmp(e)<0};y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1};y.logarithm=y.log=function(e){var t,r,i,n,s,a,o,l,u=this,c=u.constructor,d=c.precision,f=c.rounding,p=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(n=r[0];n%10===0;)n/=10;s=n!==1}if(T=!1,o=d+p,a=wt(u,o),i=t?Ji(c,o+10):wt(e,o),l=Q(a,i,o,1),zr(l.d,n=d,f))do if(o+=10,a=wt(u,o),i=t?Ji(c,o+10):wt(e,o),l=Q(a,i,o,1),!s){+de(l.d).slice(n+1,n+15)+1==1e14&&(l=S(l,d+1,0));break}while(zr(l.d,n+=10,f));return T=!0,S(l,d,f)};y.minus=y.sub=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,g=p.constructor;if(e=new g(e),!p.d||!e.d)return!p.s||!e.s?e=new g(NaN):p.d?e.s=-e.s:e=new g(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,f=e.d,o=g.precision,l=g.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else if(u[0])e=new g(p);else return new g(l===3?-0:0);return T?S(e,o,l):e}if(r=he(e.e/R),c=he(p.e/R),u=u.slice(),s=c-r,s){for(d=s<0,d?(t=u,s=-s,a=f.length):(t=f,r=c,a=u.length),i=Math.max(Math.ceil(o/R),a)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=u.length,a=f.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}s=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),a=u.length,i=f.length-a;i>0;--i)u[a++]=0;for(i=f.length;i>s;){if(u[--i]<f[i]){for(n=i;n&&u[--n]===0;)u[n]=Ve-1;--u[n],u[i]+=Ve}u[i]-=f[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=nn(u,r),T?S(e,o,l):e):new g(l===3?-0:0)};y.modulo=y.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?S(new i(r),i.precision,i.rounding):(T=!1,i.modulo==9?(t=Q(r,e.abs(),0,3,1),t.s*=e.s):t=Q(r,e,0,i.modulo,1),t=t.times(e),T=!0,r.minus(t))};y.naturalExponential=y.exp=function(){return ea(this)};y.naturalLogarithm=y.ln=function(){return wt(this)};y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,S(e)};y.plus=y.add=function(e){var t,r,i,n,s,a,o,l,u,c,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return!d.s||!e.s?e=new f(NaN):d.d||(e=new f(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,o=f.precision,l=f.rounding,!u[0]||!c[0])return c[0]||(e=new f(d)),T?S(e,o,l):e;if(s=he(d.e/R),i=he(e.e/R),u=u.slice(),n=s-i,n){for(n<0?(r=u,n=-n,a=c.length):(r=c,i=s,a=u.length),s=Math.ceil(o/R),a=s>a?s+1:a+1,n>a&&(n=a,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(a=u.length,n=c.length,a-n<0&&(n=a,r=c,c=u,u=r),t=0;n;)t=(u[--n]=u[n]+c[n]+t)/Ve|0,u[n]%=Ve;for(t&&(u.unshift(t),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=nn(u,i),T?S(e,o,l):e};y.precision=y.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rt+e);return r.d?(t=ld(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};y.round=function(){var e=this,t=e.constructor;return S(new t(e),e.e+1,t.rounding)};y.sine=y.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+R,i.rounding=1,r=rv(i,fd(i,r)),i.precision=e,i.rounding=t,S(ut>2?r.neg():r,e,t,!0)):new i(NaN)};y.squareRoot=y.sqrt=function(){var e,t,r,i,n,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(T=!1,u=Math.sqrt(+a),u==0||u==1/0?(t=de(o),(t.length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=he((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),i=new c(t)):i=new c(u.toString()),r=(l=c.precision)+3;;)if(s=i,i=s.plus(Q(a,s,r+2,1)).times(.5),de(s.d).slice(0,r)===(t=de(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(S(s,l+1,0),s.times(s).eq(a))){i=s;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(S(i,l+1,1),e=!i.times(i).eq(a));break}return T=!0,S(i,l,c.rounding,e)};y.tangent=y.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=Q(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,S(ut==2||ut==4?r.neg():r,e,t,!0)):new i(NaN)};y.times=y.mul=function(e){var t,r,i,n,s,a,o,l,u,c=this,d=c.constructor,f=c.d,p=(e=new d(e)).d;if(e.s*=c.s,!f||!f[0]||!p||!p[0])return new d(!e.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?e.s/0:e.s*0);for(r=he(c.e/R)+he(e.e/R),l=f.length,u=p.length,l<u&&(s=f,f=p,p=s,a=l,l=u,u=a),s=[],a=l+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(t=0,n=l+i;n>i;)o=s[n]+p[i]*f[n-i-1]+t,s[n--]=o%Ve|0,t=o/Ve|0;s[n]=(s[n]+t)%Ve|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=nn(s,r),T?S(e,d.precision,d.rounding):e};y.toBinary=function(e,t){return Aa(this,2,e,t)};y.toDecimalPlaces=y.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(ke(e,0,kt),t===void 0?t=i.rounding:ke(t,0,8),S(r,e+r.e+1,t))};y.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Ze(i,!0):(ke(e,0,kt),t===void 0?t=n.rounding:ke(t,0,8),i=S(new n(i),e+1,t),r=Ze(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toFixed=function(e,t){var r,i,n=this,s=n.constructor;return e===void 0?r=Ze(n):(ke(e,0,kt),t===void 0?t=s.rounding:ke(t,0,8),i=S(new s(n),e+n.e+1,t),r=Ze(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};y.toFraction=function(e){var t,r,i,n,s,a,o,l,u,c,d,f,p=this,g=p.d,h=p.constructor;if(!g)return new h(p);if(u=r=new h(1),i=l=new h(0),t=new h(i),s=t.e=ld(g)-p.e-1,a=s%R,t.d[0]=oe(10,a<0?R+a:a),e==null)e=s>0?t:u;else{if(o=new h(e),!o.isInt()||o.lt(u))throw Error(Rt+o);e=o.gt(t)?s>0?t:u:o}for(T=!1,o=new h(de(g)),c=h.precision,h.precision=s=g.length*R*2;d=Q(o,t,0,1,1),n=r.plus(d.times(i)),n.cmp(e)!=1;)r=i,i=n,n=u,u=l.plus(d.times(n)),l=n,n=t,t=o.minus(d.times(n)),o=n;return n=Q(e.minus(r),i,0,1,1),l=l.plus(n.times(u)),r=r.plus(n.times(i)),l.s=u.s=p.s,f=Q(u,i,s,1).minus(p).abs().cmp(Q(l,r,s,1).minus(p).abs())<1?[u,i]:[l,r],h.precision=c,T=!0,f};y.toHexadecimal=y.toHex=function(e,t){return Aa(this,16,e,t)};y.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:ke(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(T=!1,r=Q(r,e,0,t,1).times(e),T=!0,S(r)):(e.s=r.s,r=e),r};y.toNumber=function(){return+this};y.toOctal=function(e,t){return Aa(this,8,e,t)};y.toPower=y.pow=function(e){var t,r,i,n,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new l(oe(+o,u));if(o=new l(o),o.eq(1))return o;if(i=l.precision,s=l.rounding,e.eq(1))return S(o,i,s);if(t=he(e.e/R),t>=e.d.length-1&&(r=u<0?-u:u)<=Xx)return n=ud(l,o,r,i),e.s<0?new l(1).div(n):S(n,i,s);if(a=o.s,a<0){if(t<e.d.length-1)return new l(NaN);if((e.d[t]&1)==0&&(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return r=oe(+o,u),t=r==0||!isFinite(r)?he(u*(Math.log("0."+de(o.d))/Math.LN10+o.e+1)):new l(r+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(T=!1,l.rounding=o.s=1,r=Math.min(12,(t+"").length),n=ea(e.times(wt(o,i+r)),i),n.d&&(n=S(n,i+5,1),zr(n.d,i,s)&&(t=i+10,n=S(ea(e.times(wt(o,t+r)),t),t+5,1),+de(n.d).slice(i+1,i+15)+1==1e14&&(n=S(n,i+1,0)))),n.s=a,T=!0,l.rounding=s,S(n,i,s))};y.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Ze(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(ke(e,1,kt),t===void 0?t=n.rounding:ke(t,0,8),i=S(new n(i),e,t),r=Ze(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};y.toSignificantDigits=y.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(ke(e,1,kt),t===void 0?t=i.rounding:ke(t,0,8)),S(new i(r),e,t)};y.toString=function(){var e=this,t=e.constructor,r=Ze(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};y.truncated=y.trunc=function(){return S(new this.constructor(this),this.e+1,1)};y.valueOf=y.toJSON=function(){var e=this,t=e.constructor,r=Ze(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function de(e){var t,r,i,n=e.length-1,s="",a=e[0];if(n>0){for(s+=a,t=1;t<n;t++)i=e[t]+"",r=R-i.length,r&&(s+=vt(r)),s+=i;a=e[t],i=a+"",r=R-i.length,r&&(s+=vt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function ke(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rt+e)}function zr(e,t,r,i){var n,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=R,n=0):(n=Math.ceil((t+1)/R),t%=R),s=oe(10,R-t),o=e[n]%s|0,i==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),a=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):a=(r<4&&o+1==s||r>3&&o+1==s/2)&&(e[n+1]/s/100|0)==oe(10,t-2)-1||(o==s/2||o==0)&&(e[n+1]/s/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),a=(i||r<4)&&o==9999||!i&&r>3&&o==4999):a=((i||r<4)&&o+1==s||!i&&r>3&&o+1==s/2)&&(e[n+1]/s/1e3|0)==oe(10,t-3)-1,a}function Fi(e,t,r){for(var i,n=[0],s,a=0,o=e.length;a<o;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=Ys.indexOf(e.charAt(a++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function ev(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/sn(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=lr(e,1,t.times(n),new e(1));for(var s=r;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var Q=(function(){function e(i,n,s){var a,o=0,l=i.length;for(i=i.slice();l--;)a=i[l]*n+o,i[l]=a%s|0,o=a/s|0;return o&&i.unshift(o),i}function t(i,n,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=n[o]){l=i[o]>n[o]?1:-1;break}return l}function r(i,n,s,a){for(var o=0;s--;)i[s]-=o,o=i[s]<n[s]?1:0,i[s]=o*a+i[s]-n[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,s,a,o,l){var u,c,d,f,p,g,h,E,O,q,P,B,Ae,k,b,A,I,V,F,N,M=i.constructor,ee=i.s==n.s?1:-1,G=i.d,L=n.d;if(!G||!G[0]||!L||!L[0])return new M(!i.s||!n.s||(G?L&&G[0]==L[0]:!L)?NaN:G&&G[0]==0||!L?ee*0:ee/0);for(l?(p=1,c=i.e-n.e):(l=Ve,p=R,c=he(i.e/p)-he(n.e/p)),F=L.length,I=G.length,O=new M(ee),q=O.d=[],d=0;L[d]==(G[d]||0);d++);if(L[d]>(G[d]||0)&&c--,s==null?(k=s=M.precision,a=M.rounding):o?k=s+(i.e-n.e)+1:k=s,k<0)q.push(1),g=!0;else{if(k=k/p+2|0,d=0,F==1){for(f=0,L=L[0],k++;(d<I||f)&&k--;d++)b=f*l+(G[d]||0),q[d]=b/L|0,f=b%L|0;g=f||d<I}else{for(f=l/(L[0]+1)|0,f>1&&(L=e(L,f,l),G=e(G,f,l),F=L.length,I=G.length),A=F,P=G.slice(0,F),B=P.length;B<F;)P[B++]=0;N=L.slice(),N.unshift(0),V=L[0],L[1]>=l/2&&++V;do f=0,u=t(L,P,F,B),u<0?(Ae=P[0],F!=B&&(Ae=Ae*l+(P[1]||0)),f=Ae/V|0,f>1?(f>=l&&(f=l-1),h=e(L,f,l),E=h.length,B=P.length,u=t(h,P,E,B),u==1&&(f--,r(h,F<E?N:L,E,l))):(f==0&&(u=f=1),h=L.slice()),E=h.length,E<B&&h.unshift(0),r(P,h,B,l),u==-1&&(B=P.length,u=t(L,P,F,B),u<1&&(f++,r(P,F<B?N:L,B,l))),B=P.length):u===0&&(f++,P=[0]),q[d++]=f,u&&P[0]?P[B++]=G[A]||0:(P=[G[A]],B=1);while((A++<I||P[0]!==void 0)&&k--);g=P[0]!==void 0}q[0]||q.shift()}if(p==1)O.e=c,id=g;else{for(d=1,f=q[0];f>=10;f/=10)d++;O.e=d+c*p-1,S(O,o?s+O.e+1:s,a,g)}return O}})();function S(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(n=1,o=d[0];o>=10;o/=10)n++;if(s=t-n,s<0)s+=R,a=t,c=d[f=0],l=c/oe(10,n-a-1)%10|0;else if(f=Math.ceil((s+1)/R),o=d.length,f>=o)if(i){for(;o++<=f;)d.push(0);c=l=0,n=1,s%=R,a=s-R+1}else break e;else{for(c=o=d[f],n=1;o>=10;o/=10)n++;s%=R,a=s-R+n,l=a<0?0:c/oe(10,n-a-1)%10|0}if(i=i||t<0||d[f+1]!==void 0||(a<0?c:c%oe(10,n-a-1)),u=r<4?(l||i)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||i||r==6&&(s>0?a>0?c/oe(10,n-a):0:d[f-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=oe(10,(R-t%R)%R),e.e=-t||0):d[0]=e.e=0,e;if(s==0?(d.length=f,o=1,f--):(d.length=f+1,o=oe(10,R-s),d[f]=a>0?(c/oe(10,n-a)%oe(10,a)|0)*o:0),u)for(;;)if(f==0){for(s=1,a=d[0];a>=10;a/=10)s++;for(a=d[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,d[0]==Ve&&(d[0]=1));break}else{if(d[f]+=o,d[f]!=Ve)break;d[f--]=0,o=1}for(s=d.length;d[--s]===0;)d.pop()}return T&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Ze(e,t,r){if(!e.isFinite())return dd(e);var i,n=e.e,s=de(e.d),a=s.length;return t?(r&&(i=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+vt(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):n<0?(s="0."+vt(-n-1)+s,r&&(i=r-a)>0&&(s+=vt(i))):n>=a?(s+=vt(n+1-a),r&&(i=r-n-1)>0&&(s=s+"."+vt(i))):((i=n+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-a)>0&&(n+1===a&&(s+="."),s+=vt(i))),s}function nn(e,t){var r=e[0];for(t*=R;r>=10;r/=10)t++;return t}function Ji(e,t,r){if(t>Zx)throw T=!0,r&&(e.precision=r),Error(nd);return S(new e(Ki),t,1,!0)}function Ye(e,t,r){if(t>Zs)throw Error(nd);return S(new e(zi),t,r,!0)}function ld(e){var t=e.length-1,r=t*R+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function vt(e){for(var t="";e--;)t+="0";return t}function ud(e,t,r,i){var n,s=new e(1),a=Math.ceil(i/R+4);for(T=!1;;){if(r%2&&(s=s.times(t),Vu(s.d,a)&&(n=!0)),r=he(r/2),r===0){r=s.d.length-1,n&&s.d[r]===0&&++s.d[r];break}t=t.times(t),Vu(t.d,a)}return T=!0,s}function $u(e){return e.d[e.d.length-1]&1}function cd(e,t,r){for(var i,n,s=new e(t[0]),a=0;++a<t.length;){if(n=new e(t[a]),!n.s){s=n;break}i=s.cmp(n),(i===r||i===0&&s.s===r)&&(s=n)}return s}function ea(e,t){var r,i,n,s,a,o,l,u=0,c=0,d=0,f=e.constructor,p=f.rounding,g=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(T=!1,l=g):l=t,o=new f(.03125);e.e>-2;)e=e.times(o),d+=5;for(i=Math.log(oe(2,d))/Math.LN10*2+5|0,l+=i,r=s=a=new f(1),f.precision=l;;){if(s=S(s.times(e),l,1),r=r.times(++c),o=a.plus(Q(s,r,l,1)),de(o.d).slice(0,l)===de(a.d).slice(0,l)){for(n=d;n--;)a=S(a.times(a),l,1);if(t==null)if(u<3&&zr(a.d,l-i,p,u))f.precision=l+=10,r=s=o=new f(1),c=0,u++;else return S(a,f.precision=g,p,T=!0);else return f.precision=g,a}a=o}}function wt(e,t){var r,i,n,s,a,o,l,u,c,d,f,p=1,g=10,h=e,E=h.d,O=h.constructor,q=O.rounding,P=O.precision;if(h.s<0||!E||!E[0]||!h.e&&E[0]==1&&E.length==1)return new O(E&&!E[0]?-1/0:h.s!=1?NaN:E?0:h);if(t==null?(T=!1,c=P):c=t,O.precision=c+=g,r=de(E),i=r.charAt(0),Math.abs(s=h.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)h=h.times(e),r=de(h.d),i=r.charAt(0),p++;s=h.e,i>1?(h=new O("0."+r),s++):h=new O(i+"."+r.slice(1))}else return u=Ji(O,c+2,P).times(s+""),h=wt(new O(i+"."+r.slice(1)),c-g).plus(u),O.precision=P,t==null?S(h,P,q,T=!0):h;for(d=h,l=a=h=Q(h.minus(1),h.plus(1),c,1),f=S(h.times(h),c,1),n=3;;){if(a=S(a.times(f),c,1),u=l.plus(Q(a,new O(n),c,1)),de(u.d).slice(0,c)===de(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(Ji(O,c+2,P).times(s+""))),l=Q(l,new O(p),c,1),t==null)if(zr(l.d,c-g,q,o))O.precision=c+=g,u=a=h=Q(d.minus(1),d.plus(1),c,1),f=S(h.times(h),c,1),n=o=1;else return S(l,O.precision=P,q,T=!0);else return O.precision=P,l;l=u,n+=2}}function dd(e){return String(e.s*e.s/0)}function Mi(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%R,r<0&&(i+=R),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=R;i<n;)e.d.push(+t.slice(i,i+=R));t=t.slice(i),i=R-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),T&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function tv(e,t){var r,i,n,s,a,o,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),od.test(t))return Mi(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Wx.test(t))r=16,t=t.toLowerCase();else if(Jx.test(t))r=2;else if(Yx.test(t))r=8;else throw Error(Rt+t);for(s=t.search(/p/i),s>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),a=s>=0,i=e.constructor,a&&(t=t.replace(".",""),o=t.length,s=o-s,n=ud(i,new i(r),s,s*2)),u=Fi(t,r,Ve),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new i(e.s*0):(e.e=nn(u,c),e.d=u,T=!1,a&&(e=Q(e,n,o*4)),l&&(e=e.times(Math.abs(l)<54?oe(2,l):Jt.pow(2,l))),T=!0,e)}function rv(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:lr(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/sn(5,r)),t=lr(e,2,t,t);for(var n,s=new e(5),a=new e(16),o=new e(20);r--;)n=t.times(t),t=t.times(s.plus(n.times(a.times(n).minus(o))));return t}function lr(e,t,r,i,n){var s,a,o,l,u=1,c=e.precision,d=Math.ceil(c/R);for(T=!1,l=r.times(r),o=new e(i);;){if(a=Q(o.times(l),new e(t++*t++),c,1),o=n?i.plus(a):i.minus(a),i=Q(a.times(l),new e(t++*t++),c,1),a=o.plus(i),a.d[d]!==void 0){for(s=d;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=i,i=a,a=s,u++}return T=!0,a.d.length=d+1,a}function sn(e,t){for(var r=e;--t;)r*=e;return r}function fd(e,t){var r,i=t.s<0,n=Ye(e,e.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return ut=i?4:1,t;if(r=t.divToInt(n),r.isZero())ut=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(s))return ut=$u(r)?i?2:3:i?4:1,t;ut=$u(r)?i?1:4:i?3:2}return t.minus(n).abs()}function Aa(e,t,r,i){var n,s,a,o,l,u,c,d,f,p=e.constructor,g=r!==void 0;if(g?(ke(r,1,kt),i===void 0?i=p.rounding:ke(i,0,8)):(r=p.precision,i=p.rounding),!e.isFinite())c=dd(e);else{for(c=Ze(e),a=c.indexOf("."),g?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,a>=0&&(c=c.replace(".",""),f=new p(1),f.e=c.length-a,f.d=Fi(Ze(f),10,n),f.e=f.d.length),d=Fi(c,10,n),s=l=d.length;d[--l]==0;)d.pop();if(!d[0])c=g?"0p+0":"0";else{if(a<0?s--:(e=new p(e),e.d=d,e.e=s,e=Q(e,f,r,i,0,n),d=e.d,s=e.e,u=id),a=d[r],o=n/2,u=u||d[r+1]!==void 0,u=i<4?(a!==void 0||u)&&(i===0||i===(e.s<0?3:2)):a>o||a===o&&(i===4||u||i===6&&d[r-1]&1||i===(e.s<0?8:7)),d.length=r,u)for(;++d[--r]>n-1;)d[r]=0,r||(++s,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,c="";a<l;a++)c+=Ys.charAt(d[a]);if(g){if(l>1)if(t==16||t==8){for(a=t==16?4:3,--l;l%a;l++)c+="0";for(d=Fi(c,n,t),l=d.length;!d[l-1];--l);for(a=1,c="1.";a<l;a++)c+=Ys.charAt(d[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Vu(e,t){if(e.length>t)return e.length=t,!0}function iv(e){return new this(e).abs()}function nv(e){return new this(e).acos()}function sv(e){return new this(e).acosh()}function av(e,t){return new this(e).plus(t)}function ov(e){return new this(e).asin()}function lv(e){return new this(e).asinh()}function uv(e){return new this(e).atan()}function cv(e){return new this(e).atanh()}function dv(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,s=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Ye(this,s,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Ye(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Ye(this,s,1).times(.5),r.s=e.s):t.s<0?(this.precision=s,this.rounding=1,r=this.atan(Q(e,t,s,1)),t=Ye(this,s,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Q(e,t,s,1)),r}function fv(e){return new this(e).cbrt()}function pv(e){return S(e=new this(e),e.e+1,2)}function hv(e,t,r){return new this(e).clamp(t,r)}function mv(e){if(!e||typeof e!="object")throw Error(rn+"Object expected");var t,r,i,n=e.defaults===!0,s=["precision",1,kt,"rounding",0,8,"toExpNeg",-sr,0,"toExpPos",0,sr,"maxE",0,sr,"minE",-sr,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],n&&(this[r]=Xs[r]),(i=e[r])!==void 0)if(he(i)===i&&i>=s[t+1]&&i<=s[t+2])this[r]=i;else throw Error(Rt+r+": "+i);if(r="crypto",n&&(this[r]=Xs[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(sd);else this[r]=!1;else throw Error(Rt+r+": "+i);return this}function gv(e){return new this(e).cos()}function yv(e){return new this(e).cosh()}function pd(e){var t,r,i;function n(s){var a,o,l,u=this;if(!(u instanceof n))return new n(s);if(u.constructor=n,Bu(s)){u.s=s.s,T?!s.d||s.e>n.maxE?(u.e=NaN,u.d=null):s.e<n.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;T?a>n.maxE?(u.e=NaN,u.d=null):a<n.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Mi(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),od.test(s)?Mi(u,s):tv(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,Mi(u,s.toString());throw Error(Rt+s)}if(n.prototype=y,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=mv,n.clone=pd,n.isDecimal=Bu,n.abs=iv,n.acos=nv,n.acosh=sv,n.add=av,n.asin=ov,n.asinh=lv,n.atan=uv,n.atanh=cv,n.atan2=dv,n.cbrt=fv,n.ceil=pv,n.clamp=hv,n.cos=gv,n.cosh=yv,n.div=bv,n.exp=xv,n.floor=vv,n.hypot=wv,n.ln=Sv,n.log=Ev,n.log10=Rv,n.log2=Av,n.max=kv,n.min=Tv,n.mod=Iv,n.mul=Ov,n.pow=_v,n.random=qv,n.round=Cv,n.sign=Pv,n.sin=Nv,n.sinh=Dv,n.sqrt=Uv,n.sub=Lv,n.sum=Fv,n.tan=Mv,n.tanh=jv,n.trunc=$v,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function bv(e,t){return new this(e).div(t)}function xv(e){return new this(e).exp()}function vv(e){return S(e=new this(e),e.e+1,3)}function wv(){var e,t,r=new this(0);for(T=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return T=!0,new this(1/0);r=t}return T=!0,r.sqrt()}function Bu(e){return e instanceof Jt||e&&e.toStringTag===ad||!1}function Sv(e){return new this(e).ln()}function Ev(e,t){return new this(e).log(t)}function Av(e){return new this(e).log(2)}function Rv(e){return new this(e).log(10)}function kv(){return cd(this,arguments,-1)}function Tv(){return cd(this,arguments,1)}function Iv(e,t){return new this(e).mod(t)}function Ov(e,t){return new this(e).mul(t)}function _v(e,t){return new this(e).pow(t)}function qv(e){var t,r,i,n,s=0,a=new this(1),o=[];if(e===void 0?e=this.precision:ke(e,1,kt),i=Math.ceil(e/R),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));s<i;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);s<i;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(n%1e7),s+=4);s=i/4}else throw Error(sd);else for(;s<i;)o[s++]=Math.random()*1e7|0;for(i=o[--s],e%=R,i&&e&&(n=oe(10,R-e),o[s]=(i/n|0)*n);o[s]===0;s--)o.pop();if(s<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=R)o.shift();for(i=1,n=o[0];n>=10;n/=10)i++;i<R&&(r-=R-i)}return a.e=r,a.d=o,a}function Cv(e){return S(e=new this(e),e.e+1,this.rounding)}function Pv(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Nv(e){return new this(e).sin()}function Dv(e){return new this(e).sinh()}function Uv(e){return new this(e).sqrt()}function Lv(e,t){return new this(e).sub(t)}function Fv(){var e=0,t=arguments,r=new this(t[e]);for(T=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return T=!0,S(r,this.precision,this.rounding)}function Mv(e){return new this(e).tan()}function jv(e){return new this(e).tanh()}function $v(e){return S(e=new this(e),e.e+1,1)}y[Symbol.for("nodejs.util.inspect.custom")]=y.toString;y[Symbol.toStringTag]="Decimal";var Jt=y.constructor=pd(Xs);Ki=new Jt(Ki);zi=new Jt(zi);var an=Jt;function Ra(e){return Jt.isDecimal(e)?!0:e!==null&&typeof e=="object"&&typeof e.s=="number"&&typeof e.e=="number"&&typeof e.toFixed=="function"&&Array.isArray(e.d)}var hd={};zt(hd,{ModelAction:()=>on,datamodelEnumToSchemaEnum:()=>Vv});function Vv(e){return{name:e.name,values:e.values.map(t=>t.name)}}var on=(e=>(e.findUnique="findUnique",e.findUniqueOrThrow="findUniqueOrThrow",e.findFirst="findFirst",e.findFirstOrThrow="findFirstOrThrow",e.findMany="findMany",e.create="create",e.createMany="createMany",e.createManyAndReturn="createManyAndReturn",e.update="update",e.updateMany="updateMany",e.updateManyAndReturn="updateManyAndReturn",e.upsert="upsert",e.delete="delete",e.deleteMany="deleteMany",e.groupBy="groupBy",e.count="count",e.aggregate="aggregate",e.findRaw="findRaw",e.aggregateRaw="aggregateRaw",e))(on||{}),Bv=H(Rc()),Gv=H(require("node:fs")),Hv={keyword:Ht,entity:Ht,value:e=>$e(Lr(e)),punctuation:Lr,directive:Ht,function:Ht,variable:e=>$e(Lr(e)),string:e=>$e(Br(e)),boolean:Yr,number:Ht,comment:ma},Qv=e=>e,Ni={},Kv=0,C={manual:Ni.Prism&&Ni.Prism.manual,disableWorkerMessageHandler:Ni.Prism&&Ni.Prism.disableWorkerMessageHandler,util:{encode:function(e){if(e instanceof Je){let t=e;return new Je(t.type,C.util.encode(t.content),t.alias)}else return Array.isArray(e)?e.map(C.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++Kv}),e.__id},clone:function e(t,r){let i,n,s=C.util.type(t);switch(r=r||{},s){case"Object":if(n=C.util.objId(t),r[n])return r[n];i={},r[n]=i;for(let a in t)t.hasOwnProperty(a)&&(i[a]=e(t[a],r));return i;case"Array":return n=C.util.objId(t),r[n]?r[n]:(i=[],r[n]=i,t.forEach(function(a,o){i[o]=e(a,r)}),i);default:return t}}},languages:{extend:function(e,t){let r=C.util.clone(C.languages[e]);for(let i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){i=i||C.languages;let n=i[e],s={};for(let o in n)if(n.hasOwnProperty(o)){if(o==t)for(let l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);r.hasOwnProperty(o)||(s[o]=n[o])}let a=i[e];return i[e]=s,C.languages.DFS(C.languages,function(o,l){l===a&&o!=e&&(this[o]=s)}),s},DFS:function e(t,r,i,n){n=n||{};let s=C.util.objId;for(let a in t)if(t.hasOwnProperty(a)){r.call(t,a,t[a],i||a);let o=t[a],l=C.util.type(o);l==="Object"&&!n[s(o)]?(n[s(o)]=!0,e(o,r,null,n)):l==="Array"&&!n[s(o)]&&(n[s(o)]=!0,e(o,r,a,n))}}},plugins:{},highlight:function(e,t,r){let i={code:e,grammar:t,language:r};return C.hooks.run("before-tokenize",i),i.tokens=C.tokenize(i.code,i.grammar),C.hooks.run("after-tokenize",i),Je.stringify(C.util.encode(i.tokens),i.language)},matchGrammar:function(e,t,r,i,n,s,a){for(let h in r){if(!r.hasOwnProperty(h)||!r[h])continue;if(h==a)return;let E=r[h];E=C.util.type(E)==="Array"?E:[E];for(let O=0;O<E.length;++O){let q=E[O],P=q.inside,B=!!q.lookbehind,Ae=!!q.greedy,k=0,b=q.alias;if(Ae&&!q.pattern.global){let A=q.pattern.toString().match(/[imuy]*$/)[0];q.pattern=RegExp(q.pattern.source,A+"g")}q=q.pattern||q;for(let A=i,I=n;A<t.length;I+=t[A].length,++A){let V=t[A];if(t.length>e.length)return;if(V instanceof Je)continue;if(Ae&&A!=t.length-1){q.lastIndex=I;var d=q.exec(e);if(!d)break;var c=d.index+(B?d[1].length:0),f=d.index+d[0].length,o=A,l=I;for(let L=t.length;o<L&&(l<f||!t[o].type&&!t[o-1].greedy);++o)l+=t[o].length,c>=l&&(++A,I=l);if(t[A]instanceof Je)continue;u=o-A,V=e.slice(I,l),d.index-=I}else{q.lastIndex=0;var d=q.exec(V),u=1}if(!d){if(s)break;continue}B&&(k=d[1]?d[1].length:0);var c=d.index+k,d=d[0].slice(k),f=c+d.length,p=V.slice(0,c),g=V.slice(f);let F=[A,u];p&&(++A,I+=p.length,F.push(p));let N=new Je(h,P?C.tokenize(d,P):d,b,d,Ae);if(F.push(N),g&&F.push(g),Array.prototype.splice.apply(t,F),u!=1&&C.matchGrammar(e,t,r,A,I,!0,h),s)break}}}},tokenize:function(e,t){let r=[e],i=t.rest;if(i){for(let n in i)t[n]=i[n];delete t.rest}return C.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){let r=C.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){let r=C.hooks.all[e];if(!(!r||!r.length))for(var i=0,n;n=r[i++];)n(t)}},Token:Je};C.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};C.languages.javascript=C.languages.extend("clike",{"class-name":[C.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});C.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;C.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:C.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:C.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:C.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:C.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});C.languages.markup&&C.languages.markup.tag.addInlined("script","javascript");C.languages.js=C.languages.javascript;C.languages.typescript=C.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});C.languages.ts=C.languages.typescript;function Je(e,t,r,i,n){this.type=e,this.content=t,this.alias=r,this.length=(i||"").length|0,this.greedy=!!n}Je.stringify=function(e,t){return typeof e=="string"?e:Array.isArray(e)?e.map(function(r){return Je.stringify(r,t)}).join(""):zv(e.type)(e.content)};function zv(e){return Hv[e]||Qv}function Jv(e){return Wv(e,C.languages.javascript)}function Wv(e,t){return C.tokenize(e,t).map(r=>Je.stringify(r)).join("")}function Yv(e){return kx(e)}var Xv=class Bt{firstLineNumber;lines;static read(t){let r;try{r=Gv.default.readFileSync(t,"utf-8")}catch{return null}return Bt.fromContent(r)}static fromContent(t){let r=t.split(/\r?\n/);return new Bt(1,r)}constructor(t,r){this.firstLineNumber=t,this.lines=r}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(t,r){if(t<this.firstLineNumber||t>this.lines.length+this.firstLineNumber)return this;let i=t-this.firstLineNumber,n=[...this.lines];return n[i]=r(n[i]),new Bt(this.firstLineNumber,n)}mapLines(t){return new Bt(this.firstLineNumber,this.lines.map((r,i)=>t(r,this.firstLineNumber+i)))}lineAt(t){return this.lines[t-this.firstLineNumber]}prependSymbolAt(t,r){return this.mapLines((i,n)=>n===t?`${r} ${i}`:`  ${i}`)}slice(t,r){let i=this.lines.slice(t-1,r).join(`
`);return new Bt(t,Yv(i).split(`
`))}highlight(){let t=Jv(this.toString());return new Bt(this.firstLineNumber,t.split(`
`))}toString(){return this.lines.join(`
`)}},Zv={red:Qt,gray:ma,dim:Wr,bold:$e,underline:Ce,highlightSource:e=>e.highlight()},ew={red:e=>e,gray:e=>e,dim:e=>e,bold:e=>e,underline:e=>e,highlightSource:e=>e};function tw({message:e,originalMethod:t,isPanic:r,callArguments:i}){return{functionName:`prisma.${t}()`,message:e,isPanic:r??!1,callArguments:i}}function rw({callsite:e,message:t,originalMethod:r,isPanic:i,callArguments:n},s){let a=tw({message:t,originalMethod:r,isPanic:i,callArguments:n});if(!e||typeof window<"u"||process.env.NODE_ENV==="production")return a;let o=e.getLocation();if(!o||!o.lineNumber||!o.columnNumber)return a;let l=Math.max(1,o.lineNumber-3),u=Xv.read(o.fileName)?.slice(l,o.lineNumber),c=u?.lineAt(o.lineNumber);if(u&&c){let d=nw(c),f=iw(c);if(!f)return a;a.functionName=`${f.code})`,a.location=o,i||(u=u.mapLineAt(o.lineNumber,g=>g.slice(0,f.openingBraceIndex))),u=s.highlightSource(u);let p=String(u.lastLineNumber).length;if(a.contextLines=u.mapLines((g,h)=>s.gray(String(h).padStart(p))+" "+g).mapLines(g=>s.dim(g)).prependSymbolAt(o.lineNumber,s.bold(s.red("\u2192"))),n){let g=d+p+1;g+=2,a.callArguments=(0,Bv.default)(n,g).slice(g)}}return a}function iw(e){let t=Object.keys(on).join("|"),r=new RegExp(String.raw`\.(${t})\(`).exec(e);if(r){let i=r.index+r[0].length,n=e.lastIndexOf(" ",r.index)+1;return{code:e.slice(n,i),openingBraceIndex:i}}return null}function nw(e){let t=0;for(let r=0;r<e.length;r++){if(e.charAt(r)!==" ")return t;t++}return t}function sw({functionName:e,location:t,message:r,isPanic:i,contextLines:n,callArguments:s},a){let o=[""],l=t?" in":":";if(i?(o.push(a.red(`Oops, an unknown error occurred! This is ${a.bold("on us")}, you did nothing wrong.`)),o.push(a.red(`It occurred in the ${a.bold(`\`${e}\``)} invocation${l}`))):o.push(a.red(`Invalid ${a.bold(`\`${e}\``)} invocation${l}`)),t&&o.push(a.underline(aw(t))),n){o.push("");let u=[n.toString()];s&&(u.push(s),u.push(a.dim(")"))),o.push(u.join("")),s&&o.push("")}else o.push(""),s&&o.push(s),o.push("");return o.push(r),o.join(`
`)}function aw(e){let t=[e.fileName];return e.lineNumber&&t.push(String(e.lineNumber)),e.columnNumber&&t.push(String(e.columnNumber)),t.join(":")}function md(e){let t=e.showColors?Zv:ew,r;return r=rw(e,t),sw(r,t)}var ow=H(kc());function lw(e,t,r){let i=gd(e),n=uw(i),s=dw(n);s?Sd(s,t,r):t.addErrorMessage(()=>"Unknown error")}function gd(e){return e.errors.flatMap(t=>t.kind==="Union"?gd(t):[t])}function uw(e){let t=new Map,r=[];for(let i of e){if(i.kind!=="InvalidArgumentType"){r.push(i);continue}let n=`${i.selectionPath.join(".")}:${i.argumentPath.join(".")}`,s=t.get(n);s?t.set(n,{...i,argument:{...i.argument,typeNames:cw(s.argument.typeNames,i.argument.typeNames)}}):t.set(n,i)}return r.push(...t.values()),r}function cw(e,t){return[...new Set(e.concat(t))]}function dw(e){return Qx(e,(t,r)=>{let i=Gu(t),n=Gu(r);return i!==n?i-n:Hu(t)-Hu(r)})}function Gu(e){let t=0;return Array.isArray(e.selectionPath)&&(t+=e.selectionPath.length),Array.isArray(e.argumentPath)&&(t+=e.argumentPath.length),t}function Hu(e){switch(e.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var et=class{constructor(e,t){this.name=e,this.value=t}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(e){let{colors:{green:t}}=e.context;e.addMarginSymbol(t(this.isRequired?"+":"?")),e.write(t(this.name)),this.isRequired||e.write(t("?")),e.write(t(": ")),typeof this.value=="string"?e.write(t(this.value)):e.write(this.value)}};Mb();var yd=class{constructor(e=0,t){this.context=t,this.currentIndent=e}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(e){return typeof e=="string"?this.currentLine+=e:e.write(this),this}writeJoined(e,t,r=(i,n)=>n.write(i)){let i=t.length-1;for(let n=0;n<t.length;n++)r(t[n],this),n!==i&&this.write(e);return this}writeLine(e){return this.write(e).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let e=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,e?.(),this}withIndent(e){return this.indent(),e(this),this.unindent(),this}afterNextNewline(e){return this.afterNextNewLineCallback=e,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(e){return this.marginSymbol=e,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let e=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+e.slice(1):e}};Fb();var fw=class{constructor(e){this.value=e}write(e){e.write(this.value)}markAsError(){this.value.markAsError()}},Di=e=>e,bd={bold:Di,red:Di,green:Di,dim:Di,enabled:!1},pw={bold:$e,red:Qt,green:Br,dim:Wr,enabled:!0},ka={write(e){e.writeLine(",")}},ln=class{constructor(e){this.contents=e}isUnderlined=!1;color=e=>e;underline(){return this.isUnderlined=!0,this}setColor(e){return this.color=e,this}write(e){let t=e.getCurrentLineLength();e.write(this.color(this.contents)),this.isUnderlined&&e.afterNextNewline(()=>{e.write(" ".repeat(t)).writeLine(this.color("~".repeat(this.contents.length)))})}},Ta=class{hasError=!1;markAsError(){return this.hasError=!0,this}},xd=class extends Ta{items=[];addItem(e){return this.items.push(new fw(e)),this}getField(e){return this.items[e]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(e=>e.value.getPrintWidth()))+2}write(e){if(this.items.length===0){this.writeEmpty(e);return}this.writeWithItems(e)}writeEmpty(e){let t=new ln("[]");this.hasError&&t.setColor(e.context.colors.red).underline(),e.write(t)}writeWithItems(e){let{colors:t}=e.context;e.writeLine("[").withIndent(()=>e.writeJoined(ka,this.items).newLine()).write("]"),this.hasError&&e.afterNextNewline(()=>{e.writeLine(t.red("~".repeat(this.getPrintWidth())))})}asObject(){}},vd=class ji extends Ta{fields={};suggestions=[];addField(t){this.fields[t.name]=t}addSuggestion(t){this.suggestions.push(t)}getField(t){return this.fields[t]}getDeepField(t){let[r,...i]=t,n=this.getField(r);if(!n)return;let s=n;for(let a of i){let o;if(s.value instanceof ji?o=s.value.getField(a):s.value instanceof xd&&(o=s.value.getField(Number(a))),!o)return;s=o}return s}getDeepFieldValue(t){return t.length===0?this:this.getDeepField(t)?.value}hasField(t){return!!this.getField(t)}removeAllFields(){this.fields={}}removeField(t){delete this.fields[t]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(t){return this.getField(t)?.value}getDeepSubSelectionValue(t){let r=this;for(let i of t){if(!(r instanceof ji))return;let n=r.getSubSelectionValue(i);if(!n)return;r=n}return r}getDeepSelectionParent(t){let r=this.getSelectionParent();if(!r)return;let i=r;for(let n of t){let s=i.value.getFieldValue(n);if(!s||!(s instanceof ji))return;let a=s.getSelectionParent();if(!a)return;i=a}return i}getSelectionParent(){let t=this.getField("select")?.value.asObject();if(t)return{kind:"select",value:t};let r=this.getField("include")?.value.asObject();if(r)return{kind:"include",value:r}}getSubSelectionValue(t){return this.getSelectionParent()?.value.fields[t].value}getPrintWidth(){let t=Object.values(this.fields);return t.length==0?2:Math.max(...t.map(r=>r.getPrintWidth()))+2}write(t){let r=Object.values(this.fields);if(r.length===0&&this.suggestions.length===0){this.writeEmpty(t);return}this.writeWithContents(t,r)}asObject(){return this}writeEmpty(t){let r=new ln("{}");this.hasError&&r.setColor(t.context.colors.red).underline(),t.write(r)}writeWithContents(t,r){t.writeLine("{").withIndent(()=>{t.writeJoined(ka,[...r,...this.suggestions]).newLine()}),t.write("}"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(t.context.colors.red("~".repeat(this.getPrintWidth())))})}},Re=class extends Ta{constructor(e){super(),this.text=e}getPrintWidth(){return this.text.length}write(e){let t=new ln(this.text);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t)}asObject(){}},wd=class{fields=[];addField(e,t){return this.fields.push({write(r){let{green:i,dim:n}=r.context.colors;r.write(i(n(`${e}: ${t}`))).addMarginSymbol(i(n("+")))}}),this}write(e){let{colors:{green:t}}=e.context;e.writeLine(t("{")).withIndent(()=>{e.writeJoined(ka,this.fields).newLine()}).write(t("}")).addMarginSymbol(t("+"))}};function Sd(e,t,r){switch(e.kind){case"MutuallyExclusiveFields":hw(e,t);break;case"IncludeOnScalar":mw(e,t);break;case"EmptySelection":gw(e,t,r);break;case"UnknownSelectionField":vw(e,t);break;case"InvalidSelectionValue":ww(e,t);break;case"UnknownArgument":Sw(e,t);break;case"UnknownInputField":Ew(e,t);break;case"RequiredArgumentMissing":Aw(e,t);break;case"InvalidArgumentType":Rw(e,t);break;case"InvalidArgumentValue":kw(e,t);break;case"ValueTooLarge":Tw(e,t);break;case"SomeFieldsMissing":Iw(e,t);break;case"TooManyFieldsGiven":Ow(e,t);break;case"Union":lw(e,t,r);break;default:throw new Error("not implemented: "+e.kind)}}function hw(e,t){let r=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();r&&(r.getField(e.firstField)?.markAsError(),r.getField(e.secondField)?.markAsError()),t.addErrorMessage(i=>`Please ${i.bold("either")} use ${i.green(`\`${e.firstField}\``)} or ${i.green(`\`${e.secondField}\``)}, but ${i.red("not both")} at the same time.`)}function mw(e,t){let[r,i]=ur(e.selectionPath),n=e.outputType,s=t.arguments.getDeepSelectionParent(r)?.value;if(s&&(s.getField(i)?.markAsError(),n))for(let a of n.fields)a.isRelation&&s.addSuggestion(new et(a.name,"true"));t.addErrorMessage(a=>{let o=`Invalid scalar field ${a.red(`\`${i}\``)} for ${a.bold("include")} statement`;return n?o+=` on model ${a.bold(n.name)}. ${ei(a)}`:o+=".",o+=`
Note that ${a.bold("include")} statements only accept relation fields.`,o})}function gw(e,t,r){let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getField("omit")?.value.asObject();if(n){yw(e,t,n);return}if(i.hasField("select")){bw(e,t);return}}if(r?.[tn(e.outputType.name)]){xw(e,t);return}t.addErrorMessage(()=>`Unknown field at "${e.selectionPath.join(".")} selection"`)}function yw(e,t,r){r.removeAllFields();for(let i of e.outputType.fields)r.addSuggestion(new et(i.name,"false"));t.addErrorMessage(i=>`The ${i.red("omit")} statement includes every field of the model ${i.bold(e.outputType.name)}. At least one field must be included in the result`)}function bw(e,t){let r=e.outputType,i=t.arguments.getDeepSelectionParent(e.selectionPath)?.value,n=i?.isEmpty()??!1;i&&(i.removeAllFields(),Rd(i,r)),t.addErrorMessage(s=>n?`The ${s.red("`select`")} statement for type ${s.bold(r.name)} must not be empty. ${ei(s)}`:`The ${s.red("`select`")} statement for type ${s.bold(r.name)} needs ${s.bold("at least one truthy value")}.`)}function xw(e,t){let r=new wd;for(let n of e.outputType.fields)n.isRelation||r.addField(n.name,"false");let i=new et("omit",r).makeRequired();if(e.selectionPath.length===0)t.arguments.addSuggestion(i);else{let[n,s]=ur(e.selectionPath),a=t.arguments.getDeepSelectionParent(n)?.value.asObject()?.getField(s);if(a){let o=a?.value.asObject()??new vd;o.addSuggestion(i),a.value=o}}t.addErrorMessage(n=>`The global ${n.red("omit")} configuration excludes every field of the model ${n.bold(e.outputType.name)}. At least one field must be included in the result`)}function vw(e,t){let r=kd(e.selectionPath,t);if(r.parentKind!=="unknown"){r.field.markAsError();let i=r.parent;switch(r.parentKind){case"select":Rd(i,e.outputType);break;case"include":_w(i,e.outputType);break;case"omit":qw(i,e.outputType);break}}t.addErrorMessage(i=>{let n=[`Unknown field ${i.red(`\`${r.fieldName}\``)}`];return r.parentKind!=="unknown"&&n.push(`for ${i.bold(r.parentKind)} statement`),n.push(`on model ${i.bold(`\`${e.outputType.name}\``)}.`),n.push(ei(i)),n.join(" ")})}function ww(e,t){let r=kd(e.selectionPath,t);r.parentKind!=="unknown"&&r.field.value.markAsError(),t.addErrorMessage(i=>`Invalid value for selection field \`${i.red(r.fieldName)}\`: ${e.underlyingError}`)}function Sw(e,t){let r=e.argumentPath[0],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&(i.getField(r)?.markAsError(),Cw(i,e.arguments)),t.addErrorMessage(n=>Ed(n,r,e.arguments.map(s=>s.name)))}function Ew(e,t){let[r,i]=ur(e.argumentPath),n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){n.getDeepField(e.argumentPath)?.markAsError();let s=n.getDeepFieldValue(r)?.asObject();s&&Td(s,e.inputType)}t.addErrorMessage(s=>Ed(s,i,e.inputType.fields.map(a=>a.name)))}function Ed(e,t,r){let i=[`Unknown argument \`${e.red(t)}\`.`],n=Nw(t,r);return n&&i.push(`Did you mean \`${e.green(n)}\`?`),r.length>0&&i.push(ei(e)),i.join(" ")}function Aw(e,t){let r;t.addErrorMessage(l=>r?.value instanceof Re&&r.value.text==="null"?`Argument \`${l.green(s)}\` must not be ${l.red("null")}.`:`Argument \`${l.green(s)}\` is missing.`);let i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(!i)return;let[n,s]=ur(e.argumentPath),a=new wd,o=i.getDeepFieldValue(n)?.asObject();if(o){if(r=o.getField(s),r&&o.removeField(s),e.inputTypes.length===1&&e.inputTypes[0].kind==="object"){for(let l of e.inputTypes[0].fields)a.addField(l.name,l.typeNames.join(" | "));o.addSuggestion(new et(s,a).makeRequired())}else{let l=e.inputTypes.map(Ad).join(" | ");o.addSuggestion(new et(s,l).makeRequired())}if(e.dependentArgumentPath){i.getDeepField(e.dependentArgumentPath)?.markAsError();let[,l]=ur(e.dependentArgumentPath);t.addErrorMessage(u=>`Argument \`${u.green(s)}\` is required because argument \`${u.green(l)}\` was provided.`)}}}function Ad(e){return e.kind==="list"?`${Ad(e.elementType)}[]`:e.name}function Rw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=un("or",e.argument.typeNames.map(a=>n.green(a)));return`Argument \`${n.bold(r)}\`: Invalid value provided. Expected ${s}, provided ${n.red(e.inferredType)}.`})}function kw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();i&&i.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(n=>{let s=[`Invalid value for argument \`${n.bold(r)}\``];if(e.underlyingError&&s.push(`: ${e.underlyingError}`),s.push("."),e.argument.typeNames.length>0){let a=un("or",e.argument.typeNames.map(o=>n.green(o)));s.push(` Expected ${a}.`)}return s.join("")})}function Tw(e,t){let r=e.argument.name,i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n;if(i){let s=i.getDeepField(e.argumentPath)?.value;s?.markAsError(),s instanceof Re&&(n=s.text)}t.addErrorMessage(s=>{let a=["Unable to fit value"];return n&&a.push(s.red(n)),a.push(`into a 64-bit signed integer for field \`${s.bold(r)}\``),a.join(" ")})}function Iw(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){let n=i.getDeepFieldValue(e.argumentPath)?.asObject();n&&Td(n,e.inputType)}t.addErrorMessage(n=>{let s=[`Argument \`${n.bold(r)}\` of type ${n.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1?e.constraints.requiredFields?s.push(`${n.green("at least one of")} ${un("or",e.constraints.requiredFields.map(a=>`\`${n.bold(a)}\``))} arguments.`):s.push(`${n.green("at least one")} argument.`):s.push(`${n.green(`at least ${e.constraints.minFieldCount}`)} arguments.`),s.push(ei(n)),s.join(" ")})}function Ow(e,t){let r=e.argumentPath[e.argumentPath.length-1],i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),n=[];if(i){let s=i.getDeepFieldValue(e.argumentPath)?.asObject();s&&(s.markAsError(),n=Object.keys(s.getFields()))}t.addErrorMessage(s=>{let a=[`Argument \`${s.bold(r)}\` of type ${s.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1&&e.constraints.maxFieldCount==1?a.push(`${s.green("exactly one")} argument,`):e.constraints.maxFieldCount==1?a.push(`${s.green("at most one")} argument,`):a.push(`${s.green(`at most ${e.constraints.maxFieldCount}`)} arguments,`),a.push(`but you provided ${un("and",n.map(o=>s.red(o)))}. Please choose`),e.constraints.maxFieldCount===1?a.push("one."):a.push(`${e.constraints.maxFieldCount}.`),a.join(" ")})}function Rd(e,t){for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new et(r.name,"true"))}function _w(e,t){for(let r of t.fields)r.isRelation&&!e.hasField(r.name)&&e.addSuggestion(new et(r.name,"true"))}function qw(e,t){for(let r of t.fields)!e.hasField(r.name)&&!r.isRelation&&e.addSuggestion(new et(r.name,"true"))}function Cw(e,t){for(let r of t)e.hasField(r.name)||e.addSuggestion(new et(r.name,r.typeNames.join(" | ")))}function kd(e,t){let[r,i]=ur(e),n=t.arguments.getDeepSubSelectionValue(r)?.asObject();if(!n)return{parentKind:"unknown",fieldName:i};let s=n.getFieldValue("select")?.asObject(),a=n.getFieldValue("include")?.asObject(),o=n.getFieldValue("omit")?.asObject(),l=s?.getField(i);return s&&l?{parentKind:"select",parent:s,field:l,fieldName:i}:(l=a?.getField(i),a&&l?{parentKind:"include",field:l,parent:a,fieldName:i}:(l=o?.getField(i),o&&l?{parentKind:"omit",field:l,parent:o,fieldName:i}:{parentKind:"unknown",fieldName:i}))}function Td(e,t){if(t.kind==="object")for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new et(r.name,r.typeNames.join(" | ")))}function ur(e){let t=[...e],r=t.pop();if(!r)throw new Error("unexpected empty path");return[t,r]}function ei({green:e,enabled:t}){return"Available options are "+(t?`listed in ${e("green")}`:"marked with ?")+"."}function un(e,t){if(t.length===1)return t[0];let r=[...t],i=r.pop();return`${r.join(", ")} ${e} ${i}`}var Pw=3;function Nw(e,t){let r=1/0,i;for(let n of t){let s=(0,ow.default)(e,n);s>Pw||s<r&&(r=s,i=n)}return i}var Id=class{modelName;name;typeName;isList;isEnum;constructor(e,t,r,i,n){this.modelName=e,this.name=t,this.typeName=r,this.isList=i,this.isEnum=n}_toGraphQLInputType(){let e=this.isList?"List":"",t=this.isEnum?"Enum":"";return`${e}${t}${this.typeName}FieldRefInput<${this.modelName}>`}};function Ia(e){return e instanceof Id}var $i=Symbol(),Os=new WeakMap,cn=class{constructor(e){e===$i?Os.set(this,`Prisma.${this._getName()}`):Os.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return Os.get(this)}},Oa=class extends cn{_getNamespace(){return"NullTypes"}},ta=class extends Oa{#e};_a(ta,"DbNull");var ra=class extends Oa{#e};_a(ra,"JsonNull");var ia=class extends Oa{#e};_a(ia,"AnyNull");var Od={classes:{DbNull:ta,JsonNull:ra,AnyNull:ia},instances:{DbNull:new ta($i),JsonNull:new ra($i),AnyNull:new ia($i)}};function _a(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Qu=": ",Dw=class{constructor(e,t){this.name=e,this.value=t}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+Qu.length}write(e){let t=new ln(this.name);this.hasError&&t.underline().setColor(e.context.colors.red),e.write(t).write(Qu).write(this.value)}},Uw=class{arguments;errorMessages=[];constructor(e){this.arguments=e}write(e){e.write(this.arguments)}addErrorMessage(e){this.errorMessages.push(e)}renderAllMessages(e){return this.errorMessages.map(t=>t(e)).join(`
`)}};function qa(e){return new Uw(_d(e))}function _d(e){let t=new vd;for(let[r,i]of Object.entries(e)){let n=new Dw(r,qd(i));t.addField(n)}return t}function qd(e){if(typeof e=="string")return new Re(JSON.stringify(e));if(typeof e=="number"||typeof e=="boolean")return new Re(String(e));if(typeof e=="bigint")return new Re(`${e}n`);if(e===null)return new Re("null");if(e===void 0)return new Re("undefined");if(Ra(e))return new Re(`new Prisma.Decimal("${e.toFixed()}")`);if(e instanceof Uint8Array)return Buffer.isBuffer(e)?new Re(`Buffer.alloc(${e.byteLength})`):new Re(`new Uint8Array(${e.byteLength})`);if(e instanceof Date){let t=rd(e)?e.toISOString():"Invalid Date";return new Re(`new Date("${t}")`)}return e instanceof cn?new Re(`Prisma.${e._getName()}`):Ia(e)?new Re(`prisma.${tn(e.modelName)}.$fields.${e.name}`):Array.isArray(e)?Lw(e):typeof e=="object"?_d(e):new Re(Object.prototype.toString.call(e))}function Lw(e){let t=new xd;for(let r of e)t.addItem(qd(r));return t}function Cd(e,t){let r=t==="pretty"?pw:bd,i=e.renderAllMessages(r),n=new yd(0,{colors:r}).write(e).toString();return{message:i,args:n}}function Pd({args:e,errors:t,errorFormat:r,callsite:i,originalMethod:n,clientVersion:s,globalOmit:a}){let o=qa(e);for(let d of t)Sd(d,o,a);let{message:l,args:u}=Cd(o,r),c=md({message:l,callsite:i,originalMethod:n,showColors:r==="pretty",callArguments:u});throw new lt(c,{clientVersion:s})}function ti(e){return e.replace(/^./,t=>t.toLowerCase())}function Fw(e,t,r){let i=ti(r);return!t.result||!(t.result.$allModels||t.result[i])?e:Mw({...e,...Ku(t.name,e,t.result.$allModels),...Ku(t.name,e,t.result[i])})}function Mw(e){let t=new jr,r=(i,n)=>t.getOrCreate(i,()=>n.has(i)?[i]:(n.add(i),e[i]?e[i].needs.flatMap(s=>r(s,n)):[i]));return Zc(e,i=>({...i,needs:r(i.name,new Set)}))}function Ku(e,t,r){return r?Zc(r,({needs:i,compute:n},s)=>({name:s,needs:i?Object.keys(i).filter(a=>i[a]):[],compute:jw(t,s,n)})):{}}function jw(e,t,r){let i=e?.[t]?.compute;return i?n=>r({...n,[t]:i(n)}):r}function $w(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(e[i.name])for(let n of i.needs)r[n]=!0;return r}function Vw(e,t){if(!t)return e;let r={...e};for(let i of Object.values(t))if(!e[i.name])for(let n of i.needs)delete r[n];return r}var zu=class{constructor(e,t){this.extension=e,this.previous=t}computedFieldsCache=new jr;modelExtensionsCache=new jr;queryCallbacksCache=new jr;clientExtensions=Ws(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=Ws(()=>{let e=this.previous?.getAllBatchQueryCallbacks()??[],t=this.extension.query?.$__internalBatch;return t?e.concat(t):e});getAllComputedFields(e){return this.computedFieldsCache.getOrCreate(e,()=>Fw(this.previous?.getAllComputedFields(e),this.extension,e))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(e){return this.modelExtensionsCache.getOrCreate(e,()=>{let t=ti(e);return!this.extension.model||!(this.extension.model[t]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(e):{...this.previous?.getAllModelExtensions(e),...this.extension.model.$allModels,...this.extension.model[t]}})}getAllQueryCallbacks(e,t){return this.queryCallbacksCache.getOrCreate(`${e}:${t}`,()=>{let r=this.previous?.getAllQueryCallbacks(e,t)??[],i=[],n=this.extension.query;return!n||!(n[e]||n.$allModels||n[t]||n.$allOperations)?r:(n[e]!==void 0&&(n[e][t]!==void 0&&i.push(n[e][t]),n[e].$allOperations!==void 0&&i.push(n[e].$allOperations)),e!=="$none"&&n.$allModels!==void 0&&(n.$allModels[t]!==void 0&&i.push(n.$allModels[t]),n.$allModels.$allOperations!==void 0&&i.push(n.$allModels.$allOperations)),n[t]!==void 0&&i.push(n[t]),n.$allOperations!==void 0&&i.push(n.$allOperations),r.concat(i))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},Nd=class Vi{constructor(t){this.head=t}static empty(){return new Vi}static single(t){return new Vi(new zu(t))}isEmpty(){return this.head===void 0}append(t){return new Vi(new zu(t,this.head))}getAllComputedFields(t){return this.head?.getAllComputedFields(t)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(t){return this.head?.getAllModelExtensions(t)}getAllQueryCallbacks(t,r){return this.head?.getAllQueryCallbacks(t,r)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},Dd=class{constructor(e){this.name=e}};function Bw(e){return e instanceof Dd}function Gw(e){return new Dd(e)}var Ud=Symbol(),Ld=class{constructor(e){if(e!==Ud)throw new Error("Skip instance can not be constructed directly")}ifUndefined(e){return e===void 0?Fd:e}},Fd=new Ld(Ud);function Kt(e){return e instanceof Ld}var Hw={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},Md="explicitly `undefined` values are not allowed";function jd({modelName:e,action:t,args:r,runtimeDataModel:i,extensions:n=Nd.empty(),callsite:s,clientMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c}){let d=new eS({runtimeDataModel:i,modelName:e,action:t,rootArgs:r,callsite:s,extensions:n,selectionPath:[],argumentPath:[],originalMethod:a,errorFormat:o,clientVersion:l,previewFeatures:u,globalOmit:c});return{modelName:e,action:Hw[t],query:Jr(r,d)}}function Jr({select:e,include:t,...r}={},i){let n=r.omit;return delete r.omit,{arguments:Vd(r,i),selection:Qw(e,t,n,i)}}function Qw(e,t,r,i){return e?(t?i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:i.getSelectionPath()}):r&&i.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:i.getSelectionPath()}),Ww(e,i)):Kw(i,t,r)}function Kw(e,t,r){let i={};return e.modelOrType&&!e.isRawAction()&&(i.$composites=!0,i.$scalars=!0),t&&zw(i,t,e),Jw(i,r,e),i}function zw(e,t,r){for(let[i,n]of Object.entries(t)){if(Kt(n))continue;let s=r.nestSelection(i);if(Ca(n,s),n===!1||n===void 0){e[i]=!1;continue}let a=r.findField(i);if(a&&a.kind!=="object"&&r.throwValidationError({kind:"IncludeOnScalar",selectionPath:r.getSelectionPath().concat(i),outputType:r.getOutputTypeDescription()}),a){e[i]=Jr(n===!0?{}:n,s);continue}if(n===!0){e[i]=!0;continue}e[i]=Jr(n,s)}}function Jw(e,t,r){let i=r.getComputedFields(),n={...r.getGlobalOmit(),...t},s=Vw(n,i);for(let[a,o]of Object.entries(s)){if(Kt(o))continue;Ca(o,r.nestSelection(a));let l=r.findField(a);i?.[a]&&!l||(e[a]=!o)}}function Ww(e,t){let r={},i=t.getComputedFields(),n=$w(e,i);for(let[s,a]of Object.entries(n)){if(Kt(a))continue;let o=t.nestSelection(s);Ca(a,o);let l=t.findField(s);if(!(i?.[s]&&!l)){if(a===!1||a===void 0||Kt(a)){r[s]=!1;continue}if(a===!0){l?.kind==="object"?r[s]=Jr({},o):r[s]=!0;continue}r[s]=Jr(a,o)}}return r}function $d(e,t){if(e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="bigint")return{$type:"BigInt",value:String(e)};if(Ea(e)){if(rd(e))return{$type:"DateTime",value:e.toISOString()};t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(Bw(e))return{$type:"Param",value:e.name};if(Ia(e))return{$type:"FieldRef",value:{_ref:e.name,_container:e.modelName}};if(Array.isArray(e))return Yw(e,t);if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{$type:"Bytes",value:Buffer.from(r,i,n).toString("base64")}}if(Xw(e))return e.values;if(Ra(e))return{$type:"Decimal",value:e.toFixed()};if(e instanceof cn){if(e!==Od.instances[e._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:e._getName()}}if(Zw(e))return e.toJSON();if(typeof e=="object")return Vd(e,t);t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(e)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function Vd(e,t){if(e.$type)return{$type:"Raw",value:e};let r={};for(let i in e){let n=e[i],s=t.nestArgument(i);Kt(n)||(n!==void 0?r[i]=$d(n,s):t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidArgumentValue",argumentPath:s.getArgumentPath(),selectionPath:t.getSelectionPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:Md}))}return r}function Yw(e,t){let r=[];for(let i=0;i<e.length;i++){let n=t.nestArgument(String(i)),s=e[i];if(s===void 0||Kt(s)){let a=s===void 0?"undefined":"Prisma.skip";t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:n.getSelectionPath(),argumentPath:n.getArgumentPath(),argument:{name:`${t.getArgumentName()}[${i}]`,typeNames:[]},underlyingError:`Can not use \`${a}\` value within array. Use \`null\` or filter out \`${a}\` values`})}r.push($d(s,n))}return r}function Xw(e){return typeof e=="object"&&e!==null&&e.__prismaRawParameters__===!0}function Zw(e){return typeof e=="object"&&e!==null&&typeof e.toJSON=="function"}function Ca(e,t){e===void 0&&t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidSelectionValue",selectionPath:t.getSelectionPath(),underlyingError:Md})}var eS=class na{constructor(t){this.params=t,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(t){Pd({errors:[t],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(t=>({name:t.name,typeName:"boolean",isRelation:t.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(t){return this.params.previewFeatures.includes(t)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(t){return this.modelOrType?.fields.find(r=>r.name===t)}nestSelection(t){let r=this.findField(t),i=r?.kind==="object"?r.type:void 0;return new na({...this.params,modelName:i,selectionPath:this.params.selectionPath.concat(t)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[tn(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:Sa(this.params.action,"Unknown action")}}nestArgument(t){return new na({...this.params,argumentPath:this.params.argumentPath.concat(t)})}};function Ju(e){if(!e._hasPreviewFlag("metrics"))throw new lt("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:e._clientVersion})}var Bd=class{_client;constructor(e){this._client=e}prometheus(e){return Ju(this._client),this._client._engine.metrics({format:"prometheus",...e})}json(e){return Ju(this._client),this._client._engine.metrics({format:"json",...e})}};function tS(e,t){let r=Ws(()=>rS(t));Object.defineProperty(e,"dmmf",{get:()=>r.get()})}function rS(e){return{datamodel:{models:_s(e.models),enums:_s(e.enums),types:_s(e.types)}}}function _s(e){return Object.entries(e).map(([t,r])=>({name:t,...r}))}var qs=new WeakMap,Wi="$$PrismaTypedSql",Gd=class{constructor(e,t){qs.set(this,{sql:e,values:t}),Object.defineProperty(this,Wi,{value:Wi})}get sql(){return qs.get(this).sql}get values(){return qs.get(this).values}};function iS(e){return(...t)=>new Gd(e,t)}function Hd(e){return e!=null&&e[Wi]===Wi}var nS=H(Ac()),sS=require("node:async_hooks"),aS=require("node:events"),oS=H(require("node:fs")),Cs=H(require("node:path")),Tt=class sa{constructor(t,r){if(t.length-1!==r.length)throw t.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${t.length} strings to have ${t.length-1} values`);let i=r.reduce((a,o)=>a+(o instanceof sa?o.values.length:1),0);this.values=new Array(i),this.strings=new Array(i+1),this.strings[0]=t[0];let n=0,s=0;for(;n<r.length;){let a=r[n++],o=t[n];if(a instanceof sa){this.strings[s]+=a.strings[0];let l=0;for(;l<a.values.length;)this.values[s++]=a.values[l++],this.strings[s]=a.strings[l];this.strings[s]+=o}else this.values[s++]=a,this.strings[s]=o}}get sql(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`?${this.strings[r++]}`;return i}get statement(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`:${r}${this.strings[r++]}`;return i}get text(){let t=this.strings.length,r=1,i=this.strings[0];for(;r<t;)i+=`$${r}${this.strings[r++]}`;return i}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function lS(e,t=",",r="",i=""){if(e.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new Tt([r,...Array(e.length-1).fill(t),i],e)}function Qd(e){return new Tt([e],[])}var uS=Qd("");function cS(e,...t){return new Tt(e,t)}function Kd(e){return{getKeys(){return Object.keys(e)},getPropertyValue(t){return e[t]}}}function Xe(e,t){return{getKeys(){return[e]},getPropertyValue(){return t()}}}function Pa(e){let t=new jr;return{getKeys(){return e.getKeys()},getPropertyValue(r){return t.getOrCreate(r,()=>e.getPropertyValue(r))},getPropertyDescriptor(r){return e.getPropertyDescriptor?.(r)}}}var aa={enumerable:!0,configurable:!0,writable:!0};function zd(e){let t=new Set(e);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>aa,has:(r,i)=>t.has(i),set:(r,i,n)=>t.add(i)&&Reflect.set(r,i,n),ownKeys:()=>[...t]}}var Wu=Symbol.for("nodejs.util.inspect.custom");function cr(e,t){let r=dS(t),i=new Set,n=new Proxy(e,{get(s,a){if(i.has(a))return s[a];let o=r.get(a);return o?o.getPropertyValue(a):s[a]},has(s,a){if(i.has(a))return!0;let o=r.get(a);return o?o.has?.(a)??!0:Reflect.has(s,a)},ownKeys(s){let a=Yu(Reflect.ownKeys(s),r),o=Yu(Array.from(r.keys()),r);return[...new Set([...a,...o,...i])]},set(s,a,o){return r.get(a)?.getPropertyDescriptor?.(a)?.writable===!1?!1:(i.add(a),Reflect.set(s,a,o))},getOwnPropertyDescriptor(s,a){let o=Reflect.getOwnPropertyDescriptor(s,a);if(o&&!o.configurable)return o;let l=r.get(a);return l?l.getPropertyDescriptor?{...aa,...l?.getPropertyDescriptor(a)}:aa:o},defineProperty(s,a,o){return i.add(a),Reflect.defineProperty(s,a,o)},getPrototypeOf:()=>Object.prototype});return n[Wu]=function(){let s={...this};return delete s[Wu],s},n}function dS(e){let t=new Map;for(let r of e){let i=r.getKeys();for(let n of i)t.set(n,r)}return t}function Yu(e,t){return e.filter(r=>t.get(r)?.has?.(r)??!0)}function oa(e){return{getKeys(){return e},has(){return!1},getPropertyValue(){}}}function Na(e,t){return{batch:e,transaction:t?.kind==="batch"?{isolationLevel:t.options.isolationLevel}:void 0}}function fS(e){if(e===void 0)return"";let t=qa(e);return new yd(0,{colors:bd}).write(t).toString()}var pS="P2037";function Da({error:e,user_facing_error:t},r,i){return t.error_code?new At(hS(t,i),{code:t.error_code,clientVersion:r,meta:t.meta,batchRequestIdx:t.batch_request_idx}):new Oe(e,{clientVersion:r,batchRequestIdx:t.batch_request_idx})}function hS(e,t){let r=e.message;return(t==="postgresql"||t==="postgres"||t==="mysql")&&e.error_code===pS&&(r+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),r}var ri="<unknown>";function mS(e){var t=e.split(`
`);return t.reduce(function(r,i){var n=bS(i)||vS(i)||ES(i)||TS(i)||RS(i);return n&&r.push(n),r},[])}var gS=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yS=/\((\S*)(?::(\d+))(?::(\d+))\)/;function bS(e){var t=gS.exec(e);if(!t)return null;var r=t[2]&&t[2].indexOf("native")===0,i=t[2]&&t[2].indexOf("eval")===0,n=yS.exec(t[2]);return i&&n!=null&&(t[2]=n[1],t[3]=n[2],t[4]=n[3]),{file:r?null:t[2],methodName:t[1]||ri,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var xS=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function vS(e){var t=xS.exec(e);return t?{file:t[2],methodName:t[1]||ri,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var wS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,SS=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ES(e){var t=wS.exec(e);if(!t)return null;var r=t[3]&&t[3].indexOf(" > eval")>-1,i=SS.exec(t[3]);return r&&i!=null&&(t[3]=i[1],t[4]=i[2],t[5]=null),{file:t[3],methodName:t[1]||ri,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var AS=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function RS(e){var t=AS.exec(e);return t?{file:t[3],methodName:t[1]||ri,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var kS=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function TS(e){var t=kS.exec(e);return t?{file:t[2],methodName:t[1]||ri,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var IS=class{getLocation(){return null}},OS=class{_error;constructor(){this._error=new Error}getLocation(){let e=this._error.stack;if(!e)return null;let t=mS(e).find(r=>{if(!r.file)return!1;let i=$x(r.file);return i!=="<anonymous>"&&!i.includes("@prisma")&&!i.includes("/packages/client/src/runtime/")&&!i.endsWith("/runtime/binary.js")&&!i.endsWith("/runtime/library.js")&&!i.endsWith("/runtime/edge.js")&&!i.endsWith("/runtime/edge-esm.js")&&!i.startsWith("internal/")&&!r.methodName.includes("new ")&&!r.methodName.includes("getCallSite")&&!r.methodName.includes("Proxy.")&&r.methodName.split(".").length<4});return!t||!t.file?null:{fileName:t.file,lineNumber:t.lineNumber,columnNumber:t.column}}};function $r(e){return e==="minimal"?typeof $EnabledCallSite=="function"&&e!=="minimal"?new $EnabledCallSite:new IS:new OS}var _S={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function Yi(e={}){let t=qS(e);return Object.entries(t).reduce((r,[i,n])=>(_S[i]!==void 0?r.select[i]={select:n}:r[i]=n,r),{select:{}})}function qS(e={}){return typeof e._count=="boolean"?{...e,_count:{_all:e._count}}:e}function la(e={}){return t=>(typeof e._count=="boolean"&&(t._count=t._count._all),t)}function CS(e,t){let r=la(e);return t({action:"aggregate",unpacker:r,argsMapper:Yi})(e)}function PS(e={}){let{select:t,...r}=e;return Yi(typeof t=="object"?{...r,_count:t}:{...r,_count:{_all:!0}})}function NS(e={}){return typeof e.select=="object"?t=>la(e)(t)._count:t=>la(e)(t)._count._all}function DS(e,t){return t({action:"count",unpacker:NS(e),argsMapper:PS})(e)}function US(e={}){let t=Yi(e);if(Array.isArray(t.by))for(let r of t.by)typeof r=="string"&&(t.select[r]=!0);else typeof t.by=="string"&&(t.select[t.by]=!0);return t}function LS(e={}){return t=>(typeof e?._count=="boolean"&&t.forEach(r=>{r._count=r._count._all}),t)}function FS(e,t){return t({action:"groupBy",unpacker:LS(e),argsMapper:US})(e)}function MS(e,t,r){if(t==="aggregate")return i=>CS(i,r);if(t==="count")return i=>DS(i,r);if(t==="groupBy")return i=>FS(i,r)}function jS(e,t){let r=t.fields.filter(n=>!n.relationName),i=Kx(r,"name");return new Proxy({},{get(n,s){if(s in n||typeof s=="symbol")return n[s];let a=i[s];if(a)return new Id(e,s,a.type,a.isList,a.kind==="enum")},...zd(Object.keys(i))})}var Jd=e=>Array.isArray(e)?e:e.split("."),Wd=(e,t)=>Jd(t).reduce((r,i)=>r&&r[i],e),$S=(e,t,r)=>Jd(t).reduceRight((i,n,s,a)=>Object.assign({},Wd(e,a.slice(0,s)),{[n]:i}),r);function VS(e,t){return e===void 0||t===void 0?[]:[...t,"select",e]}function BS(e,t,r){return t===void 0?e??{}:$S(t,r,e||!0)}function Yd(e,t,r,i,n,s){let a=e._runtimeDataModel.models[t].fields.reduce((o,l)=>({...o,[l.name]:l}),{});return o=>{let l=$r(e._errorFormat),u=VS(i,n),c=BS(o,s,u),d=r({dataPath:u,callsite:l})(c),f=GS(e,t);return new Proxy(d,{get(p,g){if(!f.includes(g))return p[g];let h=[a[g].type,r,g],E=[u,c];return Yd(e,...h,...E)},...zd([...f,...Object.getOwnPropertyNames(d)])})}}function GS(e,t){return e._runtimeDataModel.models[t].fields.filter(r=>r.kind==="object").map(r=>r.name)}var HS=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],QS=["aggregate","count","groupBy"];function Xu(e,t){let r=e._extensions.getAllModelExtensions(t)??{},i=[KS(e,t),JS(e,t),Kd(r),Xe("name",()=>t),Xe("$name",()=>t),Xe("$parent",()=>e._appliedParent)];return cr({},i)}function KS(e,t){let r=ti(t),i=Object.keys(on).concat("count");return{getKeys(){return i},getPropertyValue(n){let s=n,a=o=>l=>{let u=$r(e._errorFormat);return e._createPrismaPromise(c=>{let d={args:l,dataPath:[],action:s,model:t,clientMethod:`${r}.${n}`,jsModelName:r,transaction:c,callsite:u};return e._request({...d,...o})},{action:s,args:l,model:t})};return HS.includes(s)?Yd(e,t,a):zS(n)?MS(e,n,a):a({})}}}function zS(e){return QS.includes(e)}function JS(e,t){return Pa(Xe("fields",()=>{let r=e._runtimeDataModel.models[t];return jS(t,r)}))}function WS(e){return e.replace(/^./,t=>t.toUpperCase())}var ua=Symbol();function ca(e){let t=[YS(e),XS(e),Xe(ua,()=>e),Xe("$parent",()=>e._appliedParent)],r=e._extensions.getAllClientExtensions();return r&&t.push(Kd(r)),cr(e,t)}function YS(e){let t=Object.getPrototypeOf(e._originalClient),r=[...new Set(Object.getOwnPropertyNames(t))];return{getKeys(){return r},getPropertyValue(i){return e[i]}}}function XS(e){let t=Object.keys(e._runtimeDataModel.models),r=t.map(ti),i=[...new Set(t.concat(r))];return Pa({getKeys(){return i},getPropertyValue(n){let s=WS(n);if(e._runtimeDataModel.models[s]!==void 0)return Xu(e,s);if(e._runtimeDataModel.models[n]!==void 0)return Xu(e,n)},getPropertyDescriptor(n){if(!r.includes(n))return{enumerable:!1}}})}function ZS(e){return e[ua]?e[ua]:e}function eE(e){if(typeof e=="function")return e(this);if(e.client?.__AccelerateEngine){let r=e.client.__AccelerateEngine;this._originalClient._engine=new r(this._originalClient._accelerateEngineConfig)}let t=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(e)},_appliedParent:{value:this,configurable:!0},$on:{value:void 0}});return ca(t)}function tE({result:e,modelName:t,select:r,omit:i,extensions:n}){let s=n.getAllComputedFields(t);if(!s)return e;let a=[],o=[];for(let l of Object.values(s)){if(i){if(i[l.name])continue;let u=l.needs.filter(c=>i[c]);u.length>0&&o.push(oa(u))}else if(r){if(!r[l.name])continue;let u=l.needs.filter(c=>!r[c]);u.length>0&&o.push(oa(u))}rE(e,l.needs)&&a.push(iE(l,cr(e,a)))}return a.length>0||o.length>0?cr(e,[...a,...o]):e}function rE(e,t){return t.every(r=>Hx(e,r))}function iE(e,t){return Pa(Xe(e.name,()=>e.compute(t)))}function Ua({visitor:e,result:t,args:r,runtimeDataModel:i,modelName:n}){if(Array.isArray(t)){for(let a=0;a<t.length;a++)t[a]=Ua({result:t[a],args:r,modelName:n,runtimeDataModel:i,visitor:e});return t}let s=e(t,n,r)??t;return r.include&&Zu({includeOrSelect:r.include,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),r.select&&Zu({includeOrSelect:r.select,result:s,parentModelName:n,runtimeDataModel:i,visitor:e}),s}function Zu({includeOrSelect:e,result:t,parentModelName:r,runtimeDataModel:i,visitor:n}){for(let[s,a]of Object.entries(e)){if(!a||t[s]==null||Kt(a))continue;let o=i.models[r].fields.find(u=>u.name===s);if(!o||o.kind!=="object"||!o.relationName)continue;let l=typeof a=="object"?a:{};t[s]=Ua({visitor:n,result:t[s],args:l,modelName:o.type,runtimeDataModel:i})}}function nE({result:e,modelName:t,args:r,extensions:i,runtimeDataModel:n,globalOmit:s}){return i.isEmpty()||e==null||typeof e!="object"||!n.models[t]?e:Ua({result:e,args:r??{},modelName:t,runtimeDataModel:n,visitor:(a,o,l)=>{let u=ti(o);return tE({result:a,modelName:u,select:l.select,omit:l.select?void 0:{...s?.[u],...l.omit},extensions:i})}})}var sE=["$connect","$disconnect","$on","$transaction","$extends"],aE=sE;function oE(e){if(e instanceof Tt)return lE(e);if(Hd(e))return uE(e);if(Array.isArray(e)){let r=[e[0]];for(let i=1;i<e.length;i++)r[i]=Vr(e[i]);return r}let t={};for(let r in e)t[r]=Vr(e[r]);return t}function lE(e){return new Tt(e.strings,e.values)}function uE(e){return new Gd(e.sql,e.values)}function Vr(e){if(typeof e!="object"||e==null||e instanceof cn||Ia(e))return e;if(Ra(e))return new an(e.toFixed());if(Ea(e))return new Date(+e);if(ArrayBuffer.isView(e))return e.slice(0);if(Array.isArray(e)){let t=e.length,r;for(r=Array(t);t--;)r[t]=Vr(e[t]);return r}if(typeof e=="object"){let t={};for(let r in e)r==="__proto__"?Object.defineProperty(t,r,{value:Vr(e[r]),configurable:!0,enumerable:!0,writable:!0}):t[r]=Vr(e[r]);return t}Sa(e,"Unknown value")}function Xd(e,t,r,i=0){return e._createPrismaPromise(n=>{let s=t.customDataProxyFetch;return"transaction"in t&&n!==void 0&&(t.transaction?.kind==="batch"&&t.transaction.lock.then(),t.transaction=n),i===r.length?e._executeRequest(t):r[i]({model:t.model,operation:t.model?t.action:t.clientMethod,args:oE(t.args??{}),__internalParams:t,query:(a,o=t)=>{let l=o.customDataProxyFetch;return o.customDataProxyFetch=ef(s,l),o.args=a,Xd(e,o,r,i+1)}})})}function cE(e,t){let{jsModelName:r,action:i,clientMethod:n}=t,s=r?i:n;if(e._extensions.isEmpty())return e._executeRequest(t);let a=e._extensions.getAllQueryCallbacks(r??"$none",s);return Xd(e,t,a)}function dE(e){return t=>{let r={requests:t},i=t[0].extensions.getAllBatchQueryCallbacks();return i.length?Zd(r,i,0,e):e(r)}}function Zd(e,t,r,i){if(r===t.length)return i(e);let n=e.customDataProxyFetch,s=e.requests[0].transaction;return t[r]({args:{queries:e.requests.map(a=>({model:a.modelName,operation:a.action,args:a.args})),transaction:s?{isolationLevel:s.kind==="batch"?s.isolationLevel:void 0}:void 0},__internalParams:e,query(a,o=e){let l=o.customDataProxyFetch;return o.customDataProxyFetch=ef(n,l),Zd(o,t,r+1,i)}})}var ec=e=>e;function ef(e=ec,t=ec){return r=>e(t(r))}var tc=ve("prisma:client"),rc={Vercel:"vercel","Netlify CI":"netlify"};function fE({postinstall:e,ciName:t,clientVersion:r,generator:i}){if(tc("checkPlatformCaching:postinstall",e),tc("checkPlatformCaching:ciName",t),e===!0&&!(i?.output&&typeof(i.output.fromEnvVar??i.output.value)=="string")&&t&&t in rc){let n=`Prisma has detected that this project was built on ${t}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${rc[t]}-build`;throw console.error(n),new ae(n,r)}}function pE(e,t){return e?e.datasources?e.datasources:e.datasourceUrl?{[t[0]]:{url:e.datasourceUrl}}:{}:{}}var hE=H(require("node:fs")),Bi=H(require("node:path"));function tf(e){let{runtimeBinaryTarget:t}=e;return`Add "${t}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${mE(e)}`}function mE(e){let{generator:t,generatorBinaryTargets:r,runtimeBinaryTarget:i}=e,n={fromEnvVar:null,value:i},s=[...r,n];return _x({...t,binaryTargets:s})}function dn(e){let{runtimeBinaryTarget:t}=e;return`Prisma Client could not locate the Query Engine for runtime "${t}".`}function fn(e){let{searchedLocations:t}=e;return`The following locations have been searched:
${[...new Set(t)].map(r=>`  ${r}`).join(`
`)}`}function gE(e){let{runtimeBinaryTarget:t}=e;return`${dn(e)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${t}".
${tf(e)}

${fn(e)}`}function rf(e){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${e}`}function nf(e){let{errorStack:t}=e;return t?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function yE(e){let{queryEngineName:t}=e;return`${dn(e)}${nf(e)}

This is likely caused by a bundler that has not copied "${t}" next to the resulting bundle.
Ensure that "${t}" has been copied next to the bundle or in "${e.expectedLocation}".

${rf("engine-not-found-bundler-investigation")}

${fn(e)}`}function bE(e){let{runtimeBinaryTarget:t,generatorBinaryTargets:r}=e,i=r.find(n=>n.native);return`${dn(e)}

This happened because Prisma Client was generated for "${i?.value??"unknown"}", but the actual deployment required "${t}".
${tf(e)}

${fn(e)}`}function xE(e){let{queryEngineName:t}=e;return`${dn(e)}${nf(e)}

This is likely caused by tooling that has not copied "${t}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${t}" has been copied to "${e.expectedLocation}".

${rf("engine-not-found-tooling-investigation")}

${fn(e)}`}var vE=ve("prisma:client:engines:resolveEnginePath"),wE=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function SE(e,t){let r={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[e]??t.prismaPath;if(r!==void 0)return r;let{enginePath:i,searchedLocations:n}=await EE(e,t);if(vE("enginePath",i),i!==void 0&&e==="binary"&&Ex(i),i!==void 0)return t.prismaPath=i;let s=await ya(),a=t.generator?.binaryTargets??[],o=a.some(f=>f.native),l=!a.some(f=>f.value===s),u=__filename.match(wE())===null,c={searchedLocations:n,generatorBinaryTargets:a,generator:t.generator,runtimeBinaryTarget:s,queryEngineName:sf(e,s),expectedLocation:Bi.default.relative(process.cwd(),t.dirname),errorStack:new Error().stack},d;throw o&&l?d=bE(c):l?d=gE(c):u?d=yE(c):d=xE(c),new ae(d,t.clientVersion)}async function EE(e,t){let r=await ya(),i=[],n=[t.dirname,Bi.default.resolve(__dirname,".."),t.generator?.output?.value??__dirname,Bi.default.resolve(__dirname,"../../../.prisma/client"),"/tmp/prisma-engines",t.cwd];__filename.includes("resolveEnginePath")&&n.push(Sx());for(let s of n){let a=sf(e,r),o=Bi.default.join(s,a);if(i.push(s),hE.default.existsSync(o))return{enginePath:o,searchedLocations:i}}return{enginePath:void 0,searchedLocations:i}}function sf(e,t){return e==="library"?m1(t,"fs"):`query-engine-${t}${t==="windows"?".exe":""}`}function AE(e){return e?e.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,t=>`${t[0]}5`):""}function RE(e){return e.split(`
`).map(t=>t.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var kE=H(Lb());function TE({title:e,user:t="prisma",repo:r="prisma",template:i="bug_report.yml",body:n}){return(0,kE.default)({user:t,repo:r,template:i,title:e,body:n})}function IE({version:e,binaryTarget:t,title:r,description:i,engineVersion:n,database:s,query:a}){let o=c1(6e3-(a?.length??0)),l=RE(Ks(o)),u=i?`# Description
\`\`\`
${i}
\`\`\``:"",c=Ks(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${t?.padEnd(19)}|
| Prisma Client   | ${e?.padEnd(19)}|
| Query Engine    | ${n?.padEnd(19)}|
| Database        | ${s?.padEnd(19)}|

${u}

## Logs
\`\`\`
${l}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${a?AE(a):""}
\`\`\`
`),d=TE({title:r,body:c});return`${r}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Ce(d)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function OE(e,t){throw new Error(t)}function _E(e){return e!==null&&typeof e=="object"&&typeof e.$type=="string"}function qE(e,t){let r={};for(let i of Object.keys(e))r[i]=t(e[i],i);return r}function Xi(e){return e===null?e:Array.isArray(e)?e.map(Xi):typeof e=="object"?_E(e)?CE(e):e.constructor!==null&&e.constructor.name!=="Object"?e:qE(e,Xi):e}function CE({$type:e,value:t}){switch(e){case"BigInt":return BigInt(t);case"Bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"DateTime":return new Date(t);case"Decimal":return new Jt(t);case"Json":return JSON.parse(t);default:OE(t,"Unknown tagged value")}}var PE="6.19.0",NE=()=>globalThis.process?.release?.name==="node",DE=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,UE=()=>!!globalThis.Deno,LE=()=>typeof globalThis.Netlify=="object",FE=()=>typeof globalThis.EdgeRuntime=="object",ME=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function jE(){return[[LE,"netlify"],[FE,"edge-light"],[ME,"workerd"],[UE,"deno"],[DE,"bun"],[NE,"node"]].flatMap(e=>e[0]()?[e[1]]:[]).at(0)??""}var $E={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function af(){let e=jE();return{id:e,prettyName:$E[e]||e,isEdge:["workerd","deno","netlify","edge-light"].includes(e)}}function La({inlineDatasources:e,overrideDatasources:t,env:r,clientVersion:i}){let n,s=Object.keys(e)[0],a=e[s]?.url,o=t[s]?.url;if(s===void 0?n=void 0:o?n=o:a?.value?n=a.value:a?.fromEnvVar&&(n=r[a.fromEnvVar]),a?.fromEnvVar!==void 0&&n===void 0)throw new ae(`error: Environment variable not found: ${a.fromEnvVar}.`,i);if(n===void 0)throw new ae("error: Missing URL environment variable, value, or override.",i);return n}var VE=class extends Error{clientVersion;cause;constructor(e,t){super(e),this.clientVersion=t.clientVersion,this.cause=t.cause}get[Symbol.toStringTag](){return this.name}},dr=class extends VE{isRetryable;constructor(e,t){super(e,t),this.isRetryable=t.isRetryable??!0}};function me(e,t){return{...e,isRetryable:t}}var Gi=class extends dr{name="InvalidDatasourceError";code="P6001";constructor(e,t){super(e,me(t,!1))}};ne(Gi,"InvalidDatasourceError");function BE(e){let t={clientVersion:e.clientVersion},r=Object.keys(e.inlineDatasources)[0],i=La({inlineDatasources:e.inlineDatasources,overrideDatasources:e.overrideDatasources,clientVersion:e.clientVersion,env:{...e.env,...typeof process<"u"?process.env:{}}}),n;try{n=new URL(i)}catch{throw new Gi(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\``,t)}let{protocol:s,searchParams:a}=n;if(s!=="prisma:"&&s!==Qc)throw new Gi(`Error validating datasource \`${r}\`: the URL must start with the protocol \`prisma://\` or \`prisma+postgres://\``,t);let o=a.get("api_key");if(o===null||o.length<1)throw new Gi(`Error validating datasource \`${r}\`: the URL must contain a valid API key`,t);let l=Ix(n)?"http:":"https:";process.env.TEST_CLIENT_ENGINE_REMOTE_EXECUTOR&&n.searchParams.has("use_http")&&(l="http:");let u=new URL(n.href.replace(s,l));return{apiKey:o,url:u}}var GE=H(ha()),HE=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:e,tracingHelper:t,logLevel:r,logQueries:i,engineHash:n}){this.apiKey=e,this.tracingHelper=t,this.logLevel=r,this.logQueries=i,this.engineHash=n}build({traceparent:e,transactionId:t}={}){let r={Accept:"application/json",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","Prisma-Engine-Hash":this.engineHash,"Prisma-Engine-Version":GE.enginesVersion};this.tracingHelper.isEnabled()&&(r.traceparent=e??this.tracingHelper.getTraceParent()),t&&(r["X-Transaction-Id"]=t);let i=this.#e();return i.length>0&&(r["X-Capture-Telemetry"]=i.join(", ")),r}#e(){let e=[];return this.tracingHelper.isEnabled()&&e.push("tracing"),this.logLevel&&e.push(this.logLevel),this.logQueries&&e.push("query"),e}};function QE(e){return e[0]*1e3+e[1]/1e6}function ic(e){return new Date(QE(e))}var da=class extends dr{name="ForcedRetryError";code="P5001";constructor(e){super("This request must be retried",me(e,!0))}};ne(da,"ForcedRetryError");var Fa=class extends dr{name="NotImplementedYetError";code="P5004";constructor(e,t){super(e,me(t,!1))}};ne(Fa,"NotImplementedYetError");var De=class extends dr{response;constructor(e,t){super(e,t),this.response=t.response;let r=this.response.headers.get("prisma-request-id");if(r){let i=`(The request id was: ${r})`;this.message=this.message+" "+i}}},Ma=class extends De{name="SchemaMissingError";code="P5005";constructor(e){super("Schema needs to be uploaded",me(e,!0))}};ne(Ma,"SchemaMissingError");var of="This request could not be understood by the server",lf=class extends De{name="BadRequestError";code="P5000";constructor(e,t,r){super(t||of,me(e,!1)),r&&(this.code=r)}};ne(lf,"BadRequestError");var uf=class extends De{name="HealthcheckTimeoutError";code="P5013";logs;constructor(e,t){super("Engine not started: healthcheck timeout",me(e,!0)),this.logs=t}};ne(uf,"HealthcheckTimeoutError");var cf=class extends De{name="EngineStartupError";code="P5014";logs;constructor(e,t,r){super(t,me(e,!0)),this.logs=r}};ne(cf,"EngineStartupError");var df=class extends De{name="EngineVersionNotSupportedError";code="P5012";constructor(e){super("Engine version is not supported",me(e,!1))}};ne(df,"EngineVersionNotSupportedError");var ff="Request timed out",pf=class extends De{name="GatewayTimeoutError";code="P5009";constructor(e,t=ff){super(t,me(e,!1))}};ne(pf,"GatewayTimeoutError");var KE="Interactive transaction error",hf=class extends De{name="InteractiveTransactionError";code="P5015";constructor(e,t=KE){super(t,me(e,!1))}};ne(hf,"InteractiveTransactionError");var zE="Request parameters are invalid",mf=class extends De{name="InvalidRequestError";code="P5011";constructor(e,t=zE){super(t,me(e,!1))}};ne(mf,"InvalidRequestError");var gf="Requested resource does not exist",yf=class extends De{name="NotFoundError";code="P5003";constructor(e,t=gf){super(t,me(e,!1))}};ne(yf,"NotFoundError");var bf="Unknown server error",fa=class extends De{name="ServerError";code="P5006";logs;constructor(e,t,r){super(t||bf,me(e,!0)),this.logs=r}};ne(fa,"ServerError");var xf="Unauthorized, check your connection string",vf=class extends De{name="UnauthorizedError";code="P5007";constructor(e,t=xf){super(t,me(e,!1))}};ne(vf,"UnauthorizedError");var wf="Usage exceeded, retry again later",Sf=class extends De{name="UsageExceededError";code="P5008";constructor(e,t=wf){super(t,me(e,!0))}};ne(Sf,"UsageExceededError");async function JE(e){let t;try{t=await e.text()}catch{return{type:"EmptyError"}}try{let r=JSON.parse(t);if(typeof r=="string")switch(r){case"InternalDataProxyError":return{type:"DataProxyError",body:r};default:return{type:"UnknownTextError",body:r}}if(typeof r=="object"&&r!==null){if("is_panic"in r&&"message"in r&&"error_code"in r)return{type:"QueryEngineError",body:r};if("EngineNotStarted"in r||"InteractiveTransactionMisrouted"in r||"InvalidRequestError"in r){let i=Object.values(r)[0].reason;return typeof i=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(i)?{type:"UnknownJsonError",body:r}:{type:"DataProxyError",body:r}}}return{type:"UnknownJsonError",body:r}}catch{return t===""?{type:"EmptyError"}:{type:"UnknownTextError",body:t}}}async function Ui(e,t){if(e.ok)return;let r={clientVersion:t,response:e},i=await JE(e);if(i.type==="QueryEngineError")throw new At(i.body.message,{code:i.body.error_code,clientVersion:t});if(i.type==="DataProxyError"){if(i.body==="InternalDataProxyError")throw new fa(r,"Internal Data Proxy error");if("EngineNotStarted"in i.body){if(i.body.EngineNotStarted.reason==="SchemaMissing")return new Ma(r);if(i.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new df(r);if("EngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,logs:s}=i.body.EngineNotStarted.reason.EngineStartupError;throw new cf(r,n,s)}if("KnownEngineStartupError"in i.body.EngineNotStarted.reason){let{msg:n,error_code:s}=i.body.EngineNotStarted.reason.KnownEngineStartupError;throw new ae(n,t,s)}if("HealthcheckTimeout"in i.body.EngineNotStarted.reason){let{logs:n}=i.body.EngineNotStarted.reason.HealthcheckTimeout;throw new uf(r,n)}}if("InteractiveTransactionMisrouted"in i.body){let n={IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"};throw new hf(r,n[i.body.InteractiveTransactionMisrouted.reason])}if("InvalidRequestError"in i.body)throw new mf(r,i.body.InvalidRequestError.reason)}if(e.status===401||e.status===403)throw new vf(r,ir(xf,i));if(e.status===404)return new yf(r,ir(gf,i));if(e.status===429)throw new Sf(r,ir(wf,i));if(e.status===504)throw new pf(r,ir(ff,i));if(e.status>=500)throw new fa(r,ir(bf,i));if(e.status>=400)throw new lf(r,ir(of,i))}function ir(e,t){return t.type==="EmptyError"?e:`${e}: ${JSON.stringify(t)}`}function WE(e){let t=Math.pow(2,e)*50,r=Math.ceil(Math.random()*t)-Math.ceil(t/2),i=t+r;return new Promise(n=>setTimeout(()=>n(i),i))}var at="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function YE(e){let t=new TextEncoder().encode(e),r="",i=t.byteLength,n=i%3,s=i-n,a,o,l,u,c;for(let d=0;d<s;d=d+3)c=t[d]<<16|t[d+1]<<8|t[d+2],a=(c&16515072)>>18,o=(c&258048)>>12,l=(c&4032)>>6,u=c&63,r+=at[a]+at[o]+at[l]+at[u];return n==1?(c=t[s],a=(c&252)>>2,o=(c&3)<<4,r+=at[a]+at[o]+"=="):n==2&&(c=t[s]<<8|t[s+1],a=(c&64512)>>10,o=(c&1008)>>4,l=(c&15)<<2,r+=at[a]+at[o]+at[l]+"="),r}function XE(e){if(e.generator?.previewFeatures.some(t=>t.toLowerCase().includes("metrics")))throw new ae("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",e.clientVersion)}var ZE={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.19.0-26.2ba551f319ab1df4bc874a89965d8b3641056773","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},Ef=class extends dr{name="RequestError";code="P5010";constructor(e,t){super(`Cannot fetch data from service:
${e}`,me(t,!0))}};ne(Ef,"RequestError");async function Ur(e,t,r=i=>i){let{clientVersion:i,...n}=t,s=r(fetch);try{return await s(e,n)}catch(a){let o=a.message??"Unknown error";throw new Ef(o,{clientVersion:i,cause:a})}}var eA=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,Af=ve("prisma:client:dataproxyEngine");async function tA(e,t){let r=ZE["@prisma/engines-version"],i=t.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION||globalThis.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(e.includes("accelerate")&&i!=="0.0.0"&&i!=="in-memory")return i;let[n,s]=i?.split("-")??[];if(s===void 0&&eA.test(n))return n;if(s!==void 0||i==="0.0.0"||i==="in-memory"){let[a]=r.split("-")??[],[o,l,u]=a.split("."),c=iA(`<=${o}.${l}.${u}`),d=await Ur(c,{clientVersion:i});if(!d.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${d.status} ${d.statusText}, response body: ${await d.text()||"<empty body>"}`);let f=await d.text();Af("length of body fetched from unpkg.com",f.length);let p;try{p=JSON.parse(f)}catch(g){throw console.error("JSON.parse error: body fetched from unpkg.com: ",f),g}return p.version}throw new Fa("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:i})}async function rA(e,t){let r=await tA(e,t);return Af("version",r),r}function iA(e){return encodeURI(`https://unpkg.com/prisma@${e}/package.json`)}var nc=3,Pr=ve("prisma:client:dataproxyEngine"),nA=class{name="DataProxyEngine";inlineSchema;inlineSchemaHash;inlineDatasources;config;logEmitter;env;clientVersion;engineHash;tracingHelper;remoteClientVersion;host;headerBuilder;startPromise;protocol;constructor(e){XE(e),this.config=e,this.env=e.env,this.inlineSchema=YE(e.inlineSchema),this.inlineDatasources=e.inlineDatasources,this.inlineSchemaHash=e.inlineSchemaHash,this.clientVersion=e.clientVersion,this.engineHash=e.engineVersion,this.logEmitter=e.logEmitter,this.tracingHelper=e.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let{apiKey:e,url:t}=this.getURLAndAPIKey();this.host=t.host,this.protocol=t.protocol,this.headerBuilder=new HE({apiKey:e,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel??"error",logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await rA(this.host,this.config),Pr("host",this.host),Pr("protocol",this.protocol)})(),await this.startPromise}async stop(){}propagateResponseExtensions(e){e?.logs?.length&&e.logs.forEach(t=>{switch(t.level){case"debug":case"trace":Pr(t);break;case"error":case"warn":case"info":{this.logEmitter.emit(t.level,{timestamp:ic(t.timestamp),message:t.attributes.message??"",target:t.target??"BinaryEngine"});break}case"query":{this.logEmitter.emit("query",{query:t.attributes.query??"",timestamp:ic(t.timestamp),duration:t.attributes.duration_ms??0,params:t.attributes.params??"",target:t.target??"BinaryEngine"});break}default:t.level}}),e?.traces?.length&&this.tracingHelper.dispatchEngineSpans(e.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(e){return await this.start(),`${this.protocol}//${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${e}`}async uploadSchema(){let e={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(e,async()=>{let t=await Ur(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});t.ok||Pr("schema response status",t.status);let r=await Ui(t,this.clientVersion);if(r)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${r.message}`,timestamp:new Date,target:""}),r;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(e,{traceparent:t,interactiveTransaction:r,customDataProxyFetch:i}){return this.requestInternal({body:e,traceparent:t,interactiveTransaction:r,customDataProxyFetch:i})}async requestBatch(e,{traceparent:t,transaction:r,customDataProxyFetch:i}){let n=r?.kind==="itx"?r.options:void 0,s=Na(e,r);return(await this.requestInternal({body:s,customDataProxyFetch:i,interactiveTransaction:n,traceparent:t})).map(a=>(a.extensions&&this.propagateResponseExtensions(a.extensions),"errors"in a?this.convertProtocolErrorsToClientError(a.errors):a))}requestInternal({body:e,traceparent:t,customDataProxyFetch:r,interactiveTransaction:i}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:n})=>{let s=i?`${i.payload.endpoint}/graphql`:await this.url("graphql");n(s);let a=await Ur(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t,transactionId:i?.id}),body:JSON.stringify(e),clientVersion:this.clientVersion},r);a.ok||Pr("graphql response status",a.status),await this.handleError(await Ui(a,this.clientVersion));let o=await a.json();if(o.extensions&&this.propagateResponseExtensions(o.extensions),"errors"in o)throw this.convertProtocolErrorsToClientError(o.errors);return"batchResult"in o?o.batchResult:o}})}async transaction(e,t,r){let i={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${i[e]} transaction`,callback:async({logHttpCall:n})=>{if(e==="start"){let s=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel}),a=await this.url("transaction/start");n(a);let o=await Ur(a,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),body:s,clientVersion:this.clientVersion});await this.handleError(await Ui(o,this.clientVersion));let l=await o.json(),{extensions:u}=l;u&&this.propagateResponseExtensions(u);let c=l.id,d=l["data-proxy"].endpoint;return{id:c,payload:{endpoint:d}}}else{let s=`${r.payload.endpoint}/${e}`;n(s);let a=await Ur(s,{method:"POST",headers:this.headerBuilder.build({traceparent:t.traceparent}),clientVersion:this.clientVersion});await this.handleError(await Ui(a,this.clientVersion));let o=await a.json(),{extensions:l}=o;l&&this.propagateResponseExtensions(l);return}}})}getURLAndAPIKey(){return BE({clientVersion:this.clientVersion,env:this.env,inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources})}metrics(){throw new Fa("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(e){for(let t=0;;t++){let r=i=>{this.logEmitter.emit("info",{message:`Calling ${i} (n=${t})`,timestamp:new Date,target:""})};try{return await e.callback({logHttpCall:r})}catch(i){if(!(i instanceof dr)||!i.isRetryable)throw i;if(t>=nc)throw i instanceof da?i.cause:i;this.logEmitter.emit("warn",{message:`Attempt ${t+1}/${nc} failed for ${e.actionGerund}: ${i.message??"(unknown)"}`,timestamp:new Date,target:""});let n=await WE(t);this.logEmitter.emit("warn",{message:`Retrying after ${n}ms`,timestamp:new Date,target:""})}}}async handleError(e){if(e instanceof Ma)throw await this.uploadSchema(),new da({clientVersion:this.clientVersion,cause:e});if(e)throw e}convertProtocolErrorsToClientError(e){return e.length===1?Da(e[0],this.config.clientVersion,this.config.activeProvider):new Oe(JSON.stringify(e),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function sA(e){if(e?.kind==="itx")return e.options.id}var sc=H(require("node:os")),aA=H(require("node:path")),Ps=Symbol("PrismaLibraryEngineCache");function oA(){let e=globalThis;return e[Ps]===void 0&&(e[Ps]={}),e[Ps]}function lA(e){let t=oA();if(t[e]!==void 0)return t[e];let r=aA.default.toNamespacedPath(e),i={exports:{}},n=0;return process.platform!=="win32"&&(n=sc.default.constants.dlopen.RTLD_LAZY|sc.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(i,r,n),t[e]=i.exports,i.exports}var uA={async loadLibrary(e){let t=await D1(),r=await SE("library",e);try{return e.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>lA(r))}catch(i){let n=Ax({e:i,platformInfo:t,id:r});throw new ae(n,e.clientVersion)}}},Ns,cA={async loadLibrary(e){let{clientVersion:t,adapter:r,engineWasm:i}=e;if(r===void 0)throw new ae(`The \`adapter\` option for \`PrismaClient\` is required in this context (${af().prettyName})`,t);if(i===void 0)throw new ae("WASM engine was unexpectedly `undefined`",t);Ns===void 0&&(Ns=(async()=>{let s=await i.getRuntime(),a=await i.getQueryEngineWasmModule();if(a==null)throw new ae("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",t);let o={"./query_engine_bg.js":s},l=new WebAssembly.Instance(a,o),u=l.exports.__wbindgen_start;return s.__wbg_set_wasm(l.exports),u(),s.QueryEngine})());let n=await Ns;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:n}}},dA="P2036",Qe=ve("prisma:client:libraryEngine");function fA(e){return e.item_type==="query"&&"query"in e}function pA(e){return"level"in e?e.level==="error"&&e.message==="PANIC":!1}var ac=[...h1,"native"],hA=0xffffffffffffffffn,Ds=1n;function mA(){let e=Ds++;return Ds>hA&&(Ds=1n),e}var oc=class{name="LibraryEngine";engine;libraryInstantiationPromise;libraryStartingPromise;libraryStoppingPromise;libraryStarted;executingQueryPromise;config;QueryEngineConstructor;libraryLoader;library;logEmitter;libQueryEnginePath;binaryTarget;datasourceOverrides;datamodel;logQueries;logLevel;lastQuery;loggerRustPanic;tracingHelper;adapterPromise;versionInfo;constructor(e,t){this.libraryLoader=t??uA,e.engineWasm!==void 0&&(this.libraryLoader=t??cA),this.config=e,this.libraryStarted=!1,this.logQueries=e.logQueries??!1,this.logLevel=e.logLevel??"error",this.logEmitter=e.logEmitter,this.datamodel=e.inlineSchema,this.tracingHelper=e.tracingHelper,e.enableDebugLogs&&(this.logLevel="debug");let r=Object.keys(e.overrideDatasources)[0],i=e.overrideDatasources[r]?.url;r!==void 0&&i!==void 0&&(this.datasourceOverrides={[r]:i}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(e){return{applyPendingMigrations:e.applyPendingMigrations?.bind(e),commitTransaction:this.withRequestId(e.commitTransaction.bind(e)),connect:this.withRequestId(e.connect.bind(e)),disconnect:this.withRequestId(e.disconnect.bind(e)),metrics:e.metrics?.bind(e),query:this.withRequestId(e.query.bind(e)),rollbackTransaction:this.withRequestId(e.rollbackTransaction.bind(e)),sdlSchema:e.sdlSchema?.bind(e),startTransaction:this.withRequestId(e.startTransaction.bind(e)),trace:e.trace.bind(e),free:e.free?.bind(e)}}withRequestId(e){return async(...t)=>{let r=mA().toString();try{return await e(...t,r)}finally{if(this.tracingHelper.isEnabled()){let i=await this.engine?.trace(r);if(i){let n=JSON.parse(i);this.tracingHelper.dispatchEngineSpans(n.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(e,t,r){await this.start();let i=await this.adapterPromise,n=JSON.stringify(t),s;if(e==="start"){let o=JSON.stringify({max_wait:r.maxWait,timeout:r.timeout,isolation_level:r.isolationLevel});s=await this.engine?.startTransaction(o,n)}else e==="commit"?s=await this.engine?.commitTransaction(r.id,n):e==="rollback"&&(s=await this.engine?.rollbackTransaction(r.id,n));let a=this.parseEngineResponse(s);if(gA(a)){let o=this.getExternalAdapterError(a,i?.errorRegistry);throw o?o.error:new At(a.message,{code:a.error_code,clientVersion:this.config.clientVersion,meta:a.meta})}else if(typeof a.message=="string")throw new Oe(a.message,{clientVersion:this.config.clientVersion});return a}async instantiateLibrary(){if(Qe("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;p1(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let e=await this.tracingHelper.runInChildSpan("detect_platform",()=>ya());if(!ac.includes(e))throw new ae(`Unknown ${Qt("PRISMA_QUERY_ENGINE_LIBRARY")} ${Qt($e(e))}. Possible binaryTargets: ${Br(ac.join(", "))} or a path to the query engine library.
You may have to run ${Br("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return e}}parseEngineResponse(e){if(!e)throw new Oe("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(e)}catch{throw new Oe("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let e=new WeakRef(this);this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Du));let t=await this.adapterPromise;t&&Qe("Using driver adapter: %O",t),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},r=>{e.deref()?.logger(r)},t))}catch(e){let t=e,r=this.parseInitError(t.message);throw typeof r=="string"?t:new ae(r.message,this.config.clientVersion,r.error_code)}}}logger(e){let t=this.parseEngineResponse(e);t&&(t.level=t?.level.toLowerCase()??"unknown",fA(t)?this.logEmitter.emit("query",{timestamp:new Date,query:t.query,params:t.params,duration:Number(t.duration_ms),target:t.module_path}):pA(t)?this.loggerRustPanic=new St(Us(this,`${t.message}: ${t.reason} in ${t.file}:${t.line}:${t.column}`),this.config.clientVersion):this.logEmitter.emit(t.level,{timestamp:new Date,message:t.message,target:t.module_path}))}parseInitError(e){try{return JSON.parse(e)}catch{}return e}parseRequestError(e){try{return JSON.parse(e)}catch{}return e}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(this.libraryInstantiationPromise||(this.libraryInstantiationPromise=this.instantiateLibrary()),await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return Qe(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let e=async()=>{Qe("library starting");try{let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(t)),this.libraryStarted=!0,this.adapterPromise||(this.adapterPromise=this.config.adapter?.connect()?.then(Du)),await this.adapterPromise,Qe("library started")}catch(t){let r=this.parseInitError(t.message);throw typeof r=="string"?t:new ae(r.message,this.config.clientVersion,r.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",e),this.libraryStartingPromise}async stop(){if(await this.libraryInstantiationPromise,await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return Qe("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted){await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0;return}let e=async()=>{await new Promise(r=>setImmediate(r)),Qe("library stopping");let t={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(t)),this.engine?.free&&this.engine.free(),this.engine=void 0,this.libraryStarted=!1,this.libraryStoppingPromise=void 0,this.libraryInstantiationPromise=void 0,await(await this.adapterPromise)?.dispose(),this.adapterPromise=void 0,Qe("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",e),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(e){return this.library?.debugPanic(e)}async request(e,{traceparent:t,interactiveTransaction:r}){Qe(`sending request, this.libraryStarted: ${this.libraryStarted}`);let i=JSON.stringify({traceparent:t}),n=JSON.stringify(e);try{await this.start();let s=await this.adapterPromise;this.executingQueryPromise=this.engine?.query(n,i,r?.id),this.lastQuery=n;let a=this.parseEngineResponse(await this.executingQueryPromise);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],s?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:a}}catch(s){if(s instanceof ae)throw s;if(s.code==="GenericFailure"&&s.message?.startsWith("PANIC:"))throw new St(Us(this,s.message),this.config.clientVersion);let a=this.parseRequestError(s.message);throw typeof a=="string"?s:new Oe(`${a.message}
${a.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(e,{transaction:t,traceparent:r}){Qe("requestBatch");let i=Na(e,t);await this.start();let n=await this.adapterPromise;this.lastQuery=JSON.stringify(i),this.executingQueryPromise=this.engine?.query(this.lastQuery,JSON.stringify({traceparent:r}),sA(t));let s=await this.executingQueryPromise,a=this.parseEngineResponse(s);if(a.errors)throw a.errors.length===1?this.buildQueryError(a.errors[0],n?.errorRegistry):new Oe(JSON.stringify(a.errors),{clientVersion:this.config.clientVersion});let{batchResult:o,errors:l}=a;if(Array.isArray(o))return o.map(u=>u.errors&&u.errors.length>0?this.loggerRustPanic??this.buildQueryError(u.errors[0],n?.errorRegistry):{data:u});throw l&&l.length===1?new Error(l[0].error):new Error(JSON.stringify(a))}buildQueryError(e,t){if(e.user_facing_error.is_panic)return new St(Us(this,e.user_facing_error.message),this.config.clientVersion);let r=this.getExternalAdapterError(e.user_facing_error,t);return r?r.error:Da(e,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(e,t){if(e.error_code===dA&&t){let r=e.meta?.id;Fu(typeof r=="number","Malformed external JS error received from the engine");let i=t.consumeError(r);return Fu(i,"External error with reported id was not registered"),i}}async metrics(e){await this.start();let t=await this.engine.metrics(JSON.stringify(e));return e.format==="prometheus"?t:this.parseEngineResponse(t)}};function gA(e){return typeof e=="object"&&e!==null&&e.error_code!==void 0}function Us(e,t){return IE({binaryTarget:e.binaryTarget,title:t,version:e.config.clientVersion,engineVersion:e.versionInfo?.commit,database:e.config.activeProvider,query:e.lastQuery})}function yA({url:e,adapter:t,copyEngine:r,targetBuildType:i}){let n=[],s=[],a=h=>{n.push({_tag:"warning",value:h})},o=h=>{let E=h.join(`
`);s.push({_tag:"error",value:E})},l=!!e?.startsWith("prisma://"),u=Kc(e),c=!!t,d=l||u;!c&&r&&d&&i!=="client"&&i!=="wasm-compiler-edge"&&a(["recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"]);let f=d||!r;c&&(f||i==="edge")&&(i==="edge"?o(["Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint.","Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."]):d?o(["You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate.","Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."]):r||o(["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."]));let p={accelerate:f,ppg:u,driverAdapters:c};function g(h){return h.length>0}return g(s)?{ok:!1,diagnostics:{warnings:n,errors:s},isUsing:p}:{ok:!0,diagnostics:{warnings:n},isUsing:p}}function bA({copyEngine:e=!0},t){let r;try{r=La({inlineDatasources:t.inlineDatasources,overrideDatasources:t.overrideDatasources,env:{...t.env,...process.env},clientVersion:t.clientVersion})}catch{}let{ok:i,isUsing:n,diagnostics:s}=yA({url:r,adapter:t.adapter,copyEngine:e,targetBuildType:"library"});for(let d of s.warnings)ed(...d.value);if(!i){let d=s.errors[0];throw new lt(d.value,{clientVersion:t.clientVersion})}let a=Hs(t.generator),o=a==="library",l=a==="binary",u=a==="client",c=(n.accelerate||n.ppg)&&!n.driverAdapters;return n.accelerate?new nA(t):(n.driverAdapters,o?new oc(t):(n.accelerate,new oc(t)))}function xA({generator:e}){return e?.previewFeatures??[]}var vA=e=>({command:e}),wA=e=>e.strings.reduce((t,r,i)=>`${t}@P${i}${r}`);function Nr(e){try{return lc(e,"fast")}catch{return lc(e,"slow")}}function lc(e,t){return JSON.stringify(e.map(r=>Rf(r,t)))}function Rf(e,t){if(Array.isArray(e))return e.map(r=>Rf(r,t));if(typeof e=="bigint")return{prisma__type:"bigint",prisma__value:e.toString()};if(Ea(e))return{prisma__type:"date",prisma__value:e.toJSON()};if(an.isDecimal(e))return{prisma__type:"decimal",prisma__value:e.toJSON()};if(Buffer.isBuffer(e))return{prisma__type:"bytes",prisma__value:e.toString("base64")};if(SA(e))return{prisma__type:"bytes",prisma__value:Buffer.from(e).toString("base64")};if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:i,byteLength:n}=e;return{prisma__type:"bytes",prisma__value:Buffer.from(r,i,n).toString("base64")}}return typeof e=="object"&&t==="slow"?kf(e):e}function SA(e){return e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?!0:typeof e=="object"&&e!==null?e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer":!1}function kf(e){if(typeof e!="object"||e===null)return e;if(typeof e.toJSON=="function")return e.toJSON();if(Array.isArray(e))return e.map(uc);let t={};for(let r of Object.keys(e))t[r]=uc(e[r]);return t}function uc(e){return typeof e=="bigint"?e.toString():kf(e)}var EA=/^(\s*alter\s)/i,cc=ve("prisma:client");function dc(e,t,r,i){if(!(e!=="postgresql"&&e!=="cockroachdb")&&r.length>0&&EA.exec(t))throw new Error(`Running ALTER using ${i} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var fc=({clientMethod:e,activeProvider:t})=>r=>{let i="",n;if(Hd(r))i=r.sql,n={values:Nr(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[s,...a]=r;i=s,n={values:Nr(a||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{i=r.sql,n={values:Nr(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{i=r.text,n={values:Nr(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{i=wA(r),n={values:Nr(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return n?.values?cc(`prisma.${e}(${i}, ${n.values})`):cc(`prisma.${e}(${i})`),{query:i,parameters:n}},AA={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Tt(t,r)}},RA={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function pc(e){return function(t,r){let i,n=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=hc(t(s)):hc(t(s))}catch(a){return Promise.reject(a)}};return{get spec(){return r},then(s,a){return n().then(s,a)},catch(s){return n().catch(s)},finally(s){return n().finally(s)},requestTransaction(s){let a=n(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function hc(e){return typeof e.then=="function"?e:Promise.resolve(e)}var kA=gx.split(".")[0],TA={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},IA=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(e){return this.getGlobalTracingHelper().getTraceParent(e)}dispatchEngineSpans(e){return this.getGlobalTracingHelper().dispatchEngineSpans(e)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(e,t){return this.getGlobalTracingHelper().runInChildSpan(e,t)}getGlobalTracingHelper(){let e=globalThis[`V${kA}_PRISMA_INSTRUMENTATION`],t=globalThis.PRISMA_INSTRUMENTATION;return e?.helper??t?.helper??TA}};function OA(){return new IA}function _A(e,t=()=>{}){let r,i=new Promise(n=>r=n);return{then(n){return--e===0&&r(t()),n?.(i)}}}function qA(e){return typeof e=="string"?e:e.reduce((t,r)=>{let i=typeof r=="string"?r:r.level;return i==="query"?t:t&&(r==="info"||t==="info")?"info":i},void 0)}function Tf(e){return typeof e.batchRequestIdx=="number"}function CA(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(pa(e.query.arguments)),t.push(pa(e.query.selection)),t.join("")}function pa(e){return`(${Object.keys(e).sort().map(t=>{let r=e[t];return typeof r=="object"&&r!==null?`(${t} ${pa(r)})`:t}).join(" ")})`}var PA={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function mc(e){return PA[e]}var NA=class{constructor(e){this.options=e,this.batches={}}batches;tickActive=!1;request(e){let t=this.options.batchBy(e);return t?(this.batches[t]||(this.batches[t]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((r,i)=>{this.batches[t].push({request:e,resolve:r,reject:i})})):this.options.singleLoader(e)}dispatchBatches(){for(let e in this.batches){let t=this.batches[e];delete this.batches[e],t.length===1?this.options.singleLoader(t[0].request).then(r=>{r instanceof Error?t[0].reject(r):t[0].resolve(r)}).catch(r=>{t[0].reject(r)}):(t.sort((r,i)=>this.options.batchOrder(r.request,i.request)),this.options.batchLoader(t.map(r=>r.request)).then(r=>{if(r instanceof Error)for(let i=0;i<t.length;i++)t[i].reject(r);else for(let i=0;i<t.length;i++){let n=r[i];n instanceof Error?t[i].reject(n):t[i].resolve(n)}}).catch(r=>{for(let i=0;i<t.length;i++)t[i].reject(r)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function Gt(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:i,byteLength:n}=Buffer.from(t,"base64");return new Uint8Array(r,i,n)}case"decimal":return new an(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Gt("bigint",r));case"bytes-array":return t.map(r=>Gt("bytes",r));case"decimal-array":return t.map(r=>Gt("decimal",r));case"datetime-array":return t.map(r=>Gt("datetime",r));case"date-array":return t.map(r=>Gt("date",r));case"time-array":return t.map(r=>Gt("time",r));default:return t}}function If(e){let t=[],r=DA(e);for(let i=0;i<e.rows.length;i++){let n=e.rows[i],s={...r};for(let a=0;a<n.length;a++)s[e.columns[a]]=Gt(e.types[a],n[a]);t.push(s)}return t}function DA(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var UA=ve("prisma:client:request_handler"),LA=class{client;dataloader;logEmitter;constructor(e,t){this.logEmitter=t,this.client=e,this.dataloader=new NA({batchLoader:dE(async({requests:r,customDataProxyFetch:i})=>{let{transaction:n,otelParentCtx:s}=r[0],a=r.map(u=>u.protocolQuery),o=this.client._tracingHelper.getTraceParent(s),l=r.some(u=>mc(u.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:o,transaction:FA(n),containsWrite:l,customDataProxyFetch:i})).map((u,c)=>{if(u instanceof Error)return u;try{return this.mapQueryEngineResult(r[c],u)}catch(d){return d}})}),singleLoader:async r=>{let i=r.transaction?.kind==="itx"?Of(r.transaction):void 0,n=await this.client._engine.request(r.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:mc(r.protocolQuery.action),customDataProxyFetch:r.customDataProxyFetch});return this.mapQueryEngineResult(r,n)},batchBy:r=>r.transaction?.id?`transaction-${r.transaction.id}`:CA(r.protocolQuery),batchOrder(r,i){return r.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?r.transaction.index-i.transaction.index:0}})}async request(e){try{return await this.dataloader.request(e)}catch(t){let{clientMethod:r,callsite:i,transaction:n,args:s,modelName:a}=e;this.handleAndLogRequestError({error:t,clientMethod:r,callsite:i,transaction:n,args:s,modelName:a,globalOmit:e.globalOmit})}}mapQueryEngineResult({dataPath:e,unpacker:t},r){let i=r?.data,n=this.unpack(i,e,t);return process.env.PRISMA_CLIENT_GET_TIME?{data:n}:n}handleAndLogRequestError(e){try{this.handleRequestError(e)}catch(t){throw this.logEmitter&&this.logEmitter.emit("error",{message:t.message,target:e.clientMethod,timestamp:new Date}),t}}handleRequestError({error:e,clientMethod:t,callsite:r,transaction:i,args:n,modelName:s,globalOmit:a}){if(UA(e),MA(e,i))throw e;if(e instanceof At&&jA(e)){let l=_f(e.meta);Pd({args:n,errors:[l],callsite:r,errorFormat:this.client._errorFormat,originalMethod:t,clientVersion:this.client._clientVersion,globalOmit:a})}let o=e.message;if(r&&(o=md({callsite:r,originalMethod:t,isPanic:e.isPanic,showColors:this.client._errorFormat==="pretty",message:o})),o=this.sanitizeMessage(o),e.code){let l=s?{modelName:s,...e.meta}:e.meta;throw new At(o,{code:e.code,clientVersion:this.client._clientVersion,meta:l,batchRequestIdx:e.batchRequestIdx})}else{if(e.isPanic)throw new St(o,this.client._clientVersion);if(e instanceof Oe)throw new Oe(o,{clientVersion:this.client._clientVersion,batchRequestIdx:e.batchRequestIdx});if(e instanceof ae)throw new ae(o,this.client._clientVersion);if(e instanceof St)throw new St(o,this.client._clientVersion)}throw e.clientVersion=this.client._clientVersion,e}sanitizeMessage(e){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Ks(e):e}unpack(e,t,r){if(!e||(e.data&&(e=e.data),!e))return e;let i=Object.keys(e)[0],n=Object.values(e)[0],s=t.filter(l=>l!=="select"&&l!=="include"),a=Wd(n,s),o=i==="queryRaw"?If(a):Xi(a);return r?r(o):o}get[Symbol.toStringTag](){return"RequestHandler"}};function FA(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:Of(e)};Sa(e,"Unknown transaction kind")}}function Of(e){return{id:e.id,payload:e.payload}}function MA(e,t){return Tf(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function jA(e){return e.code==="P2009"||e.code==="P2012"}function _f(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(_f)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var $A=PE,VA=H(kc()),Y=class extends Error{constructor(e){super(e+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};ne(Y,"PrismaClientConstructorValidationError");var gc=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],yc=["pretty","colorless","minimal"],bc=["info","query","warn","error"],BA={datasources:(e,{datasourceNames:t})=>{if(e){if(typeof e!="object"||Array.isArray(e))throw new Y(`Invalid value ${JSON.stringify(e)} for "datasources" provided to PrismaClient constructor`);for(let[r,i]of Object.entries(e)){if(!t.includes(r)){let n=nr(r,t)||` Available datasources: ${t.join(", ")}`;throw new Y(`Unknown datasource ${r} provided to PrismaClient constructor.${n}`)}if(typeof i!="object"||Array.isArray(i))throw new Y(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(i&&typeof i=="object")for(let[n,s]of Object.entries(i)){if(n!=="url")throw new Y(`Invalid value ${JSON.stringify(e)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof s!="string")throw new Y(`Invalid value ${JSON.stringify(s)} for datasource "${r}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(e,t)=>{if(!e&&Hs(t.generator)==="client")throw new Y('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(e!==null){if(e===void 0)throw new Y('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(Hs(t.generator)==="binary")throw new Y('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')}},datasourceUrl:e=>{if(typeof e<"u"&&typeof e!="string")throw new Y(`Invalid value ${JSON.stringify(e)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:e=>{if(e){if(typeof e!="string")throw new Y(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!yc.includes(e)){let t=nr(e,yc);throw new Y(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new Y(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!bc.includes(r)){let i=nr(r,bc);throw new Y(`Invalid log level "${r}" provided to PrismaClient constructor.${i}`)}}for(let r of e){t(r);let i={level:t,emit:n=>{let s=["stdout","event"];if(!s.includes(n)){let a=nr(n,s);throw new Y(`Invalid value ${JSON.stringify(n)} for "emit" in logLevel provided to PrismaClient constructor.${a}`)}}};if(r&&typeof r=="object")for(let[n,s]of Object.entries(r))if(i[n])i[n](s);else throw new Y(`Invalid property ${n} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new Y(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new Y(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new Y('"omit" option is expected to be an object.');if(e===null)throw new Y('"omit" option can not be `null`');let r=[];for(let[i,n]of Object.entries(e)){let s=QA(i,t.runtimeDataModel);if(!s){r.push({kind:"UnknownModel",modelKey:i});continue}for(let[a,o]of Object.entries(n)){let l=s.fields.find(u=>u.name===a);if(!l){r.push({kind:"UnknownField",modelKey:i,fieldName:a});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:i,fieldName:a});continue}typeof o!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:i,fieldName:a})}}if(r.length>0)throw new Y(KA(e,r))},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new Y(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let i=nr(r,t);throw new Y(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${i}`)}}};function GA(e,t){for(let[r,i]of Object.entries(e)){if(!gc.includes(r)){let n=nr(r,gc);throw new Y(`Unknown property ${r} provided to PrismaClient constructor.${n}`)}BA[r](i,t)}if(e.datasourceUrl&&e.datasources)throw new Y('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function nr(e,t){if(t.length===0||typeof e!="string")return"";let r=HA(e,t);return r?` Did you mean "${r}"?`:""}function HA(e,t){if(t.length===0)return null;let r=t.map(n=>({value:n,distance:(0,VA.default)(e,n)}));r.sort((n,s)=>n.distance<s.distance?-1:1);let i=r[0];return i.distance<3?i.value:null}function QA(e,t){return xc(t.models,e)??xc(t.types,e)}function xc(e,t){let r=Object.keys(e).find(i=>tn(i)===t);if(r)return e[r]}function KA(e,t){let r=qa(e);for(let s of t)switch(s.kind){case"UnknownModel":r.arguments.getField(s.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${s.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${s.modelKey}" does not have a field named "${s.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([s.modelKey,s.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:i,args:n}=Cd(r,"colorless");return`Error validating "omit" option:

${n}

${i}`}function zA(e){return e.length===0?Promise.resolve([]):new Promise((t,r)=>{let i=new Array(e.length),n=null,s=!1,a=0,o=()=>{s||(a++,a===e.length&&(s=!0,n?r(n):t(i)))},l=u=>{s||(s=!0,r(u))};for(let u=0;u<e.length;u++)e[u].then(c=>{i[u]=c,o()},c=>{if(!Tf(c)){l(c);return}c.batchRequestIdx===u?l(c):(n||(n=c),o())})})}var mt=ve("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var JA={requestArgsToMiddlewareArgs:e=>e,middlewareArgsToRequestArgs:e=>e},WA=Symbol.for("prisma.client.transaction.id"),YA={id:0,nextId(){return++this.id}};function XA(e){class t{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=pc();constructor(i){e=i?.__internal?.configOverride?.(e)??e,fE(e),i&&GA(i,e);let n=new aS.EventEmitter().on("error",()=>{});this._extensions=Nd.empty(),this._previewFeatures=xA(e),this._clientVersion=e.clientVersion??$A,this._activeProvider=e.activeProvider,this._globalOmit=i?.omit,this._tracingHelper=OA();let s=e.relativeEnvPaths&&{rootEnvPath:e.relativeEnvPaths.rootEnvPath&&Cs.default.resolve(e.dirname,e.relativeEnvPaths.rootEnvPath),schemaEnvPath:e.relativeEnvPaths.schemaEnvPath&&Cs.default.resolve(e.dirname,e.relativeEnvPaths.schemaEnvPath)},a;if(i?.adapter){a=i.adapter;let l=e.activeProvider==="postgresql"||e.activeProvider==="cockroachdb"?"postgres":e.activeProvider;if(a.provider!==l)throw new ae(`The Driver Adapter \`${a.adapterName}\`, based on \`${a.provider}\`, is not compatible with the provider \`${l}\` specified in the Prisma schema.`,this._clientVersion);if(i.datasources||i.datasourceUrl!==void 0)throw new ae("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let o=!a&&s&&Yc(s,{conflictCheck:"none"})||e.injectableEdgeEnv?.();try{let l=i??{},u=l.__internal??{},c=u.debug===!0;c&&ve.enable("prisma:client");let d=Cs.default.resolve(e.dirname,e.relativePath);oS.default.existsSync(d)||(d=e.dirname),mt("dirname",e.dirname),mt("relativePath",e.relativePath),mt("cwd",d);let f=u.engine||{};if(l.errorFormat?this._errorFormat=l.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=e.runtimeDataModel,this._engineConfig={cwd:d,dirname:e.dirname,enableDebugLogs:c,allowTriggerPanic:f.allowTriggerPanic,prismaPath:f.binaryPath??void 0,engineEndpoint:f.endpoint,generator:e.generator,showColors:this._errorFormat==="pretty",logLevel:l.log&&qA(l.log),logQueries:l.log&&!!(typeof l.log=="string"?l.log==="query":l.log.find(p=>typeof p=="string"?p==="query":p.level==="query")),env:o?.parsed??{},flags:[],engineWasm:e.engineWasm,compilerWasm:e.compilerWasm,clientVersion:e.clientVersion,engineVersion:e.engineVersion,previewFeatures:this._previewFeatures,activeProvider:e.activeProvider,inlineSchema:e.inlineSchema,overrideDatasources:pE(l,e.datasourceNames),inlineDatasources:e.inlineDatasources,inlineSchemaHash:e.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:l.transactionOptions?.maxWait??2e3,timeout:l.transactionOptions?.timeout??5e3,isolationLevel:l.transactionOptions?.isolationLevel},logEmitter:n,isBundled:e.isBundled,adapter:a},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:La,getBatchRequestPayload:Na,prismaGraphQLToJSError:Da,PrismaClientUnknownRequestError:Oe,PrismaClientInitializationError:ae,PrismaClientKnownRequestError:At,debug:ve("prisma:client:accelerateEngine"),engineVersion:nS.version,clientVersion:e.clientVersion}},mt("clientVersion",e.clientVersion),this._engine=bA(e,this._engineConfig),this._requestHandler=new LA(this,n),l.log)for(let p of l.log){let g=typeof p=="string"?p:p.emit==="stdout"?p.level:null;g&&this.$on(g,h=>{Qs.log(`${Qs.tags[g]??""}`,h.message||h.query)})}}catch(l){throw l.clientVersion=this._clientVersion,l}return this._appliedParent=ca(this)}get[Symbol.toStringTag](){return"PrismaClient"}$on(i,n){return i==="beforeExit"?this._engine.onBeforeExit(n):i&&this._engineConfig.logEmitter.on(i,n),this}$connect(){try{return this._engine.start()}catch(i){throw i.clientVersion=this._clientVersion,i}}async $disconnect(){try{await this._engine.stop()}catch(i){throw i.clientVersion=this._clientVersion,i}finally{d1()}}$executeRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"executeRaw",args:s,transaction:i,clientMethod:n,argsMapper:fc({clientMethod:n,activeProvider:o}),callsite:$r(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$executeRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0){let[a,o]=vc(i,n);return dc(this._activeProvider,a.text,a.values,Array.isArray(i)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(s,"$executeRaw",a,o)}throw new lt("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(i,...n){return this._createPrismaPromise(s=>(dc(this._activeProvider,i,n,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(s,"$executeRawUnsafe",[i,...n])))}$runCommandRaw(i){if(e.activeProvider!=="mongodb")throw new lt(`The ${e.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(n=>this._request({args:i,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:vA,callsite:$r(this._errorFormat),transaction:n}))}async $queryRawInternal(i,n,s,a){let o=this._activeProvider;return this._request({action:"queryRaw",args:s,transaction:i,clientMethod:n,argsMapper:fc({clientMethod:n,activeProvider:o}),callsite:$r(this._errorFormat),dataPath:[],middlewareArgsMapper:a})}$queryRaw(i,...n){return this._createPrismaPromise(s=>{if(i.raw!==void 0||i.sql!==void 0)return this.$queryRawInternal(s,"$queryRaw",...vc(i,n));throw new lt("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(i){return this._createPrismaPromise(n=>{if(!this._hasPreviewFlag("typedSql"))throw new lt("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(n,"$queryRawTyped",i)})}$queryRawUnsafe(i,...n){return this._createPrismaPromise(s=>this.$queryRawInternal(s,"$queryRawUnsafe",[i,...n]))}_transactionWithArray({promises:i,options:n}){let s=YA.nextId(),a=_A(i.length),o=i.map((l,u)=>{if(l?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let c=n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,d={kind:"batch",id:s,index:u,isolationLevel:c,lock:a};return l.requestTransaction?.(d)??l});return zA(o)}async _transactionWithCallback({callback:i,options:n}){let s={traceparent:this._tracingHelper.getTraceParent()},a={maxWait:n?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:n?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:n?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},o=await this._engine.transaction("start",s,a),l;try{let u={kind:"itx",...o};l=await i(this._createItxClient(u)),await this._engine.transaction("commit",s,o)}catch(u){throw await this._engine.transaction("rollback",s,o).catch(()=>{}),u}return l}_createItxClient(i){return cr(ca(cr(ZS(this),[Xe("_appliedParent",()=>this._appliedParent._createItxClient(i)),Xe("_createPrismaPromise",()=>pc(i)),Xe(WA,()=>i.id)])),[oa(aE)])}$transaction(i,n){let s;typeof i=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?s=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:s=()=>this._transactionWithCallback({callback:i,options:n}):s=()=>this._transactionWithArray({promises:i,options:n});let a={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(a,s)}_request(i){i.otelParentCtx=this._tracingHelper.getActiveContext();let n=i.middlewareArgsMapper??JA,s={args:n.requestArgsToMiddlewareArgs(i.args),dataPath:i.dataPath,runInTransaction:!!i.transaction,action:i.action,model:i.model},a={operation:{name:"operation",attributes:{method:s.action,model:s.model,name:s.model?`${s.model}.${s.action}`:s.action}}},o=async l=>{let{runInTransaction:u,args:c,...d}=l,f={...i,...d};c&&(f.args=n.middlewareArgsToRequestArgs(c)),i.transaction!==void 0&&u===!1&&delete f.transaction;let p=await cE(this,f);return f.model?nE({result:p,modelName:f.model,args:f.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):p};return this._tracingHelper.runInChildSpan(a.operation,()=>new sS.AsyncResource("prisma-client-request").runInAsyncScope(()=>o(s)))}async _executeRequest({args:i,clientMethod:n,dataPath:s,callsite:a,action:o,model:l,argsMapper:u,transaction:c,unpacker:d,otelParentCtx:f,customDataProxyFetch:p}){try{i=u?u(i):i;let g={name:"serialize"},h=this._tracingHelper.runInChildSpan(g,()=>jd({modelName:l,runtimeDataModel:this._runtimeDataModel,action:o,args:i,clientMethod:n,callsite:a,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return ve.enabled("prisma:client")&&(mt("Prisma Client call:"),mt(`prisma.${n}(${fS(i)})`),mt("Generated request:"),mt(JSON.stringify(h,null,2)+`
`)),c?.kind==="batch"&&await c.lock,this._requestHandler.request({protocolQuery:h,modelName:l,action:o,clientMethod:n,dataPath:s,callsite:a,args:i,extensions:this._extensions,transaction:c,unpacker:d,otelParentCtx:f,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:p})}catch(g){throw g.clientVersion=this._clientVersion,g}}$metrics=new Bd(this);_hasPreviewFlag(i){return!!this._engineConfig.previewFeatures?.includes(i)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}$extends=eE}return t}function vc(e,t){return ZA(e)?[new Tt(e,t),AA]:[e,RA]}function ZA(e){return Array.isArray(e)&&Array.isArray(e.raw)}var eR=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function tR(e){return new Proxy(e,{get(t,r){if(r in t)return t[r];if(!eR.has(r))throw new TypeError(`Invalid enum value: ${String(r)}`)}})}function rR(e){Yc(e,{conflictCheck:"warn"})}});var Nf=m(D=>{Object.defineProperty(D,"__esModule",{value:!0});var{PrismaClientKnownRequestError:iR,PrismaClientUnknownRequestError:nR,PrismaClientRustPanicError:sR,PrismaClientInitializationError:aR,PrismaClientValidationError:oR,getPrismaClient:lR,sqltag:uR,empty:cR,join:dR,raw:fR,skip:gN,Decimal:pR,Debug:yN,objectEnumValues:fr,makeStrictEnum:hR,Extensions:Pf,warnOnce:bN,defineDmmfProperty:mR,Public:gR,getRuntime:xN,createParam:vN}=ja(),z={};D.Prisma=z;D.$Enums={};z.prismaVersion={client:"6.19.0",engine:"2ba551f319ab1df4bc874a89965d8b3641056773"};z.PrismaClientKnownRequestError=iR;z.PrismaClientUnknownRequestError=nR;z.PrismaClientRustPanicError=sR;z.PrismaClientInitializationError=aR;z.PrismaClientValidationError=oR;z.Decimal=pR;z.sql=uR;z.empty=cR;z.join=dR;z.raw=fR;z.validator=gR.validator;z.getExtensionContext=Pf.getExtensionContext;z.defineExtension=Pf.defineExtension;z.DbNull=fr.instances.DbNull;z.JsonNull=fr.instances.JsonNull;z.AnyNull=fr.instances.AnyNull;z.NullTypes={DbNull:fr.classes.DbNull,JsonNull:fr.classes.JsonNull,AnyNull:fr.classes.AnyNull};var dt=require("path");D.Prisma.TransactionIsolationLevel=hR({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});D.Prisma.UserScalarFieldEnum={id:"id",username:"username",email:"email",normalizedEmail:"normalizedEmail",password:"password",displayName:"displayName",bio:"bio",avatar:"avatar",name:"name",role:"role",emailVerified:"emailVerified",emailVerifiedAt:"emailVerifiedAt",twoFactorEnabled:"twoFactorEnabled",twoFactorSecret:"twoFactorSecret",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ScriptScalarFieldEnum={id:"id",title:"title",summary:"summary",authorId:"authorId",createdAt:"createdAt"};D.Prisma.AuditionScalarFieldEnum={id:"id",title:"title",summary:"summary",hostId:"hostId",createdAt:"createdAt"};D.Prisma.PostScalarFieldEnum={id:"id",content:"content",media:"media",authorId:"authorId",createdAt:"createdAt"};D.Prisma.ReelScalarFieldEnum={id:"id",videoUrl:"videoUrl",thumbnail:"thumbnail",caption:"caption",authorId:"authorId",createdAt:"createdAt"};D.Prisma.CommentScalarFieldEnum={id:"id",text:"text",reelId:"reelId",authorId:"authorId",createdAt:"createdAt"};D.Prisma.LikeScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};D.Prisma.BookmarkScalarFieldEnum={id:"id",reelId:"reelId",userId:"userId",createdAt:"createdAt"};D.Prisma.ConversationScalarFieldEnum={id:"id",title:"title",lastMessage:"lastMessage",lastMessageAt:"lastMessageAt",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ConversationParticipantScalarFieldEnum={id:"id",conversationId:"conversationId",userId:"userId",joinedAt:"joinedAt"};D.Prisma.MessageScalarFieldEnum={id:"id",text:"text",conversationId:"conversationId",senderId:"senderId",createdAt:"createdAt"};D.Prisma.NotificationScalarFieldEnum={id:"id",type:"type",message:"message",recipientId:"recipientId",triggererId:"triggererId",isRead:"isRead",metadata:"metadata",createdAt:"createdAt"};D.Prisma.ConnectionRequestScalarFieldEnum={id:"id",senderId:"senderId",receiverId:"receiverId",status:"status",message:"message",createdAt:"createdAt"};D.Prisma.ProfileScalarFieldEnum={id:"id",userId:"userId",vanityUrl:"vanityUrl",headline:"headline",bio:"bio",roles:"roles",location:"location",privacy:"privacy",tags:"tags",socialLinks:"socialLinks",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.MediaScalarFieldEnum={id:"id",profileId:"profileId",type:"type",s3Key:"s3Key",posterS3Key:"posterS3Key",title:"title",description:"description",duration:"duration",width:"width",height:"height",fileSize:"fileSize",privacy:"privacy",processedStatus:"processedStatus",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.CreditScalarFieldEnum={id:"id",profileId:"profileId",title:"title",role:"role",company:"company",year:"year",description:"description",orderIndex:"orderIndex",metadata:"metadata",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.UserSettingsScalarFieldEnum={id:"id",userId:"userId",notifications:"notifications",accountSecurity:"accountSecurity",privacy:"privacy",billing:"billing",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ReelRequestScalarFieldEnum={id:"id",mediaId:"mediaId",requesterId:"requesterId",ownerId:"ownerId",status:"status",message:"message",response:"response",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.EmailVerificationTokenScalarFieldEnum={id:"id",userId:"userId",token:"token",expiresAt:"expiresAt",createdAt:"createdAt"};D.Prisma.RefreshTokenScalarFieldEnum={id:"id",userId:"userId",jti:"jti",expiresAt:"expiresAt",invalidatedAt:"invalidatedAt",createdAt:"createdAt",lastUsedAt:"lastUsedAt"};D.Prisma.PRIntelligenceScalarFieldEnum={id:"id",prNumber:"prNumber",changedFilesCount:"changedFilesCount",sensitivePathsCount:"sensitivePathsCount",riskScore:"riskScore",metadata:"metadata",createdAt:"createdAt"};D.Prisma.TestRunScalarFieldEnum={id:"id",suite:"suite",testName:"testName",status:"status",durationMs:"durationMs",runAt:"runAt",metadata:"metadata"};D.Prisma.ModerationReportScalarFieldEnum={id:"id",reporterId:"reporterId",targetType:"targetType",targetId:"targetId",category:"category",description:"description",evidenceUrls:"evidenceUrls",status:"status",severity:"severity",createdAt:"createdAt",updatedAt:"updatedAt"};D.Prisma.ModerationActionScalarFieldEnum={id:"id",reportId:"reportId",action:"action",reason:"reason",actorId:"actorId",createdAt:"createdAt"};D.Prisma.AnalyticsEventScalarFieldEnum={id:"id",event:"event",anonId:"anonId",userId:"userId",sessionId:"sessionId",properties:"properties",createdAt:"createdAt"};D.Prisma.SortOrder={asc:"asc",desc:"desc"};D.Prisma.NullableJsonNullValueInput={DbNull:z.DbNull,JsonNull:z.JsonNull};D.Prisma.JsonNullValueInput={JsonNull:z.JsonNull};D.Prisma.QueryMode={default:"default",insensitive:"insensitive"};D.Prisma.NullsOrder={first:"first",last:"last"};D.Prisma.JsonNullValueFilter={DbNull:z.DbNull,JsonNull:z.JsonNull,AnyNull:z.AnyNull};D.Prisma.ModelName={User:"User",Script:"Script",Audition:"Audition",Post:"Post",Reel:"Reel",Comment:"Comment",Like:"Like",Bookmark:"Bookmark",Conversation:"Conversation",ConversationParticipant:"ConversationParticipant",Message:"Message",Notification:"Notification",ConnectionRequest:"ConnectionRequest",Profile:"Profile",Media:"Media",Credit:"Credit",UserSettings:"UserSettings",ReelRequest:"ReelRequest",EmailVerificationToken:"EmailVerificationToken",RefreshToken:"RefreshToken",PRIntelligence:"PRIntelligence",TestRun:"TestRun",ModerationReport:"ModerationReport",ModerationAction:"ModerationAction",AnalyticsEvent:"AnalyticsEvent"};var Te={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\node_modules\\@prisma\\client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"rhel-openssl-3.0.x"}],previewFeatures:[],sourceFilePath:"C:\\Users\\ghawk\\Documents\\GitHub\\Project-Valine\\serverless\\prisma\\schema.prisma"},relativeEnvPaths:{rootEnvPath:null},relativePath:"../../../prisma",clientVersion:"6.19.0",engineVersion:"2ba551f319ab1df4bc874a89965d8b3641056773",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(uuid())
  username         String    @unique
  email            String    @unique
  normalizedEmail  String?   @unique // Lowercase normalized email for case-insensitive lookups
  password         String // hashed password
  displayName      String
  bio              String?
  avatar           String?
  name             String?
  role             String    @default("artist") // 'artist' | 'observer'
  emailVerified    Boolean   @default(false)
  emailVerifiedAt  DateTime?
  twoFactorEnabled Boolean   @default(false)
  twoFactorSecret  String? // Encrypted or hashed TOTP secret
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  scripts              Script[]
  auditions            Audition[]
  posts                Post[]
  reels                Reel[]
  comments             Comment[]
  likes                Like[]
  bookmarks            Bookmark[]
  sentRequests         ConnectionRequest[]       @relation("sender")
  receivedRequests     ConnectionRequest[]       @relation("receiver")
  sentMessages         Message[]                 @relation("sender")
  conversations        ConversationParticipant[]
  notifications        Notification[]            @relation("recipient")
  triggeredNotifs      Notification[]            @relation("triggerer")
  profile              Profile?
  settings             UserSettings?
  sentReelRequests     ReelRequest[]             @relation("requester")
  receivedReelRequests ReelRequest[]             @relation("owner")
  verificationTokens   EmailVerificationToken[]
  refreshTokens        RefreshToken[]

  @@map("users")
}

model Script {
  id        String   @id @default(cuid())
  title     String
  summary   String
  authorId  String
  author    User     @relation(fields: [authorId], references: [id])
  createdAt DateTime @default(now())
}

model Audition {
  id        String   @id @default(cuid())
  title     String
  summary   String
  hostId    String
  host      User     @relation(fields: [hostId], references: [id])
  createdAt DateTime @default(now())
}

model Post {
  id        String   @id @default(uuid())
  content   String   @db.Text
  media     String[]
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([authorId])
  @@map("posts")
}

model Reel {
  id        String   @id @default(uuid())
  videoUrl  String
  thumbnail String?
  caption   String?  @db.Text
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  comments  Comment[]
  likes     Like[]
  bookmarks Bookmark[]

  @@index([authorId])
  @@index([createdAt])
  @@map("reels")
}

model Comment {
  id        String   @id @default(uuid())
  text      String   @db.Text
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  authorId  String
  author    User     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([reelId])
  @@index([authorId])
  @@map("comments")
}

model Like {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("likes")
}

model Bookmark {
  id        String   @id @default(uuid())
  reelId    String
  reel      Reel     @relation(fields: [reelId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([reelId, userId])
  @@index([reelId])
  @@index([userId])
  @@map("bookmarks")
}

model Conversation {
  id            String    @id @default(uuid())
  title         String?
  lastMessage   String?   @db.Text
  lastMessageAt DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  participants ConversationParticipant[]
  messages     Message[]

  @@map("conversations")
}

model ConversationParticipant {
  id             String       @id @default(uuid())
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  userId         String
  user           User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  joinedAt       DateTime     @default(now())

  @@unique([conversationId, userId])
  @@index([userId])
  @@map("conversation_participants")
}

model Message {
  id             String       @id @default(uuid())
  text           String       @db.Text
  conversationId String
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  senderId       String
  sender         User         @relation("sender", fields: [senderId], references: [id], onDelete: Cascade)
  createdAt      DateTime     @default(now())

  @@index([conversationId])
  @@index([senderId])
  @@map("messages")
}

model Notification {
  id          String   @id @default(uuid())
  type        String // 'like', 'comment', 'follow', 'message'
  message     String   @db.Text
  recipientId String
  recipient   User     @relation("recipient", fields: [recipientId], references: [id], onDelete: Cascade)
  triggererId String?
  triggerer   User?    @relation("triggerer", fields: [triggererId], references: [id], onDelete: SetNull)
  isRead      Boolean  @default(false)
  metadata    Json? // Additional data like reelId, commentId, etc.
  createdAt   DateTime @default(now())

  @@index([recipientId, isRead])
  @@index([createdAt])
  @@map("notifications")
}

model ConnectionRequest {
  id         String   @id @default(uuid())
  senderId   String
  sender     User     @relation("sender", fields: [senderId], references: [id])
  receiverId String
  receiver   User     @relation("receiver", fields: [receiverId], references: [id])
  status     String   @default("pending")
  message    String?
  createdAt  DateTime @default(now())

  @@unique([senderId, receiverId])
  @@map("connection_requests")
}

model Profile {
  id          String   @id @default(uuid())
  userId      String   @unique
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  vanityUrl   String   @unique
  headline    String?
  bio         String?  @db.Text
  roles       String[] // ["Actor", "Director", "Writer"]
  location    Json? // { city: "Los Angeles", state: "CA", country: "USA" }
  privacy     Json     @default("{}") // { visibility: "public|network|private", showEmail: false, showPhone: false }
  tags        String[] // searchable tags
  socialLinks Json? // { website: "", instagram: "", imdb: "" }
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  media   Media[]
  credits Credit[]

  @@index([vanityUrl])
  @@index([roles])
  @@map("profiles")
}

model Media {
  id              String   @id @default(uuid())
  profileId       String
  profile         Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  type            String // "image" | "video" | "pdf"
  s3Key           String // S3 object key
  posterS3Key     String? // For videos - thumbnail/poster frame
  title           String?
  description     String?  @db.Text
  duration        Int? // For videos in seconds
  width           Int?
  height          Int?
  fileSize        Int? // In bytes
  privacy         String   @default("public") // "public" | "on-request" | "private"
  processedStatus String   @default("pending") // "pending" | "processing" | "complete" | "failed"
  metadata        Json? // Additional metadata like tags, derivatives, etc.
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  reelRequests ReelRequest[]

  @@index([profileId])
  @@index([type])
  @@index([privacy])
  @@index([processedStatus])
  @@map("media")
}

model Credit {
  id          String   @id @default(uuid())
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  title       String // Project/show title
  role        String // Character or position
  company     String? // Production company
  year        Int?
  description String?  @db.Text
  orderIndex  Int      @default(0) // For custom ordering
  metadata    Json? // Additional fields like genre, awards, etc.
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([profileId])
  @@index([year])
  @@map("credits")
}

model UserSettings {
  id              String   @id @default(uuid())
  userId          String   @unique
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  notifications   Json     @default("{}") // { email: true, push: true, reelRequests: true, messages: true }
  accountSecurity Json     @default("{}") // { twoFactorEnabled: false, loginNotifications: true }
  privacy         Json     @default("{}") // { showActivity: true, allowMessagesFrom: "everyone" }
  billing         Json? // Reference to billing info (not stored directly for PCI compliance)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("user_settings")
}

model ReelRequest {
  id          String   @id @default(uuid())
  mediaId     String
  media       Media    @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  requesterId String
  requester   User     @relation("requester", fields: [requesterId], references: [id], onDelete: Cascade)
  ownerId     String
  owner       User     @relation("owner", fields: [ownerId], references: [id], onDelete: Cascade)
  status      String   @default("pending") // "pending" | "approved" | "denied"
  message     String?  @db.Text
  response    String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([mediaId, requesterId])
  @@index([mediaId])
  @@index([requesterId])
  @@index([ownerId, status])
  @@map("reel_requests")
}

model EmailVerificationToken {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@index([userId])
  @@index([token])
  @@map("email_verification_tokens")
}

model RefreshToken {
  id            String    @id @default(uuid())
  userId        String
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  jti           String    @unique // JWT ID for tracking
  expiresAt     DateTime
  invalidatedAt DateTime? // When token was invalidated (logout)
  createdAt     DateTime  @default(now())
  lastUsedAt    DateTime  @default(now())

  @@index([userId])
  @@index([jti])
  @@index([userId, invalidatedAt])
  @@map("refresh_tokens")
}

model PRIntelligence {
  id                  String   @id @default(uuid())
  prNumber            Int
  changedFilesCount   Int
  sensitivePathsCount Int
  riskScore           Float
  metadata            Json? // Additional PR metadata
  createdAt           DateTime @default(now())

  @@index([prNumber])
  @@index([riskScore])
  @@map("pr_intelligence")
}

model TestRun {
  id         String   @id @default(uuid())
  suite      String
  testName   String
  status     String // "passed" | "failed" | "skipped"
  durationMs Int
  runAt      DateTime @default(now())
  metadata   Json? // Additional test metadata

  @@index([suite, testName])
  @@index([runAt])
  @@index([status])
  @@map("test_runs")
}

model ModerationReport {
  id           String   @id @default(cuid())
  reporterId   String
  targetType   String // "user" | "profile" | "post" | "comment" | "link"
  targetId     String
  category     String // from REPORT_CATEGORY_ALLOWLIST
  description  String?  @db.Text
  evidenceUrls String[] @default([])
  status       String   @default("open") // "open" | "reviewed" | "actioned" | "dismissed"
  severity     Int      @default(0) // 0=info,1=low,2=med,3=high
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  actions ModerationAction[]

  @@index([reporterId])
  @@index([targetType, targetId])
  @@index([status])
  @@index([category])
  @@index([severity])
  @@index([createdAt])
  @@map("moderation_reports")
}

model ModerationAction {
  id        String   @id @default(cuid())
  reportId  String
  action    String // "allow" | "remove" | "ban" | "warn"
  reason    String?  @db.Text
  actorId   String // admin userId
  createdAt DateTime @default(now())

  report ModerationReport @relation(fields: [reportId], references: [id], onDelete: Cascade)

  @@index([reportId])
  @@index([actorId])
  @@index([createdAt])
  @@map("moderation_actions")
}

model AnalyticsEvent {
  id         String   @id @default(cuid())
  event      String
  anonId     String? // random UUID per browser (cookie); no userId unless strictly needed
  userId     String? // optional: only if user is logged in AND consented (flag controlled)
  sessionId  String? // generated client-side ephemeral (no personal data)
  properties Json?
  createdAt  DateTime @default(now())

  @@index([event])
  @@index([createdAt])
  @@map("analytics_events")
}
`,inlineSchemaHash:"7e2e2a26a1c41eb103ff9d68413a3e4434415fea613cb1fa8dc67b1314b1865b",copyEngine:!0},Cf=require("fs");Te.dirname=__dirname;if(!Cf.existsSync(dt.join(__dirname,"schema.prisma"))){let e=["node_modules/.prisma/client",".prisma/client"],t=e.find(r=>Cf.existsSync(dt.join(process.cwd(),r,"schema.prisma")))??e[0];Te.dirname=dt.join(process.cwd(),t),Te.isBundled=!0}Te.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":"users","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"username","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"normalizedEmail","kind":"scalar","isList":false,"isRequired":false,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"displayName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"avatar","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"artist","isGenerated":false,"isUpdatedAt":false},{"name":"emailVerified","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"emailVerifiedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorEnabled","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"twoFactorSecret","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"scripts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Script","nativeType":null,"relationName":"ScriptToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"auditions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Audition","nativeType":null,"relationName":"AuditionToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"posts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Post","nativeType":null,"relationName":"PostToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"reels","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"ReelToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConnectionRequest","nativeType":null,"relationName":"receiver","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentMessages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"sender","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"conversations","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"recipient","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"triggeredNotifs","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Notification","nativeType":null,"relationName":"triggerer","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"ProfileToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"settings","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"UserSettings","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"sentReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"requester","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"receivedReelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"owner","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"verificationTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"EmailVerificationToken","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"refreshTokens","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"RefreshToken","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Script":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ScriptToUser","relationFromFields":["authorId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Audition":{"dbName":null,"schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"summary","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"hostId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"host","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"AuditionToUser","relationFromFields":["hostId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Post":{"dbName":"posts","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"content","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"PostToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Reel":{"dbName":"reels","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"videoUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"thumbnail","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"caption","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ReelToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"comments","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Comment","nativeType":null,"relationName":"CommentToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"likes","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Like","nativeType":null,"relationName":"LikeToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"bookmarks","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Bookmark","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Comment":{"dbName":"comments","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"CommentToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"authorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"author","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"CommentToUser","relationFromFields":["authorId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Like":{"dbName":"likes","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"LikeToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"LikeToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Bookmark":{"dbName":"bookmarks","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"reelId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reel","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Reel","nativeType":null,"relationName":"BookmarkToReel","relationFromFields":["reelId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"BookmarkToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["reelId","userId"]],"uniqueIndexes":[{"name":null,"fields":["reelId","userId"]}],"isGenerated":false},"Conversation":{"dbName":"conversations","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessage","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"lastMessageAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"participants","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ConversationParticipant","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"messages","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Message","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConversationParticipant":{"dbName":"conversation_participants","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToConversationParticipant","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ConversationParticipantToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"joinedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["conversationId","userId"]],"uniqueIndexes":[{"name":null,"fields":["conversationId","userId"]}],"isGenerated":false},"Message":{"dbName":"messages","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"conversationId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"conversation","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Conversation","nativeType":null,"relationName":"ConversationToMessage","relationFromFields":["conversationId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Notification":{"dbName":"notifications","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"recipientId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"recipient","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"recipient","relationFromFields":["recipientId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"triggererId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"triggerer","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"triggerer","relationFromFields":["triggererId"],"relationToFields":["id"],"relationOnDelete":"SetNull","isGenerated":false,"isUpdatedAt":false},{"name":"isRead","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ConnectionRequest":{"dbName":"connection_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"senderId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sender","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"sender","relationFromFields":["senderId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"receiverId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"receiver","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"receiver","relationFromFields":["receiverId"],"relationToFields":["id"],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["senderId","receiverId"]],"uniqueIndexes":[{"name":null,"fields":["senderId","receiverId"]}],"isGenerated":false},"Profile":{"dbName":"profiles","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"ProfileToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"vanityUrl","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"headline","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"bio","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"roles","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"location","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"tags","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"socialLinks","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"media","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"credits","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Credit","nativeType":null,"relationName":"CreditToProfile","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Media":{"dbName":"media","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"MediaToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"type","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"s3Key","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"posterS3Key","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"duration","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"width","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"height","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"fileSize","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"public","isGenerated":false,"isUpdatedAt":false},{"name":"processedStatus","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"reelRequests","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ReelRequest","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Credit":{"dbName":"credits","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"profileId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"profile","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Profile","nativeType":null,"relationName":"CreditToProfile","relationFromFields":["profileId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"title","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"company","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"year","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"orderIndex","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"UserSettings":{"dbName":"user_settings","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"UserToUserSettings","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"notifications","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"accountSecurity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"privacy","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Json","nativeType":null,"default":"{}","isGenerated":false,"isUpdatedAt":false},{"name":"billing","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ReelRequest":{"dbName":"reel_requests","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"mediaId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"media","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Media","nativeType":null,"relationName":"MediaToReelRequest","relationFromFields":["mediaId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"requesterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"requester","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"requester","relationFromFields":["requesterId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"ownerId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"owner","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"owner","relationFromFields":["ownerId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"pending","isGenerated":false,"isUpdatedAt":false},{"name":"message","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"response","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true}],"primaryKey":null,"uniqueFields":[["mediaId","requesterId"]],"uniqueIndexes":[{"name":null,"fields":["mediaId","requesterId"]}],"isGenerated":false},"EmailVerificationToken":{"dbName":"email_verification_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"EmailVerificationTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"token","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"RefreshToken":{"dbName":"refresh_tokens","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"RefreshTokenToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"jti","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"invalidatedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"lastUsedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"PRIntelligence":{"dbName":"pr_intelligence","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"prNumber","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"changedFilesCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sensitivePathsCount","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"riskScore","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"TestRun":{"dbName":"test_runs","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"uuid","args":[4]},"isGenerated":false,"isUpdatedAt":false},{"name":"suite","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"testName","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"durationMs","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"runAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"metadata","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationReport":{"dbName":"moderation_reports","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reporterId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetType","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"targetId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"category","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"evidenceUrls","kind":"scalar","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":[],"isGenerated":false,"isUpdatedAt":false},{"name":"status","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"open","isGenerated":false,"isUpdatedAt":false},{"name":"severity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"actions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationAction","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ModerationAction":{"dbName":"moderation_actions","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"reportId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"action","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"reason","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":["Text",[]],"isGenerated":false,"isUpdatedAt":false},{"name":"actorId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"report","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ModerationReport","nativeType":null,"relationName":"ModerationActionToModerationReport","relationFromFields":["reportId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"AnalyticsEvent":{"dbName":"analytics_events","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"event","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"anonId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sessionId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"properties","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Json","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{},"types":{}}');mR(D.Prisma,Te.runtimeDataModel);Te.engineWasm=void 0;Te.compilerWasm=void 0;var{warnEnvConflicts:yR}=ja();yR({rootEnvPath:Te.relativeEnvPaths.rootEnvPath&&dt.resolve(Te.dirname,Te.relativeEnvPaths.rootEnvPath),schemaEnvPath:Te.relativeEnvPaths.schemaEnvPath&&dt.resolve(Te.dirname,Te.relativeEnvPaths.schemaEnvPath)});var bR=lR(Te);D.PrismaClient=bR;Object.assign(D,z);dt.join(__dirname,"libquery_engine-rhel-openssl-3.0.x.so.node");dt.join(process.cwd(),"node_modules/.prisma/client/libquery_engine-rhel-openssl-3.0.x.so.node");dt.join(__dirname,"schema.prisma");dt.join(process.cwd(),"node_modules/.prisma/client/schema.prisma")});var Uf=m((SN,Df)=>{Df.exports={...Nf()}});var Ff=m((EN,Lf)=>{Lf.exports={...Uf()}});var ap={};Iu(ap,{compare:()=>Wf,compareSync:()=>Jf,decodeBase64:()=>np,default:()=>sp,encodeBase64:()=>ip,genSalt:()=>Ga,genSaltSync:()=>hn,getRounds:()=>Yf,getSalt:()=>Xf,hash:()=>Qa,hashSync:()=>Ha,setRandomFallback:()=>Kf,truncates:()=>Zf});function SR(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return Qf.default.randomBytes(e)}catch{}if(!Va)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Va(e)}function Kf(e){Va=e}function hn(e,t){if(e=e||Ka,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2b$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(pn(SR(ii),ii)),r.join("")}function Ga(e,t,r){if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function"&&(r=e,e=void 0),typeof e>"u")e=Ka;else if(typeof e!="number")throw Error("illegal arguments: "+typeof e);function i(n){Be(function(){try{n(null,hn(e))}catch(s){n(s)}})}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);i(r)}else return new Promise(function(n,s){i(function(a,o){if(a){s(a);return}n(o)})})}function Ha(e,t){if(typeof t>"u"&&(t=Ka),typeof t=="number"&&(t=hn(t)),typeof e!="string"||typeof t!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof t);return Ba(e,t)}function Qa(e,t,r,i){function n(s){typeof e=="string"&&typeof t=="number"?Ga(t,function(a,o){Ba(e,o,s,i)}):typeof e=="string"&&typeof t=="string"?Ba(e,t,s,i):Be(s.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);n(r)}else return new Promise(function(s,a){n(function(o,l){if(o){a(o);return}s(l)})})}function zf(e,t){for(var r=e.length^t.length,i=0;i<e.length;++i)r|=e.charCodeAt(i)^t.charCodeAt(i);return r===0}function Jf(e,t){if(typeof e!="string"||typeof t!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof t);return t.length!==60?!1:zf(Ha(e,t.substring(0,t.length-31)),t)}function Wf(e,t,r,i){function n(s){if(typeof e!="string"||typeof t!="string"){Be(s.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(t.length!==60){Be(s.bind(this,null,!1));return}Qa(e,t.substring(0,29),function(a,o){a?s(a):s(null,zf(o,t))},i)}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);n(r)}else return new Promise(function(s,a){n(function(o,l){if(o){a(o);return}s(l)})})}function Yf(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)}function Xf(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);if(e.length!==60)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)}function Zf(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return ep(e)>72}function ep(e){for(var t=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t}function ER(e){for(var t=0,r,i,n=new Array(ep(e)),s=0,a=e.length;s<a;++s)r=e.charCodeAt(s),r<128?n[t++]=r:r<2048?(n[t++]=r>>6|192,n[t++]=r&63|128):(r&64512)===55296&&((i=e.charCodeAt(s+1))&64512)===56320?(r=65536+((r&1023)<<10)+(i&1023),++s,n[t++]=r>>18|240,n[t++]=r>>12&63|128,n[t++]=r>>6&63|128,n[t++]=r&63|128):(n[t++]=r>>12|224,n[t++]=r>>6&63|128,n[t++]=r&63|128);return n}function pn(e,t){var r=0,i=[],n,s;if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;r<t;){if(n=e[r++]&255,i.push(hr[n>>2&63]),n=(n&3)<<4,r>=t){i.push(hr[n&63]);break}if(s=e[r++]&255,n|=s>>4&15,i.push(hr[n&63]),n=(s&15)<<2,r>=t){i.push(hr[n&63]);break}s=e[r++]&255,n|=s>>6&3,i.push(hr[n&63]),i.push(hr[s&63])}return i.join("")}function tp(e,t){var r=0,i=e.length,n=0,s=[],a,o,l,u,c,d;if(t<=0)throw Error("Illegal len: "+t);for(;r<i-1&&n<t&&(d=e.charCodeAt(r++),a=d<Ot.length?Ot[d]:-1,d=e.charCodeAt(r++),o=d<Ot.length?Ot[d]:-1,!(a==-1||o==-1||(c=a<<2>>>0,c|=(o&48)>>4,s.push(String.fromCharCode(c)),++n>=t||r>=i)||(d=e.charCodeAt(r++),l=d<Ot.length?Ot[d]:-1,l==-1)||(c=(o&15)<<4>>>0,c|=(l&60)>>2,s.push(String.fromCharCode(c)),++n>=t||r>=i)));)d=e.charCodeAt(r++),u=d<Ot.length?Ot[d]:-1,c=(l&3)<<6>>>0,c|=u,s.push(String.fromCharCode(c)),++n;var f=[];for(r=0;r<n;r++)f.push(s[r].charCodeAt(0));return f}function ni(e,t,r,i){var n,s=e[t],a=e[t+1];return s^=r[0],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[1],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[2],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[3],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[4],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[5],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[6],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[7],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[8],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[9],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[10],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[11],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[12],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[13],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[14],n=i[s>>>24],n+=i[256|s>>16&255],n^=i[512|s>>8&255],n+=i[768|s&255],a^=n^r[15],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],s^=n^r[16],e[t]=a^r[AR+1],e[t+1]=s,e}function mr(e,t){for(var r=0,i=0;r<4;++r)i=i<<8|e[t]&255,t=(t+1)%e.length;return{key:i,offp:t}}function Gf(e,t,r){for(var i=0,n=[0,0],s=t.length,a=r.length,o,l=0;l<s;l++)o=mr(e,i),i=o.offp,t[l]=t[l]^o.key;for(l=0;l<s;l+=2)n=ni(n,0,t,r),t[l]=n[0],t[l+1]=n[1];for(l=0;l<a;l+=2)n=ni(n,0,t,r),r[l]=n[0],r[l+1]=n[1]}function kR(e,t,r,i){for(var n=0,s=[0,0],a=r.length,o=i.length,l,u=0;u<a;u++)l=mr(t,n),n=l.offp,r[u]=r[u]^l.key;for(n=0,u=0;u<a;u+=2)l=mr(e,n),n=l.offp,s[0]^=l.key,l=mr(e,n),n=l.offp,s[1]^=l.key,s=ni(s,0,r,i),r[u]=s[0],r[u+1]=s[1];for(u=0;u<o;u+=2)l=mr(e,n),n=l.offp,s[0]^=l.key,l=mr(e,n),n=l.offp,s[1]^=l.key,s=ni(s,0,r,i),i[u]=s[0],i[u+1]=s[1]}function Hf(e,t,r,i,n){var s=rp.slice(),a=s.length,o;if(r<4||r>31)if(o=Error("Illegal number of rounds (4-31): "+r),i){Be(i.bind(this,o));return}else throw o;if(t.length!==ii)if(o=Error("Illegal salt length: "+t.length+" != "+ii),i){Be(i.bind(this,o));return}else throw o;r=1<<r>>>0;var l,u,c=0,d;typeof Int32Array=="function"?(l=new Int32Array(Vf),u=new Int32Array(Bf)):(l=Vf.slice(),u=Bf.slice()),kR(t,e,l,u);function f(){if(n&&n(c/r),c<r)for(var g=Date.now();c<r&&(c=c+1,Gf(e,l,u),Gf(t,l,u),!(Date.now()-g>RR)););else{for(c=0;c<64;c++)for(d=0;d<a>>1;d++)ni(s,d<<1,l,u);var h=[];for(c=0;c<a;c++)h.push((s[c]>>24&255)>>>0),h.push((s[c]>>16&255)>>>0),h.push((s[c]>>8&255)>>>0),h.push((s[c]&255)>>>0);if(i){i(null,h);return}else return h}i&&Be(f)}if(typeof i<"u")f();else for(var p;;)if(typeof(p=f())<"u")return p||[]}function Ba(e,t,r,i){var n;if(typeof e!="string"||typeof t!="string")if(n=Error("Invalid string / salt: Not a string"),r){Be(r.bind(this,n));return}else throw n;var s,a;if(t.charAt(0)!=="$"||t.charAt(1)!=="2")if(n=Error("Invalid salt version: "+t.substring(0,2)),r){Be(r.bind(this,n));return}else throw n;if(t.charAt(2)==="$")s="\0",a=3;else{if(s=t.charAt(2),s!=="a"&&s!=="b"&&s!=="y"||t.charAt(3)!=="$")if(n=Error("Invalid salt revision: "+t.substring(2,4)),r){Be(r.bind(this,n));return}else throw n;a=4}if(t.charAt(a+2)>"$")if(n=Error("Missing salt rounds"),r){Be(r.bind(this,n));return}else throw n;var o=parseInt(t.substring(a,a+1),10)*10,l=parseInt(t.substring(a+1,a+2),10),u=o+l,c=t.substring(a+3,a+25);e+=s>="a"?"\0":"";var d=ER(e),f=tp(c,ii);function p(g){var h=[];return h.push("$2"),s>="a"&&h.push(s),h.push("$"),u<10&&h.push("0"),h.push(u.toString()),h.push("$"),h.push(pn(f,f.length)),h.push(pn(g,rp.length*4-1)),h.join("")}if(typeof r>"u")return p(Hf(d,f,u));Hf(d,f,u,function(g,h){g?r(g,null):r(null,p(h))},i)}function ip(e,t){return pn(e,t)}function np(e,t){return tp(e,t)}var Qf,Va,Be,hr,Ot,ii,Ka,AR,RR,Vf,Bf,rp,sp,za=Eb(()=>{Qf=rr(require("crypto"),1),Va=null;Be=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;hr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ot=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];ii=16,Ka=10,AR=16,RR=100,Vf=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Bf=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],rp=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];sp={setRandomFallback:Kf,genSaltSync:hn,genSalt:Ga,hashSync:Ha,hash:Qa,compareSync:Jf,compare:Wf,getRounds:Yf,getSalt:Xf,truncates:Zf,encodeBase64:ip,decodeBase64:np}});var lp=m(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});function TR(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var op=TR(require("crypto")),IR=(e,t,r)=>op.createHmac(e,Buffer.from(t,"hex")).update(Buffer.from(r,"hex")).digest().toString("hex"),OR=(e,t)=>op.randomBytes(e).toString(t);mn.createDigest=IR;mn.createRandomBytes=OR});var cp=m(Ja=>{"use strict";var _R="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",up=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function qR(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1}Ja.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t=0,r=0,i=0,n=0,s=new Buffer(qR(e)*8);t<e.length;){var a=e[t];i>3?(n=a&255>>i,i=(i+5)%8,n=n<<i|(t+1<e.length?e[t+1]:0)>>8-i,t++):(n=a>>8-(i+5)&31,i=(i+5)%8,i===0&&t++),s[r]=_R.charCodeAt(n),r++}for(t=r;t<s.length;t++)s[t]=61;return s};Ja.decode=function(e){var t=0,r=0,i,n=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var s=new Buffer(Math.ceil(e.length*5/8)),a=0;a<e.length&&e[a]!==61;a++){var o=e[a]-48;if(o<up.length)r=up[o],t<=3?(t=(t+5)%8,t===0?(i|=r,s[n]=i,n++,i=0):i|=255&r<<8-t):(t=(t+5)%8,i|=255&r>>>t,s[n]=i,n++,i=255&r<<8-t);else throw new Error("Invalid input - it is not base32 encoded string")}return s.slice(0,n)}});var fp=m(Wa=>{var dp=cp();Wa.encode=dp.encode;Wa.decode=dp.decode});var hp=m(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});function CR(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var pp=CR(fp()),PR=(e,t)=>pp.decode(e).toString(t),NR=(e,t)=>pp.encode(Buffer.from(e,t).toString("ascii")).toString().replace(/=/g,"");gn.keyDecoder=PR;gn.keyEncoder=NR});var Up=m(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});function Sn(e){return Object.keys(e).map(t=>e[t])}(function(e){e.SHA1="sha1",e.SHA256="sha256",e.SHA512="sha512"})(w.HashAlgorithms||(w.HashAlgorithms={}));var bn=Sn(w.HashAlgorithms);(function(e){e.ASCII="ascii",e.BASE64="base64",e.HEX="hex",e.LATIN1="latin1",e.UTF8="utf8"})(w.KeyEncodings||(w.KeyEncodings={}));var Ya=Sn(w.KeyEncodings);(function(e){e.HOTP="hotp",e.TOTP="totp"})(w.Strategy||(w.Strategy={}));var Xa=Sn(w.Strategy),En=()=>{throw new Error("Please provide an options.createDigest implementation.")};function to(e){return/^(\d+)$/.test(e)}function ro(e,t,r){return e.length>=t?e:`${Array(t+1).join(r)}${e}`.slice(-1*t)}function io(e){let t=`otpauth://${e.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,r=[];if(Xa.indexOf(e.type)<0)throw new Error(`Expecting options.type to be one of ${Xa.join(", ")}. Received ${e.type}.`);if(e.type==="hotp"){if(e.counter==null||typeof e.counter!="number")throw new Error('Expecting options.counter to be a number when options.type is "hotp".');r.push(`&counter=${e.counter}`)}return e.type==="totp"&&e.step&&r.push(`&period=${e.step}`),e.digits&&r.push(`&digits=${e.digits}`),e.algorithm&&r.push(`&algorithm=${e.algorithm.toUpperCase()}`),e.issuer&&r.push(`&issuer=${encodeURIComponent(e.issuer)}`),t.replace("{labelPrefix}",encodeURIComponent(e.issuer||e.accountName)).replace("{accountName}",encodeURIComponent(e.accountName)).replace("{secret}",e.secret).replace("{query}",r.join(""))}var xn=class e{constructor(t={}){this._defaultOptions=Object.freeze({...t}),this._options=Object.freeze({})}create(t={}){return new e(t)}clone(t={}){let r=this.create({...this._defaultOptions,...t});return r.options=this._options,r}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(t){this._options=Object.freeze({...this._options,...t})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}};function no(e){if(typeof e.createDigest!="function")throw new Error("Expecting options.createDigest to be a function.");if(typeof e.createHmacKey!="function")throw new Error("Expecting options.createHmacKey to be a function.");if(typeof e.digits!="number")throw new Error("Expecting options.digits to be a number.");if(!e.algorithm||bn.indexOf(e.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${bn.join(", ")}. Received ${e.algorithm}.`);if(!e.encoding||Ya.indexOf(e.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${Ya.join(", ")}. Received ${e.encoding}.`)}var gp=(e,t,r)=>Buffer.from(t,r).toString("hex");function yp(){return{algorithm:w.HashAlgorithms.SHA1,createHmacKey:gp,createDigest:En,digits:6,encoding:w.KeyEncodings.ASCII}}function bp(e){let t={...yp(),...e};return no(t),Object.freeze(t)}function xp(e){let t=e.toString(16);return ro(t,16,"0")}function vp(e,t){let r=Buffer.from(e,"hex"),i=r[r.length-1]&15,s=((r[i]&127)<<24|(r[i+1]&255)<<16|(r[i+2]&255)<<8|r[i+3]&255)%Math.pow(10,t);return ro(String(s),t,"0")}function DR(e,t,r){let i=xp(t),n=r.createHmacKey(r.algorithm,e,r.encoding);return r.createDigest(r.algorithm,n,i)}function An(e,t,r){let i=r.digest||DR(e,t,r);return vp(i,r.digits)}function wp(e,t,r,i){if(!to(e))return!1;let n=An(t,r,i);return e===n}function Sp(e,t,r,i,n){return io({algorithm:n.algorithm,digits:n.digits,type:w.Strategy.HOTP,accountName:e,counter:i,issuer:t,secret:r})}var vn=class e extends xn{create(t={}){return new e(t)}allOptions(){return bp(this.options)}generate(t,r){return An(t,r,this.allOptions())}check(t,r,i){return wp(t,r,i,this.allOptions())}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret,t.counter)}keyuri(t,r,i,n){return Sp(t,r,i,n,this.allOptions())}};function Ep(e){if(typeof e=="number")return[Math.abs(e),Math.abs(e)];if(Array.isArray(e)){let[t,r]=e;if(typeof t=="number"&&typeof r=="number")return[Math.abs(t),Math.abs(r)]}throw new Error("Expecting options.window to be an number or [number, number].")}function so(e){if(no(e),Ep(e.window),typeof e.epoch!="number")throw new Error("Expecting options.epoch to be a number.");if(typeof e.step!="number")throw new Error("Expecting options.step to be a number.")}var yn=(e,t,r)=>{let i=e.length,n=Buffer.from(e,t).toString("hex");if(i<r){let s=new Array(r-i+1).join(n);return Buffer.from(s,"hex").slice(0,r).toString("hex")}return n},ao=(e,t,r)=>{switch(e){case w.HashAlgorithms.SHA1:return yn(t,r,20);case w.HashAlgorithms.SHA256:return yn(t,r,32);case w.HashAlgorithms.SHA512:return yn(t,r,64);default:throw new Error(`Expecting algorithm to be one of ${bn.join(", ")}. Received ${e}.`)}};function Ap(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:En,createHmacKey:ao,digits:6,encoding:w.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function Rp(e){let t={...Ap(),...e};return so(t),Object.freeze(t)}function kp(e,t){return Math.floor(e/t/1e3)}function Rn(e,t){let r=kp(t.epoch,t.step);return An(e,r,t)}function mp(e,t,r,i){let n=[];if(i===0)return n;for(let s=1;s<=i;s++){let a=t*s*r;n.push(e+a)}return n}function Tp(e,t,r){let i=Ep(r),n=t*1e3;return{current:e,past:mp(e,-1,n,i[0]),future:mp(e,1,n,i[1])}}function oo(e,t,r){if(!to(e))return!1;let i=Rn(t,r);return e===i}function Za(e,t,r,i){let n=null;return e.some((s,a)=>oo(t,r,{...i,epoch:s})?(n=a+1,!0):!1),n}function lo(e,t,r){if(oo(e,t,r))return 0;let i=Tp(r.epoch,r.step,r.window),n=Za(i.past,e,t,r);return n!==null?n*-1:Za(i.future,e,t,r)}function uo(e,t){return Math.floor(e/1e3)%t}function Ip(e,t){return t-uo(e,t)}function Op(e,t,r,i){return io({algorithm:i.algorithm,digits:i.digits,step:i.step,type:w.Strategy.TOTP,accountName:e,issuer:t,secret:r})}var wn=class e extends vn{create(t={}){return new e(t)}allOptions(){return Rp(this.options)}generate(t){return Rn(t,this.allOptions())}checkDelta(t,r){return lo(t,r,this.allOptions())}check(t,r){return typeof this.checkDelta(t,r)=="number"}verify(t){if(typeof t!="object")throw new Error("Expecting argument 0 of verify to be an object");return this.check(t.token,t.secret)}timeRemaining(){let t=this.allOptions();return Ip(t.epoch,t.step)}timeUsed(){let t=this.allOptions();return uo(t.epoch,t.step)}keyuri(t,r,i){return Op(t,r,i,this.allOptions())}};function _p(e){if(so(e),typeof e.keyDecoder!="function")throw new Error("Expecting options.keyDecoder to be a function.");if(e.keyEncoder&&typeof e.keyEncoder!="function")throw new Error("Expecting options.keyEncoder to be a function.")}function qp(){return{algorithm:w.HashAlgorithms.SHA1,createDigest:En,createHmacKey:ao,digits:6,encoding:w.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function Cp(e){let t={...qp(),...e};return _p(t),Object.freeze(t)}function co(e,t){return t.keyEncoder(e,t.encoding)}function kn(e,t){return t.keyDecoder(e,t.encoding)}function Pp(e,t){let r=t.createRandomBytes(e,t.encoding);return co(r,t)}function Np(e,t){return Rn(kn(e,t),t)}function Dp(e,t,r){return lo(e,kn(t,r),r)}var eo=class e extends wn{create(t={}){return new e(t)}allOptions(){return Cp(this.options)}generate(t){return Np(t,this.allOptions())}checkDelta(t,r){return Dp(t,r,this.allOptions())}encode(t){return co(t,this.allOptions())}decode(t){return kn(t,this.allOptions())}generateSecret(t=10){return Pp(t,this.allOptions())}};w.Authenticator=eo;w.HASH_ALGORITHMS=bn;w.HOTP=vn;w.KEY_ENCODINGS=Ya;w.OTP=xn;w.STRATEGY=Xa;w.TOTP=wn;w.authenticatorCheckWithWindow=Dp;w.authenticatorDecoder=kn;w.authenticatorDefaultOptions=qp;w.authenticatorEncoder=co;w.authenticatorGenerateSecret=Pp;w.authenticatorOptionValidator=_p;w.authenticatorOptions=Cp;w.authenticatorToken=Np;w.createDigestPlaceholder=En;w.hotpCheck=wp;w.hotpCounter=xp;w.hotpCreateHmacKey=gp;w.hotpDefaultOptions=yp;w.hotpDigestToToken=vp;w.hotpKeyuri=Sp;w.hotpOptions=bp;w.hotpOptionsValidator=no;w.hotpToken=An;w.isTokenValid=to;w.keyuri=io;w.objectValues=Sn;w.padStart=ro;w.totpCheck=oo;w.totpCheckByEpoch=Za;w.totpCheckWithWindow=lo;w.totpCounter=kp;w.totpCreateHmacKey=ao;w.totpDefaultOptions=Ap;w.totpEpochAvailable=Tp;w.totpKeyuri=Op;w.totpOptions=Rp;w.totpOptionsValidator=so;w.totpPadSecret=yn;w.totpTimeRemaining=Ip;w.totpTimeUsed=uo;w.totpToken=Rn});var Fp=m(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});var Tn=lp(),Lp=hp(),fo=Up(),UR=new fo.HOTP({createDigest:Tn.createDigest}),LR=new fo.TOTP({createDigest:Tn.createDigest}),FR=new fo.Authenticator({createDigest:Tn.createDigest,createRandomBytes:Tn.createRandomBytes,keyDecoder:Lp.keyDecoder,keyEncoder:Lp.keyEncoder});si.authenticator=FR;si.hotp=UR;si.totp=LR});var jp=m(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});var Mp=Fp();Object.keys(Mp).forEach(function(e){e!=="default"&&Object.defineProperty(po,e,{enumerable:!0,get:function(){return Mp[e]}})})});var Bp=m((NN,BR)=>{BR.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var gr=m(_e=>{"use strict";var GR=_e&&_e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.getKeyIndexes=_e.hasFlag=_e.exists=_e.list=void 0;var In=GR(Bp());_e.list=Object.keys(In.default);var mo={};_e.list.forEach(e=>{mo[e]=In.default[e].flags.reduce(function(t,r){return t[r]=!0,t},{})});function HR(e){return!!In.default[e]}_e.exists=HR;function QR(e,t){if(!mo[e])throw new Error("Unknown command "+e);return!!mo[e][t]}_e.hasFlag=QR;function KR(e,t,r){let i=In.default[e];if(!i)throw new Error("Unknown command "+e);if(!Array.isArray(t))throw new Error("Expect args to be an array");let n=[],s=!!(r&&r.parseExternalKey),a=(l,u)=>{let c=[],d=Number(l[u]);for(let f=0;f<d;f++)c.push(f+u+1);return c},o=(l,u,c)=>{for(let d=u;d<l.length-1;d+=1)if(String(l[d]).toLowerCase()===c.toLowerCase())return d+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":n.push(0,...a(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":n.push(...a(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{n.push(...a(t,0));break}case"georadius":{n.push(0);let l=o(t,5,"STORE");l&&n.push(l);let u=o(t,5,"STOREDIST");u&&n.push(u);break}case"georadiusbymember":{n.push(0);let l=o(t,4,"STORE");l&&n.push(l);let u=o(t,4,"STOREDIST");u&&n.push(u);break}case"sort":case"sort_ro":n.push(0);for(let l=1;l<t.length-1;l++){let u=t[l];if(typeof u!="string")continue;let c=u.toUpperCase();c==="GET"?(l+=1,u=t[l],u!=="#"&&(s?n.push([l,Gp(u)]):n.push(l))):c==="BY"?(l+=1,s?n.push([l,Gp(t[l])]):n.push(l)):c==="STORE"&&(l+=1,n.push(l))}break;case"migrate":if(t[2]==="")for(let l=5;l<t.length-1;l++){let u=t[l];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let c=l+1;c<t.length;c++)n.push(c);break}}else n.push(2);break;case"xreadgroup":case"xread":for(let l=e==="xread"?0:3;l<t.length-1;l++)if(String(t[l]).toUpperCase()==="STREAMS"){for(let u=l+1;u<=l+(t.length-1-l)/2;u++)n.push(u);break}break;default:if(i.step>0){let l=i.keyStart-1,u=i.keyStop>0?i.keyStop:t.length+i.keyStop+1;for(let c=l;c<u;c+=i.step)n.push(c)}break}return n}_e.getKeyIndexes=KR;function Gp(e){typeof e!="string"&&(e=String(e));let t=e.indexOf("->");return t===-1?e.length:t}});var Hp=m(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.tryCatch=_t.errorObj=void 0;_t.errorObj={e:{}};var go;function zR(e,t){try{let r=go;return go=null,r.apply(this,arguments)}catch(r){return _t.errorObj.e=r,_t.errorObj}}function JR(e){return go=e,zR}_t.tryCatch=JR});var qt=m(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});var yr=Hp();function Qp(e){setTimeout(function(){throw e},0)}function WR(e,t,r){return typeof t=="function"&&e.then(i=>{let n;r!==void 0&&Object(r).spread&&Array.isArray(i)?n=yr.tryCatch(t).apply(void 0,[null].concat(i)):n=i===void 0?yr.tryCatch(t)(null):yr.tryCatch(t)(null,i),n===yr.errorObj&&Qp(n.e)},i=>{if(!i){let s=new Error(i+"");Object.assign(s,{cause:i}),i=s}let n=yr.tryCatch(t)(i);n===yr.errorObj&&Qp(n.e)}),e}yo.default=WR});var Jp=m((FN,zp)=>{"use strict";var Kp=require("assert"),ai=require("util");function br(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ai.inherits(br,Error);Object.defineProperty(br.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function bo(e,t,r){Kp(t),Kp.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=r,this.buffer=t}ai.inherits(bo,br);Object.defineProperty(bo.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function xo(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}ai.inherits(xo,br);Object.defineProperty(xo.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function On(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ai.inherits(On,br);Object.defineProperty(On.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function vo(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ai.inherits(vo,On);Object.defineProperty(vo.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});zp.exports={RedisError:br,ParserError:bo,ReplyError:xo,AbortError:On,InterruptError:vo}});var Xp=m((MN,Yp)=>{"use strict";var Wp=require("assert"),xr=class extends Error{get name(){return this.constructor.name}},wo=class extends xr{constructor(t,r,i){Wp(r),Wp.strictEqual(typeof i,"number");let n=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=n,this.offset=i,this.buffer=r}get name(){return this.constructor.name}},So=class extends xr{constructor(t){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=r}get name(){return this.constructor.name}},_n=class extends xr{get name(){return this.constructor.name}},Eo=class extends _n{get name(){return this.constructor.name}};Yp.exports={RedisError:xr,ParserError:wo,ReplyError:So,AbortError:_n,InterruptError:Eo}});var Wt=m((jN,Zp)=>{"use strict";var YR=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?Jp():Xp();Zp.exports=YR});var oi=m(($N,Ao)=>{var eh=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],XR=function(t){for(var r,i=0,n=0,s=[],a=t.length;i<a;i++)r=t.charCodeAt(i),r<128?s[n++]=r:r<2048?(s[n++]=r>>6|192,s[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),s[n++]=r>>18|240,s[n++]=r>>12&63|128,s[n++]=r>>6&63|128,s[n++]=r&63|128):(s[n++]=r>>12|224,s[n++]=r>>6&63|128,s[n++]=r&63|128);return s},th=Ao.exports=function(t){for(var r,i=0,n=-1,s=0,a=0,o=typeof t=="string"?XR(t):t,l=o.length;i<l;){if(r=o[i++],n===-1)r===123&&(n=i);else if(r!==125)a=eh[(r^a>>8)&255]^a<<8;else if(i-1!==n)return a&16383;s=eh[(r^s>>8)&255]^s<<8}return s&16383};Ao.exports.generateMulti=function(t){for(var r=1,i=t.length,n=th(t[0]);r<i;)if(th(t[r++])!==n)return-1;return n}});var uh=m((VN,lh)=>{var ih=9007199254740991,ZR="[object Arguments]",ek="[object Function]",tk="[object GeneratorFunction]",rk=/^(?:0|[1-9]\d*)$/;function nh(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function ik(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var li=Object.prototype,ui=li.hasOwnProperty,sh=li.toString,nk=li.propertyIsEnumerable,rh=Math.max;function sk(e,t){var r=mk(e)||hk(e)?ik(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||ui.call(e,s))&&!(n&&(s=="length"||oh(s,i)))&&r.push(s);return r}function ak(e,t,r,i){return e===void 0||Ro(e,li[r])&&!ui.call(i,r)?t:e}function ok(e,t,r){var i=e[t];(!(ui.call(e,t)&&Ro(i,r))||r===void 0&&!(t in e))&&(e[t]=r)}function lk(e){if(!To(e))return pk(e);var t=fk(e),r=[];for(var i in e)i=="constructor"&&(t||!ui.call(e,i))||r.push(i);return r}function ah(e,t){return t=rh(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,n=rh(r.length-t,0),s=Array(n);++i<n;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=s,nh(e,this,a)}}function uk(e,t,r,i){r||(r={});for(var n=-1,s=t.length;++n<s;){var a=t[n],o=i?i(r[a],e[a],a,r,e):void 0;ok(r,a,o===void 0?e[a]:o)}return r}function ck(e){return ah(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&dk(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}function oh(e,t){return t=t??ih,!!t&&(typeof e=="number"||rk.test(e))&&e>-1&&e%1==0&&e<t}function dk(e,t,r){if(!To(r))return!1;var i=typeof t;return(i=="number"?ko(r)&&oh(t,r.length):i=="string"&&t in r)?Ro(r[t],e):!1}function fk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||li;return e===r}function pk(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function Ro(e,t){return e===t||e!==e&&t!==t}function hk(e){return gk(e)&&ui.call(e,"callee")&&(!nk.call(e,"callee")||sh.call(e)==ZR)}var mk=Array.isArray;function ko(e){return e!=null&&bk(e.length)&&!yk(e)}function gk(e){return xk(e)&&ko(e)}function yk(e){var t=To(e)?sh.call(e):"";return t==ek||t==tk}function bk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ih}function To(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function xk(e){return!!e&&typeof e=="object"}var vk=ck(function(e,t,r,i){uk(t,Sk(t),e,i)}),wk=ah(function(e){return e.push(void 0,ak),nh(vk,void 0,e)});function Sk(e){return ko(e)?sk(e,!0):lk(e)}lh.exports=wk});var fh=m((BN,dh)=>{var Ek=9007199254740991,Ak="[object Arguments]",Rk="[object Function]",kk="[object GeneratorFunction]",Io=Object.prototype,Tk=Io.hasOwnProperty,ch=Io.toString,Ik=Io.propertyIsEnumerable;function Ok(e){return qk(e)&&Tk.call(e,"callee")&&(!Ik.call(e,"callee")||ch.call(e)==Ak)}function _k(e){return e!=null&&Pk(e.length)&&!Ck(e)}function qk(e){return Dk(e)&&_k(e)}function Ck(e){var t=Nk(e)?ch.call(e):"";return t==Rk||t==kk}function Pk(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ek}function Nk(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Dk(e){return!!e&&typeof e=="object"}dh.exports=Ok});var qn=m(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.isArguments=Ct.defaults=Ct.noop=void 0;var Uk=uh();Ct.defaults=Uk;var Lk=fh();Ct.isArguments=Lk;function Fk(){}Ct.noop=Fk});var Oo=m((HN,ph)=>{var vr=1e3,wr=vr*60,Sr=wr*60,Yt=Sr*24,Mk=Yt*7,jk=Yt*365.25;ph.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return $k(e);if(r==="number"&&isFinite(e))return t.long?Bk(e):Vk(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function $k(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*jk;case"weeks":case"week":case"w":return r*Mk;case"days":case"day":case"d":return r*Yt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Sr;case"minutes":case"minute":case"mins":case"min":case"m":return r*wr;case"seconds":case"second":case"secs":case"sec":case"s":return r*vr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Vk(e){var t=Math.abs(e);return t>=Yt?Math.round(e/Yt)+"d":t>=Sr?Math.round(e/Sr)+"h":t>=wr?Math.round(e/wr)+"m":t>=vr?Math.round(e/vr)+"s":e+"ms"}function Bk(e){var t=Math.abs(e);return t>=Yt?Cn(e,t,Yt,"day"):t>=Sr?Cn(e,t,Sr,"hour"):t>=wr?Cn(e,t,wr,"minute"):t>=vr?Cn(e,t,vr,"second"):e+" ms"}function Cn(e,t,r,i){var n=t>=r*1.5;return Math.round(e/r)+" "+i+(n?"s":"")}});var _o=m((QN,hh)=>{function Gk(e){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=n,r.enabled=o,r.humanize=Oo(),r.destroy=u,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(c){let d,f=null,p,g;function h(...E){if(!h.enabled)return;let O=h,q=Number(new Date),P=q-(d||q);O.diff=P,O.prev=d,O.curr=q,d=q,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let B=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(k,b)=>{if(k==="%%")return"%";B++;let A=r.formatters[b];if(typeof A=="function"){let I=E[B];k=A.call(O,I),E.splice(B,1),B--}return k}),r.formatArgs.call(O,E),(O.log||r.log).apply(O,E)}return h.namespace=c,h.useColors=r.useColors(),h.color=r.selectColor(c),h.extend=i,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,g=r.enabled(c)),g),set:E=>{f=E}}),typeof r.init=="function"&&r.init(h),h}function i(c,d){let f=r(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let f of d)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function s(c,d){let f=0,p=0,g=-1,h=0;for(;f<c.length;)if(p<d.length&&(d[p]===c[f]||d[p]==="*"))d[p]==="*"?(g=p,h=f,p++):(f++,p++);else if(g!==-1)p=g+1,h++,f=h;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}function a(){let c=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),c}function o(c){for(let d of r.skips)if(s(c,d))return!1;for(let d of r.names)if(s(c,d))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}hh.exports=Gk});var mh=m((Ie,Pn)=>{Ie.formatArgs=Qk;Ie.save=Kk;Ie.load=zk;Ie.useColors=Hk;Ie.storage=Jk();Ie.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ie.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Hk(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Qk(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Pn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),e.splice(i,0,t)}Ie.log=console.debug||console.log||(()=>{});function Kk(e){try{e?Ie.storage.setItem("debug",e):Ie.storage.removeItem("debug")}catch{}}function zk(){let e;try{e=Ie.storage.getItem("debug")||Ie.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Jk(){try{return localStorage}catch{}}Pn.exports=_o()(Ie);var{formatters:Wk}=Pn.exports;Wk.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var yh=m((KN,gh)=>{"use strict";gh.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}});var vh=m((zN,xh)=>{"use strict";var Yk=require("os"),bh=require("tty"),Ue=yh(),{env:ue}=process,Nn;Ue("no-color")||Ue("no-colors")||Ue("color=false")||Ue("color=never")?Nn=0:(Ue("color")||Ue("colors")||Ue("color=true")||Ue("color=always"))&&(Nn=1);function Xk(){if("FORCE_COLOR"in ue)return ue.FORCE_COLOR==="true"?1:ue.FORCE_COLOR==="false"?0:ue.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ue.FORCE_COLOR,10),3)}function Zk(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function eT(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let i=Xk();i!==void 0&&(Nn=i);let n=r?Nn:i;if(n===0)return 0;if(r){if(Ue("color=16m")||Ue("color=full")||Ue("color=truecolor"))return 3;if(Ue("color=256"))return 2}if(e&&!t&&n===void 0)return 0;let s=n||0;if(ue.TERM==="dumb")return s;if(process.platform==="win32"){let a=Yk.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in ue)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in ue)||ue.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ue)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ue.TEAMCITY_VERSION)?1:0;if(ue.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ue){let a=Number.parseInt((ue.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ue.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ue.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ue.TERM)||"COLORTERM"in ue?1:s}function qo(e,t={}){let r=eT(e,{streamIsTTY:e&&e.isTTY,...t});return Zk(r)}xh.exports={supportsColor:qo,stdout:qo({isTTY:bh.isatty(1)}),stderr:qo({isTTY:bh.isatty(2)})}});var Sh=m((ce,Un)=>{var tT=require("tty"),Dn=require("util");ce.init=lT;ce.log=sT;ce.formatArgs=iT;ce.save=aT;ce.load=oT;ce.useColors=rT;ce.destroy=Dn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ce.colors=[6,2,3,4,5,1];try{let e=vh();e&&(e.stderr||e).level>=2&&(ce.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ce.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});function rT(){return"colors"in ce.inspectOpts?!!ce.inspectOpts.colors:tT.isatty(process.stderr.fd)}function iT(e){let{namespace:t,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(n+"m+"+Un.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=nT()+t+" "+e[0]}function nT(){return ce.inspectOpts.hideDate?"":new Date().toISOString()+" "}function sT(...e){return process.stderr.write(Dn.formatWithOptions(ce.inspectOpts,...e)+`
`)}function aT(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function oT(){return process.env.DEBUG}function lT(e){e.inspectOpts={};let t=Object.keys(ce.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=ce.inspectOpts[t[r]]}Un.exports=_o()(ce);var{formatters:wh}=Un.exports;wh.o=function(e){return this.inspectOpts.colors=this.useColors,Dn.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};wh.O=function(e){return this.inspectOpts.colors=this.useColors,Dn.inspect(e,this.inspectOpts)}});var Eh=m((JN,Co)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Co.exports=mh():Co.exports=Sh()});var kh=m(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.genRedactedString=ft.getStringValue=ft.MAX_ARGUMENT_LENGTH=void 0;var uT=Eh(),Po=200;ft.MAX_ARGUMENT_LENGTH=Po;var cT="ioredis";function Ah(e){if(e!==null)switch(typeof e){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch{return}case"string":return e}}ft.getStringValue=Ah;function Rh(e,t){let{length:r}=e;return r<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+r+'">'}ft.genRedactedString=Rh;function dT(e){let t=(0,uT.default)(`${cT}:${e}`);function r(...i){if(t.enabled){for(let n=1;n<i.length;n++){let s=Ah(i[n]);typeof s=="string"&&s.length>Po&&(i[n]=Rh(s,Po))}return t.apply(null,i)}}return Object.defineProperties(r,{namespace:{get(){return t.namespace}},enabled:{get(){return t.enabled}},destroy:{get(){return t.destroy}},log:{get(){return t.log},set(i){t.log=i}}}),r}ft.default=dT});var Ih=m(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var Th=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,fT={RedisCloudFixed:{ca:Th},RedisCloudFlexible:{ca:Th}};No.default=fT});var fe=m(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.noop=U.defaults=U.Debug=U.getPackageMeta=U.zipMap=U.CONNECTION_CLOSED_ERROR_MSG=U.shuffle=U.sample=U.resolveTLSProfile=U.parseURL=U.optimizeErrorStack=U.toArg=U.convertMapToArray=U.convertObjectToArray=U.timeout=U.packObject=U.isInt=U.wrapMultiResult=U.convertBufferToString=void 0;var pT=require("fs"),hT=require("path"),Oh=require("url"),Do=qn();Object.defineProperty(U,"defaults",{enumerable:!0,get:function(){return Do.defaults}});Object.defineProperty(U,"noop",{enumerable:!0,get:function(){return Do.noop}});var mT=kh();U.Debug=mT.default;var gT=Ih();function _h(e,t){if(e instanceof Buffer)return e.toString(t);if(Array.isArray(e)){let r=e.length,i=Array(r);for(let n=0;n<r;++n)i[n]=e[n]instanceof Buffer&&t==="utf8"?e[n].toString():_h(e[n],t);return i}return e}U.convertBufferToString=_h;function yT(e){if(!e)return null;let t=[],r=e.length;for(let i=0;i<r;++i){let n=e[i];n instanceof Error?t.push([n]):t.push([null,n])}return t}U.wrapMultiResult=yT;function qh(e){let t=parseFloat(e);return!isNaN(e)&&(t|0)===t}U.isInt=qh;function bT(e){let t={},r=e.length;for(let i=1;i<r;i+=2)t[e[i-1]]=e[i];return t}U.packObject=bT;function xT(e,t){let r=null,i=function(){r&&(clearTimeout(r),r=null,e.apply(this,arguments))};return r=setTimeout(i,t,new Error("timeout")),i}U.timeout=xT;function vT(e){let t=[],r=Object.keys(e);for(let i=0,n=r.length;i<n;i++)t.push(r[i],e[r[i]]);return t}U.convertObjectToArray=vT;function wT(e){let t=[],r=0;return e.forEach(function(i,n){t[r]=n,t[r+1]=i,r+=2}),t}U.convertMapToArray=wT;function ST(e){return e===null||typeof e>"u"?"":String(e)}U.toArg=ST;function ET(e,t,r){let i=t.split(`
`),n="",s;for(s=1;s<i.length&&i[s].indexOf(r)!==-1;++s);for(let a=s;a<i.length;++a)n+=`
`+i[a];if(e.stack){let a=e.stack.indexOf(`
`);e.stack=e.stack.slice(0,a)+n}return e}U.optimizeErrorStack=ET;function AT(e){if(qh(e))return{port:e};let t=(0,Oh.parse)(e,!0,!0);!t.slashes&&e[0]!=="/"&&(e="//"+e,t=(0,Oh.parse)(e,!0,!0));let r=t.query||{},i={};if(t.auth){let n=t.auth.indexOf(":");i.username=n===-1?t.auth:t.auth.slice(0,n),i.password=n===-1?"":t.auth.slice(n+1)}if(t.pathname&&(t.protocol==="redis:"||t.protocol==="rediss:"?t.pathname.length>1&&(i.db=t.pathname.slice(1)):i.path=t.pathname),t.host&&(i.host=t.hostname),t.port&&(i.port=t.port),typeof r.family=="string"){let n=Number.parseInt(r.family,10);Number.isNaN(n)||(i.family=n)}return(0,Do.defaults)(i,r),i}U.parseURL=AT;function RT(e){let t=e?.tls;typeof t=="string"&&(t={profile:t});let r=gT.default[t?.profile];return r&&(t=Object.assign({},r,t),delete t.profile,e=Object.assign({},e,{tls:t})),e}U.resolveTLSProfile=RT;function kT(e,t=0){let r=e.length;return t>=r?null:e[t+Math.floor(Math.random()*(r-t))]}U.sample=kT;function TT(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e}U.shuffle=TT;U.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function IT(e,t){let r=new Map;return e.forEach((i,n)=>{r.set(i,t[n])}),r}U.zipMap=IT;var Er=null;async function OT(){if(Er)return Er;try{let e=(0,hT.resolve)(__dirname,"..","..","package.json"),t=await pT.promises.readFile(e,"utf8");return Er={version:JSON.parse(t).version},Er}catch{return Er={version:"error-fetching-version"},Er}}U.getPackageMeta=OT});var pt=m(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var Ch=gr(),_T=oi(),qT=qt(),Xt=fe(),tt=class e{constructor(t,r=[],i={},n){if(this.name=t,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=i.replyEncoding,this.errorStack=i.errorStack,this.args=r.flat(),this.callback=n,this.initPromise(),i.keyPrefix){let s=i.keyPrefix instanceof Buffer,a=s?i.keyPrefix:null;this._iterateKeys(o=>o instanceof Buffer?(a===null&&(a=Buffer.from(i.keyPrefix)),Buffer.concat([a,o])):s?Buffer.concat([i.keyPrefix,Buffer.from(String(o))]):i.keyPrefix+o)}i.readOnly&&(this.isReadOnly=!0)}static checkFlag(t,r){return!!this.getFlagMap()[t][r]}static setArgumentTransformer(t,r){this._transformer.argument[t]=r}static setReplyTransformer(t,r){this._transformer.reply[t]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(e.FLAGS).reduce((t,r)=>(t[r]={},e.FLAGS[r].forEach(i=>{t[r][i]=!0}),t),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let t=this.getKeys()[0];this.slot=t==null?null:_T(t)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(t){let r,i="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let n=new Uo;n.push(i);for(let s=0;s<this.args.length;++s){let a=this.args[s];a instanceof Buffer?a.length===0?n.push(`$0\r
\r
`):(n.push("$"+a.length+`\r
`),n.push(a),n.push(`\r
`)):n.push("$"+Buffer.byteLength(a)+`\r
`+a+`\r
`)}r=n.toBuffer()}else{r=i;for(let n=0;n<this.args.length;++n){let s=this.args[n];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let t=0;t<this.args.length;++t){let r=this.args[t];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[t]=(0,Xt.toArg)(r))}}transformReply(t){this.replyEncoding&&(t=(0,Xt.convertBufferToString)(t,this.replyEncoding));let r=e._transformer.reply[this.name];return r&&(t=r(t)),t}setTimeout(t){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},t))}initPromise(){let t=new Promise((r,i)=>{if(!this.transformed){this.transformed=!0;let n=e._transformer.argument[this.name];n&&(this.args=n(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=n=>{i((0,Xt.optimizeErrorStack)(n,this.errorStack.stack,__dirname))}:this.reject=i});this.promise=(0,qT.default)(t,this.callback)}_iterateKeys(t=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,Ch.exists)(this.name))){let r=(0,Ch.getKeyIndexes)(this.name,this.args);for(let i of r)this.args[i]=t(this.args[i]),this.keys.push(this.args[i])}return this.keys}_convertValue(t){return r=>{try{let i=this._commandTimeoutTimer;i&&(clearTimeout(i),delete this._commandTimeoutTimer),t(this.transformReply(r)),this.isResolved=!0}catch(i){this.reject(i)}return this.promise}}};Lo.default=tt;tt.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};tt._transformer={argument:{},reply:{}};var Ph=function(e){if(e.length===1){if(e[0]instanceof Map)return(0,Xt.convertMapToArray)(e[0]);if(typeof e[0]=="object"&&e[0]!==null)return(0,Xt.convertObjectToArray)(e[0])}return e},Nh=function(e){if(e.length===2){if(e[1]instanceof Map)return[e[0]].concat((0,Xt.convertMapToArray)(e[1]));if(typeof e[1]=="object"&&e[1]!==null)return[e[0]].concat((0,Xt.convertObjectToArray)(e[1]))}return e};tt.setArgumentTransformer("mset",Ph);tt.setArgumentTransformer("msetnx",Ph);tt.setArgumentTransformer("hset",Nh);tt.setArgumentTransformer("hmset",Nh);tt.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];i in t?Object.defineProperty(t,i,{value:n,configurable:!0,enumerable:!0,writable:!0}):t[i]=n}return t}return e});var Uo=class{constructor(){this.length=0,this.items=[]}push(t){this.length+=Buffer.byteLength(t),this.items.push(t)}toBuffer(){let t=Buffer.allocUnsafe(this.length),r=0;for(let i of this.items){let n=Buffer.byteLength(i);Buffer.isBuffer(i)?i.copy(t,r):t.write(i,r,n),r+=n}return t}}});var Dh=m(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var CT=Wt(),Ln=class extends CT.RedisError{constructor(t,r){super(t),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Fo.default=Ln;Ln.defaultMessage="Failed to refresh slots cache."});var Fn=m(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var PT=require("stream"),Mo=class extends PT.Readable{constructor(t){super(t),this.opt=t,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let t=[this._redisCursor];this.opt.key&&t.unshift(this.opt.key),this.opt.match&&t.push("MATCH",this.opt.match),this.opt.type&&t.push("TYPE",this.opt.type),this.opt.count&&t.push("COUNT",String(this.opt.count)),this.opt.noValues&&t.push("NOVALUES"),this.opt.redis[this.opt.command](t,(r,i)=>{if(r){this.emit("error",r);return}this._redisCursor=i[0]instanceof Buffer?i[0].toString():i[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(i[1])})}close(){this._redisDrained=!0}};jo.default=Mo});var $h=m(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.executeWithAutoPipelining=se.getFirstValueInFlattenedArray=se.shouldUseAutoPipelining=se.notAllowedAutoPipelineCommands=se.kCallbacks=se.kExec=void 0;var Lh=qn(),NT=oi(),Uh=qt();se.kExec=Symbol("exec");se.kCallbacks=Symbol("callbacks");se.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function Fh(e,t){if(e._runningAutoPipelines.has(t)||!e._autoPipelines.has(t))return;e._runningAutoPipelines.add(t);let r=e._autoPipelines.get(t);e._autoPipelines.delete(t);let i=r[se.kCallbacks];r[se.kCallbacks]=null,r.exec(function(n,s){if(e._runningAutoPipelines.delete(t),n)for(let a=0;a<i.length;a++)process.nextTick(i[a],n);else for(let a=0;a<i.length;a++)process.nextTick(i[a],...s[a]);e._autoPipelines.has(t)&&Fh(e,t)})}function DT(e,t,r){return t&&e.options.enableAutoPipelining&&!e.isPipeline&&!se.notAllowedAutoPipelineCommands.includes(r)&&!e.options.autoPipeliningIgnoredCommands.includes(r)}se.shouldUseAutoPipelining=DT;function Mh(e){for(let t=0;t<e.length;t++){let r=e[t];if(typeof r=="string")return r;if(Array.isArray(r)||(0,Lh.isArguments)(r)){if(r.length===0)continue;return r[0]}let i=[r].flat();if(i.length>0)return i[0]}}se.getFirstValueInFlattenedArray=Mh;function jh(e,t,r,i,n){if(e.isCluster&&!e.slots.length)return e.status==="wait"&&e.connect().catch(Lh.noop),(0,Uh.default)(new Promise(function(u,c){e.delayUntilReady(d=>{if(d){c(d);return}jh(e,t,r,i,null).then(u,c)})}),n);let s=e.options.keyPrefix||"",a=e.isCluster?e.slots[NT(`${s}${Mh(i)}`)].join(","):"main";if(!e._autoPipelines.has(a)){let u=e.pipeline();u[se.kExec]=!1,u[se.kCallbacks]=[],e._autoPipelines.set(a,u)}let o=e._autoPipelines.get(a);o[se.kExec]||(o[se.kExec]=!0,setImmediate(Fh,e,a));let l=new Promise(function(u,c){o[se.kCallbacks].push(function(d,f){if(d){c(d);return}u(f)}),t==="call"&&i.unshift(r),o[t](...i)});return(0,Uh.default)(l,n)}se.executeWithAutoPipelining=jh});var Vh=m(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var UT=require("crypto"),LT=pt(),FT=qt(),$o=class{constructor(t,r=null,i="",n=!1){this.lua=t,this.numberOfKeys=r,this.keyPrefix=i,this.readOnly=n,this.sha=(0,UT.createHash)("sha1").update(t).digest("hex");let s=this.sha,a=new WeakSet;this.Command=class extends LT.default{toWritable(l){let u=this.reject;return this.reject=c=>{c.message.indexOf("NOSCRIPT")!==-1&&a.delete(l),u.call(this,c)},a.has(l)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(a.add(l),this.name="eval",this.args[0]=t),super.toWritable(l)}}}execute(t,r,i,n){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(i.keyPrefix=this.keyPrefix),this.readOnly&&(i.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],i);return s.promise=s.promise.catch(a=>{if(a.message.indexOf("NOSCRIPT")===-1)throw a;let o=new this.Command("evalsha",[this.sha,...r],i);return(t.isPipeline?t.redis:t).sendCommand(o)}),(0,FT.default)(s.promise,n),t.sendCommand(s)}};Vo.default=$o});var jn=m(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});var MT=gr(),Mn=$h(),jT=pt(),$T=Vh(),ht=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return Bo.slice(0)}createBuiltinCommand(t){return{string:Pt(null,t,"utf8"),buffer:Pt(null,t,null)}}addBuiltinCommand(t){this.addedBuiltinSet.add(t),this[t]=Pt(t,t,"utf8"),this[t+"Buffer"]=Pt(t+"Buffer",t,null)}defineCommand(t,r){let i=new $T.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[t]=i,this[t]=Bh(t,t,i,"utf8"),this[t+"Buffer"]=Bh(t+"Buffer",t,i,null)}sendCommand(t,r,i){throw new Error('"sendCommand" is not implemented')}},Bo=MT.list.filter(e=>e!=="monitor");Bo.push("sentinel");Bo.forEach(function(e){ht.prototype[e]=Pt(e,e,"utf8"),ht.prototype[e+"Buffer"]=Pt(e+"Buffer",e,null)});ht.prototype.call=Pt("call","utf8");ht.prototype.callBuffer=Pt("callBuffer",null);ht.prototype.send_command=ht.prototype.call;function Pt(e,t,r){return typeof r>"u"&&(r=t,t=null),function(...i){let n=t||i.shift(),s=i[i.length-1];typeof s=="function"?i.pop():s=void 0;let a={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,Mn.shouldUseAutoPipelining)(this,e,n)?(0,Mn.executeWithAutoPipelining)(this,e,n,i,s):this.sendCommand(new jT.default(n,i,a,s))}}function Bh(e,t,r,i){return function(...n){let s=typeof n[n.length-1]=="function"?n.pop():void 0,a={replyEncoding:i};return this.options.showFriendlyErrorStack&&(a.errorStack=new Error),(0,Mn.shouldUseAutoPipelining)(this,e,t)?(0,Mn.executeWithAutoPipelining)(this,e,t,n,s):r.execute(this,n,a,s)}}Go.default=ht});var Ko=m(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var Ho=oi(),Gh=gr(),Hh=qt(),VT=require("util"),BT=pt(),GT=fe(),HT=jn();function QT(e,t){let r=Ho(t[0]),i=e._groupsBySlot[r];for(let n=1;n<t.length;n++)if(e._groupsBySlot[Ho(t[n])]!==i)return-1;return r}var Nt=class extends HT.default{constructor(t){super(),this.redis=t,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=t.options,Object.keys(t.scriptsSet).forEach(i=>{let n=t.scriptsSet[i];this._shaToScript[n.sha]=n,this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),t.addedBuiltinSet.forEach(i=>{this[i]=t[i],this[i+"Buffer"]=t[i+"Buffer"]}),this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(t,r){if(this._queue[r].name==="exec"&&Array.isArray(t[1])){let n=t[1].length;for(let s=0;s<n;s++){if(t[1][s]instanceof Error)continue;let a=this._queue[r-(n-s)];try{t[1][s]=a.transformReply(t[1][s])}catch(o){t[1][s]=o}}}if(this._result[r]=t,--this.replyPending)return;if(this.isCluster){let n=!0,s;for(let a=0;a<this._result.length;++a){let o=this._result[a][0],l=this._queue[a];if(o){if(l.name==="exec"&&o.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:o.name,message:o.message};else if(s.name!==o.name||s.message!==o.message){n=!1;break}}else if(!l.inTransaction&&!((0,Gh.exists)(l.name)&&(0,Gh.hasFlag)(l.name,"readonly"))){n=!1;break}}if(s&&n){let a=this,o=s.message.split(" "),l=this._queue,u=!1;this._queue=[];for(let p=0;p<l.length;++p){if(o[0]==="ASK"&&!u&&l[p].name!=="asking"&&(!l[p-1]||l[p-1].name!=="asking")){let g=new BT.default("asking");g.ignore=!0,this.sendCommand(g)}l[p].initPromise(),this.sendCommand(l[p]),u=l[p].inTransaction}let c=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){a.exec()},f=this.redis;if(f.handleError(s,this.leftRedirections,{moved:function(p,g){a.preferKey=g,f.slots[o[1]]=[g],f._groupsBySlot[o[1]]=f._groupsIds[f.slots[o[1]].join(";")],f.refreshSlotsCache(),a.exec()},ask:function(p,g){a.preferKey=g,a.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{c=!1},defaults:()=>{c=!1}}),c)return}}let i=0;for(let n=0;n<this._queue.length-i;++n)this._queue[n+i].ignore&&(i+=1),this._result[n]=this._result[n+i];this.resolve(this._result.slice(0,this._result.length-i))}sendCommand(t){this._transactions>0&&(t.inTransaction=!0);let r=this._queue.length;return t.pipelineIndex=r,t.promise.then(i=>{this.fillResult([null,i],r)}).catch(i=>{this.fillResult([i],r)}),this._queue.push(t),this}addBatch(t){let r,i,n;for(let s=0;s<t.length;++s)r=t[s],i=r[0],n=r.slice(1),this[i].apply(this,n);return this}};Qo.default=Nt;var KT=Nt.prototype.multi;Nt.prototype.multi=function(){return this._transactions+=1,KT.apply(this,arguments)};var Qh=Nt.prototype.execBuffer;Nt.prototype.execBuffer=(0,VT.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),Qh.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");Nt.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(GT.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,Hh.default)(this.promise,e)),this.redis.delayUntilReady(n=>{if(n){this.reject(n);return}this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,Qh.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,Hh.default)(this.promise,e)),this._queue.length||this.resolve([]);let t;if(this.isCluster){let n=[];for(let s=0;s<this._queue.length;s++){let a=this._queue[s].getKeys();if(a.length&&n.push(a[0]),a.length&&Ho.generateMulti(a)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(n.length){if(t=QT(this.redis,n),t<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=Math.random()*16384|0}let r=this;return i(),this.promise;function i(){let n=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:t,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let a="",o,l={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(u){typeof u!="string"?(o||(o=[]),a&&(o.push(Buffer.from(a,"utf8")),a=""),o.push(u)):a+=u,--n||(o?(a&&o.push(Buffer.from(a,"utf8")),l.destination.redis.stream.write(Buffer.concat(o))):l.destination.redis.stream.write(a),n=r._queue.length,a="",o=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],l,s);return r.promise}}});var Wo=m($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.addTransactionSupport=void 0;var zo=fe(),Jo=qt(),Kh=Ko();function zT(e){e.pipeline=function(i){let n=new Kh.default(this);return Array.isArray(i)&&n.addBatch(i),n};let{multi:t}=e;e.multi=function(i,n){if(typeof n>"u"&&!Array.isArray(i)&&(n=i,i=null),n&&n.pipeline===!1)return t.call(this);let s=new Kh.default(this);s.multi(),Array.isArray(i)&&s.addBatch(i);let a=s.exec;s.exec=function(l){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(zo.noop),(0,Jo.default)(new Promise((c,d)=>{this.redis.delayUntilReady(f=>{if(f){d(f);return}this.exec(s).then(c,d)})}),l);if(this._transactions>0&&a.call(s),this.nodeifiedPromise)return a.call(s);let u=a.call(s);return(0,Jo.default)(u.then(function(c){let d=c[c.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let f=0;f<c.length-1;++f)c[f][0]&&d[0].previousErrors.push(c[f][0]);throw d[0]}return(0,zo.wrapMultiResult)(d[1])}),l)};let{execBuffer:o}=s;return s.execBuffer=function(l){return this._transactions>0&&o.call(s),s.exec(l)},s};let{exec:r}=e;e.exec=function(i){return(0,Jo.default)(r.call(this).then(function(n){return Array.isArray(n)&&(n=(0,zo.wrapMultiResult)(n)),n}),i)}}$n.addTransactionSupport=zT});var Xo=m(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});function JT(e,t){Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})}Yo.default=JT});var Jh=m(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.DEFAULT_CLUSTER_OPTIONS=void 0;var zh=require("dns");Vn.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+e*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:zh.resolveSrv,dnsLookup:zh.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var ci=m(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.getConnectionName=ge.weightSrvRecords=ge.groupSrvRecords=ge.getUniqueHostnamesFromOptions=ge.normalizeNodeOptions=ge.nodeKeyToRedisOptions=ge.getNodeKey=void 0;var Wh=fe(),WT=require("net");function YT(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port}ge.getNodeKey=YT;function XT(e){let t=e.lastIndexOf(":");if(t===-1)throw new Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}}ge.nodeKeyToRedisOptions=XT;function ZT(e){return e.map(t=>{let r={};if(typeof t=="object")Object.assign(r,t);else if(typeof t=="string")Object.assign(r,(0,Wh.parseURL)(t));else if(typeof t=="number")r.port=t;else throw new Error("Invalid argument "+t);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,Wh.resolveTLSProfile)(r)})}ge.normalizeNodeOptions=ZT;function eI(e){let t={};return e.forEach(r=>{t[r.host]=!0}),Object.keys(t).filter(r=>!(0,WT.isIP)(r))}ge.getUniqueHostnamesFromOptions=eI;function tI(e){let t={};for(let r of e)t.hasOwnProperty(r.priority)?(t[r.priority].totalWeight+=r.weight,t[r.priority].records.push(r)):t[r.priority]={totalWeight:r.weight,records:[r]};return t}ge.groupSrvRecords=tI;function rI(e){if(e.records.length===1)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),r=0;for(let[i,n]of e.records.entries())if(r+=1+n.weight,r>t)return e.totalWeight-=n.weight,e.records.splice(i,1),n}ge.weightSrvRecords=rI;function iI(e,t){let r=`ioredis-cluster(${e})`;return t?`${r}:${t}`:r}ge.getConnectionName=iI});var rl=m(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var Yh=ci(),Zo=fe(),nI=Dt(),rt=(0,Zo.Debug)("cluster:subscriber"),el=class{constructor(t,r,i=!1){this.connectionPool=t,this.emitter=r,this.isSharded=i,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){rt("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}rt("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,s)=>{!this.started||!this.subscriber||(0,Yh.getNodeKey)(this.subscriber.options)===s&&(rt("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(rt("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(t){return this.isSharded&&(this.slotRange=t),this.slotRange}start(){this.started=!0,this.selectSubscriber(),rt("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let t=this.lastActiveSubscriber;t&&(t.off("end",this.onSubscriberEnd),t.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,Zo.sample)(this.connectionPool.getNodes());if(!r){rt("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:i}=r;rt("selected a subscriber %s:%s",i.host,i.port);let n="subscriber";this.isSharded&&(n="ssubscriber"),this.subscriber=new nI.default({port:i.port,host:i.host,username:i.username,password:i.password,enableReadyCheck:!0,connectionName:(0,Yh.getConnectionName)(n,i.connectionName),lazyConnect:!0,tls:i.tls,retryStrategy:null}),this.subscriber.on("error",Zo.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(t){let a=t.condition||t.prevCondition;a&&a.subscriber&&(s.subscribe=a.subscriber.channels("subscribe"),s.psubscribe=a.subscriber.channels("psubscribe"),s.ssubscribe=a.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let a=0;for(let o of["subscribe","psubscribe","ssubscribe"]){let l=s[o];if(l.length!=0)if(rt("%s %d channels",o,l.length),o==="ssubscribe")for(let u of l)a+=1,this.subscriber[o](u).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{rt("failed to ssubscribe to channel: %s",u)});else a+=1,this.subscriber[o](l).then(()=>{--a||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{rt("failed to %s %d channels",o,l.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let a of["message","messageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)});for(let a of["pmessage","pmessageBuffer"])this.subscriber.on(a,(o,l,u)=>{this.emitter.emit(a,o,l,u)});if(this.isSharded==!0)for(let a of["smessage","smessageBuffer"])this.subscriber.on(a,(o,l)=>{this.emitter.emit(a,o,l)})}};tl.default=el});var al=m(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var sI=require("events"),Bn=fe(),il=ci(),aI=Dt(),di=(0,Bn.Debug)("cluster:connectionPool"),nl=class extends sI.EventEmitter{constructor(t){super(),this.redisOptions=t,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(t="all"){let r=this.nodes[t];return Object.keys(r).map(i=>r[i])}getInstanceByKey(t){return this.nodes.all[t]}getSampleInstance(t){let r=Object.keys(this.nodes[t]),i=(0,Bn.sample)(r);return this.nodes[t][i]}addMasterNode(t){let r=(0,il.getNodeKey)(t.options),i=this.createRedisFromOptions(t,t.options.readOnly);return t.options.readOnly?!1:(this.nodes.all[r]=i,this.nodes.master[r]=i,!0)}createRedisFromOptions(t,r){return new aI.default((0,Bn.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},t,this.redisOptions,{lazyConnect:!0}))}findOrCreate(t,r=!1){let i=(0,il.getNodeKey)(t);r=!!r,this.specifiedOptions[i]?Object.assign(t,this.specifiedOptions[i]):this.specifiedOptions[i]=t;let n;return this.nodes.all[i]?(n=this.nodes.all[i],n.options.readOnly!==r&&(n.options.readOnly=r,di("Change role of %s to %s",i,r?"slave":"master"),n[r?"readonly":"readwrite"]().catch(Bn.noop),r?(delete this.nodes.master[i],this.nodes.slave[i]=n):(delete this.nodes.slave[i],this.nodes.master[i]=n))):(di("Connecting to %s as %s",i,r?"slave":"master"),n=this.createRedisFromOptions(t,r),this.nodes.all[i]=n,this.nodes[r?"slave":"master"][i]=n,n.once("end",()=>{this.removeNode(i),this.emit("-node",n,i),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",n,i),n.on("error",function(s){this.emit("nodeError",s,i)})),n}reset(t){di("Reset with %O",t);let r={};t.forEach(i=>{let n=(0,il.getNodeKey)(i);i.readOnly&&r[n]||(r[n]=i)}),Object.keys(this.nodes.all).forEach(i=>{r[i]||(di("Disconnect %s because the node does not hold any slot",i),this.nodes.all[i].disconnect(),this.removeNode(i))}),Object.keys(r).forEach(i=>{let n=r[i];this.findOrCreate(n,n.readOnly)})}removeNode(t){let{nodes:r}=this;r.all[t]&&(di("Remove %s from the pool",t),delete r.all[t]),delete r.master[t],delete r.slave[t]}};sl.default=nl});var Gn=m((p6,Xh)=>{"use strict";function re(e,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}re.prototype.peekAt=function(t){var r=t;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};re.prototype.get=function(t){return this.peekAt(t)};re.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};re.prototype.peekFront=function(){return this.peek()};re.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(re.prototype,"length",{get:function(){return this.size()}});re.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};re.prototype.unshift=function(t){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};re.prototype.shift=function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};re.prototype.push=function(t){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};re.prototype.pop=function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),i}};re.prototype.removeOne=function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(t<i/2){for(a=t;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-t;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};re.prototype.remove=function(t,r){var i=t,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var l;for(n=new Array(r),l=0;l<r;l++)n[l]=this._list[this._head+i+l&this._capacityMask];if(i=this._head+i&this._capacityMask,t+r===a){for(this._tail=this._tail-r+o&this._capacityMask,l=r;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(t===0){for(this._head=this._head+r+o&this._capacityMask,l=r-1;l>0;l--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+t+r+o&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;t<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,l=a-(r+t);l>0;l--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};re.prototype.splice=function(t,r){var i=t;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,l=arguments.length,u=this._list.length,c=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);l>c;)this.unshift(arguments[--l]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var d=a.length;for(s=0;s<d;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-d+u&this._capacityMask);c<l;)this.push(arguments[c++]);for(s=0;s<d;s++)this.push(a[s])}return o}else return this.remove(i,r)}};re.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};re.prototype.isEmpty=function(){return this._head===this._tail};re.prototype.toArray=function(){return this._copyArray(!1)};re.prototype._fromArray=function(t){var r=t.length,i=this._nextPowerOf2(r);this._list=new Array(i),this._capacityMask=i-1,this._tail=r;for(var n=0;n<r;n++)this._list[n]=t[n]};re.prototype._copyArray=function(t,r){var i=this._list,n=i.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=new Array(r),o=0,l;if(t||this._head>this._tail){for(l=this._head;l<n;l++)a[o++]=i[l];for(l=0;l<this._tail;l++)a[o++]=i[l]}else for(l=this._head;l<this._tail;l++)a[o++]=i[l];return a};re.prototype._growArray=function(){if(this._head!=0){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};re.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};re.prototype._nextPowerOf2=function(t){var r=Math.log(t)/Math.log(2),i=1<<r+1;return Math.max(i,4)};Xh.exports=re});var Zh=m(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var oI=fe(),lI=Gn(),uI=(0,oI.Debug)("delayqueue"),ol=class{constructor(){this.queues={},this.timeouts={}}push(t,r,i){let n=i.callback||process.nextTick;this.queues[t]||(this.queues[t]=new lI),this.queues[t].push(r),this.timeouts[t]||(this.timeouts[t]=setTimeout(()=>{n(()=>{this.timeouts[t]=null,this.execute(t)})},i.timeout))}execute(t){let r=this.queues[t];if(!r)return;let{length:i}=r;if(i)for(uI("send %d commands in %s queue",i,t),this.queues[t]=null;r.length>0;)r.shift()()}};ll.default=ol});var rm=m(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var cI=fe(),dI=rl(),fI=al(),em=ci(),Hn=oi(),tm=(0,cI.Debug)("cluster:subscriberGroup"),ul=class{constructor(t,r){this.cluster=t,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,t.on("+node",i=>{this._addSubscriber(i)}),t.on("-node",i=>{this._removeSubscriber(i)}),t.on("refresh",()=>{this._refreshSlots(t)}),t.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(t){let r=this.clusterSlots[t][0];return this.shardedSubscribers.get(r)}addChannels(t){let r=Hn(t[0]);t.forEach(n=>{if(Hn(n)!=r)return-1});let i=this.channels.get(r);return i?this.channels.set(r,i.concat(t)):this.channels.set(r,t),[...this.channels.values()].flatMap(n=>n).length}removeChannels(t){let r=Hn(t[0]);t.forEach(n=>{if(Hn(n)!=r)return-1});let i=this.channels.get(r);if(i){let n=i.filter(s=>!t.includes(s));this.channels.set(r,n)}return[...this.channels.values()].flatMap(n=>n).length}stop(){for(let t of this.shardedSubscribers.values())t.stop()}start(){for(let t of this.shardedSubscribers.values())t.isStarted()||t.start()}_addSubscriber(t){let r=new fI.default(t.options);if(r.addMasterNode(t)){let i=new dI.default(r,this.cluster,!0),n=(0,em.getNodeKey)(t.options);return this.shardedSubscribers.set(n,i),i.start(),this._resubscribe(),this.cluster.emit("+subscriber"),i}return null}_removeSubscriber(t){let r=(0,em.getNodeKey)(t.options),i=this.shardedSubscribers.get(r);return i&&(i.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(t){if(this._slotsAreEqual(t.slots))tm("Nothing to refresh because the new cluster map is equal to the previous one.");else{tm("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<t.slots.length;r++){let i=t.slots[r][0];this.subscriberToSlotsIndex.has(i)||this.subscriberToSlotsIndex.set(i,[]),this.subscriberToSlotsIndex.get(i).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(t.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((t,r)=>{let i=this.subscriberToSlotsIndex.get(r);i&&(t.associateSlotRange(i),i.forEach(n=>{let s=t.getInstance(),a=this.channels.get(n);a&&a.length>0&&s&&(s.ssubscribe(a),s.on("ready",()=>{s.ssubscribe(a)}))}))})}_slotsAreEqual(t){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(t)}};cl.default=ul});var pl=m(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var im=gr(),lm=require("events"),fi=Wt(),nm=qt(),sm=pt(),dl=Dh(),pI=Dt(),hI=Fn(),mI=Wo(),qe=fe(),gI=Xo(),yI=jn(),bI=Jh(),xI=rl(),vI=al(),wI=Zh(),Ar=ci(),am=Gn(),SI=rm(),ie=(0,qe.Debug)("cluster"),om=new WeakSet,pi=class e extends yI.default{constructor(t,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new wI.default,this.offlineQueue=new am,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,lm.EventEmitter.call(this),this.startupNodes=t,this.options=(0,qe.defaults)({},r,bI.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new SI.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new vI.default(this.options.redisOptions),this.connectionPool.on("-node",(i,n)=>{this.emit("-node",i)}),this.connectionPool.on("+node",i=>{this.emit("+node",i)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(i,n)=>{this.emit("node error",i,n)}),this.subscriber=new xI.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,n])=>{this.defineCommand(i,n)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(i=>{ie("connecting failed: %s",i)})}connect(){return new Promise((t,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let i=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(n=>{if(this.connectionEpoch!==i){ie("discard connecting after resolving startup nodes because epoch not match: %d != %d",i,this.connectionEpoch),r(new fi.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){ie("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new fi.RedisError("Connection is aborted"));return}this.connectionPool.reset(n);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),t()},a,o=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",a),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((l,u)=>{l||u?(ie("Ready check failed (%s). Reconnecting...",l||u),this.status==="connect"&&this.disconnect(!0)):s()}):s()};a=()=>{let l=new Error("None of startup nodes is available");this.removeListener("refresh",o),this.invokeReadyDelayedCallbacks(l),r(l)},this.once("refresh",o),this.once("close",a),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(l=>{l&&l.message===dl.default.defaultMessage&&(pI.default.prototype.silentEmit.call(this,"error",l),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(n=>{this.setStatus("close"),this.handleCloseEvent(n),this.invokeReadyDelayedCallbacks(n),r(n)})})}disconnect(t=!1){let r=this.status;this.setStatus("disconnecting"),t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,ie("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(t){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let i=(0,nm.default)(Promise.resolve("OK"),t);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),i}return(0,nm.default)(Promise.all(this.nodes().map(i=>i.quit().catch(n=>{if(n.message===qe.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw n}))).then(()=>"OK"),t)}duplicate(t=[],r={}){let i=t.length>0?t:this.startupNodes.slice(0),n=Object.assign({},this.options,r);return new e(i,n)}nodes(t="all"){if(t!=="all"&&t!=="master"&&t!=="slave")throw new Error('Invalid role "'+t+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(t)}delayUntilReady(t){this._readyDelayedCallbacks.push(t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}refreshSlotsCache(t){if(t&&this._refreshSlotsCacheCallbacks.push(t),this.isRefreshing)return;this.isRefreshing=!0;let r=this,i=o=>{this.isRefreshing=!1;for(let l of this._refreshSlotsCacheCallbacks)l(o);this._refreshSlotsCacheCallbacks=[]},n=(0,qe.shuffle)(this.connectionPool.getNodes()),s=null;function a(o){if(o===n.length){let c=new dl.default(dl.default.defaultMessage,s);return i(c)}let l=n[o],u=`${l.options.host}:${l.options.port}`;ie("getting slot cache from %s",u),r.getInfoFromNode(l,function(c){switch(r.status){case"close":case"end":return i(new Error("Cluster is disconnected."));case"disconnecting":return i(new Error("Cluster is disconnecting."))}c?(r.emit("node error",c,u),s=c,a(o+1)):(r.emit("refresh"),i())})}a(0)}sendCommand(t,r,i){if(this.status==="wait"&&this.connect().catch(qe.noop),this.status==="end")return t.reject(new Error(qe.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let n=this.options.scaleReads;n!=="master"&&(t.isReadOnly||(0,im.exists)(t.name)&&(0,im.hasFlag)(t.name,"readonly")||(n="master"));let s=i?i.slot:t.getSlot(),a={},o=this;if(!i&&!om.has(t)){om.add(t);let u=t.reject;t.reject=function(c){let d=l.bind(null,!0);o.handleError(c,a,{moved:function(f,p){ie("command %s is moved to %s",t.name,p),s=Number(f),o.slots[f]?o.slots[f][0]=p:o.slots[f]=[p],o._groupsBySlot[f]=o._groupsIds[o.slots[f].join(";")],o.connectionPool.findOrCreate(o.natMapper(p)),l(),ie("refreshing slot caches... (triggered by MOVED error)"),o.refreshSlotsCache()},ask:function(f,p){ie("command %s is required to ask %s:%s",t.name,p);let g=o.natMapper(p);o.connectionPool.findOrCreate(g),l(!1,`${g.host}:${g.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(f){u.call(t,f)},defaults:function(){u.call(t,c)}})}}l();function l(u,c){if(o.status==="end"){t.reject(new fi.AbortError("Cluster is ended."));return}let d;if(o.status==="ready"||t.name==="cluster"){if(i&&i.redis)d=i.redis;else if(sm.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||sm.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(o.options.shardedSubscribers==!0&&(t.name=="ssubscribe"||t.name=="sunsubscribe")){let f=o.shardedSubscribers.getResponsibleSubscriber(s),p=-1;t.name=="ssubscribe"&&(p=o.shardedSubscribers.addChannels(t.getKeys())),t.name=="sunsubscribe"&&(p=o.shardedSubscribers.removeChannels(t.getKeys())),p!==-1?d=f.getInstance():t.reject(new fi.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else d=o.subscriber.getInstance();if(!d){t.reject(new fi.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof s=="number"&&o.slots[s]){let f=o.slots[s];if(typeof n=="function"){let p=f.map(function(g){return o.connectionPool.getInstanceByKey(g)});d=n(p,t),Array.isArray(d)&&(d=(0,qe.sample)(d)),d||(d=p[0])}else{let p;n==="all"?p=(0,qe.sample)(f):n==="slave"&&f.length>1?p=(0,qe.sample)(f,1):p=f[0],d=o.connectionPool.getInstanceByKey(p)}}c&&(d=o.connectionPool.getInstanceByKey(c),d.asking())}d||(d=(typeof n=="function"?null:o.connectionPool.getSampleInstance(n))||o.connectionPool.getSampleInstance("all"))}i&&!i.redis&&(i.redis=d)}d?d.sendCommand(t,r):o.options.enableOfflineQueue?o.offlineQueue.push({command:t,stream:r,node:i}):t.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return t.promise}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}handleError(t,r,i){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){i.maxRedirections(new Error("Too many Cluster redirections. Last error: "+t));return}let n=t.message.split(" ");if(n[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",i.moved.bind(null,n[1],n[2]),{timeout:s}):i.moved(n[1],n[2])}else n[0]==="ASK"?i.ask(n[1],n[2]):n[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",i.tryagain,{timeout:this.options.retryDelayOnTryAgain}):n[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",i.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):t.message===qe.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",i.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):i.defaults()}resetOfflineQueue(){this.offlineQueue=new am}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let t=()=>{this.slotsTimer=setTimeout(()=>{ie('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{t()})},this.options.slotsRefreshInterval)};t()}setStatus(t){ie("status: %s -> %s",this.status||"[empty]",t),this.status=t,process.nextTick(()=>{this.emit(t)})}handleCloseEvent(t){t&&ie("closed because %s",t);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,t)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,ie("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(i){ie("Got error %s when reconnecting. Ignoring...",i)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(t){let r;for(;r=this.offlineQueue.shift();)r.command.reject(t)}executeOfflineCommands(){if(this.offlineQueue.length){ie("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=t.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(t){let r=typeof t=="string"?t:`${t.host}:${t.port}`,i=null;return this.options.natMap&&typeof this.options.natMap=="function"?i=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(i=this.options.natMap[r]),i?(ie("NAT mapping %s -> %O",r,i),Object.assign({},i)):typeof t=="string"?(0,Ar.nodeKeyToRedisOptions)(t):t}getInfoFromNode(t,r){if(!t)return r(new Error("Node is disconnected"));let i=t.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,Ar.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});i.on("error",qe.noop),i.cluster("SLOTS",(0,qe.timeout)((n,s)=>{if(i.disconnect(),n)return ie("error encountered running CLUSTER.SLOTS: %s",n),r(n);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){ie("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let a=[];ie("cluster slots result count: %d",s.length);for(let l=0;l<s.length;++l){let u=s[l],c=u[0],d=u[1],f=[];for(let p=2;p<u.length;p++){if(!u[p][0])continue;let g=this.natMapper({host:u[p][0],port:u[p][1]});g.readOnly=p!==2,a.push(g),f.push(g.host+":"+g.port)}ie("cluster slots result [%d]: slots %d~%d served by %s",l,c,d,f);for(let p=c;p<=d;p++)this.slots[p]=f}this._groupsIds=Object.create(null);let o=0;for(let l=0;l<16384;l++){let u=(this.slots[l]||[]).join(";");if(!u.length){this._groupsBySlot[l]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++o),this._groupsBySlot[l]=this._groupsIds[u]}this.connectionPool.reset(a),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(t){for(let r of this._readyDelayedCallbacks)process.nextTick(r,t);this._readyDelayedCallbacks=[]}readyCheck(t){this.cluster("INFO",(r,i)=>{if(r)return t(r);if(typeof i!="string")return t();let n,s=i.split(`\r
`);for(let a=0;a<s.length;++a){let o=s[a].split(":");if(o[0]==="cluster_state"){n=o[1];break}}n==="fail"?(ie("cluster state not ok (%s)",n),t(null,n)):t()})}resolveSrv(t){return new Promise((r,i)=>{this.options.resolveSrv(t,(n,s)=>{if(n)return i(n);let a=this,o=(0,Ar.groupSrvRecords)(s),l=Object.keys(o).sort((c,d)=>parseInt(c)-parseInt(d));function u(c){if(!l.length)return i(c);let d=l[0],f=o[d],p=(0,Ar.weightSrvRecords)(f);f.records.length||l.shift(),a.dnsLookup(p.name).then(g=>r({host:g,port:p.port}),u)}u()})})}dnsLookup(t){return new Promise((r,i)=>{this.options.dnsLookup(t,(n,s)=>{n?(ie("failed to resolve hostname %s to IP: %s",t,n.message),i(n)):(ie("resolved hostname %s to IP %s",t,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let t=(0,Ar.normalizeNodeOptions)(this.startupNodes),r=(0,Ar.getUniqueHostnamesFromOptions)(t);if(r.length===0)return t;let i=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),n=(0,qe.zipMap)(r,i);return t.map(s=>{let a=n.get(s.host);return a?this.options.useSRVRecords?Object.assign({},s,a):Object.assign({},s,{host:a}):s})}createScanStream(t,{key:r,options:i={}}){return new hI.default({objectMode:!0,key:r,redis:this,command:t,...i})}};(0,gI.default)(pi,lm.EventEmitter);(0,mI.addTransactionSupport)(pi.prototype);fl.default=pi});var Qn=m(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var EI=fe(),AI=(0,EI.Debug)("AbstractConnector"),hl=class{constructor(t){this.connecting=!1,this.disconnectTimeout=t}check(t){return!0}disconnect(){if(this.connecting=!1,this.stream){let t=this.stream,r=setTimeout(()=>{AI("stream %s:%s still open, destroying it",t.remoteAddress,t.remotePort),t.destroy()},this.disconnectTimeout);t.on("close",()=>clearTimeout(r)),t.end()}}};ml.default=hl});var um=m(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var RI=require("net"),kI=require("tls"),TI=fe(),II=Qn(),gl=class extends II.default{constructor(t){super(t.disconnectTimeout),this.options=t}connect(t){let{options:r}=this;this.connecting=!0;let i;return"path"in r&&r.path?i={path:r.path}:(i={},"port"in r&&r.port!=null&&(i.port=r.port),"host"in r&&r.host!=null&&(i.host=r.host),"family"in r&&r.family!=null&&(i.family=r.family)),r.tls&&Object.assign(i,r.tls),new Promise((n,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(TI.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,kI.connect)(i):this.stream=(0,RI.createConnection)(i)}catch(a){s(a);return}this.stream.once("error",a=>{this.firstError=a}),n(this.stream)})})}};yl.default=gl});var cm=m(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});function OI(e,t){return(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379)}var bl=class{constructor(t){this.cursor=0,this.sentinels=t.slice(0)}next(){let t=this.cursor>=this.sentinels.length;return{done:t,value:t?void 0:this.sentinels[this.cursor++]}}reset(t){t&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(t){for(let r=0;r<this.sentinels.length;r++)if(OI(t,this.sentinels[r]))return!1;return this.sentinels.push(t),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};xl.default=bl});var fm=m(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.FailoverDetector=void 0;var _I=fe(),vl=(0,_I.Debug)("FailoverDetector"),dm="+switch-master",wl=class{constructor(t,r){this.isDisconnected=!1,this.connector=t,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let t of this.sentinels)t.client.disconnect()}async subscribe(){vl("Starting FailoverDetector");let t=[];for(let r of this.sentinels){let i=r.client.subscribe(dm).catch(n=>{vl("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,n.message)});t.push(i),r.client.on("message",n=>{!this.isDisconnected&&n===dm&&this.disconnect()})}await Promise.all(t)}disconnect(){this.isDisconnected=!0,vl("Failover detected, disconnecting"),this.connector.disconnect()}};Kn.FailoverDetector=wl});var zn=m(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.SentinelIterator=void 0;var qI=require("net"),hi=fe(),CI=require("tls"),pm=cm();mi.SentinelIterator=pm.default;var PI=Qn(),NI=Dt(),DI=fm(),Rr=(0,hi.Debug)("SentinelConnector"),Sl=class extends PI.default{constructor(t){if(super(t.disconnectTimeout),this.options=t,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new pm.default(this.options.sentinels)}check(t){let r=!t.role||this.options.role===t.role;return r||(Rr("role invalid, expected %s, but got %s",this.options.role,t.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(t){this.connecting=!0,this.retryAttempts=0;let r,i=async()=>{let n=this.sentinelIterator.next();if(n.done){this.sentinelIterator.reset(!1);let l=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof l!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${l}ms.`;r&&(u+=` Last error: ${r.message}`),Rr(u);let c=new Error(u);if(typeof l=="number")return t("error",c),await new Promise(d=>setTimeout(d,l)),i();throw c}let s=null,a=null;try{s=await this.resolve(n.value)}catch(l){a=l}if(!this.connecting)throw new Error(hi.CONNECTION_CLOSED_ERROR_MSG);let o=n.value.host+":"+n.value.port;if(s)return Rr("resolved: %s:%s from sentinel %s",s.host,s.port,o),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,CI.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,qI.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",l=>{this.firstError=l}),this.stream;{let l=a?"failed to connect to sentinel "+o+" because "+a.message:"connected to sentinel "+o+" successfully, but got an invalid reply: "+s;return Rr(l),t("sentinelError",new Error(l)),a&&(r=a),i()}};return i()}async updateSentinels(t){if(!this.options.updateSentinels)return;let r=await t.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(hi.packObject).forEach(i=>{if((i.flags?i.flags.split(","):[]).indexOf("disconnected")===-1&&i.ip&&i.port){let s=this.sentinelNatResolve(hm(i));this.sentinelIterator.add(s)&&Rr("adding sentinel %s:%s",s.host,s.port)}}),Rr("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(t){let r=await t.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(t),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(t){let r=await t.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let i=r.map(hi.packObject).filter(n=>n.flags&&!n.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(UI(i,this.options.preferredSlaves))}sentinelNatResolve(t){if(!t||!this.options.natMap)return t;let r=`${t.host}:${t.port}`,i=t;return typeof this.options.natMap=="function"?i=this.options.natMap(r)||t:typeof this.options.natMap=="object"&&(i=this.options.natMap[r]||t),i}connectToSentinel(t,r){return new NI.default({port:t.port||26379,host:t.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:t.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(t){let r=this.connectToSentinel(t);r.on("error",LI);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var t;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:i,value:n}=this.sentinelIterator.next();if(i)break;let s=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var a;(a=this.emitter)===null||a===void 0||a.emit("sentinelReconnecting")}),r.push({address:n,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new DI.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(t=this.emitter)===null||t===void 0||t.emit("failoverSubscribed")}};mi.default=Sl;function UI(e,t){if(e.length===0)return null;let r;if(typeof t=="function")r=t(e);else if(t!==null&&typeof t=="object"){let i=Array.isArray(t)?t:[t];i.sort((n,s)=>(n.prio||(n.prio=1),s.prio||(s.prio=1),n.prio<s.prio?-1:n.prio>s.prio?1:0));for(let n=0;n<i.length;n++){for(let s=0;s<e.length;s++){let a=e[s];if(a.ip===i[n].ip&&a.port===i[n].port){r=a;break}}if(r)break}}return r||(r=(0,hi.sample)(e)),hm(r)}function hm(e){return{host:e.ip,port:Number(e.port)}}function LI(){}});var mm=m(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.SentinelConnector=kr.StandaloneConnector=void 0;var FI=um();kr.StandaloneConnector=FI.default;var MI=zn();kr.SentinelConnector=MI.default});var gm=m(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var jI=Wt(),El=class extends jI.AbortError{constructor(t){let r=`Reached the max retries per request limit (which is ${t}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Al.default=El});var ym=m(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.MaxRetriesPerRequestError=void 0;var $I=gm();Jn.MaxRetriesPerRequestError=$I.default});var Am=m((R6,Em)=>{"use strict";var _l=require("buffer").Buffer,VI=require("string_decoder").StringDecoder,Rl=new VI,bm=Wt(),BI=bm.ReplyError,GI=bm.ParserError,Ge=_l.allocUnsafe(32*1024),we=0,Wn=null,gi=0,kl=0;function HI(e){let t=e.buffer.length-1;var r=e.offset,i=0,n=1;for(e.buffer[r]===45&&(n=-1,r++);r<t;){let s=e.buffer[r++];if(s===13)return e.offset=r+1,n*i;i=i*10+(s-48)}}function QI(e){let t=e.buffer.length-1;var r=e.offset,i=0,n="";for(e.buffer[r]===45&&(n+="-",r++);r<t;){var s=e.buffer[r++];if(s===13)return e.offset=r+1,i!==0&&(n+=i),n;i>429496728?(n+=i*10+(s-48),i=0):s===48&&i===0?n+=0:i=i*10+(s-48)}}function xm(e){let t=e.offset,r=e.buffer,i=r.length-1;for(var n=t;n<i;)if(r[n++]===13)return e.offset=n+1,e.optionReturnBuffers===!0?e.buffer.slice(t,n-1):e.buffer.toString("utf8",t,n-1)}function vm(e){let t=e.buffer.length-1;for(var r=e.offset,i=0;r<t;){let n=e.buffer[r++];if(n===13)return e.offset=r+1,i;i=i*10+(n-48)}}function KI(e){return e.optionStringNumbers===!0?QI(e):HI(e)}function zI(e){let t=vm(e);if(t===void 0)return;if(t<0)return null;let r=e.offset+t;if(r+2>e.buffer.length){e.bigStrSize=r+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return e.offset=r+2,e.optionReturnBuffers===!0?e.buffer.slice(i,r):e.buffer.toString("utf8",i,r)}function JI(e){var t=xm(e);if(t!==void 0)return e.optionReturnBuffers===!0&&(t=t.toString()),new BI(t)}function WI(e,t){let r=new GI("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(r)}function YI(e){let t=vm(e);if(t===void 0)return;if(t<0)return null;let r=new Array(t);return wm(e,r,0)}function Tl(e,t,r){e.arrayCache.push(t),e.arrayPos.push(r)}function Il(e){let t=e.arrayCache.pop();var r=e.arrayPos.pop();if(e.arrayCache.length){let i=Il(e);if(i===void 0){Tl(e,t,r);return}t[r++]=i}return wm(e,t,r)}function wm(e,t,r){let i=e.buffer.length;for(;r<t.length;){let n=e.offset;if(e.offset>=i){Tl(e,t,r);return}let s=Sm(e,e.buffer[e.offset++]);if(s===void 0){e.arrayCache.length||e.bufferCache.length||(e.offset=n),Tl(e,t,r);return}t[r]=s,r++}return t}function Sm(e,t){switch(t){case 36:return zI(e);case 43:return xm(e);case 42:return YI(e);case 58:return KI(e);case 45:return JI(e);default:return WI(e,t)}}function XI(){if(Ge.length>50*1024)if(gi===1||kl>gi*2){let e=Math.floor(Ge.length/10),t=e<we?we:e;we=0,Ge=Ge.slice(t,Ge.length)}else kl++,gi--;else clearInterval(Wn),gi=0,kl=0,Wn=null}function ZI(e){if(Ge.length<e+we){let t=e>78643200?2:3;we>1024*1024*111&&(we=1024*1024*50),Ge=_l.allocUnsafe(e*t+we),we=0,gi++,Wn===null&&(Wn=setInterval(XI,50))}}function e2(e){let t=e.bufferCache,r=e.offset;var i=t.length,n=e.bigStrSize-e.totalChunkSize;if(e.offset=n,n<=2){if(i===2)return t[0].toString("utf8",r,t[0].length+n-2);i--,n=t[t.length-2].length+n}for(var s=Rl.write(t[0].slice(r)),a=1;a<i-1;a++)s+=Rl.write(t[a]);return s+=Rl.end(t[a].slice(0,n-2)),s}function t2(e){let t=e.bufferCache,r=e.offset,i=e.bigStrSize-r-2;var n=t.length,s=e.bigStrSize-e.totalChunkSize;if(e.offset=s,s<=2){if(n===2)return t[0].slice(r,t[0].length+s-2);n--,s=t[t.length-2].length+s}ZI(i);let a=we;t[0].copy(Ge,a,r,t[0].length),we+=t[0].length-r;for(var o=1;o<n-1;o++)t[o].copy(Ge,we),we+=t[o].length;return t[o].copy(Ge,we,0,s-2),we+=s-2,Ge.slice(a,we)}var Ol=class{constructor(t){if(!t)throw new TypeError("Options are mandatory.");if(typeof t.returnError!="function"||typeof t.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!t.returnBuffers),this.setStringNumbers(!!t.stringNumbers),this.returnError=t.returnError,this.returnFatalError=t.returnFatalError||t.returnError,this.returnReply=t.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(t){if(typeof t!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=t}setStringNumbers(t){if(typeof t!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=t}execute(t){if(this.buffer===null)this.buffer=t,this.offset=0;else if(this.bigStrSize===0){let i=this.buffer.length,n=i-this.offset,s=_l.allocUnsafe(n+t.length);if(this.buffer.copy(s,0,this.offset,i),t.copy(s,n,0,t.length),this.buffer=s,this.offset=0,this.arrayCache.length){let a=Il(this);if(a===void 0)return;this.returnReply(a)}}else if(this.totalChunkSize+t.length>=this.bigStrSize){this.bufferCache.push(t);var r=this.optionReturnBuffers?t2(this):e2(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=t,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=Il(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(t),this.totalChunkSize+=t.length;return}for(;this.offset<this.buffer.length;){let i=this.offset,n=this.buffer[this.offset++],s=Sm(this,n);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=i);return}n===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};Em.exports=Ol});var km=m((k6,Rm)=>{"use strict";Rm.exports=Am()});var Tm=m(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var Cl=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(t,r){this.set[ql(t)][r]=!0}del(t,r){delete this.set[ql(t)][r]}channels(t){return Object.keys(this.set[ql(t)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};Pl.default=Cl;function ql(e){return e==="unsubscribe"?"subscribe":e==="punsubscribe"?"psubscribe":e==="sunsubscribe"?"ssubscribe":e}});var qm=m(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var Im=pt(),r2=fe(),i2=km(),n2=Tm(),s2=(0,r2.Debug)("dataHandler"),Nl=class{constructor(t,r){this.redis=t;let i=new i2({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:n=>{this.returnError(n)},returnFatalError:n=>{this.returnFatalError(n)},returnReply:n=>{this.returnReply(n)}});t.stream.prependListener("data",n=>{i.execute(n)}),t.stream.resume()}returnFatalError(t){t.message+=". Please report this.",this.redis.recoverFromFatalError(t,t,{offlineQueue:!1})}returnError(t){let r=this.shiftCommand(t);if(r){if(t.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&t.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(t,r)}}returnReply(t){if(this.handleMonitorReply(t)||this.handleSubscriberReply(t))return;let r=this.shiftCommand(t);r&&(Im.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new n2.default,this.redis.condition.subscriber.add(r.command.name,t[1].toString()),Om(r.command,t[2])||this.redis.commandQueue.unshift(r)):Im.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?_m(r.command,t[2])||this.redis.commandQueue.unshift(r):r.command.resolve(t))}handleSubscriberReply(t){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(t)?t[0].toString():null;switch(s2('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("messageBuffer",t[1],t[2]);break;case"pmessage":{let i=t[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",i,t[2].toString(),t[3].toString()),this.redis.emit("pmessageBuffer",i,t[2],t[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",t[1].toString(),t[2]?t[2].toString():""),this.redis.emit("smessageBuffer",t[1],t[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let i=t[1].toString();this.redis.condition.subscriber.add(r,i);let n=this.shiftCommand(t);if(!n)return;Om(n.command,t[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let i=t[1]?t[1].toString():null;i&&this.redis.condition.subscriber.del(r,i);let n=t[2];Number(n)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(t);if(!s)return;_m(s.command,n)||this.redis.commandQueue.unshift(s);break}default:{let i=this.shiftCommand(t);if(!i)return;i.command.resolve(t)}}return!0}handleMonitorReply(t){if(this.redis.status!=="monitoring")return!1;let r=t.toString();if(r==="OK")return!1;let i=r.indexOf(" "),n=r.slice(0,i),s=r.indexOf('"'),a=r.slice(s+1,-1).split('" "').map(l=>l.replace(/\\"/g,'"')),o=r.slice(i+2,s-2).split(" ");return this.redis.emit("monitor",n,a,o[1],o[0]),!0}shiftCommand(t){let r=this.redis.commandQueue.shift();if(!r){let i="Command queue state error. If you can reproduce this, please report it.",n=new Error(i+(t instanceof Error?` Last error: ${t.message}`:` Last reply: ${t.toString()}`));return this.redis.emit("error",n),null}return r}};Dl.default=Nl;var Ut=new WeakMap;function Om(e,t){let r=Ut.has(e)?Ut.get(e):e.args.length;return r-=1,r<=0?(e.resolve(t),Ut.delete(e),!0):(Ut.set(e,r),!1)}function _m(e,t){let r=Ut.has(e)?Ut.get(e):e.args.length;return r===0?Number(t)===0?(Ut.delete(e),e.resolve(t),!0):!1:(r-=1,r<=0?(e.resolve(t),!0):(Ut.set(e,r),!1))}});var Cm=m(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.readyHandler=Le.errorHandler=Le.closeHandler=Le.connectHandler=void 0;var a2=Wt(),o2=pt(),l2=ym(),it=fe(),u2=qm(),pe=(0,it.Debug)("connection");function c2(e){return function(){var t;e.setStatus("connect"),e.resetCommandQueue();let r=!1,{connectionEpoch:i}=e;e.condition.auth&&e.auth(e.condition.auth,function(s){i===e.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,e.recoverFromFatalError(s,s)))}),e.condition.select&&e.select(e.condition.select).catch(s=>{e.silentEmit("error",s)}),new u2.default(e,{stringNumbers:e.options.stringNumbers});let n=[];e.options.connectionName&&(pe("set the connection name [%s]",e.options.connectionName),n.push(e.client("setname",e.options.connectionName).catch(it.noop))),e.options.disableClientInfo||(pe("set the client info"),n.push((0,it.getPackageMeta)().then(s=>e.client("SETINFO","LIB-VER",s.version).catch(it.noop)).catch(it.noop)),n.push(e.client("SETINFO","LIB-NAME",!((t=e.options)===null||t===void 0)&&t.clientInfoTag?`ioredis(${e.options.clientInfoTag})`:"ioredis").catch(it.noop))),Promise.all(n).catch(it.noop).finally(()=>{e.options.enableReadyCheck||Le.readyHandler(e)(),e.options.enableReadyCheck&&e._readyCheck(function(s,a){i===e.connectionEpoch&&(s?r||e.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):e.connector.check(a)?Le.readyHandler(e)():e.disconnect(!0))})})}}Le.connectHandler=c2;function Ul(e){let t=new a2.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}function d2(e){var t;let r=0;for(let i=0;i<e.length;){let n=(t=e.peekAt(i))===null||t===void 0?void 0:t.command,s=n.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){e.remove(i,1),n.reject(Ul(n));continue}i++}}function f2(e){var t;for(let r=0;r<e.length;){let i=(t=e.peekAt(r))===null||t===void 0?void 0:t.command;if(i.name==="multi")break;if(i.name==="exec"){e.remove(r,1),i.reject(Ul(i));break}i.inTransaction?(e.remove(r,1),i.reject(Ul(i))):r++}}function p2(e){return function(){let r=e.status;if(e.setStatus("close"),e.commandQueue.length&&d2(e.commandQueue),e.offlineQueue.length&&f2(e.offlineQueue),r==="ready"&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,pe("skip reconnecting since the connection is manually closed."),t();if(typeof e.options.retryStrategy!="function")return pe("skip reconnecting because `retryStrategy` is not a function"),t();let i=e.options.retryStrategy(++e.retryAttempts);if(typeof i!="number")return pe("skip reconnecting because `retryStrategy` doesn't return a number"),t();pe("reconnect in %sms",i),e.setStatus("reconnecting",i),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(it.noop)},i);let{maxRetriesPerRequest:n}=e.options;typeof n=="number"&&(n<0?pe("maxRetriesPerRequest is negative, ignoring..."):e.retryAttempts%(n+1)===0&&(pe("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new l2.MaxRetriesPerRequestError(n))))};function t(){e.setStatus("end"),e.flushQueue(new Error(it.CONNECTION_CLOSED_ERROR_MSG))}}Le.closeHandler=p2;function h2(e){return function(t){pe("error: %s",t),e.silentEmit("error",t)}}Le.errorHandler=h2;function m2(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),i=>e.emit("error",i));let{sendCommand:r}=e;e.sendCommand=function(i){return o2.default.checkFlag("VALID_IN_MONITOR_MODE",i.name)?r.call(e,i):(i.reject(new Error("Connection is in monitoring mode, can't process commands.")),i.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.readOnly&&(pe("set the connection to readonly mode"),e.readonly().catch(it.noop)),e.prevCondition){let r=e.prevCondition;if(e.prevCondition=null,r.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(pe("connect to db [%d]",t),e.select(t));let i=r.subscriber.channels("subscribe");i.length&&(pe("subscribe %d channels",i.length),e.subscribe(i));let n=r.subscriber.channels("psubscribe");n.length&&(pe("psubscribe %d channels",n.length),e.psubscribe(n));let s=r.subscriber.channels("ssubscribe");if(s.length){pe("ssubscribe %s",s.length);for(let a of s)e.ssubscribe(a)}}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(pe("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let r=e.prevCommandQueue.shift();r.select!==e.condition.select&&r.command.name!=="select"&&e.select(r.select),e.sendCommand(r.command,r.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){pe("send %d commands in offline queue",e.offlineQueue.length);let r=e.offlineQueue;for(e.resetOfflineQueue();r.length>0;){let i=r.shift();i.select!==e.condition.select&&i.command.name!=="select"&&e.select(i.select),e.sendCommand(i.command,i.stream)}}e.condition.select!==t&&(pe("connect to db [%d]",t),e.select(t))}}Le.readyHandler=m2});var Pm=m(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.DEFAULT_REDIS_OPTIONS=void 0;Yn.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(e*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(e*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var Dt=m(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var Nm=gr(),Um=require("events"),Ll=qt(),g2=pl(),yi=pt(),y2=mm(),b2=zn(),Lt=Cm(),x2=Pm(),v2=Fn(),w2=Wo(),Zt=fe(),S2=Xo(),E2=jn(),Ft=qn(),Dm=Gn(),Mt=(0,Zt.Debug)("redis"),jt=class e extends E2.default{constructor(t,r,i){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(t,r,i),Um.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let n=new b2.default(this.options);n.emitter=this,this.connector=n}else this.connector=new y2.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Ft.noop)}static createClient(...t){return new e(...t)}get autoPipelineQueueSize(){let t=0;for(let r of this._autoPipelines.values())t+=r.length;return t}connect(t){let r=new Promise((i,n)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){n(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let a=this;(0,Ll.default)(this.connector.connect(function(o,l){a.silentEmit(o,l)}),function(o,l){if(o){a.flushQueue(o),a.silentEmit("error",o),n(o),a.setStatus("end");return}let u=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(u="connect"),a.stream=l,s.noDelay&&l.setNoDelay(!0),typeof s.keepAlive=="number"&&(l.connecting?l.once(u,()=>{l.setKeepAlive(!0,s.keepAlive)}):l.setKeepAlive(!0,s.keepAlive)),l.connecting){if(l.once(u,Lt.connectHandler(a)),s.connectTimeout){let f=!1;l.setTimeout(s.connectTimeout,function(){if(f)return;l.setTimeout(0),l.destroy();let p=new Error("connect ETIMEDOUT");p.errorno="ETIMEDOUT",p.code="ETIMEDOUT",p.syscall="connect",Lt.errorHandler(a)(p)}),l.once(u,function(){f=!0,l.setTimeout(0)})}}else if(l.destroyed){let f=a.connector.firstError;f&&process.nextTick(()=>{Lt.errorHandler(a)(f)}),process.nextTick(Lt.closeHandler(a))}else process.nextTick(Lt.connectHandler(a));l.destroyed||(l.once("error",Lt.errorHandler(a)),l.once("close",Lt.closeHandler(a)));let c=function(){a.removeListener("close",d),i()};var d=function(){a.removeListener("ready",c),n(new Error(Zt.CONNECTION_CLOSED_ERROR_MSG))};a.once("ready",c),a.once("close",d)})});return(0,Ll.default)(r,t)}disconnect(t=!1){t||(this.manuallyClosing=!0),this.reconnectTimeout&&!t&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Lt.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(t){return new e({...this.options,...t})}get mode(){var t;return this.options.monitor?"monitor":!((t=this.condition)===null||t===void 0)&&t.subscriber?"subscriber":"normal"}monitor(t){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,Ll.default)(new Promise(function(i,n){r.once("error",n),r.once("monitoring",function(){i(r)})}),t)}sendCommand(t,r){var i,n;if(this.status==="wait"&&this.connect().catch(Ft.noop),this.status==="end")return t.reject(new Error(Zt.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if(!((i=this.condition)===null||i===void 0)&&i.subscriber&&!yi.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;typeof this.options.commandTimeout=="number"&&t.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!r&&this.status==="connect"&&(0,Nm.exists)(t.name)&&((0,Nm.hasFlag)(t.name,"loading")||yi.default.checkFlag("HANDSHAKE_COMMANDS",t.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)Mt.enabled&&Mt("write command[%s]: %d -> %s(%o)",this._getDescription(),(n=this.condition)===null||n===void 0?void 0:n.select,t.name,t.args),r?"isPipeline"in r&&r.isPipeline?r.write(t.toWritable(r.destination.redis.stream)):r.write(t.toWritable(r)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:r,select:this.condition.select}),yi.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if(t.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;Mt.enabled&&Mt("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:r,select:this.condition.select})}if(t.name==="select"&&(0,Zt.isInt)(t.args[0])){let a=parseInt(t.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),Mt("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(t){return this.createScanStream("scan",{options:t})}scanBufferStream(t){return this.createScanStream("scanBuffer",{options:t})}sscanStream(t,r){return this.createScanStream("sscan",{key:t,options:r})}sscanBufferStream(t,r){return this.createScanStream("sscanBuffer",{key:t,options:r})}hscanStream(t,r){return this.createScanStream("hscan",{key:t,options:r})}hscanBufferStream(t,r){return this.createScanStream("hscanBuffer",{key:t,options:r})}zscanStream(t,r){return this.createScanStream("zscan",{key:t,options:r})}zscanBufferStream(t,r){return this.createScanStream("zscanBuffer",{key:t,options:r})}silentEmit(t,r){let i;if(!(t==="error"&&(i=r,this.status==="end"||this.manuallyClosing&&i instanceof Error&&(i.message===Zt.CONNECTION_CLOSED_ERROR_MSG||i.syscall==="connect"||i.syscall==="read"))))return this.listeners(t).length>0?this.emit.apply(this,arguments):(i&&i instanceof Error&&console.error("[ioredis] Unhandled error event:",i.stack),!1)}recoverFromFatalError(t,r,i){this.flushQueue(r,i),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(t,r){var i;let n=!1;switch(this.options.reconnectOnError&&!yi.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(n=this.options.reconnectOnError(t)),n){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(t);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((i=this.condition)===null||i===void 0?void 0:i.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(t)}}_getDescription(){let t;return"path"in this.options&&this.options.path?t=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?t=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?t=this.options.host+":"+this.options.port:t="",this.options.connectionName&&(t+=` (${this.options.connectionName})`),t}resetCommandQueue(){this.commandQueue=new Dm}resetOfflineQueue(){this.offlineQueue=new Dm}parseOptions(...t){let r={},i=!1;for(let n=0;n<t.length;++n){let s=t[n];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,Ft.defaults)(r,s);else if(typeof s=="string")(0,Ft.defaults)(r,(0,Zt.parseURL)(s)),s.startsWith("rediss://")&&(i=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}i&&(0,Ft.defaults)(r,{tls:!0}),(0,Ft.defaults)(r,e.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,Zt.resolveTLSProfile)(r)}setStatus(t,r){Mt.enabled&&Mt("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",t),this.status=t,process.nextTick(this.emit.bind(this,t,r))}createScanStream(t,{key:r,options:i={}}){return new v2.default({objectMode:!0,key:r,redis:this,command:t,...i})}flushQueue(t,r){r=(0,Ft.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let i;if(r.offlineQueue)for(;i=this.offlineQueue.shift();)i.command.reject(t);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");i=this.commandQueue.shift();)i.command.reject(t)}_readyCheck(t){let r=this;this.info(function(i,n){if(i)return i.message&&i.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${i.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),t(null,{})):t(i);if(typeof n!="string")return t(null,n);let s={},a=n.split(`\r
`);for(let o=0;o<a.length;++o){let[l,...u]=a[o].split(":"),c=u.join(":");c&&(s[l]=c)}if(!s.loading||s.loading==="0")t(null,s);else{let o=(s.loading_eta_seconds||1)*1e3,l=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<o?r.options.maxLoadingRetryTime:o;Mt("Redis server still loading, trying again in "+l+"ms"),setTimeout(function(){r._readyCheck(t)},l)}}).catch(Ft.noop)}};jt.Cluster=g2.default;jt.Command=yi.default;jt.defaultOptions=x2.DEFAULT_REDIS_OPTIONS;(0,S2.default)(jt,Um.EventEmitter);(0,w2.addTransactionSupport)(jt.prototype);Fl.default=jt});var Mm=m((J,Fm)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.print=J.ReplyError=J.SentinelIterator=J.SentinelConnector=J.AbstractConnector=J.Pipeline=J.ScanStream=J.Command=J.Cluster=J.Redis=J.default=void 0;J=Fm.exports=Dt().default;var A2=Dt();Object.defineProperty(J,"default",{enumerable:!0,get:function(){return A2.default}});var R2=Dt();Object.defineProperty(J,"Redis",{enumerable:!0,get:function(){return R2.default}});var k2=pl();Object.defineProperty(J,"Cluster",{enumerable:!0,get:function(){return k2.default}});var T2=pt();Object.defineProperty(J,"Command",{enumerable:!0,get:function(){return T2.default}});var I2=Fn();Object.defineProperty(J,"ScanStream",{enumerable:!0,get:function(){return I2.default}});var O2=Ko();Object.defineProperty(J,"Pipeline",{enumerable:!0,get:function(){return O2.default}});var _2=Qn();Object.defineProperty(J,"AbstractConnector",{enumerable:!0,get:function(){return _2.default}});var Lm=zn();Object.defineProperty(J,"SentinelConnector",{enumerable:!0,get:function(){return Lm.default}});Object.defineProperty(J,"SentinelIterator",{enumerable:!0,get:function(){return Lm.SentinelIterator}});J.ReplyError=Wt().ReplyError;Object.defineProperty(J,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function q2(e,t){console.log(e?"Error: "+e:"Reply: "+t)}J.print=q2});var Tr=m((Ml,$m)=>{var Xn=require("buffer"),nt=Xn.Buffer;function jm(e,t){for(var r in e)t[r]=e[r]}nt.from&&nt.alloc&&nt.allocUnsafe&&nt.allocUnsafeSlow?$m.exports=Xn:(jm(Xn,Ml),Ml.Buffer=er);function er(e,t,r){return nt(e,t,r)}er.prototype=Object.create(nt.prototype);jm(nt,er);er.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return nt(e,t,r)};er.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=nt(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};er.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return nt(e)};er.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Xn.SlowBuffer(e)}});var jl=m((F6,Vm)=>{var Zn=Tr().Buffer,P2=require("stream"),N2=require("util");function es(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Zn.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Zn.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}N2.inherits(es,P2);es.prototype.write=function(t){this.buffer=Zn.concat([this.buffer,Zn.from(t)]),this.emit("data",t)};es.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};Vm.exports=es});var Gm=m((M6,Bm)=>{"use strict";function $l(e){var t=(e/8|0)+(e%8===0?0:1);return t}var D2={ES256:$l(256),ES384:$l(384),ES512:$l(521)};function U2(e){var t=D2[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}Bm.exports=U2});var Ym=m((j6,Wm)=>{"use strict";var ts=Tr().Buffer,Qm=Gm(),rs=128,Km=0,L2=32,F2=16,M2=2,zm=F2|L2|Km<<6,is=M2|Km<<6;function j2(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jm(e){if(ts.isBuffer(e))return e;if(typeof e=="string")return ts.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function $2(e,t){e=Jm(e);var r=Qm(t),i=r+1,n=e.length,s=0;if(e[s++]!==zm)throw new Error('Could not find expected "seq"');var a=e[s++];if(a===(rs|1)&&(a=e[s++]),n-s<a)throw new Error('"seq" specified length of "'+a+'", only "'+(n-s)+'" remaining');if(e[s++]!==is)throw new Error('Could not find expected "int" for "r"');var o=e[s++];if(n-s-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(n-s-2)+'" available');if(i<o)throw new Error('"r" specified length of "'+o+'", max of "'+i+'" is acceptable');var l=s;if(s+=o,e[s++]!==is)throw new Error('Could not find expected "int" for "s"');var u=e[s++];if(n-s!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(n-s)+'"');if(i<u)throw new Error('"s" specified length of "'+u+'", max of "'+i+'" is acceptable');var c=s;if(s+=u,s!==n)throw new Error('Expected to consume entire buffer, but "'+(n-s)+'" bytes remain');var d=r-o,f=r-u,p=ts.allocUnsafe(d+o+f+u);for(s=0;s<d;++s)p[s]=0;e.copy(p,s,l+Math.max(-d,0),l+o),s=r;for(var g=s;s<g+f;++s)p[s]=0;return e.copy(p,s,c+Math.max(-f,0),c+u),p=p.toString("base64"),p=j2(p),p}function Hm(e,t,r){for(var i=0;t+i<r&&e[t+i]===0;)++i;var n=e[t+i]>=rs;return n&&--i,i}function V2(e,t){e=Jm(e);var r=Qm(t),i=e.length;if(i!==r*2)throw new TypeError('"'+t+'" signatures must be "'+r*2+'" bytes, saw "'+i+'"');var n=Hm(e,0,r),s=Hm(e,r,e.length),a=r-n,o=r-s,l=2+a+1+1+o,u=l<rs,c=ts.allocUnsafe((u?2:3)+l),d=0;return c[d++]=zm,u?c[d++]=l:(c[d++]=rs|1,c[d++]=l&255),c[d++]=is,c[d++]=a,n<0?(c[d++]=0,d+=e.copy(c,d,0,r)):d+=e.copy(c,d,n,r),c[d++]=is,c[d++]=o,s<0?(c[d++]=0,e.copy(c,d,r)):e.copy(c,d,r+s),c}Wm.exports={derToJose:$2,joseToDer:V2}});var Zm=m(($6,Xm)=>{"use strict";var bi=require("buffer").Buffer,Vl=require("buffer").SlowBuffer;Xm.exports=ns;function ns(e,t){if(!bi.isBuffer(e)||!bi.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}ns.install=function(){bi.prototype.equal=Vl.prototype.equal=function(t){return ns(this,t)}};var B2=bi.prototype.equal,G2=Vl.prototype.equal;ns.restore=function(){bi.prototype.equal=B2,Vl.prototype.equal=G2}});var Ql=m((V6,l0)=>{var Or=Tr().Buffer,Fe=require("crypto"),t0=Ym(),e0=require("util"),H2=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,xi="secret must be a string or buffer",Ir="key must be a string or a buffer",Q2="key must be a string, a buffer or an object",Gl=typeof Fe.createPublicKey=="function";Gl&&(Ir+=" or a KeyObject",xi+="or a KeyObject");function r0(e){if(!Or.isBuffer(e)&&typeof e!="string"&&(!Gl||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw He(Ir)}function i0(e){if(!Or.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw He(Q2)}function K2(e){if(!Or.isBuffer(e)){if(typeof e=="string")return e;if(!Gl||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw He(xi)}}function Hl(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function n0(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function He(e){var t=[].slice.call(arguments,1),r=e0.format.bind(e0,e).apply(null,t);return new TypeError(r)}function z2(e){return Or.isBuffer(e)||typeof e=="string"}function vi(e){return z2(e)||(e=JSON.stringify(e)),e}function s0(e){return function(r,i){K2(i),r=vi(r);var n=Fe.createHmac("sha"+e,i),s=(n.update(r),n.digest("base64"));return Hl(s)}}var Bl,J2="timingSafeEqual"in Fe?function(t,r){return t.byteLength!==r.byteLength?!1:Fe.timingSafeEqual(t,r)}:function(t,r){return Bl||(Bl=Zm()),Bl(t,r)};function W2(e){return function(r,i,n){var s=s0(e)(r,n);return J2(Or.from(i),Or.from(s))}}function a0(e){return function(r,i){i0(i),r=vi(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign(i,"base64"));return Hl(s)}}function o0(e){return function(r,i,n){r0(n),r=vi(r),i=n0(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify(n,i,"base64")}}function Y2(e){return function(r,i){i0(i),r=vi(r);var n=Fe.createSign("RSA-SHA"+e),s=(n.update(r),n.sign({key:i,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Hl(s)}}function X2(e){return function(r,i,n){r0(n),r=vi(r),i=n0(i);var s=Fe.createVerify("RSA-SHA"+e);return s.update(r),s.verify({key:n,padding:Fe.constants.RSA_PKCS1_PSS_PADDING,saltLength:Fe.constants.RSA_PSS_SALTLEN_DIGEST},i,"base64")}}function Z2(e){var t=a0(e);return function(){var i=t.apply(null,arguments);return i=t0.derToJose(i,"ES"+e),i}}function eO(e){var t=o0(e);return function(i,n,s){n=t0.joseToDer(n,"ES"+e).toString("base64");var a=t(i,n,s);return a}}function tO(){return function(){return""}}function rO(){return function(t,r){return r===""}}l0.exports=function(t){var r={hs:s0,rs:a0,ps:Y2,es:Z2,none:tO},i={hs:W2,rs:o0,ps:X2,es:eO,none:rO},n=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw He(H2,t);var s=(n[1]||n[3]).toLowerCase(),a=n[2];return{sign:r[s](a),verify:i[s](a)}}});var Kl=m((B6,u0)=>{var iO=require("buffer").Buffer;u0.exports=function(t){return typeof t=="string"?t:typeof t=="number"||iO.isBuffer(t)?t.toString():JSON.stringify(t)}});var m0=m((G6,h0)=>{var nO=Tr().Buffer,c0=jl(),sO=Ql(),aO=require("stream"),d0=Kl(),zl=require("util");function f0(e,t){return nO.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oO(e,t,r){r=r||"utf8";var i=f0(d0(e),"binary"),n=f0(d0(t),r);return zl.format("%s.%s",i,n)}function p0(e){var t=e.header,r=e.payload,i=e.secret||e.privateKey,n=e.encoding,s=sO(t.alg),a=oO(t,r,n),o=s.sign(a,i);return zl.format("%s.%s",a,o)}function ss(e){var t=e.secret||e.privateKey||e.key,r=new c0(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new c0(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}zl.inherits(ss,aO);ss.prototype.sign=function(){try{var t=p0({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};ss.sign=p0;h0.exports=ss});var R0=m((H6,A0)=>{var y0=Tr().Buffer,g0=jl(),lO=Ql(),uO=require("stream"),b0=Kl(),cO=require("util"),dO=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function fO(e){return Object.prototype.toString.call(e)==="[object Object]"}function pO(e){if(fO(e))return e;try{return JSON.parse(e)}catch{return}}function x0(e){var t=e.split(".",1)[0];return pO(y0.from(t,"base64").toString("binary"))}function hO(e){return e.split(".",2).join(".")}function v0(e){return e.split(".")[2]}function mO(e,t){t=t||"utf8";var r=e.split(".")[1];return y0.from(r,"base64").toString(t)}function w0(e){return dO.test(e)&&!!x0(e)}function S0(e,t,r){if(!t){var i=new Error("Missing algorithm parameter for jws.verify");throw i.code="MISSING_ALGORITHM",i}e=b0(e);var n=v0(e),s=hO(e),a=lO(t);return a.verify(s,n,r)}function E0(e,t){if(t=t||{},e=b0(e),!w0(e))return null;var r=x0(e);if(!r)return null;var i=mO(e);return(r.typ==="JWT"||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:v0(e)}}function _r(e){e=e||{};var t=e.secret||e.publicKey||e.key,r=new g0(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new g0(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}cO.inherits(_r,uO);_r.prototype.verify=function(){try{var t=S0(this.signature.buffer,this.algorithm,this.key.buffer),r=E0(this.signature.buffer,this.encoding);return this.emit("done",t,r),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(i){this.readable=!1,this.emit("error",i),this.emit("close")}};_r.decode=E0;_r.isValid=w0;_r.verify=S0;A0.exports=_r});var os=m($t=>{var k0=m0(),as=R0(),gO=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];$t.ALGORITHMS=gO;$t.sign=k0.sign;$t.verify=as.verify;$t.decode=as.decode;$t.isValid=as.isValid;$t.createSign=function(t){return new k0(t)};$t.createVerify=function(t){return new as(t)}});var Jl=m((K6,T0)=>{var yO=os();T0.exports=function(e,t){t=t||{};var r=yO.decode(e,t);if(!r)return null;var i=r.payload;if(typeof i=="string")try{var n=JSON.parse(i);n!==null&&typeof n=="object"&&(i=n)}catch{}return t.complete===!0?{header:r.header,payload:i,signature:r.signature}:i}});var wi=m((z6,I0)=>{var ls=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};ls.prototype=Object.create(Error.prototype);ls.prototype.constructor=ls;I0.exports=ls});var Wl=m((J6,_0)=>{var O0=wi(),us=function(e,t){O0.call(this,e),this.name="NotBeforeError",this.date=t};us.prototype=Object.create(O0.prototype);us.prototype.constructor=us;_0.exports=us});var Yl=m((W6,C0)=>{var q0=wi(),cs=function(e,t){q0.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};cs.prototype=Object.create(q0.prototype);cs.prototype.constructor=cs;C0.exports=cs});var Xl=m((Y6,P0)=>{var bO=Oo();P0.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if(typeof e=="string"){var i=bO(e);return typeof i>"u"?void 0:Math.floor(r+i/1e3)}else return typeof e=="number"?r+e:void 0}});var Si=m((X6,N0)=>{"use strict";var xO="2.0.0",vO=Number.MAX_SAFE_INTEGER||9007199254740991,wO=16,SO=250,EO=["major","premajor","minor","preminor","patch","prepatch","prerelease"];N0.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:wO,MAX_SAFE_BUILD_LENGTH:SO,MAX_SAFE_INTEGER:vO,RELEASE_TYPES:EO,SEMVER_SPEC_VERSION:xO,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ei=m((Z6,D0)=>{"use strict";var AO=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};D0.exports=AO});var qr=m((st,U0)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Zl,MAX_SAFE_BUILD_LENGTH:RO,MAX_LENGTH:kO}=Si(),TO=Ei();st=U0.exports={};var IO=st.re=[],OO=st.safeRe=[],x=st.src=[],_O=st.safeSrc=[],v=st.t={},qO=0,eu="[a-zA-Z0-9-]",CO=[["\\s",1],["\\d",kO],[eu,RO]],PO=e=>{for(let[t,r]of CO)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},_=(e,t,r)=>{let i=PO(t),n=qO++;TO(e,n,t),v[e]=n,x[n]=t,_O[n]=i,IO[n]=new RegExp(t,r?"g":void 0),OO[n]=new RegExp(i,r?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*");_("NUMERICIDENTIFIERLOOSE","\\d+");_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${eu}*`);_("MAINVERSION",`(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})\\.(${x[v.NUMERICIDENTIFIER]})`);_("MAINVERSIONLOOSE",`(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})\\.(${x[v.NUMERICIDENTIFIERLOOSE]})`);_("PRERELEASEIDENTIFIER",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIER]})`);_("PRERELEASEIDENTIFIERLOOSE",`(?:${x[v.NONNUMERICIDENTIFIER]}|${x[v.NUMERICIDENTIFIERLOOSE]})`);_("PRERELEASE",`(?:-(${x[v.PRERELEASEIDENTIFIER]}(?:\\.${x[v.PRERELEASEIDENTIFIER]})*))`);_("PRERELEASELOOSE",`(?:-?(${x[v.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${x[v.PRERELEASEIDENTIFIERLOOSE]})*))`);_("BUILDIDENTIFIER",`${eu}+`);_("BUILD",`(?:\\+(${x[v.BUILDIDENTIFIER]}(?:\\.${x[v.BUILDIDENTIFIER]})*))`);_("FULLPLAIN",`v?${x[v.MAINVERSION]}${x[v.PRERELEASE]}?${x[v.BUILD]}?`);_("FULL",`^${x[v.FULLPLAIN]}$`);_("LOOSEPLAIN",`[v=\\s]*${x[v.MAINVERSIONLOOSE]}${x[v.PRERELEASELOOSE]}?${x[v.BUILD]}?`);_("LOOSE",`^${x[v.LOOSEPLAIN]}$`);_("GTLT","((?:<|>)?=?)");_("XRANGEIDENTIFIERLOOSE",`${x[v.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);_("XRANGEIDENTIFIER",`${x[v.NUMERICIDENTIFIER]}|x|X|\\*`);_("XRANGEPLAIN",`[v=\\s]*(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:\\.(${x[v.XRANGEIDENTIFIER]})(?:${x[v.PRERELEASE]})?${x[v.BUILD]}?)?)?`);_("XRANGEPLAINLOOSE",`[v=\\s]*(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[v.XRANGEIDENTIFIERLOOSE]})(?:${x[v.PRERELEASELOOSE]})?${x[v.BUILD]}?)?)?`);_("XRANGE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAIN]}$`);_("XRANGELOOSE",`^${x[v.GTLT]}\\s*${x[v.XRANGEPLAINLOOSE]}$`);_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Zl}})(?:\\.(\\d{1,${Zl}}))?(?:\\.(\\d{1,${Zl}}))?`);_("COERCE",`${x[v.COERCEPLAIN]}(?:$|[^\\d])`);_("COERCEFULL",x[v.COERCEPLAIN]+`(?:${x[v.PRERELEASE]})?(?:${x[v.BUILD]})?(?:$|[^\\d])`);_("COERCERTL",x[v.COERCE],!0);_("COERCERTLFULL",x[v.COERCEFULL],!0);_("LONETILDE","(?:~>?)");_("TILDETRIM",`(\\s*)${x[v.LONETILDE]}\\s+`,!0);st.tildeTrimReplace="$1~";_("TILDE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAIN]}$`);_("TILDELOOSE",`^${x[v.LONETILDE]}${x[v.XRANGEPLAINLOOSE]}$`);_("LONECARET","(?:\\^)");_("CARETTRIM",`(\\s*)${x[v.LONECARET]}\\s+`,!0);st.caretTrimReplace="$1^";_("CARET",`^${x[v.LONECARET]}${x[v.XRANGEPLAIN]}$`);_("CARETLOOSE",`^${x[v.LONECARET]}${x[v.XRANGEPLAINLOOSE]}$`);_("COMPARATORLOOSE",`^${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]})$|^$`);_("COMPARATOR",`^${x[v.GTLT]}\\s*(${x[v.FULLPLAIN]})$|^$`);_("COMPARATORTRIM",`(\\s*)${x[v.GTLT]}\\s*(${x[v.LOOSEPLAIN]}|${x[v.XRANGEPLAIN]})`,!0);st.comparatorTrimReplace="$1$2$3";_("HYPHENRANGE",`^\\s*(${x[v.XRANGEPLAIN]})\\s+-\\s+(${x[v.XRANGEPLAIN]})\\s*$`);_("HYPHENRANGELOOSE",`^\\s*(${x[v.XRANGEPLAINLOOSE]})\\s+-\\s+(${x[v.XRANGEPLAINLOOSE]})\\s*$`);_("STAR","(<|>)?=?\\s*\\*");_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ds=m((eD,L0)=>{"use strict";var NO=Object.freeze({loose:!0}),DO=Object.freeze({}),UO=e=>e?typeof e!="object"?NO:e:DO;L0.exports=UO});var tu=m((tD,j0)=>{"use strict";var F0=/^[0-9]+$/,M0=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=F0.test(e),i=F0.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},LO=(e,t)=>M0(t,e);j0.exports={compareIdentifiers:M0,rcompareIdentifiers:LO}});var ye=m((rD,V0)=>{"use strict";var fs=Ei(),{MAX_LENGTH:$0,MAX_SAFE_INTEGER:ps}=Si(),{safeRe:hs,t:ms}=qr(),FO=ds(),{compareIdentifiers:ru}=tu(),iu=class e{constructor(t,r){if(r=FO(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>$0)throw new TypeError(`version is longer than ${$0} characters`);fs("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?hs[ms.LOOSE]:hs[ms.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ps||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ps||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ps||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<ps)return s}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(fs("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=t.prerelease[r];if(fs("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return ru(i,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let i=this.build[r],n=t.build[r];if(fs("build compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return ru(i,n)}while(++r)}inc(t,r,i){if(t.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let n=`-${r}`.match(this.options.loose?hs[ms.PRERELEASELOOSE]:hs[ms.PRERELEASE]);if(!n||n[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let s=[r,n];i===!1&&(s=[r]),ru(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};V0.exports=iu});var tr=m((iD,G0)=>{"use strict";var B0=ye(),MO=(e,t,r=!1)=>{if(e instanceof B0)return e;try{return new B0(e,t)}catch(i){if(!r)return null;throw i}};G0.exports=MO});var Q0=m((nD,H0)=>{"use strict";var jO=tr(),$O=(e,t)=>{let r=jO(e,t);return r?r.version:null};H0.exports=$O});var z0=m((sD,K0)=>{"use strict";var VO=tr(),BO=(e,t)=>{let r=VO(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};K0.exports=BO});var Y0=m((aD,W0)=>{"use strict";var J0=ye(),GO=(e,t,r,i,n)=>{typeof r=="string"&&(n=i,i=r,r=void 0);try{return new J0(e instanceof J0?e.version:e,r).inc(t,i,n).version}catch{return null}};W0.exports=GO});var eg=m((oD,Z0)=>{"use strict";var X0=tr(),HO=(e,t)=>{let r=X0(e,null,!0),i=X0(t,null,!0),n=r.compare(i);if(n===0)return null;let s=n>0,a=s?r:i,o=s?i:r,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}let c=l?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"};Z0.exports=HO});var rg=m((lD,tg)=>{"use strict";var QO=ye(),KO=(e,t)=>new QO(e,t).major;tg.exports=KO});var ng=m((uD,ig)=>{"use strict";var zO=ye(),JO=(e,t)=>new zO(e,t).minor;ig.exports=JO});var ag=m((cD,sg)=>{"use strict";var WO=ye(),YO=(e,t)=>new WO(e,t).patch;sg.exports=YO});var lg=m((dD,og)=>{"use strict";var XO=tr(),ZO=(e,t)=>{let r=XO(e,t);return r&&r.prerelease.length?r.prerelease:null};og.exports=ZO});var Me=m((fD,cg)=>{"use strict";var ug=ye(),e_=(e,t,r)=>new ug(e,r).compare(new ug(t,r));cg.exports=e_});var fg=m((pD,dg)=>{"use strict";var t_=Me(),r_=(e,t,r)=>t_(t,e,r);dg.exports=r_});var hg=m((hD,pg)=>{"use strict";var i_=Me(),n_=(e,t)=>i_(e,t,!0);pg.exports=n_});var gs=m((mD,gg)=>{"use strict";var mg=ye(),s_=(e,t,r)=>{let i=new mg(e,r),n=new mg(t,r);return i.compare(n)||i.compareBuild(n)};gg.exports=s_});var bg=m((gD,yg)=>{"use strict";var a_=gs(),o_=(e,t)=>e.sort((r,i)=>a_(r,i,t));yg.exports=o_});var vg=m((yD,xg)=>{"use strict";var l_=gs(),u_=(e,t)=>e.sort((r,i)=>l_(i,r,t));xg.exports=u_});var Ai=m((bD,wg)=>{"use strict";var c_=Me(),d_=(e,t,r)=>c_(e,t,r)>0;wg.exports=d_});var ys=m((xD,Sg)=>{"use strict";var f_=Me(),p_=(e,t,r)=>f_(e,t,r)<0;Sg.exports=p_});var nu=m((vD,Eg)=>{"use strict";var h_=Me(),m_=(e,t,r)=>h_(e,t,r)===0;Eg.exports=m_});var su=m((wD,Ag)=>{"use strict";var g_=Me(),y_=(e,t,r)=>g_(e,t,r)!==0;Ag.exports=y_});var bs=m((SD,Rg)=>{"use strict";var b_=Me(),x_=(e,t,r)=>b_(e,t,r)>=0;Rg.exports=x_});var xs=m((ED,kg)=>{"use strict";var v_=Me(),w_=(e,t,r)=>v_(e,t,r)<=0;kg.exports=w_});var au=m((AD,Tg)=>{"use strict";var S_=nu(),E_=su(),A_=Ai(),R_=bs(),k_=ys(),T_=xs(),I_=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return S_(e,r,i);case"!=":return E_(e,r,i);case">":return A_(e,r,i);case">=":return R_(e,r,i);case"<":return k_(e,r,i);case"<=":return T_(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}};Tg.exports=I_});var Og=m((RD,Ig)=>{"use strict";var O_=ye(),__=tr(),{safeRe:vs,t:ws}=qr(),q_=(e,t)=>{if(e instanceof O_)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?vs[ws.COERCEFULL]:vs[ws.COERCE]);else{let l=t.includePrerelease?vs[ws.COERCERTLFULL]:vs[ws.COERCERTL],u;for(;(u=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],n=r[3]||"0",s=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",o=t.includePrerelease&&r[6]?`+${r[6]}`:"";return __(`${i}.${n}.${s}${a}${o}`,t)};Ig.exports=q_});var qg=m((kD,_g)=>{"use strict";var ou=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(t,r)}return this}};_g.exports=ou});var je=m((TD,Dg)=>{"use strict";var C_=/\s+/g,lu=class e{constructor(t,r){if(r=N_(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof uu)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(C_," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(n=>!Pg(n[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&$_(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let i=((this.options.includePrerelease&&M_)|(this.options.loose&&j_))+":"+t,n=Cg.get(i);if(n)return n;let s=this.options.loose,a=s?Se[be.HYPHENRANGELOOSE]:Se[be.HYPHENRANGE];t=t.replace(a,Y_(this.options.includePrerelease)),Z("hyphen replace",t),t=t.replace(Se[be.COMPARATORTRIM],U_),Z("comparator trim",t),t=t.replace(Se[be.TILDETRIM],L_),Z("tilde trim",t),t=t.replace(Se[be.CARETTRIM],F_),Z("caret trim",t);let o=t.split(" ").map(d=>V_(d,this.options)).join(" ").split(/\s+/).map(d=>W_(d,this.options));s&&(o=o.filter(d=>(Z("loose invalid filter",d,this.options),!!d.match(Se[be.COMPARATORLOOSE])))),Z("range list",o);let l=new Map,u=o.map(d=>new uu(d,this.options));for(let d of u){if(Pg(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return Cg.set(i,c),c}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(i=>Ng(i,r)&&t.set.some(n=>Ng(n,r)&&i.every(s=>n.every(a=>s.intersects(a,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new D_(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(X_(this.set[r],t,this.options))return!0;return!1}};Dg.exports=lu;var P_=qg(),Cg=new P_,N_=ds(),uu=Ri(),Z=Ei(),D_=ye(),{safeRe:Se,t:be,comparatorTrimReplace:U_,tildeTrimReplace:L_,caretTrimReplace:F_}=qr(),{FLAG_INCLUDE_PRERELEASE:M_,FLAG_LOOSE:j_}=Si(),Pg=e=>e.value==="<0.0.0-0",$_=e=>e.value==="",Ng=(e,t)=>{let r=!0,i=e.slice(),n=i.pop();for(;r&&i.length;)r=i.every(s=>n.intersects(s,t)),n=i.pop();return r},V_=(e,t)=>(e=e.replace(Se[be.BUILD],""),Z("comp",e,t),e=H_(e,t),Z("caret",e),e=B_(e,t),Z("tildes",e),e=K_(e,t),Z("xrange",e),e=J_(e,t),Z("stars",e),e),Ee=e=>!e||e.toLowerCase()==="x"||e==="*",B_=(e,t)=>e.trim().split(/\s+/).map(r=>G_(r,t)).join(" "),G_=(e,t)=>{let r=t.loose?Se[be.TILDELOOSE]:Se[be.TILDE];return e.replace(r,(i,n,s,a,o)=>{Z("tilde",e,i,n,s,a,o);let l;return Ee(n)?l="":Ee(s)?l=`>=${n}.0.0 <${+n+1}.0.0-0`:Ee(a)?l=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?(Z("replaceTilde pr",o),l=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`):l=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,Z("tilde return",l),l})},H_=(e,t)=>e.trim().split(/\s+/).map(r=>Q_(r,t)).join(" "),Q_=(e,t)=>{Z("caret",e,t);let r=t.loose?Se[be.CARETLOOSE]:Se[be.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(n,s,a,o,l)=>{Z("caret",e,n,s,a,o,l);let u;return Ee(s)?u="":Ee(a)?u=`>=${s}.0.0${i} <${+s+1}.0.0-0`:Ee(o)?s==="0"?u=`>=${s}.${a}.0${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${i} <${+s+1}.0.0-0`:l?(Z("replaceCaret pr",l),s==="0"?a==="0"?u=`>=${s}.${a}.${o}-${l} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o}-${l} <${+s+1}.0.0-0`):(Z("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${o}${i} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}${i} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o} <${+s+1}.0.0-0`),Z("caret return",u),u})},K_=(e,t)=>(Z("replaceXRanges",e,t),e.split(/\s+/).map(r=>z_(r,t)).join(" ")),z_=(e,t)=>{e=e.trim();let r=t.loose?Se[be.XRANGELOOSE]:Se[be.XRANGE];return e.replace(r,(i,n,s,a,o,l)=>{Z("xRange",e,i,n,s,a,o,l);let u=Ee(s),c=u||Ee(a),d=c||Ee(o),f=d;return n==="="&&f&&(n=""),l=t.includePrerelease?"-0":"",u?n===">"||n==="<"?i="<0.0.0-0":i="*":n&&f?(c&&(a=0),o=0,n===">"?(n=">=",c?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",c?s=+s+1:a=+a+1),n==="<"&&(l="-0"),i=`${n+s}.${a}.${o}${l}`):c?i=`>=${s}.0.0${l} <${+s+1}.0.0-0`:d&&(i=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),Z("xRange return",i),i})},J_=(e,t)=>(Z("replaceStars",e,t),e.trim().replace(Se[be.STAR],"")),W_=(e,t)=>(Z("replaceGTE0",e,t),e.trim().replace(Se[t.includePrerelease?be.GTE0PRE:be.GTE0],"")),Y_=e=>(t,r,i,n,s,a,o,l,u,c,d,f)=>(Ee(i)?r="":Ee(n)?r=`>=${i}.0.0${e?"-0":""}`:Ee(s)?r=`>=${i}.${n}.0${e?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Ee(u)?l="":Ee(c)?l=`<${+u+1}.0.0-0`:Ee(d)?l=`<${u}.${+c+1}.0-0`:f?l=`<=${u}.${c}.${d}-${f}`:e?l=`<${u}.${c}.${+d+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),X_=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(Z(e[i].semver),e[i].semver!==uu.ANY&&e[i].semver.prerelease.length>0){let n=e[i].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}});var Ri=m((ID,$g)=>{"use strict";var ki=Symbol("SemVer ANY"),fu=class e{static get ANY(){return ki}constructor(t,r){if(r=Ug(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),du("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===ki?this.value="":this.value=this.operator+this.semver.version,du("comp",this)}parse(t){let r=this.options.loose?Lg[Fg.COMPARATORLOOSE]:Lg[Fg.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new Mg(i[2],this.options.loose):this.semver=ki}toString(){return this.value}test(t){if(du("Comparator.test",t,this.options.loose),this.semver===ki||t===ki)return!0;if(typeof t=="string")try{t=new Mg(t,this.options)}catch{return!1}return cu(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new jg(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new jg(this.value,r).test(t.semver):(r=Ug(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||cu(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||cu(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};$g.exports=fu;var Ug=ds(),{safeRe:Lg,t:Fg}=qr(),cu=au(),du=Ei(),Mg=ye(),jg=je()});var Ti=m((OD,Vg)=>{"use strict";var Z_=je(),eq=(e,t,r)=>{try{t=new Z_(t,r)}catch{return!1}return t.test(e)};Vg.exports=eq});var Gg=m((_D,Bg)=>{"use strict";var tq=je(),rq=(e,t)=>new tq(e,t).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));Bg.exports=rq});var Qg=m((qD,Hg)=>{"use strict";var iq=ye(),nq=je(),sq=(e,t,r)=>{let i=null,n=null,s=null;try{s=new nq(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===-1)&&(i=a,n=new iq(i,r))}),i};Hg.exports=sq});var zg=m((CD,Kg)=>{"use strict";var aq=ye(),oq=je(),lq=(e,t,r)=>{let i=null,n=null,s=null;try{s=new oq(t,r)}catch{return null}return e.forEach(a=>{s.test(a)&&(!i||n.compare(a)===1)&&(i=a,n=new aq(i,r))}),i};Kg.exports=lq});var Yg=m((PD,Wg)=>{"use strict";var pu=ye(),uq=je(),Jg=Ai(),cq=(e,t)=>{e=new uq(e,t);let r=new pu("0.0.0");if(e.test(r)||(r=new pu("0.0.0-0"),e.test(r)))return r;r=null;for(let i=0;i<e.set.length;++i){let n=e.set[i],s=null;n.forEach(a=>{let o=new pu(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||Jg(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||Jg(r,s))&&(r=s)}return r&&e.test(r)?r:null};Wg.exports=cq});var Zg=m((ND,Xg)=>{"use strict";var dq=je(),fq=(e,t)=>{try{return new dq(e,t).range||"*"}catch{return null}};Xg.exports=fq});var Ss=m((DD,iy)=>{"use strict";var pq=ye(),ry=Ri(),{ANY:hq}=ry,mq=je(),gq=Ti(),ey=Ai(),ty=ys(),yq=xs(),bq=bs(),xq=(e,t,r,i)=>{e=new pq(e,i),t=new mq(t,i);let n,s,a,o,l;switch(r){case">":n=ey,s=yq,a=ty,o=">",l=">=";break;case"<":n=ty,s=bq,a=ey,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(gq(e,t,i))return!1;for(let u=0;u<t.set.length;++u){let c=t.set[u],d=null,f=null;if(c.forEach(p=>{p.semver===hq&&(p=new ry(">=0.0.0")),d=d||p,f=f||p,n(p.semver,d.semver,i)?d=p:a(p.semver,f.semver,i)&&(f=p)}),d.operator===o||d.operator===l||(!f.operator||f.operator===o)&&s(e,f.semver))return!1;if(f.operator===l&&a(e,f.semver))return!1}return!0};iy.exports=xq});var sy=m((UD,ny)=>{"use strict";var vq=Ss(),wq=(e,t,r)=>vq(e,t,">",r);ny.exports=wq});var oy=m((LD,ay)=>{"use strict";var Sq=Ss(),Eq=(e,t,r)=>Sq(e,t,"<",r);ay.exports=Eq});var cy=m((FD,uy)=>{"use strict";var ly=je(),Aq=(e,t,r)=>(e=new ly(e,r),t=new ly(t,r),e.intersects(t,r));uy.exports=Aq});var fy=m((MD,dy)=>{"use strict";var Rq=Ti(),kq=Me();dy.exports=(e,t,r)=>{let i=[],n=null,s=null,a=e.sort((c,d)=>kq(c,d,r));for(let c of a)Rq(c,t,r)?(s=c,n||(n=c)):(s&&i.push([n,s]),s=null,n=null);n&&i.push([n,null]);let o=[];for(let[c,d]of i)c===d?o.push(c):!d&&c===a[0]?o.push("*"):d?c===a[0]?o.push(`<=${d}`):o.push(`${c} - ${d}`):o.push(`>=${c}`);let l=o.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return l.length<u.length?l:t}});var by=m((jD,yy)=>{"use strict";var py=je(),mu=Ri(),{ANY:hu}=mu,Ii=Ti(),gu=Me(),Tq=(e,t,r={})=>{if(e===t)return!0;e=new py(e,r),t=new py(t,r);let i=!1;e:for(let n of e.set){for(let s of t.set){let a=Oq(n,s,r);if(i=i||a!==null,a)continue e}if(i)return!1}return!0},Iq=[new mu(">=0.0.0-0")],hy=[new mu(">=0.0.0")],Oq=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===hu){if(t.length===1&&t[0].semver===hu)return!0;r.includePrerelease?e=Iq:e=hy}if(t.length===1&&t[0].semver===hu){if(r.includePrerelease)return!0;t=hy}let i=new Set,n,s;for(let p of e)p.operator===">"||p.operator===">="?n=my(n,p,r):p.operator==="<"||p.operator==="<="?s=gy(s,p,r):i.add(p.semver);if(i.size>1)return null;let a;if(n&&s){if(a=gu(n.semver,s.semver,r),a>0)return null;if(a===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let p of i){if(n&&!Ii(p,String(n),r)||s&&!Ii(p,String(s),r))return null;for(let g of t)if(!Ii(p,String(g),r))return!1;return!0}let o,l,u,c,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of t){if(c=c||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",n){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(o=my(n,p,r),o===p&&o!==n)return!1}else if(n.operator===">="&&!Ii(n.semver,String(p),r))return!1}if(s){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(l=gy(s,p,r),l===p&&l!==s)return!1}else if(s.operator==="<="&&!Ii(s.semver,String(p),r))return!1}if(!p.operator&&(s||n)&&a!==0)return!1}return!(n&&u&&!s&&a!==0||s&&c&&!n&&a!==0||f||d)},my=(e,t,r)=>{if(!e)return t;let i=gu(e.semver,t.semver,r);return i>0?e:i<0||t.operator===">"&&e.operator===">="?t:e},gy=(e,t,r)=>{if(!e)return t;let i=gu(e.semver,t.semver,r);return i<0?e:i>0||t.operator==="<"&&e.operator==="<="?t:e};yy.exports=Tq});var Es=m(($D,wy)=>{"use strict";var yu=qr(),xy=Si(),_q=ye(),vy=tu(),qq=tr(),Cq=Q0(),Pq=z0(),Nq=Y0(),Dq=eg(),Uq=rg(),Lq=ng(),Fq=ag(),Mq=lg(),jq=Me(),$q=fg(),Vq=hg(),Bq=gs(),Gq=bg(),Hq=vg(),Qq=Ai(),Kq=ys(),zq=nu(),Jq=su(),Wq=bs(),Yq=xs(),Xq=au(),Zq=Og(),eC=Ri(),tC=je(),rC=Ti(),iC=Gg(),nC=Qg(),sC=zg(),aC=Yg(),oC=Zg(),lC=Ss(),uC=sy(),cC=oy(),dC=cy(),fC=fy(),pC=by();wy.exports={parse:qq,valid:Cq,clean:Pq,inc:Nq,diff:Dq,major:Uq,minor:Lq,patch:Fq,prerelease:Mq,compare:jq,rcompare:$q,compareLoose:Vq,compareBuild:Bq,sort:Gq,rsort:Hq,gt:Qq,lt:Kq,eq:zq,neq:Jq,gte:Wq,lte:Yq,cmp:Xq,coerce:Zq,Comparator:eC,Range:tC,satisfies:rC,toComparators:iC,maxSatisfying:nC,minSatisfying:sC,minVersion:aC,validRange:oC,outside:lC,gtr:uC,ltr:cC,intersects:dC,simplifyRange:fC,subset:pC,SemVer:_q,re:yu.re,src:yu.src,tokens:yu.t,SEMVER_SPEC_VERSION:xy.SEMVER_SPEC_VERSION,RELEASE_TYPES:xy.RELEASE_TYPES,compareIdentifiers:vy.compareIdentifiers,rcompareIdentifiers:vy.rcompareIdentifiers}});var Ey=m((VD,Sy)=>{var hC=Es();Sy.exports=hC.satisfies(process.version,">=15.7.0")});var Ry=m((BD,Ay)=>{var mC=Es();Ay.exports=mC.satisfies(process.version,">=16.9.0")});var bu=m((GD,ky)=>{var gC=Ey(),yC=Ry(),bC={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},xC={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};ky.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let i=bC[r];if(!i)throw new Error(`Unknown key type "${r}".`);if(!i.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${i.join(", ")}.`);if(gC)switch(r){case"ec":let n=t.asymmetricKeyDetails.namedCurve,s=xC[e];if(n!==s)throw new Error(`"alg" parameter "${e}" requires curve "${s}".`);break;case"rsa-pss":if(yC){let a=parseInt(e.slice(-3),10),{hashAlgorithm:o,mgf1HashAlgorithm:l,saltLength:u}=t.asymmetricKeyDetails;if(o!==`sha${a}`||l!==o)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var xu=m((HD,Ty)=>{var vC=Es();Ty.exports=vC.satisfies(process.version,"^6.12.0 || >=8.0.0")});var _y=m((QD,Oy)=>{var W=wi(),wC=Wl(),Iy=Yl(),SC=Jl(),EC=Xl(),AC=bu(),RC=xu(),kC=os(),{KeyObject:TC,createSecretKey:IC,createPublicKey:OC}=require("crypto"),vu=["RS256","RS384","RS512"],_C=["ES256","ES384","ES512"],wu=["RS256","RS384","RS512"],qC=["HS256","HS384","HS512"];RC&&(vu.splice(vu.length,0,"PS256","PS384","PS512"),wu.splice(wu.length,0,"PS256","PS384","PS512"));Oy.exports=function(e,t,r,i){typeof r=="function"&&!i&&(i=r,r={}),r||(r={}),r=Object.assign({},r);let n;if(i?n=i:n=function(c,d){if(c)throw c;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return n(new W("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return n(new W("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return n(new W("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return n(new W("jwt must be provided"));if(typeof e!="string")return n(new W("jwt must be a string"));let a=e.split(".");if(a.length!==3)return n(new W("jwt malformed"));let o;try{o=SC(e,{complete:!0})}catch(c){return n(c)}if(!o)return n(new W("invalid token"));let l=o.header,u;if(typeof t=="function"){if(!i)return n(new W("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(c,d){return d(null,t)};return u(l,function(c,d){if(c)return n(new W("error in secret or public key callback: "+c.message));let f=a[2].trim()!=="";if(!f&&d)return n(new W("jwt signature is required"));if(f&&!d)return n(new W("secret or public key must be provided"));if(!f&&!r.algorithms)return n(new W('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof TC))try{d=OC(d)}catch{try{d=IC(typeof d=="string"?Buffer.from(d):d)}catch{return n(new W("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=qC:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=wu:d.asymmetricKeyType==="ec"?r.algorithms=_C:r.algorithms=vu),r.algorithms.indexOf(o.header.alg)===-1)return n(new W("invalid algorithm"));if(l.alg.startsWith("HS")&&d.type!=="secret")return n(new W(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&d.type!=="public")return n(new W(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{AC(l.alg,d)}catch(h){return n(h)}let p;try{p=kC.verify(e,o.header.alg,d)}catch(h){return n(h)}if(!p)return n(new W("invalid signature"));let g=o.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return n(new W("invalid nbf value"));if(g.nbf>s+(r.clockTolerance||0))return n(new wC("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return n(new W("invalid exp value"));if(s>=g.exp+(r.clockTolerance||0))return n(new Iy("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let h=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(q){return h.some(function(P){return P instanceof RegExp?P.test(q):P===q})}))return n(new W("jwt audience invalid. expected: "+h.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return n(new W("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return n(new W("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return n(new W("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return n(new W("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return n(new W("iat required when maxAge is specified"));let h=EC(r.maxAge,g.iat);if(typeof h>"u")return n(new W('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=h+(r.clockTolerance||0))return n(new Iy("maxAge exceeded",new Date(h*1e3)))}if(r.complete===!0){let h=o.signature;return n(null,{header:l,payload:g,signature:h})}return n(null,g)})}});var Uy=m((KD,Dy)=>{var qy=1/0,Py=9007199254740991,CC=17976931348623157e292,Cy=NaN,PC="[object Arguments]",NC="[object Function]",DC="[object GeneratorFunction]",UC="[object String]",LC="[object Symbol]",FC=/^\s+|\s+$/g,MC=/^[-+]0x[0-9a-f]+$/i,jC=/^0b[01]+$/i,$C=/^0o[0-7]+$/i,VC=/^(?:0|[1-9]\d*)$/,BC=parseInt;function GC(e,t){for(var r=-1,i=e?e.length:0,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function HC(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function QC(e,t,r){if(t!==t)return HC(e,KC,r);for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}function KC(e){return e!==e}function zC(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function JC(e,t){return GC(t,function(r){return e[r]})}function WC(e,t){return function(r){return e(t(r))}}var As=Object.prototype,Eu=As.hasOwnProperty,Rs=As.toString,YC=As.propertyIsEnumerable,XC=WC(Object.keys,Object),ZC=Math.max;function e3(e,t){var r=Ny(e)||s3(e)?zC(e.length,String):[],i=r.length,n=!!i;for(var s in e)(t||Eu.call(e,s))&&!(n&&(s=="length"||r3(s,i)))&&r.push(s);return r}function t3(e){if(!i3(e))return XC(e);var t=[];for(var r in Object(e))Eu.call(e,r)&&r!="constructor"&&t.push(r);return t}function r3(e,t){return t=t??Py,!!t&&(typeof e=="number"||VC.test(e))&&e>-1&&e%1==0&&e<t}function i3(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||As;return e===r}function n3(e,t,r,i){e=Au(e)?e:m3(e),r=r&&!i?f3(r):0;var n=e.length;return r<0&&(r=ZC(n+r,0)),u3(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&QC(e,t,r)>-1}function s3(e){return a3(e)&&Eu.call(e,"callee")&&(!YC.call(e,"callee")||Rs.call(e)==PC)}var Ny=Array.isArray;function Au(e){return e!=null&&l3(e.length)&&!o3(e)}function a3(e){return Ru(e)&&Au(e)}function o3(e){var t=Su(e)?Rs.call(e):"";return t==NC||t==DC}function l3(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Py}function Su(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ru(e){return!!e&&typeof e=="object"}function u3(e){return typeof e=="string"||!Ny(e)&&Ru(e)&&Rs.call(e)==UC}function c3(e){return typeof e=="symbol"||Ru(e)&&Rs.call(e)==LC}function d3(e){if(!e)return e===0?e:0;if(e=p3(e),e===qy||e===-qy){var t=e<0?-1:1;return t*CC}return e===e?e:0}function f3(e){var t=d3(e),r=t%1;return t===t?r?t-r:t:0}function p3(e){if(typeof e=="number")return e;if(c3(e))return Cy;if(Su(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Su(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(FC,"");var r=jC.test(e);return r||$C.test(e)?BC(e.slice(2),r?2:8):MC.test(e)?Cy:+e}function h3(e){return Au(e)?e3(e):t3(e)}function m3(e){return e?JC(e,h3(e)):[]}Dy.exports=n3});var Fy=m((zD,Ly)=>{var g3="[object Boolean]",y3=Object.prototype,b3=y3.toString;function x3(e){return e===!0||e===!1||v3(e)&&b3.call(e)==g3}function v3(e){return!!e&&typeof e=="object"}Ly.exports=x3});var By=m((JD,Vy)=>{var My=1/0,w3=17976931348623157e292,jy=NaN,S3="[object Symbol]",E3=/^\s+|\s+$/g,A3=/^[-+]0x[0-9a-f]+$/i,R3=/^0b[01]+$/i,k3=/^0o[0-7]+$/i,T3=parseInt,I3=Object.prototype,O3=I3.toString;function _3(e){return typeof e=="number"&&e==N3(e)}function $y(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function q3(e){return!!e&&typeof e=="object"}function C3(e){return typeof e=="symbol"||q3(e)&&O3.call(e)==S3}function P3(e){if(!e)return e===0?e:0;if(e=D3(e),e===My||e===-My){var t=e<0?-1:1;return t*w3}return e===e?e:0}function N3(e){var t=P3(e),r=t%1;return t===t?r?t-r:t:0}function D3(e){if(typeof e=="number")return e;if(C3(e))return jy;if($y(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$y(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(E3,"");var r=R3.test(e);return r||k3.test(e)?T3(e.slice(2),r?2:8):A3.test(e)?jy:+e}Vy.exports=_3});var Hy=m((WD,Gy)=>{var U3="[object Number]",L3=Object.prototype,F3=L3.toString;function M3(e){return!!e&&typeof e=="object"}function j3(e){return typeof e=="number"||M3(e)&&F3.call(e)==U3}Gy.exports=j3});var Jy=m((YD,zy)=>{var $3="[object Object]";function V3(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function B3(e,t){return function(r){return e(t(r))}}var G3=Function.prototype,Qy=Object.prototype,Ky=G3.toString,H3=Qy.hasOwnProperty,Q3=Ky.call(Object),K3=Qy.toString,z3=B3(Object.getPrototypeOf,Object);function J3(e){return!!e&&typeof e=="object"}function W3(e){if(!J3(e)||K3.call(e)!=$3||V3(e))return!1;var t=z3(e);if(t===null)return!0;var r=H3.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ky.call(r)==Q3}zy.exports=W3});var Yy=m((XD,Wy)=>{var Y3="[object String]",X3=Object.prototype,Z3=X3.toString,e4=Array.isArray;function t4(e){return!!e&&typeof e=="object"}function r4(e){return typeof e=="string"||!e4(e)&&t4(e)&&Z3.call(e)==Y3}Wy.exports=r4});var rb=m((ZD,tb)=>{var i4="Expected a function",Xy=1/0,n4=17976931348623157e292,Zy=NaN,s4="[object Symbol]",a4=/^\s+|\s+$/g,o4=/^[-+]0x[0-9a-f]+$/i,l4=/^0b[01]+$/i,u4=/^0o[0-7]+$/i,c4=parseInt,d4=Object.prototype,f4=d4.toString;function p4(e,t){var r;if(typeof t!="function")throw new TypeError(i4);return e=b4(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}function h4(e){return p4(2,e)}function eb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function m4(e){return!!e&&typeof e=="object"}function g4(e){return typeof e=="symbol"||m4(e)&&f4.call(e)==s4}function y4(e){if(!e)return e===0?e:0;if(e=x4(e),e===Xy||e===-Xy){var t=e<0?-1:1;return t*n4}return e===e?e:0}function b4(e){var t=y4(e),r=t%1;return t===t?r?t-r:t:0}function x4(e){if(typeof e=="number")return e;if(g4(e))return Zy;if(eb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=eb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(a4,"");var r=l4.test(e);return r||u4.test(e)?c4(e.slice(2),r?2:8):o4.test(e)?Zy:+e}tb.exports=h4});var db=m((e5,cb)=>{var ib=Xl(),v4=xu(),w4=bu(),nb=os(),S4=Uy(),ks=Fy(),sb=By(),ku=Hy(),ob=Jy(),Vt=Yy(),E4=rb(),{KeyObject:A4,createSecretKey:R4,createPrivateKey:k4}=require("crypto"),lb=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];v4&&lb.splice(3,0,"PS256","PS384","PS512");var T4={expiresIn:{isValid:function(e){return sb(e)||Vt(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return sb(e)||Vt(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return Vt(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:S4.bind(null,lb),message:'"algorithm" must be a valid string enum value'},header:{isValid:ob,message:'"header" must be an object'},encoding:{isValid:Vt,message:'"encoding" must be a string'},issuer:{isValid:Vt,message:'"issuer" must be a string'},subject:{isValid:Vt,message:'"subject" must be a string'},jwtid:{isValid:Vt,message:'"jwtid" must be a string'},noTimestamp:{isValid:ks,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Vt,message:'"keyid" must be a string'},mutatePayload:{isValid:ks,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:ks,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:ks,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},I4={iat:{isValid:ku,message:'"iat" should be a number of seconds'},exp:{isValid:ku,message:'"exp" should be a number of seconds'},nbf:{isValid:ku,message:'"nbf" should be a number of seconds'}};function ub(e,t,r,i){if(!ob(r))throw new Error('Expected "'+i+'" to be a plain object.');Object.keys(r).forEach(function(n){let s=e[n];if(!s){if(!t)throw new Error('"'+n+'" is not allowed in "'+i+'"');return}if(!s.isValid(r[n]))throw new Error(s.message)})}function O4(e){return ub(T4,!1,e,"options")}function _4(e){return ub(I4,!0,e,"payload")}var ab={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},q4=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];cb.exports=function(e,t,r,i){typeof r=="function"?(i=r,r={}):r=r||{};let n=typeof e=="object"&&!Buffer.isBuffer(e),s=Object.assign({alg:r.algorithm||"HS256",typ:n?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(i)return i(u);throw u}if(!t&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(t!=null&&!(t instanceof A4))try{t=k4(t)}catch{try{t=R4(typeof t=="string"?Buffer.from(t):t)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&t.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(t.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&t.asymmetricKeyDetails!==void 0&&t.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof e>"u")return a(new Error("payload is required"));if(n){try{_4(e)}catch(u){return a(u)}r.mutatePayload||(e=Object.assign({},e))}else{let u=q4.filter(function(c){return typeof r[c]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{O4(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{w4(s.alg,t)}catch(u){return a(u)}let o=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:n&&(e.iat=o),typeof r.notBefore<"u"){try{e.nbf=ib(r.notBefore,o)}catch(u){return a(u)}if(typeof e.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof e=="object"){try{e.exp=ib(r.expiresIn,o)}catch(u){return a(u)}if(typeof e.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(ab).forEach(function(u){let c=ab[u];if(typeof r[u]<"u"){if(typeof e[c]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+c+'" property.'));e[c]=r[u]}});let l=r.encoding||"utf8";if(typeof i=="function")i=i&&E4(i),nb.createSign({header:s,privateKey:t,payload:e,encoding:l}).once("error",i).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));i(null,u)});else{let u=nb.sign({header:s,payload:e,secret:t,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return u}}});var pb=m((t5,fb)=>{fb.exports={decode:Jl(),verify:_y(),sign:db(),JsonWebTokenError:wi(),NotBeforeError:Wl(),TokenExpiredError:Yl()}});var M4={};Iu(M4,{deleteAccount:()=>F4,exportAccountData:()=>L4,getSettings:()=>D4,updateSettings:()=>U4});module.exports=Ab(M4);var Mf=rr(Ff(),1),$a;function It(){return $a||($a=new Mf.PrismaClient),$a}var xR=process.env.FRONTEND_URL||"http://localhost:5173",vR=process.env.NODE_ENV||"development",jf=vR==="production",wR=()=>{let e=[xR];return jf&&e.push("https://dkmxy676d3vgc.cloudfront.net"),jf||e.push("http://localhost:3000","http://localhost:5173"),e},$f=e=>{let t=wR(),r=e?.headers?.origin||e?.headers?.Origin||"";return{"Access-Control-Allow-Origin":t.includes(r)?r:t[0],"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,X-CSRF-Token","Access-Control-Max-Age":"86400"}};function pr(e,t=200,r={}){let i=$f(r.event);return delete r.event,{statusCode:t,headers:{"content-type":"application/json",...i,"x-content-type-options":"nosniff","referrer-policy":"strict-origin-when-cross-origin","permissions-policy":"camera=(), microphone=(), geolocation=()","strict-transport-security":"max-age=63072000; includeSubDomains; preload",...r},body:JSON.stringify(e)}}function le(e,t=400,r={}){return pr({error:e},t,r)}za();var N4=rr(jp(),1);var ho=rr(require("crypto"),1),MR=process.env.CSRF_ENABLED==="true";var $p=e=>ho.default.createHash("sha256").update(e).digest("hex");var jR=e=>{if(!e)return null;let t={};return e.split(";").forEach(r=>{let[i,...n]=r.split("=");i&&n.length>0&&(t[i.trim()]=n.join("=").trim())}),t["XSRF-TOKEN"]||null},$R=e=>e["x-csrf-token"]||e["X-CSRF-Token"]||null,VR=(e,t)=>{if(!e||!t)return!1;let r=$p(e),i=$p(t);return ho.default.timingSafeEqual(Buffer.from(r),Buffer.from(i))},Vp=e=>{if(!MR)return null;let t=(e.requestContext?.http?.method||e.httpMethod||"GET").toUpperCase();if(!["POST","PUT","PATCH","DELETE"].includes(t))return null;let i=e.headers?.cookie||e.headers?.Cookie||"",n=jR(i),s=$R(e.headers||{});return VR(n,s)?null:{statusCode:403,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify({error:"CSRF token validation failed",message:"Invalid or missing CSRF token"})}};var C2=rr(Mm(),1);var C6={auth:{maxRequests:10,windowMs:9e5,message:"Too many authentication attempts. Please try again later."},emailVerification:{maxRequests:5,windowMs:36e5,message:"Too many verification email requests. Please try again later."},reports:{maxRequests:parseInt(process.env.REPORTS_MAX_PER_HOUR||"5",10),windowMs:36e5,message:"Too many reports submitted. Please try again later."},write:{maxRequests:100,windowMs:36e5,message:"Too many write requests. Please try again later."},read:{maxRequests:1e3,windowMs:36e5,message:"Too many read requests. Please try again later."}};var hb=rr(pb(),1);var C4=process.env.JWT_SECRET||"dev-secret-key-change-in-production";var r5=process.env.COOKIE_DOMAIN||void 0,i5=process.env.NODE_ENV||"development";var mb=e=>{try{return hb.default.verify(e,C4)}catch{return null}},gb=(e,t="access")=>{let r=t==="access"?"access_token":"refresh_token",i=P4(e.headers?.cookie||e.headers?.Cookie||"");if(i[r])return i[r];if(t==="access"){let n=e.headers?.authorization||e.headers?.Authorization;if(n&&n.startsWith("Bearer "))return n.substring(7)}return null},P4=e=>{let t={};return e&&e.split(";").forEach(r=>{let[i,...n]=r.split("=");i&&n.length>0&&(t[i.trim()]=n.join("=").trim())}),t};var Tu=e=>{let t=gb(e,"access");if(!t)return null;let r=mb(t);return!r||r.type!=="access"?null:r.userId||null};function Oi(e){try{return Tu(e)||null}catch{return null}}async function yb(e){if(!e)return le("Unauthorized - No valid token provided",401);let r=await It().user.findUnique({where:{id:e},select:{emailVerified:!0}});return r?r.emailVerified?null:le("Email verification required. Please verify your email address to access this resource.",403):le("User not found",404)}var D4=async e=>{try{let t=Oi(e);if(!t)return le("Unauthorized",401);let r=It(),i=await r.userSettings.findUnique({where:{userId:t}});return i||(i=await r.userSettings.create({data:{userId:t,notifications:{email:!0,push:!0,reelRequests:!0,messages:!0,comments:!0,likes:!0},accountSecurity:{twoFactorEnabled:!1,loginNotifications:!0},privacy:{showActivity:!0,allowMessagesFrom:"everyone",showOnlineStatus:!0}}})),pr(i)}catch(t){return console.error("Get settings error:",t),le("Server error: "+t.message,500)}},U4=async e=>{try{let t=Vp(e);if(t)return t;let r=Oi(e);if(!r)return le("Unauthorized",401);let i=await yb(r);if(i)return i;let n=JSON.parse(e.body||"{}"),{notifications:s,accountSecurity:a,privacy:o,billing:l}=n,u=It(),c=await u.userSettings.findUnique({where:{userId:r}});if(!c)c=await u.userSettings.create({data:{userId:r,notifications:s||{},accountSecurity:a||{},privacy:o||{},billing:l||null}});else{let d={};s!==void 0&&(d.notifications=s),a!==void 0&&(d.accountSecurity=a),o!==void 0&&(d.privacy=o),l!==void 0&&(d.billing=l),c=await u.userSettings.update({where:{userId:r},data:d})}return pr(c)}catch(t){return console.error("Update settings error:",t),le("Server error: "+t.message,500)}},L4=async e=>{try{let t=Oi(e);if(!t)return le("Unauthorized",401);let i=await It().user.findUnique({where:{id:t},include:{profile:{include:{media:!0,credits:!0}},settings:!0,posts:!0,reels:!0,comments:!0,likes:!0,bookmarks:!0,sentRequests:!0,receivedRequests:!0,sentMessages:!0,conversations:{include:{conversation:{include:{messages:!0}}}},notifications:!0,sentReelRequests:!0,receivedReelRequests:!0}});if(!i)return le("User not found",404);let n={user:{id:i.id,username:i.username,email:i.email,displayName:i.displayName,bio:i.bio,avatar:i.avatar,role:i.role,createdAt:i.createdAt,updatedAt:i.updatedAt},profile:i.profile,settings:i.settings,posts:i.posts,reels:i.reels,comments:i.comments,likes:i.likes,bookmarks:i.bookmarks,connectionRequests:{sent:i.sentRequests,received:i.receivedRequests},messages:i.sentMessages,conversations:i.conversations,notifications:i.notifications,reelRequests:{sent:i.sentReelRequests,received:i.receivedReelRequests},exportedAt:new Date().toISOString()};return pr(n)}catch(t){return console.error("Export account data error:",t),le("Server error: "+t.message,500)}},F4=async e=>{try{let t=Oi(e);if(!t)return le("Unauthorized",401);let r=JSON.parse(e.body||"{}"),{confirmPassword:i}=r;if(!i)return le("Password confirmation is required",400);let n=It(),s=await n.user.findUnique({where:{id:t},select:{password:!0}});return s?await(await Promise.resolve().then(()=>(za(),ap))).compare(i,s.password)?(await n.user.delete({where:{id:t}}),pr({message:"Account deleted successfully",deletedAt:new Date().toISOString()})):le("Invalid password",401):le("User not found",404)}catch(t){return console.error("Delete account error:",t),le("Server error: "+t.message,500)}};0&&(module.exports={deleteAccount,exportAccountData,getSettings,updateSettings});
/*! Bundled license information:

@prisma/client/runtime/library.js:
  (*! Bundled license information:
  
  decimal.js/decimal.mjs:
    (*!
     *  decimal.js v10.5.0
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     *)
  *)

@otplib/plugin-crypto/index.js:
  (**
   * @otplib/plugin-crypto
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/plugin-thirty-two/index.js:
  (**
   * @otplib/plugin-thirty-two
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/core/index.js:
  (**
   * @otplib/core
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

@otplib/preset-default/index.js:
  (**
   * @otplib/preset-default
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

otplib/index.js:
  (**
   * otplib
   *
   * @author Gerald Yeo <contact@fusedthought.com>
   * @version: 12.0.1
   * @license: MIT
   **)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
