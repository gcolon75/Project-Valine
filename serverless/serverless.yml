service: pv-api
frameworkVersion: "3"

provider:
  name: aws
  runtime: nodejs20.x
  region: ${env:AWS_REGION, "us-west-2"}
  stage: ${env:STAGE, "prod"}
  httpApi:
    cors: true
  environment:
    STAGE: ${env:STAGE, "prod"}

functions:
  api:
    handler: handler.router
    events:
      - httpApi:
          path: /health
          method: get
      - httpApi:
          path: /hello
          method: get
      - httpApi:
          path: /requests
          method: get
      - httpApi:
          path: /requests
          method: post
      - httpApi:
          path: /requests/{id}/approve
          method: post
      - httpApi:
          path: /requests/{id}/reject
          method: post
