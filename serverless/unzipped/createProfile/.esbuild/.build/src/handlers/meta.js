var n=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var d=(e,t)=>{for(var o in t)n(e,o,{get:t[o],enumerable:!0})},u=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of h(t))!p.call(e,r)&&r!==o&&n(e,r,{get:()=>t[r],enumerable:!(s=c(t,r))||s.enumerable});return e};var l=e=>u(n({},"__esModule",{value:!0}),e);var P={};d(P,{handler:()=>O});module.exports=l(P);var m=process.env.FRONTEND_URL||"http://localhost:5173",T=process.env.NODE_ENV||"development",i=T==="production",g=()=>{let e=[m];return i&&e.push("https://dkmxy676d3vgc.cloudfront.net"),i||e.push("http://localhost:3000","http://localhost:5173"),e},f=e=>{let t=g(),o=e?.headers?.origin||e?.headers?.Origin||"";return{"Access-Control-Allow-Origin":t.includes(o)?o:t[0],"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,X-CSRF-Token","Access-Control-Max-Age":"86400"}};function a(e,t=200,o={}){let s=f(o.event);return delete o.event,{statusCode:t,headers:{"content-type":"application/json",...s,"x-content-type-options":"nosniff","referrer-policy":"strict-origin-when-cross-origin","permissions-policy":"camera=(), microphone=(), geolocation=()","strict-transport-security":"max-age=63072000; includeSubDomains; preload",...o},body:JSON.stringify(e)}}var O=async()=>{let e=[{method:"GET",path:"/health",description:"Health check endpoint"},{method:"GET",path:"/meta",description:"API metadata and available endpoints"},{method:"POST",path:"/auth/register",description:"Register a new user",auth:!1},{method:"POST",path:"/auth/login",description:"Login and get JWT token",auth:!1},{method:"GET",path:"/auth/me",description:"Get current user profile",auth:!0},{method:"POST",path:"/users",description:"Create a new user (legacy)",auth:!1},{method:"GET",path:"/users/{username}",description:"Get user by username",auth:!1},{method:"PUT",path:"/users/{id}",description:"Update user profile",auth:!0},{method:"GET",path:"/reels",description:"List reels with pagination",auth:!1},{method:"POST",path:"/reels",description:"Create a new reel",auth:!0},{method:"POST",path:"/reels/{id}/like",description:"Toggle like on a reel",auth:!0},{method:"POST",path:"/reels/{id}/bookmark",description:"Toggle bookmark on a reel",auth:!0},{method:"GET",path:"/reels/{id}/comments",description:"Get comments for a reel",auth:!1},{method:"POST",path:"/reels/{id}/comments",description:"Add comment to a reel",auth:!0},{method:"GET",path:"/posts",description:"List posts with pagination",auth:!1},{method:"POST",path:"/posts",description:"Create a new post",auth:!0},{method:"GET",path:"/posts/{id}",description:"Get single post",auth:!1},{method:"GET",path:"/conversations",description:"List user conversations",auth:!0},{method:"POST",path:"/conversations",description:"Create a new conversation",auth:!0},{method:"GET",path:"/conversations/{id}/messages",description:"Get messages in a conversation",auth:!0},{method:"POST",path:"/conversations/{id}/messages",description:"Send a message",auth:!0},{method:"GET",path:"/notifications",description:"List user notifications",auth:!0},{method:"PATCH",path:"/notifications/{id}/read",description:"Mark notification as read",auth:!0},{method:"PATCH",path:"/notifications/mark-all",description:"Mark all notifications as read",auth:!0},{method:"POST",path:"/connections/request",description:"Send connection request",auth:!0},{method:"GET",path:"/connections/requests",description:"List connection requests",auth:!0},{method:"POST",path:"/connections/requests/{id}/approve",description:"Approve connection request",auth:!0},{method:"POST",path:"/connections/requests/{id}/reject",description:"Reject connection request",auth:!0}];return a({service:"Project Valine API",version:"1.0.0",stage:process.env.STAGE||"dev",timestamp:Date.now(),endpoints:e,authentication:{type:"JWT Bearer Token",header:"Authorization: Bearer <token>",notes:"Obtain token via POST /auth/login or /auth/register"},pagination:{queryParams:{limit:"Number of items to return (default: 20, max: 100)",cursor:"Cursor for next page (use nextCursor from previous response)"},response:{items:"Array of items",nextCursor:"Cursor for next page (null if no more items)",hasMore:"Boolean indicating if more items exist"}}})};0&&(module.exports={handler});
