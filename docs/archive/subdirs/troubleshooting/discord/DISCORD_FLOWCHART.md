# Discord Endpoint Verification - Visual Flowchart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DISCORD ENDPOINT VERIFICATION                         â”‚
â”‚                           Problem & Solution                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CURRENT STATE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Discord    â”‚
â”‚  Developer   â”‚â”€â”€â”
â”‚   Portal     â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                  â–¼
          [PING Request]
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API Gateway Endpoint              â”‚
â”‚  3n6t1f7pw1.execute-api...discord      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Lambda: valine-orchestrator-         â”‚
â”‚           discord-dev                   â”‚
â”‚                                         â”‚
â”‚   Signature Verification:               â”‚
â”‚   âŒ FAILS - Public Key Mismatch       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
          âŒ Verification Failed
          "Cannot verify endpoint"


ROOT CAUSE ANALYSIS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  Discord Bot                      Lambda Environment                 â”‚
â”‚  Public Key                       Variable                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ abc123def   â”‚                  â”‚ xyz789ghi   â”‚                  â”‚
â”‚  â”‚ 456...      â”‚    â‰  MISMATCH â‰   â”‚ 012...      â”‚                  â”‚
â”‚  â”‚             â”‚                  â”‚             â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  (Staging Bot)                    (What Lambda has)                 â”‚
â”‚  App ID: 1428...                                                    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DIAGNOSTIC FLOW:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚   START                                                                  â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚ Run: ./verify_discord_config.sh    â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â”œâ”€â”€â”€â–º âœ… Lambda exists?                                             â”‚
â”‚     â”œâ”€â”€â”€â–º âœ… Public key format valid?                                   â”‚
â”‚     â”œâ”€â”€â”€â–º âœ… API endpoint accessible?                                   â”‚
â”‚     â””â”€â”€â”€â–º âš ï¸  Keys match?                                               â”‚
â”‚              â”‚                                                           â”‚
â”‚              â–¼                                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚         â”‚  YES    â”‚â”€â”€â”€â”€â”€â–º âœ… Ready to verify in Discord                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚              â”‚                                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚         â”‚   NO    â”‚â”€â”€â”€â”€â”€â–º Need to fix                                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                                             â”‚
â”‚                           â–¼                                             â”‚
â”‚                    Choose Fix Method                                    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


FIX METHODS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  OPTION A: Quick Fix (5 min)           OPTION B: Proper Fix (10 min)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ./verify_discord_config.sh  â”‚       â”‚ 1. Get public key from    â”‚  â”‚
â”‚  â”‚ --fix                        â”‚       â”‚    Discord Portal         â”‚  â”‚
â”‚  â”‚                              â”‚       â”‚                           â”‚  â”‚
â”‚  â”‚ Enter correct public key     â”‚       â”‚ 2. Update GitHub Secret:  â”‚  â”‚
â”‚  â”‚ from Discord Portal          â”‚       â”‚    STAGING_DISCORD_       â”‚  â”‚
â”‚  â”‚                              â”‚       â”‚    PUBLIC_KEY             â”‚  â”‚
â”‚  â”‚ âœ… Lambda updated directly   â”‚       â”‚                           â”‚  â”‚
â”‚  â”‚                              â”‚       â”‚ 3. Re-run deploy workflow â”‚  â”‚
â”‚  â”‚ âš ï¸  Manual fix - will be     â”‚       â”‚                           â”‚  â”‚
â”‚  â”‚    overwritten on next       â”‚       â”‚ âœ… Permanent fix          â”‚  â”‚
â”‚  â”‚    deployment                â”‚       â”‚                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                      â”‚                      â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â–¼                                              â”‚
â”‚                    BOTH LEAD TO:                                        â”‚
â”‚              Lambda has correct key                                     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


VERIFICATION FLOW:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚   Discord Developer Portal                                              â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ Interactions Endpoint URL:                             â”‚            â”‚
â”‚   â”‚ https://3n6t1f7pw1.execute-api...discord              â”‚            â”‚
â”‚   â”‚ [Save Changes]                                         â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚   Discord sends PING {"type":1}                                         â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚  Lambda Handler:                   â”‚                               â”‚
â”‚   â”‚  1. Get signature from headers     â”‚                               â”‚
â”‚   â”‚  2. Get public key from env        â”‚                               â”‚
â”‚   â”‚  3. Verify signature              â”‚                               â”‚
â”‚   â”‚     âœ… SUCCESS (keys match now)    â”‚                               â”‚
â”‚   â”‚  4. Return PONG {"type":1}        â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚   âœ… Discord receives PONG                                              â”‚
â”‚   âœ… "Successfully verified" message                                    â”‚
â”‚   âœ… Endpoint is now active                                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SUCCESS STATE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Discord    â”‚
â”‚  Developer   â”‚â”€â”€â”
â”‚   Portal     â”‚  â”‚  âœ… Endpoint verified
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                  â–¼
          [PING Request]
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API Gateway Endpoint              â”‚
â”‚  3n6t1f7pw1.execute-api...discord      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Lambda: valine-orchestrator-         â”‚
â”‚           discord-dev                   â”‚
â”‚                                         â”‚
â”‚   Environment Variables:                â”‚
â”‚   DISCORD_PUBLIC_KEY = abc123def456...  â”‚
â”‚   (Matches staging bot!)                â”‚
â”‚                                         â”‚
â”‚   Signature Verification:               â”‚
â”‚   âœ… SUCCESS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
          âœ… Returns PONG
          âœ… Discord Verified!
          âœ… Bot Ready to Receive Commands


TIMELINE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  Minute 0:  Run ./verify_discord_config.sh                              â”‚
â”‚  Minute 1:  Identify key mismatch                                       â”‚
â”‚  Minute 2:  Get correct key from Discord Portal                         â”‚
â”‚  Minute 3:  Run ./verify_discord_config.sh --fix                        â”‚
â”‚  Minute 4:  Go to Discord Portal â†’ Interactions Endpoint URL            â”‚
â”‚  Minute 5:  Save â†’ Discord verifies â†’ âœ… SUCCESS!                       â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


KEY POINTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  âœ… Everything else is working:                                         â”‚
â”‚     â€¢ Lambda deployed âœ…                                                â”‚
â”‚     â€¢ API Gateway configured âœ…                                         â”‚
â”‚     â€¢ Import paths fixed âœ…                                             â”‚
â”‚     â€¢ CORS headers correct âœ…                                           â”‚
â”‚                                                                          â”‚
â”‚  âš ï¸  Only one issue:                                                    â”‚
â”‚     â€¢ Public key value needs to match staging bot                       â”‚
â”‚                                                                          â”‚
â”‚  ğŸ”§ Fix is simple:                                                      â”‚
â”‚     â€¢ Update Lambda env var with correct key                            â”‚
â”‚     â€¢ Or update GitHub Secret and redeploy                              â”‚
â”‚                                                                          â”‚
â”‚  â±ï¸  Time to fix: 5 minutes                                             â”‚
â”‚                                                                          â”‚
â”‚  ğŸ¯ Success criteria:                                                   â”‚
â”‚     â€¢ Discord shows "Successfully verified" âœ…                          â”‚
â”‚     â€¢ Bot can receive slash commands âœ…                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


BOT INFORMATION:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  Staging Bot (CURRENT TARGET):                                          â”‚
â”‚  â€¢ App ID: 1428568840958251109                                          â”‚
â”‚  â€¢ Public Key: Get from Discord Portal                                  â”‚
â”‚  â€¢ Endpoint: https://3n6t1f7pw1.execute-api...discord                   â”‚
â”‚                                                                          â”‚
â”‚  Production Bot (DO NOT USE):                                           â”‚
â”‚  â€¢ App ID: 1302154777933172756                                          â”‚
â”‚  â€¢ Public Key: Different from staging!                                  â”‚
â”‚  â€¢ DO NOT mix up the keys! âš ï¸                                           â”‚
â”‚                                                                          â”‚
â”‚  Lambda Function:                                                       â”‚
â”‚  â€¢ Name: valine-orchestrator-discord-dev                                â”‚
â”‚  â€¢ Region: us-west-2                                                    â”‚
â”‚  â€¢ Stack: valine-orchestrator-staging                                   â”‚
â”‚  â€¢ Environment Variable: DISCORD_PUBLIC_KEY                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


QUICK COMMANDS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  # Diagnose                                                              â”‚
â”‚  cd orchestrator/scripts                                                 â”‚
â”‚  ./verify_discord_config.sh                                              â”‚
â”‚                                                                          â”‚
â”‚  # Fix (Option A - Quick)                                                â”‚
â”‚  ./verify_discord_config.sh --fix                                        â”‚
â”‚                                                                          â”‚
â”‚  # Fix (Option B - Proper)                                               â”‚
â”‚  # 1. Update GitHub Secret: STAGING_DISCORD_PUBLIC_KEY                   â”‚
â”‚  # 2. Re-run deploy workflow                                             â”‚
â”‚                                                                          â”‚
â”‚  # Check Lambda key                                                      â”‚
â”‚  aws lambda get-function-configuration \                                 â”‚
â”‚    --function-name valine-orchestrator-discord-dev \                     â”‚
â”‚    --region us-west-2 \                                                  â”‚
â”‚    --query 'Environment.Variables.DISCORD_PUBLIC_KEY'                    â”‚
â”‚                                                                          â”‚
â”‚  # Test public key format                                                â”‚
â”‚  python3 test_discord_verification.py <PUBLIC_KEY>                       â”‚
â”‚                                                                          â”‚
â”‚  # Check CloudWatch logs                                                 â”‚
â”‚  aws logs tail /aws/lambda/valine-orchestrator-discord-dev \             â”‚
â”‚    --region us-west-2 --follow                                           â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## How to Use This Flowchart

1. **Follow the arrows** from top to bottom
2. **Start at "DIAGNOSTIC FLOW"** to understand the process
3. **Choose a fix method** based on your needs (quick vs proper)
4. **Follow "VERIFICATION FLOW"** to complete the process
5. **Check "SUCCESS STATE"** to confirm everything works

## Visual Key

- `âœ…` = Working / Success
- `âŒ` = Broken / Failure
- `âš ï¸` = Warning / Attention needed
- `â–¼` = Flow direction
- `â”Œâ”€â”` = Process box
- `â”œâ”€â”¤` = Decision point
